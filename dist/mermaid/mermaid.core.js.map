{"version":3,"file":"mermaid.core.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,4uCAA4uC;AACvvC,aAAa,yvBAAyvB;AACtwB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,iDAAiD,wBAAwB;AACzE;AACA;AACA,sBAAsB,mCAAmC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,kCAAkC;AAClC;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA,kBAAkB,uCAAuC;AACzD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,kEAAkE,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,mEAAmE,EAAE,QAAQ,sDAAsD,gBAAgB,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,uBAAuB,oBAAoB,sMAAsM,EAAE,UAAU,EAAE,gBAAgB,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,eAAe,UAAU,kHAAkH,gFAAgF,GAAG,8CAA8C,8BAA8B,2BAA2B,EAAE,8CAA8C,EAAE,8CAA8C,EAAE,8CAA8C,EAAE,UAAU,eAAe,wDAAwD,gBAAgB,UAAU,mHAAmH,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,gNAAgN,gBAAgB,wDAAwD,EAAE,4DAA4D,gBAAgB,oBAAoB,eAAe,kCAAkC,oGAAoG,oBAAoB,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,EAAE,2BAA2B,4CAA4C,UAAU,EAAE,UAAU,gBAAgB,8CAA8C,EAAE,wDAAwD,eAAe,kCAAkC,iBAAiB,2BAA2B,EAAE,aAAa,EAAE,8CAA8C,eAAe,UAAU,gBAAgB,oBAAoB,gBAAgB,oBAAoB,gBAAgB,sBAAsB,2DAA2D,+CAA+C,6BAA6B,WAAW,GAAG,WAAW,EAAE,wBAAwB,yDAAyD,WAAW,8BAA8B,WAAW,8BAA8B,WAAW,iBAAiB,cAAc,gBAAgB,UAAU,4CAA4C,WAAW;AACh1F,iBAAiB,8FAA8F;AAC/G;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,yIAAyI,8BAA8B,mBAAmB,yBAAyB,gIAAgI,oBAAoB,WAAW,yBAAyB,0fAA0f,EAAE,MAAM,YAAY,EAAE;AAC56B,aAAa,iBAAiB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,kBAAkB,kCAAkC,kBAAkB,qCAAqC,SAAS,kCAAkC,WAAW,2CAA2C,YAAY,kCAAkC,aAAa,kCAAkC,WAAW,kCAAkC,YAAY;AACpgB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACt3BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,wrBAAwrB;AACnsB,aAAa,oWAAoW;AACjX;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mCAAmC;AACrD;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,cAAc,IAAI,GAAG,0BAA0B,EAAE,cAAc,EAAE,UAAU,EAAE,qEAAqE,EAAE,QAAQ,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,oCAAoC,uDAAuD,kDAAkD,8CAA8C,UAAU,EAAE,gBAAgB,EAAE,UAAU,eAAe,aAAa,EAAE,mCAAmC,EAAE,0BAA0B,uEAAuE,aAAa,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,gBAAgB,mCAAmC,EAAE,gBAAgB,EAAE,UAAU,EAAE,kCAAkC,8BAA8B,UAAU,EAAE,0BAA0B,gBAAgB,UAAU,eAAe,6BAA6B,2BAA2B,UAAU,uEAAuE,aAAa;AACxkC,iBAAiB,mEAAmE;AACpF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,yBAAyB,oBAAoB,gGAAgG,2GAA2G,mCAAmC,cAAc,uCAAuC,aAAa;AACpb,aAAa,kBAAkB,8BAA8B,mBAAmB,gCAAgC,kBAAkB,gCAAgC,UAAU,iDAAiD,YAAY;AACzO,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACpwBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,m1DAAm1D;AAC91D,aAAa,omCAAomC;AACjnC;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,8CAA8C,WAAW;AACtG;AACA;AACA,+CAA+C,gDAAgD,WAAW;AAC1G;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,iCAAiC;AACjC;AACA;AACA,mCAAmC,qDAAqD;AACxF;AACA;AACA,oBAAoB;AACpB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA,uBAAuB;AACvB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD;AACA;AACA,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,uCAAuC;AACzD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,8CAA8C;AAChE;AACA;AACA,kBAAkB,4CAA4C;AAC9D;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD,SAAS,iDAAiD,EAAE,MAAM,EAAE,QAAQ,EAAE,kDAAkD,YAAY,MAAM,GAAG,eAAe,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,oBAAoB,EAAE,SAAS,EAAE,QAAQ,EAAE,sTAAsT,EAAE,sBAAsB,6DAA6D,uCAAuC,sFAAsF,0DAA0D,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,oCAAoC,6BAA6B,aAAa,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,2KAA2K,2EAA2E,WAAW,gBAAgB,0PAA0P,kQAAkQ,2BAA2B,EAAE,kBAAkB,yDAAyD,WAAW,eAAe,cAAc,iBAAiB,mJAAmJ,6DAA6D,6BAA6B,GAAG,kSAAkS,mJAAmJ,kSAAkS,aAAa,OAAO,gBAAgB,QAAQ,GAAG,yJAAyJ,EAAE,6BAA6B,EAAE,yJAAyJ,EAAE,8IAA8I,eAAe,sBAAsB,iBAAiB,WAAW,iBAAiB,mJAAmJ,iBAAiB,WAAW,mSAAmS,uIAAuI,EAAE,kSAAkS,EAAE,6SAA6S,EAAE,kSAAkS,EAAE,kSAAkS,EAAE,kSAAkS,EAAE,WAAW,EAAE,kSAAkS,EAAE,6SAA6S,EAAE,kSAAkS,EAAE,kSAAkS,EAAE,kSAAkS,+BAA+B,aAAa,EAAE,SAAS,2CAA2C,cAAc,iBAAiB,WAAW,GAAG,WAAW,EAAE,kSAAkS,EAAE,8RAA8R,qWAAqW,yTAAyT,EAAE,yTAAyT,EAAE,cAAc,EAAE,mJAAmJ,EAAE,WAAW,EAAE,WAAW,EAAE,sBAAsB,kBAAkB,WAAW,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,WAAW,eAAe,WAAW,GAAG,sBAAsB,EAAE,WAAW,kBAAkB,sBAAsB,eAAe,iIAAiI,GAAG,8RAA8R,EAAE,kSAAkS,EAAE,8RAA8R,EAAE,8RAA8R,EAAE,8RAA8R,EAAE,8RAA8R,EAAE,WAAW,EAAE,8RAA8R,EAAE,8RAA8R,EAAE,kSAAkS,EAAE,8RAA8R,EAAE,ySAAyS,EAAE,ySAAyS,EAAE,2BAA2B,eAAe,QAAQ,iCAAiC,8RAA8R,gCAAgC,kSAAkS,aAAa,OAAO,iBAAiB,6IAA6I,EAAE,oHAAoH,EAAE,oHAAoH,EAAE,+HAA+H,EAAE,+HAA+H,EAAE,WAAW,EAAE,oHAAoH,EAAE,oHAAoH,EAAE,8IAA8I,gBAAgB,WAAW,gBAAgB,WAAW,+CAA+C,WAAW,gCAAgC,8RAA8R,0DAA0D,WAAW,8BAA8B,8RAA8R,8JAA8J,8RAA8R,EAAE,yTAAyT,8BAA8B,QAAQ,kBAAkB,qGAAqG,iNAAiN,QAAQ,iBAAiB,QAAQ,GAAG,WAAW,gBAAgB,QAAQ,GAAG,WAAW,+BAA+B,QAAQ,gBAAgB,QAAQ,gBAAgB,wIAAwI,kBAAkB,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,2BAA2B,gBAAgB,6GAA6G,kBAAkB,8IAA8I,EAAE,8IAA8I,8CAA8C,kSAAkS,2BAA2B,OAAO,kBAAkB,qGAAqG,iBAAiB,mJAAmJ,iBAAiB,mJAAmJ,GAAG,8RAA8R,EAAE,yTAAyT,EAAE,oHAAoH,EAAE,oHAAoH,4CAA4C,QAAQ,iBAAiB,QAAQ;AAC9hmB,iBAAiB,mCAAmC;AACpD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB;AACrD;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,iBAAiB,8BAA8B,mBAAmB,yBAAyB,mBAAmB,0xBAA0xB,+zJAA+zJ,UAAU;AACluL,aAAa,mBAAmB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,iBAAiB,kCAAkC,iBAAiB,qCAAqC,SAAS,kCAAkC,UAAU,kCAAkC,WAAW,6BAA6B,QAAQ,6DAA6D,WAAW,gCAAgC,YAAY;AACvjB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AClgCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,6iBAA6iB;AACxjB,aAAa,kWAAkW;AAC/W;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA,oCAAoC;AACpC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qCAAqC;AACrC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,gCAAgC;AAChC;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,2CAA2C;AAC7D;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB,yCAAyC;AAC3D;AACA;AACA,kBAAkB,6CAA6C;AAC/D;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,EAAE,0BAA0B,cAAc,IAAI,GAAG,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,2IAA2I,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,0GAA0G,uKAAuK,UAAU,gBAAgB,oBAAoB,EAAE,UAAU,EAAE,gBAAgB,EAAE,UAAU,0CAA0C,oBAAoB,gBAAgB,UAAU,iBAAiB,aAAa,EAAE,UAAU,eAAe,UAAU,8BAA8B,UAAU,GAAG,UAAU;AACv5B,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,0BAA0B,qBAAqB,8TAA8T,2EAA2E,2BAA2B,2BAA2B,6BAA6B,qDAAqD,2BAA2B,kBAAkB,kBAAkB;AACttB,aAAa,mBAAmB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,iBAAiB,kCAAkC,iBAAiB,qCAAqC,SAAS,kCAAkC,UAAU,kCAAkC,YAAY;AAC/Z,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC7vBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,uSAAuS;AAClT,aAAa,0JAA0J;AACvK;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,QAAQ,EAAE,QAAQ,cAAc,gBAAgB,gBAAgB,sBAAsB,EAAE,QAAQ,EAAE,gFAAgF,eAAe,SAAS,eAAe,UAAU,gBAAgB,0BAA0B,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,0BAA0B,EAAE,QAAQ,eAAe,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,oBAAoB,EAAE,UAAU,EAAE,UAAU;AAC1lB,iBAAiB,2GAA2G;AAC5H;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,aAAa,WAAW,kCAAkC,WAAW,kCAAkC,YAAY;AACnH,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACvrBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,mHAAmH;AAC9H,aAAa,gDAAgD;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,cAAc,IAAI,GAAG,iCAAiC,EAAE,QAAQ;AAC7F,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,aAAa,WAAW;AACxB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC7mBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,sPAAsP,mHAAmH;AACpX,aAAa,wGAAwG,2FAA2F;AAChN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,mDAAmD,EAAE,MAAM,EAAE,oDAAoD,EAAE,oDAAoD,YAAY,cAAc,6CAA6C,gBAAgB,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,YAAY,kDAAkD,aAAa,KAAK,GAAG,uBAAuB,iCAAiC,0BAA0B,EAAE,UAAU,EAAE,UAAU,0BAA0B,kDAAkD,iBAAiB,gBAAgB,wDAAwD,aAAa,EAAE,UAAU;AAClqB,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,0BAA0B,oBAAoB;AACrI,aAAa,mBAAmB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,UAAU,+BAA+B,WAAW,kCAAkC,YAAY;AACrT,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACppBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,6iCAA6iC;AACxjC,aAAa,yrBAAyrB;AACtsB;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,yBAAyB,EAAE,MAAM,EAAE,iCAAiC,EAAE,QAAQ,EAAE,eAAe,EAAE,SAAS,EAAE,0BAA0B,EAAE,QAAQ,EAAE,8HAA8H,EAAE,uBAAuB,mBAAmB,QAAQ,EAAE,SAAS,EAAE,8HAA8H,EAAE,8HAA8H,EAAE,8HAA8H,EAAE,8HAA8H,EAAE,8HAA8H,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,oBAAoB,+HAA+H,gBAAgB,eAAe,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,uDAAuD,EAAE,uDAAuD,EAAE,aAAa,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,oGAAoG,UAAU,eAAe,+CAA+C,EAAE,iCAAiC,EAAE,oBAAoB,EAAE,oBAAoB,gBAAgB,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,+CAA+C,8BAA8B,UAAU,EAAE,UAAU,EAAE,iCAAiC,4CAA4C,oBAAoB,EAAE,0BAA0B,EAAE,oCAAoC,EAAE,8CAA8C,gBAAgB,4BAA4B,EAAE,6BAA6B,gBAAgB,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,kCAAkC,EAAE,kCAAkC;AAC5qF,iBAAiB,2QAA2Q;AAC5R;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,yHAAyH,WAAW,qoBAAqoB;AACh2B,aAAa,mBAAmB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,cAAc,6BAA6B,UAAU,6BAA6B,WAAW,kCAAkC,YAAY;AAC9V,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC/xBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,m/BAAm/B;AAC9/B,aAAa,kmBAAkmB;AAC/mB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gDAAgD;AAC/E;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,yBAAyB,gDAAgD;AACzE;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,SAAS,+BAA+B;AACxC;AACA;;AAEA,oBAAoB,0FAA0F;AAC9G,iBAAiB,qEAAqE;AACtF;AACA;AACA;;AAEA,oBAAoB,wFAAwF;AAC5G,iBAAiB,oFAAoF;AACrG;AACA;AACA;;AAEA,oBAAoB,uFAAuF;AAC3G,iBAAiB,mFAAmF;AACpG;AACA;AACA;;AAEA;AACA,oBAAoB,uFAAuF;AAC3G;AACA;AACA,iBAAiB,gDAAgD;AACjE;AACA;AACA;;AAEA;AACA,oBAAoB,uFAAuF;AAC3G;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA,yCAAyC,qBAAqB;AAC9D;AACA,0BAA0B,iBAAiB,oBAAoB;AAC/D;AACA,0BAA0B,iBAAiB;AAC3C;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,uFAAuF,oBAAoB,kEAAkE,iCAAiC,sKAAsK,oRAAoR,qBAAqB,yCAAyC,4IAA4I;AACz6B,aAAa,kBAAkB,gCAAgC,mBAAmB,kCAAkC,kBAAkB,kCAAkC,OAAO,mCAAmC,UAAU,sCAAsC,SAAS,mCAAmC,YAAY;AAC1T,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACt3BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,khBAAkhB,qJAAqJ;AAClrB,aAAa,iVAAiV,6HAA6H;AAC3d;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,6DAA6D,WAAW;AACxE;AACA;AACA;AACA,2CAA2C,iCAAiC;AAC5E,iBAAiB,4BAA4B,+DAA+D,WAAW;AACvH;AACA;AACA;AACA;AACA,sEAAsE;AACtE,iBAAiB,4BAA4B,+DAA+D,WAAW,8DAA8D;AACrL;AACA;AACA;AACA;AACA,2EAA2E;AAC3E,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,2GAA2G;AAC3G,kBAAkB;AAClB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,6GAA6G;AAC7G,iBAAiB,0CAA0C;AAC3D;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,sCAAsC,EAAE,MAAM,EAAE,sCAAsC,EAAE,sCAAsC,EAAE,uCAAuC,gEAAgE,KAAK,GAAG,gBAAgB,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,qKAAqK,EAAE,uBAAuB,iCAAiC,4IAA4I,yCAAyC,oBAAoB,iBAAiB,UAAU,eAAe,UAAU,GAAG,UAAU,0DAA0D,oCAAoC,gIAAgI,gBAAgB,2CAA2C,oBAAoB,0BAA0B,KAAK,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,aAAa,EAAE,UAAU,eAAe,UAAU,GAAG,uKAAuK,eAAe,UAAU,GAAG,UAAU,EAAE,UAAU,sDAAsD,KAAK,+BAA+B,uKAAuK;AACvrD,iBAAiB,gEAAgE;AACjF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA,6BAA6B,kCAAkC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,wCAAwC;AAC1E;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,wBAAwB,2BAA2B;AACnD;AACA,wBAAwB,uCAAuC;AAC/D;AACA;AACA;AACA,wDAAwD;AACxD;AACA,oDAAoD;AACpD;AACA;AACA;AACA,wBAAwB,0BAA0B,0CAA0C;AAC5F;AACA,wCAAwC,oBAAoB;AAC5D;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB,0BAA0B;AACnD;AACA,yBAAyB,0BAA0B;AACnD;AACA,yBAAyB;AACzB;AACA,wBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,wBAAwB,8CAA8C;AACtE;AACA,yBAAyB,4BAA4B,6CAA6C;AAClG;AACA,yBAAyB,mDAAmD,2CAA2C;AACvH;AACA,yBAAyB,mDAAmD,6CAA6C;AACzH;AACA,4DAA4D;AAC5D;AACA,4DAA4D;AAC5D;AACA,qDAAqD;AACrD;AACA,iDAAiD;AACjD;AACA,2CAA2C;AAC3C;AACA,yCAAyC,sCAAsC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6IAA6I,kBAAkB,gCAAgC,oBAAoB,0BAA0B,oBAAoB,ocAAoc,6CAA6C,wBAAwB,WAAW,gLAAgL,oJAAoJ,qBAAqB;AAC9mC,aAAa,QAAQ,kCAAkC,oBAAoB,kCAAkC,kBAAkB,sCAAsC,mBAAmB,sCAAsC,mBAAmB,oCAAoC,WAAW,yEAAyE,qBAAqB,+BAA+B,kBAAkB,qCAAqC,cAAc,kCAAkC,YAAY,+BAA+B,SAAS,qCAAqC,UAAU,kCAAkC,UAAU,6BAA6B,aAAa,+BAA+B,iBAAiB,kCAAkC,eAAe,6BAA6B,UAAU,mEAAmE,OAAO,kCAAkC,YAAY;AAC77B,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACp0BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,8VAA8V;AACzW,aAAa,gMAAgM;AAC7M;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,gCAAgC;AAChC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,cAAc,IAAI,GAAG,0BAA0B,EAAE,cAAc,EAAE,UAAU,EAAE,6EAA6E,EAAE,QAAQ,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,4CAA4C,wDAAwD,UAAU,gBAAgB,UAAU,EAAE,gBAAgB,EAAE,UAAU,0CAA0C,aAAa,EAAE,UAAU,EAAE,UAAU;AACrhB,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,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EAAE,IA/DA;;AAiEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEhP,EAAAA,mBAAmB,EAAE,KA5ER;;AA8Eb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE9L,EAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,eAAX,EAA4B,aAA5B,EAA2C,aAA3C,CAxFK;;AA0Fb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE+a,EAAAA,gBAAgB,EAAE,KAtGL;;AAwGb;AACF;AACA;AACA;AACA;AACEC,EAAAA,mBAAmB,EAAEpZ,SA7GR;;AA+Gb;AACAG,EAAAA,SAAS,EAAE;AACT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIkZ,IAAAA,cAAc,EAAE,CAbP;;AAeT;AACJ;AACA;AACA;AACA;AACA;AACA;AACIjZ,IAAAA,UAAU,EAAE,IAtBH;;AAwBT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIkZ,IAAAA,WAAW,EAAE,EApCJ;;AAsCT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,WAAW,EAAE,EAlDJ;;AAoDT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI7P,IAAAA,KAAK,EAAE,OA7DE;AA8DT;AACA;AACA/I,IAAAA,OAAO,EAAE,EAhEA;;AAkET;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI6Y,IAAAA,WAAW,EAAE,IA9EJ;;AAgFT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE;AA5FR,GAhHE;;AA+Mb;AACAC,EAAAA,QAAQ,EAAE;AACR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE,EART;;AAUR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,EAjBR;;AAmBR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,EA1BR;;AA4BR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,WAAW,EAAE,EAnCL;;AAqCR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIrZ,IAAAA,KAAK,EAAE,GA5CC;;AA8CR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,MAAM,EAAE,EArDA;;AAuDR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIqZ,IAAAA,SAAS,EAAE,EA9DH;;AAgER;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,aAAa,EAAE,CAvEP;;AAyER;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,UAAU,EAAE,EAhFJ;;AAkFR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,aAAa,EAAE,EAzFP;;AA2FR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,YAAY,EAAE,QAlGN;;AAoGR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,YAAY,EAAE,IA3GN;;AA6GR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,UAAU,EAAE,KAtHJ;;AAwHR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE,CAnIT;;AAqIR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACId,IAAAA,WAAW,EAAE,IA/IL;;AAiJR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIe,IAAAA,WAAW,EAAE,KA5JL;;AA8JR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,mBAAmB,EAAE,KArKb;;AAuKR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,aAAa,EAAE,EA9KP;;AAgLR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE,2BAvLT;;AAyLR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE,GA9LT;;AAgMR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,YAAY,EAAE,EAvMN;;AAyMR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,4CAhNR;;AAkNR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,GAvNR;;AAyNR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,SAAS,EAAE,QAhOH;;AAkOR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,eAAe,EAAE,EAzOT;;AA2OR;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,iBAAiB,EAAE,4CAlPX;;AAoPR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,iBAAiB,EAAE,GAzPX;;AA2PR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,IAAI,EAAE,KAhQE;;AAkQR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,WAAW,EAAE,EAvQL;;AAyQR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,aAAa,EAAE,EA9QP;;AAgRR;AACJ;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,EArRR;AAuRRC,IAAAA,WAAW,EAAE,uBAAY;AACvB,aAAO;AACL5c,QAAAA,UAAU,EAAE,KAAKsc,iBADZ;AAELO,QAAAA,QAAQ,EAAE,KAAKR,eAFV;AAGLS,QAAAA,UAAU,EAAE,KAAKP;AAHZ,OAAP;AAKD,KA7RO;AA8RRQ,IAAAA,QAAQ,EAAE,oBAAY;AACpB,aAAO;AACL/c,QAAAA,UAAU,EAAE,KAAKkc,cADZ;AAELW,QAAAA,QAAQ,EAAE,KAAKZ,YAFV;AAGLa,QAAAA,UAAU,EAAE,KAAKX;AAHZ,OAAP;AAKD,KApSO;AAqSRa,IAAAA,SAAS,EAAE,qBAAY;AACrB,aAAO;AACLhd,QAAAA,UAAU,EAAE,KAAK+b,eADZ;AAELc,QAAAA,QAAQ,EAAE,KAAKf,aAFV;AAGLgB,QAAAA,UAAU,EAAE,KAAKd;AAHZ,OAAP;AAKD;AA3SO,GAhNG;;AA8fb;AACAiB,EAAAA,KAAK,EAAE;AACL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,EAVX;;AAYL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,SAAS,EAAE,EAnBN;;AAqBL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,MAAM,EAAE,CA5BH;;AA8BL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,UAAU,EAAE,EArCP;;AAuCL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,YAAY,EAAE,EA9CT;;AAgDL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,WAAW,EAAE,EAvDR;;AAyDL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,oBAAoB,EAAE,EAhEjB;;AAkEL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIX,IAAAA,QAAQ,EAAE,EAzEL;;AA2EL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIY,IAAAA,eAAe,EAAE,EAlFZ;;AAoFL;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,mBAAmB,EAAE,CA3FhB;;AA6FL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,UAAU,EAAE,UAxGP;;AA0GL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI9C,IAAAA,WAAW,EAAE,IAtHR;;AAwHL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI+C,IAAAA,OAAO,EAAE,KAjIJ;AAmILC,IAAAA,QAAQ,EAAExc;AAnIL,GA/fM;;AAqoBb;AACAyc,EAAAA,OAAO,EAAE;AACP;AACJ;AACA;AACA;AACA;AACA;AACA;AACI7C,IAAAA,cAAc,EAAE,EART;;AAUP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cAAc,EAAE,EAjBT;;AAmBP;AACJ;AACA;AACA;AACA;AACA;AACA;AACI6C,IAAAA,UAAU,EAAE,GA1BL;;AA4BP;AACJ;AACA;AACA;AACA;A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;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,8BAA8B;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,yBAAyB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,YAAY;AACZ;AACA,sCAAsC;AACtC;AACA;AACA,UAAU;AACV;AACA;AACA,iDAAiD;AACjD;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA,MAAM;AACN,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF;AACpF;AACA,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA,8DAA8D;;AAE9D;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AChhBA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;UEJA;UACA;UACA;UACA","sources":["webpack://mermaid/webpack/universalModuleDefinition","webpack://mermaid/./src/diagrams/class/parser/classDiagram.jison","webpack://mermaid/./src/diagrams/er/parser/erDiagram.jison","webpack://mermaid/./src/diagrams/flowchart/parser/flow.jison","webpack://mermaid/./src/diagrams/gantt/parser/gantt.jison","webpack://mermaid/./src/diagrams/git/parser/gitGraph.jison","webpack://mermaid/./src/diagrams/info/parser/info.jison","webpack://mermaid/./src/diagrams/pie/parser/pie.jison","webpack://mermaid/./src/diagrams/requirement/parser/requirementDiagram.jison","webpack://mermaid/./src/diagrams/sequence/parser/sequenceDiagram.jison","webpack://mermaid/./src/diagrams/state/parser/stateDiagram.jison","webpack://mermaid/./src/diagrams/user-journey/parser/journey.jison","webpack://mermaid/./src/config.js","webpack://mermaid/./src/dagre-wrapper/clusters.js","webpack://mermaid/./src/dagre-wrapper/createLabel.js","webpack://mermaid/./src/dagre-wrapper/edges.js","webpack://mermaid/./src/dagre-wrapper/index.js","webpack://mermaid/./src/dagre-wrapper/intersect/index.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-circle.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-ellipse.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-line.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-node.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-polygon.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-rect.js","webpack://mermaid/./src/dagre-wrapper/markers.js","webpack://mermaid/./src/dagre-wrapper/mermaid-graphlib.js","webpack://mermaid/./src/dagre-wrapper/nodes.js","webpack://mermaid/./src/dagre-wrapper/shapes/note.js","webpack://mermaid/./src/dagre-wrapper/shapes/util.js","webpack://mermaid/./src/defaultConfig.js","webpack://mermaid/./src/diagrams/class/classDb.js","webpack://mermaid/./src/diagrams/class/classRenderer-v2.js","webpack://mermaid/./src/diagrams/class/classRenderer.js","webpack://mermaid/./src/diagrams/class/styles.js","webpack://mermaid/./src/diagrams/class/svgDraw.js","webpack://mermaid/./src/diagrams/common/common.js","webpack://mermaid/./src/diagrams/er/erDb.js","webpack://mermaid/./src/diagrams/er/erMarkers.js","webpack://mermaid/./src/diagrams/er/erRenderer.js","webpack://mermaid/./src/diagrams/er/styles.js","webpack://mermaid/./src/diagrams/flowchart/flowChartShapes.js","webpack://mermaid/./src/diagrams/flowchart/flowDb.js","webpack://mermaid/./src/diagrams/flowchart/flowRenderer-v2.js","webpack://mermaid/./src/diagrams/flowchart/flowRenderer.js","webpack://mermaid/./src/diagrams/flowchart/styles.js","webpack://mermaid/./src/diagrams/gantt/ganttDb.js","webpack://mermaid/./src/diagrams/gantt/ganttRenderer.js","webpack://mermaid/./src/diagrams/gantt/styles.js","webpack://mermaid/./src/diagrams/git/gitGraphAst.js","webpack://mermaid/./src/diagrams/git/gitGraphRenderer.js","webpack://mermaid/./src/diagrams/git/styles.js","webpack://mermaid/./src/diagrams/info/infoDb.js","webpack://mermaid/./src/diagrams/info/infoRenderer.js","webpack://mermaid/./src/diagrams/info/styles.js","webpack://mermaid/./src/diagrams/pie/pieDb.js","webpack://mermaid/./src/diagrams/pie/pieRenderer.js","webpack://mermaid/./src/diagrams/pie/styles.js","webpack://mermaid/./src/diagrams/requirement/requirementDb.js","webpack://mermaid/./src/diagrams/requirement/requirementMarkers.js","webpack://mermaid/./src/diagrams/requirement/requirementRenderer.js","webpack://mermaid/./src/diagrams/requirement/styles.js","webpack://mermaid/./src/diagrams/sequence/sequenceDb.js","webpack://mermaid/./src/diagrams/sequence/sequenceRenderer.js","webpack://mermaid/./src/diagrams/sequence/styles.js","webpack://mermaid/./src/diagrams/sequence/svgDraw.js","webpack://mermaid/./src/diagrams/state/id-cache.js","webpack://mermaid/./src/diagrams/state/shapes.js","webpack://mermaid/./src/diagrams/state/stateDb.js","webpack://mermaid/./src/diagrams/state/stateRenderer-v2.js","webpack://mermaid/./src/diagrams/state/stateRenderer.js","webpack://mermaid/./src/diagrams/state/styles.js","webpack://mermaid/./src/diagrams/user-journey/journeyDb.js","webpack://mermaid/./src/diagrams/user-journey/journeyRenderer.js","webpack://mermaid/./src/diagrams/user-journey/styles.js","webpack://mermaid/./src/diagrams/user-journey/svgDraw.js","webpack://mermaid/./src/errorRenderer.js","webpack://mermaid/./src/interactionDb.js","webpack://mermaid/./src/logger.js","webpack://mermaid/./src/mermaid.js","webpack://mermaid/./src/mermaidAPI.js","webpack://mermaid/./src/styles.js","webpack://mermaid/./src/themes/index.js","webpack://mermaid/./src/themes/theme-base.js","webpack://mermaid/./src/themes/theme-dark.js","webpack://mermaid/./src/themes/theme-default.js","webpack://mermaid/./src/themes/theme-forest.js","webpack://mermaid/./src/themes/theme-helpers.js","webpack://mermaid/./src/themes/theme-neutral.js","webpack://mermaid/./src/utils.js","webpack://mermaid/./node_modules/path-browserify/index.js","webpack://mermaid/external commonjs \"@braintree/sanitize-url\"","webpack://mermaid/external commonjs \"d3\"","webpack://mermaid/external commonjs \"dagre\"","webpack://mermaid/external commonjs \"dagre-d3\"","webpack://mermaid/external commonjs \"dagre-d3/lib/label/add-html-label.js\"","webpack://mermaid/external commonjs \"dompurify\"","webpack://mermaid/external commonjs \"graphlib\"","webpack://mermaid/external commonjs \"khroma\"","webpack://mermaid/external commonjs \"moment-mini\"","webpack://mermaid/external commonjs \"stylis\"","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/class/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/er/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/flowchart/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/gantt/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/git/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/info/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/pie/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/requirement/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/sequence/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/state/parser|fs","webpack://mermaid/ignored|/mnt/c/mermaid/src/diagrams/user-journey/parser|fs","webpack://mermaid/webpack/bootstrap","webpack://mermaid/webpack/runtime/compat get default export","webpack://mermaid/webpack/runtime/define property getters","webpack://mermaid/webpack/runtime/hasOwnProperty shorthand","webpack://mermaid/webpack/runtime/make namespace object","webpack://mermaid/webpack/runtime/node module decorator","webpack://mermaid/webpack/before-startup","webpack://mermaid/webpack/startup","webpack://mermaid/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mermaid\"] = factory();\n\telse\n\t\troot[\"mermaid\"] = factory();\n})(typeof self !== \"undefined\" ? self : this, function() {\nreturn ","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,6],$V1=[1,7],$V2=[1,8],$V3=[1,9],$V4=[1,12],$V5=[1,11],$V6=[1,15,24],$V7=[1,19],$V8=[1,31],$V9=[1,34],$Va=[1,32],$Vb=[1,33],$Vc=[1,35],$Vd=[1,36],$Ve=[1,37],$Vf=[1,38],$Vg=[1,41],$Vh=[1,42],$Vi=[1,43],$Vj=[1,44],$Vk=[15,24],$Vl=[1,56],$Vm=[1,57],$Vn=[1,58],$Vo=[1,59],$Vp=[1,60],$Vq=[1,61],$Vr=[15,24,31,38,39,47,50,51,52,53,54,55,60,62],$Vs=[15,24,29,31,38,39,43,47,50,51,52,53,54,55,60,62,77,78,79,80],$Vt=[7,8,9,10,15,18,22,24],$Vu=[47,77,78,79,80],$Vv=[47,54,55,77,78,79,80],$Vw=[47,50,51,52,53,77,78,79,80],$Vx=[15,24,31],$Vy=[1,93];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"mermaidDoc\":4,\"direction\":5,\"directive\":6,\"direction_tb\":7,\"direction_bt\":8,\"direction_rl\":9,\"direction_lr\":10,\"graphConfig\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\"NEWLINE\":15,\":\":16,\"argDirective\":17,\"open_directive\":18,\"type_directive\":19,\"arg_directive\":20,\"close_directive\":21,\"CLASS_DIAGRAM\":22,\"statements\":23,\"EOF\":24,\"statement\":25,\"className\":26,\"alphaNumToken\":27,\"classLiteralName\":28,\"GENERICTYPE\":29,\"relationStatement\":30,\"LABEL\":31,\"classStatement\":32,\"methodStatement\":33,\"annotationStatement\":34,\"clickStatement\":35,\"cssClassStatement\":36,\"CLASS\":37,\"STYLE_SEPARATOR\":38,\"STRUCT_START\":39,\"members\":40,\"STRUCT_STOP\":41,\"ANNOTATION_START\":42,\"ANNOTATION_END\":43,\"MEMBER\":44,\"SEPARATOR\":45,\"relation\":46,\"STR\":47,\"relationType\":48,\"lineType\":49,\"AGGREGATION\":50,\"EXTENSION\":51,\"COMPOSITION\":52,\"DEPENDENCY\":53,\"LINE\":54,\"DOTTED_LINE\":55,\"CALLBACK\":56,\"LINK\":57,\"LINK_TARGET\":58,\"CLICK\":59,\"CALLBACK_NAME\":60,\"CALLBACK_ARGS\":61,\"HREF\":62,\"CSSCLASS\":63,\"commentToken\":64,\"textToken\":65,\"graphCodeTokens\":66,\"textNoTagsToken\":67,\"TAGSTART\":68,\"TAGEND\":69,\"==\":70,\"--\":71,\"PCT\":72,\"DEFAULT\":73,\"SPACE\":74,\"MINUS\":75,\"keywords\":76,\"UNICODE_TEXT\":77,\"NUM\":78,\"ALPHA\":79,\"BQUOTE_STR\":80,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",7:\"direction_tb\",8:\"direction_bt\",9:\"direction_rl\",10:\"direction_lr\",15:\"NEWLINE\",16:\":\",18:\"open_directive\",19:\"type_directive\",20:\"arg_directive\",21:\"close_directive\",22:\"CLASS_DIAGRAM\",24:\"EOF\",29:\"GENERICTYPE\",31:\"LABEL\",37:\"CLASS\",38:\"STYLE_SEPARATOR\",39:\"STRUCT_START\",41:\"STRUCT_STOP\",42:\"ANNOTATION_START\",43:\"ANNOTATION_END\",44:\"MEMBER\",45:\"SEPARATOR\",47:\"STR\",50:\"AGGREGATION\",51:\"EXTENSION\",52:\"COMPOSITION\",53:\"DEPENDENCY\",54:\"LINE\",55:\"DOTTED_LINE\",56:\"CALLBACK\",57:\"LINK\",58:\"LINK_TARGET\",59:\"CLICK\",60:\"CALLBACK_NAME\",61:\"CALLBACK_ARGS\",62:\"HREF\",63:\"CSSCLASS\",66:\"graphCodeTokens\",68:\"TAGSTART\",69:\"TAGEND\",70:\"==\",71:\"--\",72:\"PCT\",73:\"DEFAULT\",74:\"SPACE\",75:\"MINUS\",76:\"keywords\",77:\"UNICODE_TEXT\",78:\"NUM\",79:\"ALPHA\",80:\"BQUOTE_STR\"},\nproductions_: [0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[23,1],[23,2],[23,3],[26,1],[26,1],[26,2],[26,2],[26,2],[25,1],[25,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[32,2],[32,4],[32,5],[32,7],[34,4],[40,1],[40,2],[33,1],[33,2],[33,1],[33,1],[30,3],[30,4],[30,4],[30,5],[46,3],[46,2],[46,2],[46,1],[48,1],[48,1],[48,1],[48,1],[49,1],[49,1],[35,3],[35,4],[35,3],[35,4],[35,4],[35,5],[35,3],[35,4],[35,4],[35,5],[35,3],[35,4],[35,4],[35,5],[36,3],[64,1],[64,1],[65,1],[65,1],[65,1],[65,1],[65,1],[65,1],[65,1],[67,1],[67,1],[67,1],[67,1],[27,1],[27,1],[27,1],[28,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n yy.setDirection('TB');\nbreak;\ncase 5:\n yy.setDirection('BT');\nbreak;\ncase 6:\n yy.setDirection('RL');\nbreak;\ncase 7:\n yy.setDirection('LR');\nbreak;\ncase 11:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 12:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 13:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 14:\n yy.parseDirective('}%%', 'close_directive', 'class'); \nbreak;\ncase 19: case 20:\n this.$=$$[$0]; \nbreak;\ncase 21:\n this.$=$$[$0-1]+$$[$0]; \nbreak;\ncase 22: case 23:\n this.$=$$[$0-1]+'~'+$$[$0]; \nbreak;\ncase 24:\n yy.addRelation($$[$0]); \nbreak;\ncase 25:\n $$[$0-1].title =  yy.cleanupLabel($$[$0]); yy.addRelation($$[$0-1]);        \nbreak;\ncase 33:\nyy.addClass($$[$0]);\nbreak;\ncase 34:\nyy.addClass($$[$0-2]);yy.setCssClass($$[$0-2], $$[$0]);\nbreak;\ncase 35:\n/*console.log($$[$0-3],JSON.stringify($$[$0-1]));*/yy.addClass($$[$0-3]);yy.addMembers($$[$0-3],$$[$0-1]);\nbreak;\ncase 36:\nyy.addClass($$[$0-5]);yy.setCssClass($$[$0-5], $$[$0-3]);yy.addMembers($$[$0-5],$$[$0-1]);\nbreak;\ncase 37:\n yy.addAnnotation($$[$0],$$[$0-2]); \nbreak;\ncase 38:\n this.$ = [$$[$0]]; \nbreak;\ncase 39:\n $$[$0].push($$[$0-1]);this.$=$$[$0];\nbreak;\ncase 40:\n/*console.log('Rel found',$$[$0]);*/\nbreak;\ncase 41:\nyy.addMember($$[$0-1],yy.cleanupLabel($$[$0]));\nbreak;\ncase 42:\n/*console.warn('Member',$$[$0]);*/\nbreak;\ncase 43:\n/*console.log('sep found',$$[$0]);*/\nbreak;\ncase 44:\n this.$ = {'id1':$$[$0-2],'id2':$$[$0], relation:$$[$0-1], relationTitle1:'none', relationTitle2:'none'}; \nbreak;\ncase 45:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-1], relationTitle1:$$[$0-2], relationTitle2:'none'}\nbreak;\ncase 46:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-2], relationTitle1:'none', relationTitle2:$$[$0-1]}; \nbreak;\ncase 47:\n this.$ = {id1:$$[$0-4], id2:$$[$0], relation:$$[$0-2], relationTitle1:$$[$0-3], relationTitle2:$$[$0-1]} \nbreak;\ncase 48:\n this.$={type1:$$[$0-2],type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 49:\n this.$={type1:'none',type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 50:\n this.$={type1:$$[$0-1],type2:'none',lineType:$$[$0]}; \nbreak;\ncase 51:\n this.$={type1:'none',type2:'none',lineType:$$[$0]}; \nbreak;\ncase 52:\n this.$=yy.relationType.AGGREGATION;\nbreak;\ncase 53:\n this.$=yy.relationType.EXTENSION;\nbreak;\ncase 54:\n this.$=yy.relationType.COMPOSITION;\nbreak;\ncase 55:\n this.$=yy.relationType.DEPENDENCY;\nbreak;\ncase 56:\nthis.$=yy.lineType.LINE;\nbreak;\ncase 57:\nthis.$=yy.lineType.DOTTED_LINE;\nbreak;\ncase 58: case 64:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-1], $$[$0]);\nbreak;\ncase 59: case 65:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-2], $$[$0]);\nbreak;\ncase 60: case 68:\nthis.$ = $$[$0-2];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 61:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1],$$[$0]);\nbreak;\ncase 62: case 70:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-2], $$[$0]);\nbreak;\ncase 63: case 71:\nthis.$ = $$[$0-4];yy.setLink($$[$0-3], $$[$0-2], $$[$0]);yy.setTooltip($$[$0-3], $$[$0-1]);\nbreak;\ncase 66:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 67:\nthis.$ = $$[$0-4];yy.setClickEvent($$[$0-3], $$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 69:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 72:\nyy.setCssClass($$[$0-1], $$[$0]);\nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:4,7:$V0,8:$V1,9:$V2,10:$V3,11:5,12:10,18:$V4,22:$V5},{1:[3]},{1:[2,1]},{1:[2,2]},{3:13,4:2,5:3,6:4,7:$V0,8:$V1,9:$V2,10:$V3,11:5,12:10,18:$V4,22:$V5},{1:[2,8]},o($V6,[2,4]),o($V6,[2,5]),o($V6,[2,6]),o($V6,[2,7]),{13:14,19:[1,15]},{15:[1,16]},{19:[2,11]},{1:[2,3]},{14:17,16:[1,18],21:$V7},o([16,21],[2,12]),{5:29,6:28,7:$V0,8:$V1,9:$V2,10:$V3,12:10,18:$V4,23:20,25:21,26:30,27:39,28:40,30:22,32:23,33:24,34:25,35:26,36:27,37:$V8,42:$V9,44:$Va,45:$Vb,56:$Vc,57:$Vd,59:$Ve,63:$Vf,77:$Vg,78:$Vh,79:$Vi,80:$Vj},{15:[1,45]},{17:46,20:[1,47]},{15:[2,14]},{24:[1,48]},{15:[1,49],24:[2,16]},o($Vk,[2,24],{31:[1,50]}),o($Vk,[2,26]),o($Vk,[2,27]),o($Vk,[2,28]),o($Vk,[2,29]),o($Vk,[2,30]),o($Vk,[2,31]),o($Vk,[2,32]),o($Vk,[2,40],{46:51,48:54,49:55,31:[1,53],47:[1,52],50:$Vl,51:$Vm,52:$Vn,53:$Vo,54:$Vp,55:$Vq}),{26:62,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},o($Vk,[2,42]),o($Vk,[2,43]),{27:63,77:$Vg,78:$Vh,79:$Vi},{26:64,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},{26:65,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},{26:66,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},{47:[1,67]},o($Vr,[2,19],{27:39,28:40,26:68,29:[1,69],77:$Vg,78:$Vh,79:$Vi,80:$Vj}),o($Vr,[2,20],{29:[1,70]}),o($Vs,[2,86]),o($Vs,[2,87]),o($Vs,[2,88]),o([15,24,29,31,38,39,47,50,51,52,53,54,55,60,62],[2,89]),o($Vt,[2,9]),{14:71,21:$V7},{21:[2,13]},{1:[2,15]},{5:29,6:28,7:$V0,8:$V1,9:$V2,10:$V3,12:10,18:$V4,23:72,24:[2,17],25:21,26:30,27:39,28:40,30:22,32:23,33:24,34:25,35:26,36:27,37:$V8,42:$V9,44:$Va,45:$Vb,56:$Vc,57:$Vd,59:$Ve,63:$Vf,77:$Vg,78:$Vh,79:$Vi,80:$Vj},o($Vk,[2,25]),{26:73,27:39,28:40,47:[1,74],77:$Vg,78:$Vh,79:$Vi,80:$Vj},{46:75,48:54,49:55,50:$Vl,51:$Vm,52:$Vn,53:$Vo,54:$Vp,55:$Vq},o($Vk,[2,41]),{49:76,54:$Vp,55:$Vq},o($Vu,[2,51],{48:77,50:$Vl,51:$Vm,52:$Vn,53:$Vo}),o($Vv,[2,52]),o($Vv,[2,53]),o($Vv,[2,54]),o($Vv,[2,55]),o($Vw,[2,56]),o($Vw,[2,57]),o($Vk,[2,33],{38:[1,78],39:[1,79]}),{43:[1,80]},{47:[1,81]},{47:[1,82]},{60:[1,83],62:[1,84]},{27:85,77:$Vg,78:$Vh,79:$Vi},o($Vr,[2,21]),o($Vr,[2,22]),o($Vr,[2,23]),{15:[1,86]},{24:[2,18]},o($Vx,[2,44]),{26:87,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},{26:88,27:39,28:40,47:[1,89],77:$Vg,78:$Vh,79:$Vi,80:$Vj},o($Vu,[2,50],{48:90,50:$Vl,51:$Vm,52:$Vn,53:$Vo}),o($Vu,[2,49]),{27:91,77:$Vg,78:$Vh,79:$Vi},{40:92,44:$Vy},{26:94,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},o($Vk,[2,58],{47:[1,95]}),o($Vk,[2,60],{47:[1,97],58:[1,96]}),o($Vk,[2,64],{47:[1,98],61:[1,99]}),o($Vk,[2,68],{47:[1,101],58:[1,100]}),o($Vk,[2,72]),o($Vt,[2,10]),o($Vx,[2,46]),o($Vx,[2,45]),{26:102,27:39,28:40,77:$Vg,78:$Vh,79:$Vi,80:$Vj},o($Vu,[2,48]),o($Vk,[2,34],{39:[1,103]}),{41:[1,104]},{40:105,41:[2,38],44:$Vy},o($Vk,[2,37]),o($Vk,[2,59]),o($Vk,[2,61]),o($Vk,[2,62],{58:[1,106]}),o($Vk,[2,65]),o($Vk,[2,66],{47:[1,107]}),o($Vk,[2,69]),o($Vk,[2,70],{58:[1,108]}),o($Vx,[2,47]),{40:109,44:$Vy},o($Vk,[2,35]),{41:[2,39]},o($Vk,[2,63]),o($Vk,[2,67]),o($Vk,[2,71]),{41:[1,110]},o($Vk,[2,36])],\ndefaultActions: {2:[2,1],3:[2,2],5:[2,8],12:[2,11],13:[2,3],19:[2,14],47:[2,13],48:[2,15],72:[2,18],105:[2,39]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 18; \nbreak;\ncase 1:return 7;\nbreak;\ncase 2:return 8;\nbreak;\ncase 3:return 9;\nbreak;\ncase 4:return 10;\nbreak;\ncase 5: this.begin('type_directive'); return 19; \nbreak;\ncase 6: this.popState(); this.begin('arg_directive'); return 16; \nbreak;\ncase 7: this.popState(); this.popState(); return 21; \nbreak;\ncase 8:return 20;\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */\nbreak;\ncase 11:return 15;\nbreak;\ncase 12:/* skip whitespace */\nbreak;\ncase 13:return 22;\nbreak;\ncase 14:return 22;\nbreak;\ncase 15: this.begin(\"struct\"); /*console.log('Starting struct');*/ return 39;\nbreak;\ncase 16:return \"EOF_IN_STRUCT\";\nbreak;\ncase 17:return \"OPEN_IN_STRUCT\";\nbreak;\ncase 18: /*console.log('Ending struct');*/this.popState(); return 41;\nbreak;\ncase 19:/* nothing */\nbreak;\ncase 20: /*console.log('lex-member: ' + yy_.yytext);*/  return \"MEMBER\";\nbreak;\ncase 21:return 37;\nbreak;\ncase 22:return 63;\nbreak;\ncase 23:return 56;\nbreak;\ncase 24:return 57;\nbreak;\ncase 25:return 59;\nbreak;\ncase 26:return 42;\nbreak;\ncase 27:return 43;\nbreak;\ncase 28:this.begin(\"generic\");\nbreak;\ncase 29:this.popState();\nbreak;\ncase 30:return \"GENERICTYPE\";\nbreak;\ncase 31:this.begin(\"string\");\nbreak;\ncase 32:this.popState();\nbreak;\ncase 33:return \"STR\";\nbreak;\ncase 34:this.begin(\"bqstring\");\nbreak;\ncase 35:this.popState();\nbreak;\ncase 36:return \"BQUOTE_STR\";\nbreak;\ncase 37:this.begin(\"href\");\nbreak;\ncase 38:this.popState();\nbreak;\ncase 39:return 62;\nbreak;\ncase 40:this.begin(\"callback_name\");\nbreak;\ncase 41:this.popState();\nbreak;\ncase 42:this.popState(); this.begin(\"callback_args\");\nbreak;\ncase 43:return 60;\nbreak;\ncase 44:this.popState();\nbreak;\ncase 45:return 61;\nbreak;\ncase 46:return 58;\nbreak;\ncase 47:return 58;\nbreak;\ncase 48:return 58;\nbreak;\ncase 49:return 58;\nbreak;\ncase 50:return 51;\nbreak;\ncase 51:return 51;\nbreak;\ncase 52:return 53;\nbreak;\ncase 53:return 53;\nbreak;\ncase 54:return 52;\nbreak;\ncase 55:return 50;\nbreak;\ncase 56:return 54;\nbreak;\ncase 57:return 55;\nbreak;\ncase 58:return 31;\nbreak;\ncase 59:return 38;\nbreak;\ncase 60:return 75;\nbreak;\ncase 61:return 'DOT';\nbreak;\ncase 62:return 'PLUS';\nbreak;\ncase 63:return 72;\nbreak;\ncase 64:return 'EQUALS';\nbreak;\ncase 65:return 'EQUALS';\nbreak;\ncase 66:return 79;\nbreak;\ncase 67:return 'PUNCTUATION';\nbreak;\ncase 68:return 78;\nbreak;\ncase 69:return 77;\nbreak;\ncase 70:return 74;\nbreak;\ncase 71:return 24;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/,/^(?:.*direction\\s+TB[^\\n]*)/,/^(?:.*direction\\s+BT[^\\n]*)/,/^(?:.*direction\\s+RL[^\\n]*)/,/^(?:.*direction\\s+LR[^\\n]*)/,/^(?:((?:(?!\\}%%)[^:.])*))/,/^(?::)/,/^(?:\\}%%)/,/^(?:((?:(?!\\}%%).|\\n)*))/,/^(?:%%(?!\\{)*[^\\n]*(\\r?\\n?)+)/,/^(?:%%[^\\n]*(\\r?\\n)*)/,/^(?:\\s*(\\r?\\n)+)/,/^(?:\\s+)/,/^(?:classDiagram-v2\\b)/,/^(?:classDiagram\\b)/,/^(?:[{])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\\n])/,/^(?:[^{}\\n]*)/,/^(?:class\\b)/,/^(?:cssClass\\b)/,/^(?:callback\\b)/,/^(?:link\\b)/,/^(?:click\\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\\s]+[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:call[\\s]+)/,/^(?:\\([\\s]*\\))/,/^(?:\\()/,/^(?:[^(]*)/,/^(?:\\))/,/^(?:[^)]*)/,/^(?:_self\\b)/,/^(?:_blank\\b)/,/^(?:_parent\\b)/,/^(?:_top\\b)/,/^(?:\\s*<\\|)/,/^(?:\\s*\\|>)/,/^(?:\\s*>)/,/^(?:\\s*<)/,/^(?:\\s*\\*)/,/^(?:\\s*o\\b)/,/^(?:--)/,/^(?:\\.\\.)/,/^(?::{1}[^:\\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\\.)/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\\w+)/,/^(?:[!\"#$%&'*+,-.`?\\\\/])/,/^(?:[0-9]+)/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"arg_directive\":{\"rules\":[7,8],\"inclusive\":false},\"type_directive\":{\"rules\":[6,7],\"inclusive\":false},\"open_directive\":{\"rules\":[5],\"inclusive\":false},\"callback_args\":{\"rules\":[44,45],\"inclusive\":false},\"callback_name\":{\"rules\":[41,42,43],\"inclusive\":false},\"href\":{\"rules\":[38,39],\"inclusive\":false},\"struct\":{\"rules\":[16,17,18,19,20],\"inclusive\":false},\"generic\":{\"rules\":[29,30],\"inclusive\":false},\"bqstring\":{\"rules\":[35,36],\"inclusive\":false},\"string\":{\"rules\":[32,33],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,9,10,11,12,13,14,15,21,22,23,24,25,26,27,28,31,34,37,40,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,5],$V2=[6,9,11,23,41],$V3=[1,17],$V4=[1,20],$V5=[1,25],$V6=[1,26],$V7=[1,27],$V8=[1,28],$V9=[1,37],$Va=[23,38,39],$Vb=[4,6,9,11,23,41],$Vc=[34,35,36,37],$Vd=[22,29],$Ve=[1,55];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"ER_DIAGRAM\":4,\"document\":5,\"EOF\":6,\"directive\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NEWLINE\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\":\":15,\"argDirective\":16,\"entityName\":17,\"relSpec\":18,\"role\":19,\"BLOCK_START\":20,\"attributes\":21,\"BLOCK_STOP\":22,\"ALPHANUM\":23,\"attribute\":24,\"attributeType\":25,\"attributeName\":26,\"attributeKeyType\":27,\"attributeComment\":28,\"ATTRIBUTE_WORD\":29,\"ATTRIBUTE_KEY\":30,\"COMMENT\":31,\"cardinality\":32,\"relType\":33,\"ZERO_OR_ONE\":34,\"ZERO_OR_MORE\":35,\"ONE_OR_MORE\":36,\"ONLY_ONE\":37,\"NON_IDENTIFYING\":38,\"IDENTIFYING\":39,\"WORD\":40,\"open_directive\":41,\"type_directive\":42,\"arg_directive\":43,\"close_directive\":44,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"ER_DIAGRAM\",6:\"EOF\",9:\"SPACE\",11:\"NEWLINE\",15:\":\",20:\"BLOCK_START\",22:\"BLOCK_STOP\",23:\"ALPHANUM\",29:\"ATTRIBUTE_WORD\",30:\"ATTRIBUTE_KEY\",31:\"COMMENT\",34:\"ZERO_OR_ONE\",35:\"ZERO_OR_MORE\",36:\"ONE_OR_MORE\",37:\"ONLY_ONE\",38:\"NON_IDENTIFYING\",39:\"IDENTIFYING\",40:\"WORD\",41:\"open_directive\",42:\"type_directive\",43:\"arg_directive\",44:\"close_directive\"},\nproductions_: [0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[17,1],[21,1],[21,2],[24,2],[24,3],[24,3],[24,4],[25,1],[26,1],[27,1],[28,1],[18,3],[32,1],[32,1],[32,1],[32,1],[33,1],[33,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n /*console.log('finished parsing');*/ \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 12:\n\n          yy.addEntity($$[$0-4]);\n          yy.addEntity($$[$0-2]);\n          yy.addRelationship($$[$0-4], $$[$0], $$[$0-2], $$[$0-3]);\n          /*console.log($$[$0-4] + $$[$0-3] + $$[$0-2] + ':' + $$[$0]);*/\n      \nbreak;\ncase 13:\n\n          /* console.log('detected block'); */\n          yy.addEntity($$[$0-3]);\n          yy.addAttributes($$[$0-3], $$[$0-1]);\n          /* console.log('handled block'); */\n      \nbreak;\ncase 14:\n yy.addEntity($$[$0-2]); \nbreak;\ncase 15:\n yy.addEntity($$[$0]); \nbreak;\ncase 16:\n this.$ = $$[$0]; /*console.log('Entity: ' + $$[$0]);*/ \nbreak;\ncase 17:\n this.$ = [$$[$0]]; \nbreak;\ncase 18:\n $$[$0].push($$[$0-1]); this.$=$$[$0]; \nbreak;\ncase 19:\n this.$ = { attributeType: $$[$0-1], attributeName: $$[$0] }; \nbreak;\ncase 20:\n this.$ = { attributeType: $$[$0-2], attributeName: $$[$0-1], attributeKeyType: $$[$0] }; \nbreak;\ncase 21:\n this.$ = { attributeType: $$[$0-2], attributeName: $$[$0-1], attributeComment: $$[$0] }; \nbreak;\ncase 22:\n this.$ = { attributeType: $$[$0-3], attributeName: $$[$0-2], attributeKeyType: $$[$0-1], attributeComment: $$[$0] }; \nbreak;\ncase 23: case 24: case 25:\n this.$=$$[$0]; \nbreak;\ncase 26:\n this.$=$$[$0].replace(/\"/g, ''); \nbreak;\ncase 27:\n\n        this.$ = { cardA: $$[$0], relType: $$[$0-1], cardB: $$[$0-2] };\n        /*console.log('relSpec: ' + $$[$0] + $$[$0-1] + $$[$0-2]);*/\n      \nbreak;\ncase 28:\n this.$ = yy.Cardinality.ZERO_OR_ONE; \nbreak;\ncase 29:\n this.$ = yy.Cardinality.ZERO_OR_MORE; \nbreak;\ncase 30:\n this.$ = yy.Cardinality.ONE_OR_MORE; \nbreak;\ncase 31:\n this.$ = yy.Cardinality.ONLY_ONE; \nbreak;\ncase 32:\n this.$ = yy.Identification.NON_IDENTIFYING;  \nbreak;\ncase 33:\n this.$ = yy.Identification.IDENTIFYING; \nbreak;\ncase 34:\n this.$ = $$[$0].replace(/\"/g, ''); \nbreak;\ncase 35:\n this.$ = $$[$0]; \nbreak;\ncase 36:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 37:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 38:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 39:\n yy.parseDirective('}%%', 'close_directive', 'er'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,7:3,12:4,41:$V1},{1:[3]},o($V2,[2,3],{5:6}),{3:7,4:$V0,7:3,12:4,41:$V1},{13:8,42:[1,9]},{42:[2,36]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:$V3,41:$V1},{1:[2,2]},{14:18,15:[1,19],44:$V4},o([15,44],[2,37]),o($V2,[2,8],{1:[2,1]}),o($V2,[2,4]),{7:15,10:21,12:4,17:16,23:$V3,41:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,11]),o($V2,[2,15],{18:22,32:24,20:[1,23],34:$V5,35:$V6,36:$V7,37:$V8}),o([6,9,11,15,20,23,34,35,36,37,41],[2,16]),{11:[1,29]},{16:30,43:[1,31]},{11:[2,39]},o($V2,[2,5]),{17:32,23:$V3},{21:33,22:[1,34],24:35,25:36,29:$V9},{33:38,38:[1,39],39:[1,40]},o($Va,[2,28]),o($Va,[2,29]),o($Va,[2,30]),o($Va,[2,31]),o($Vb,[2,9]),{14:41,44:$V4},{44:[2,38]},{15:[1,42]},{22:[1,43]},o($V2,[2,14]),{21:44,22:[2,17],24:35,25:36,29:$V9},{26:45,29:[1,46]},{29:[2,23]},{32:47,34:$V5,35:$V6,36:$V7,37:$V8},o($Vc,[2,32]),o($Vc,[2,33]),{11:[1,48]},{19:49,23:[1,51],40:[1,50]},o($V2,[2,13]),{22:[2,18]},o($Vd,[2,19],{27:52,28:53,30:[1,54],31:$Ve}),o([22,29,30,31],[2,24]),{23:[2,27]},o($Vb,[2,10]),o($V2,[2,12]),o($V2,[2,34]),o($V2,[2,35]),o($Vd,[2,20],{28:56,31:$Ve}),o($Vd,[2,21]),o([22,29,31],[2,25]),o($Vd,[2,26]),o($Vd,[2,22])],\ndefaultActions: {5:[2,36],7:[2,2],20:[2,39],31:[2,38],37:[2,23],44:[2,18],47:[2,27]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 41; \nbreak;\ncase 1: this.begin('type_directive'); return 42; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 15; \nbreak;\ncase 3: this.popState(); this.popState(); return 44; \nbreak;\ncase 4:return 43;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7:return 11;\nbreak;\ncase 8:/* skip whitespace */\nbreak;\ncase 9:return 9;\nbreak;\ncase 10:return 40;\nbreak;\ncase 11:return 4;\nbreak;\ncase 12: this.begin(\"block\"); return 20; \nbreak;\ncase 13:/* skip whitespace in block */\nbreak;\ncase 14:return 30\nbreak;\ncase 15:return 29\nbreak;\ncase 16:return 31;\nbreak;\ncase 17:/* nothing */\nbreak;\ncase 18: this.popState(); return 22; \nbreak;\ncase 19:return yy_.yytext[0];\nbreak;\ncase 20:return 34;\nbreak;\ncase 21:return 35;\nbreak;\ncase 22:return 36;\nbreak;\ncase 23:return 37;\nbreak;\ncase 24:return 34;\nbreak;\ncase 25:return 35;\nbreak;\ncase 26:return 36;\nbreak;\ncase 27:return 38;\nbreak;\ncase 28:return 39;\nbreak;\ncase 29:return 38;\nbreak;\ncase 30:return 38;\nbreak;\ncase 31:return 23;\nbreak;\ncase 32:return yy_.yytext[0];\nbreak;\ncase 33:return 6;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:[\\s]+)/i,/^(?:\"[^\"]*\")/i,/^(?:erDiagram\\b)/i,/^(?:\\{)/i,/^(?:\\s+)/i,/^(?:(?:PK)|(?:FK))/i,/^(?:[A-Za-z][A-Za-z0-9\\-_]*)/i,/^(?:\"[^\"]*\")/i,/^(?:[\\n]+)/i,/^(?:\\})/i,/^(?:.)/i,/^(?:\\|o\\b)/i,/^(?:\\}o\\b)/i,/^(?:\\}\\|)/i,/^(?:\\|\\|)/i,/^(?:o\\|)/i,/^(?:o\\{)/i,/^(?:\\|\\{)/i,/^(?:\\.\\.)/i,/^(?:--)/i,/^(?:\\.-)/i,/^(?:-\\.)/i,/^(?:[A-Za-z][A-Za-z0-9\\-_]*)/i,/^(?:.)/i,/^(?:$)/i],\nconditions: {\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"block\":{\"rules\":[13,14,15,16,17,18,19],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,11,12,20,21,22,23,24,25,26,27,28,29,30,31,32,33],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,9],$V1=[1,7],$V2=[1,6],$V3=[1,8],$V4=[1,20,21,22,23,38,47,59,60,79,80,81,82,83,84,88,98,99,102,104,105,111,112,113,114,115,116,117,118,119,120],$V5=[2,10],$V6=[1,20],$V7=[1,21],$V8=[1,22],$V9=[1,23],$Va=[1,30],$Vb=[1,59],$Vc=[1,45],$Vd=[1,49],$Ve=[1,33],$Vf=[1,34],$Vg=[1,35],$Vh=[1,36],$Vi=[1,37],$Vj=[1,53],$Vk=[1,60],$Vl=[1,48],$Vm=[1,50],$Vn=[1,52],$Vo=[1,56],$Vp=[1,57],$Vq=[1,38],$Vr=[1,39],$Vs=[1,40],$Vt=[1,41],$Vu=[1,58],$Vv=[1,47],$Vw=[1,51],$Vx=[1,54],$Vy=[1,55],$Vz=[1,46],$VA=[1,63],$VB=[1,68],$VC=[1,20,21,22,23,38,42,47,59,60,79,80,81,82,83,84,88,98,99,102,104,105,111,112,113,114,115,116,117,118,119,120],$VD=[1,72],$VE=[1,71],$VF=[1,73],$VG=[20,21,23,74,75],$VH=[1,94],$VI=[1,99],$VJ=[1,102],$VK=[1,103],$VL=[1,96],$VM=[1,101],$VN=[1,104],$VO=[1,97],$VP=[1,109],$VQ=[1,108],$VR=[1,98],$VS=[1,100],$VT=[1,105],$VU=[1,106],$VV=[1,107],$VW=[1,110],$VX=[20,21,22,23,74,75],$VY=[20,21,22,23,48,74,75],$VZ=[20,21,22,23,40,47,48,50,52,54,56,58,59,60,62,64,66,67,69,74,75,84,88,98,99,102,104,105,115,116,117,118,119,120],$V_=[20,21,23],$V$=[20,21,23,47,59,60,74,75,84,88,98,99,102,104,105,115,116,117,118,119,120],$V01=[1,12,20,21,22,23,24,38,42,47,59,60,79,80,81,82,83,84,88,98,99,102,104,105,111,112,113,114,115,116,117,118,119,120],$V11=[47,59,60,84,88,98,99,102,104,105,115,116,117,118,119,120],$V21=[1,143],$V31=[1,151],$V41=[1,152],$V51=[1,153],$V61=[1,154],$V71=[1,138],$V81=[1,139],$V91=[1,135],$Va1=[1,146],$Vb1=[1,147],$Vc1=[1,148],$Vd1=[1,149],$Ve1=[1,150],$Vf1=[1,155],$Vg1=[1,156],$Vh1=[1,141],$Vi1=[1,144],$Vj1=[1,140],$Vk1=[1,137],$Vl1=[20,21,22,23,38,42,47,59,60,79,80,81,82,83,84,88,98,99,102,104,105,111,112,113,114,115,116,117,118,119,120],$Vm1=[1,159],$Vn1=[20,21,22,23,26,47,59,60,84,98,99,102,104,105,115,116,117,118,119,120],$Vo1=[20,21,22,23,24,26,38,40,41,42,47,51,53,55,57,59,60,61,63,65,66,68,70,74,75,79,80,81,82,83,84,85,88,98,99,102,104,105,106,107,115,116,117,118,119,120],$Vp1=[12,21,22,24],$Vq1=[22,99],$Vr1=[1,242],$Vs1=[1,237],$Vt1=[1,238],$Vu1=[1,246],$Vv1=[1,243],$Vw1=[1,240],$Vx1=[1,239],$Vy1=[1,241],$Vz1=[1,244],$VA1=[1,245],$VB1=[1,247],$VC1=[1,265],$VD1=[20,21,23,99],$VE1=[20,21,22,23,59,60,79,95,98,99,102,103,104,105,106];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"mermaidDoc\":4,\"directive\":5,\"openDirective\":6,\"typeDirective\":7,\"closeDirective\":8,\"separator\":9,\":\":10,\"argDirective\":11,\"open_directive\":12,\"type_directive\":13,\"arg_directive\":14,\"close_directive\":15,\"graphConfig\":16,\"document\":17,\"line\":18,\"statement\":19,\"SEMI\":20,\"NEWLINE\":21,\"SPACE\":22,\"EOF\":23,\"GRAPH\":24,\"NODIR\":25,\"DIR\":26,\"FirstStmtSeperator\":27,\"ending\":28,\"endToken\":29,\"spaceList\":30,\"spaceListNewline\":31,\"verticeStatement\":32,\"styleStatement\":33,\"linkStyleStatement\":34,\"classDefStatement\":35,\"classStatement\":36,\"clickStatement\":37,\"subgraph\":38,\"text\":39,\"SQS\":40,\"SQE\":41,\"end\":42,\"direction\":43,\"link\":44,\"node\":45,\"vertex\":46,\"AMP\":47,\"STYLE_SEPARATOR\":48,\"idString\":49,\"PS\":50,\"PE\":51,\"(-\":52,\"-)\":53,\"STADIUMSTART\":54,\"STADIUMEND\":55,\"SUBROUTINESTART\":56,\"SUBROUTINEEND\":57,\"VERTEX_WITH_PROPS_START\":58,\"ALPHA\":59,\"COLON\":60,\"PIPE\":61,\"CYLINDERSTART\":62,\"CYLINDEREND\":63,\"DIAMOND_START\":64,\"DIAMOND_STOP\":65,\"TAGEND\":66,\"TRAPSTART\":67,\"TRAPEND\":68,\"INVTRAPSTART\":69,\"INVTRAPEND\":70,\"linkStatement\":71,\"arrowText\":72,\"TESTSTR\":73,\"START_LINK\":74,\"LINK\":75,\"textToken\":76,\"STR\":77,\"keywords\":78,\"STYLE\":79,\"LINKSTYLE\":80,\"CLASSDEF\":81,\"CLASS\":82,\"CLICK\":83,\"DOWN\":84,\"UP\":85,\"textNoTags\":86,\"textNoTagsToken\":87,\"DEFAULT\":88,\"stylesOpt\":89,\"alphaNum\":90,\"CALLBACKNAME\":91,\"CALLBACKARGS\":92,\"HREF\":93,\"LINK_TARGET\":94,\"HEX\":95,\"numList\":96,\"INTERPOLATE\":97,\"NUM\":98,\"COMMA\":99,\"style\":100,\"styleComponent\":101,\"MINUS\":102,\"UNIT\":103,\"BRKT\":104,\"DOT\":105,\"PCT\":106,\"TAGSTART\":107,\"alphaNumToken\":108,\"idStringToken\":109,\"alphaNumStatement\":110,\"direction_tb\":111,\"direction_bt\":112,\"direction_rl\":113,\"direction_lr\":114,\"PUNCTUATION\":115,\"UNICODE_TEXT\":116,\"PLUS\":117,\"EQUALS\":118,\"MULT\":119,\"UNDERSCORE\":120,\"graphCodeTokens\":121,\"ARROW_CROSS\":122,\"ARROW_POINT\":123,\"ARROW_CIRCLE\":124,\"ARROW_OPEN\":125,\"QUOTE\":126,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",10:\":\",12:\"open_directive\",13:\"type_directive\",14:\"arg_directive\",15:\"close_directive\",20:\"SEMI\",21:\"NEWLINE\",22:\"SPACE\",23:\"EOF\",24:\"GRAPH\",25:\"NODIR\",26:\"DIR\",38:\"subgraph\",40:\"SQS\",41:\"SQE\",42:\"end\",47:\"AMP\",48:\"STYLE_SEPARATOR\",50:\"PS\",51:\"PE\",52:\"(-\",53:\"-)\",54:\"STADIUMSTART\",55:\"STADIUMEND\",56:\"SUBROUTINESTART\",57:\"SUBROUTINEEND\",58:\"VERTEX_WITH_PROPS_START\",59:\"ALPHA\",60:\"COLON\",61:\"PIPE\",62:\"CYLINDERSTART\",63:\"CYLINDEREND\",64:\"DIAMOND_START\",65:\"DIAMOND_STOP\",66:\"TAGEND\",67:\"TRAPSTART\",68:\"TRAPEND\",69:\"INVTRAPSTART\",70:\"INVTRAPEND\",73:\"TESTSTR\",74:\"START_LINK\",75:\"LINK\",77:\"STR\",79:\"STYLE\",80:\"LINKSTYLE\",81:\"CLASSDEF\",82:\"CLASS\",83:\"CLICK\",84:\"DOWN\",85:\"UP\",88:\"DEFAULT\",91:\"CALLBACKNAME\",92:\"CALLBACKARGS\",93:\"HREF\",94:\"LINK_TARGET\",95:\"HEX\",97:\"INTERPOLATE\",98:\"NUM\",99:\"COMMA\",102:\"MINUS\",103:\"UNIT\",104:\"BRKT\",105:\"DOT\",106:\"PCT\",107:\"TAGSTART\",111:\"direction_tb\",112:\"direction_bt\",113:\"direction_rl\",114:\"direction_lr\",115:\"PUNCTUATION\",116:\"UNICODE_TEXT\",117:\"PLUS\",118:\"EQUALS\",119:\"MULT\",120:\"UNDERSCORE\",122:\"ARROW_CROSS\",123:\"ARROW_POINT\",124:\"ARROW_CIRCLE\",125:\"ARROW_OPEN\",126:\"QUOTE\"},\nproductions_: [0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[45,1],[45,5],[45,3],[46,4],[46,6],[46,4],[46,4],[46,4],[46,8],[46,4],[46,4],[46,4],[46,6],[46,4],[46,4],[46,4],[46,4],[46,4],[46,1],[44,2],[44,3],[44,3],[44,1],[44,3],[71,1],[72,3],[39,1],[39,2],[39,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[78,1],[86,1],[86,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[96,1],[96,3],[89,1],[89,3],[100,1],[100,2],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[101,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[87,1],[87,1],[87,1],[87,1],[49,1],[49,2],[90,1],[90,2],[110,1],[110,1],[110,1],[110,1],[43,1],[43,1],[43,1],[43,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[109,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1],[121,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 5:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 6:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 7:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 8:\n yy.parseDirective('}%%', 'close_directive', 'flowchart'); \nbreak;\ncase 10:\n this.$ = [];\nbreak;\ncase 11:\n\n\t    if($$[$0] !== []){\n\t        $$[$0-1].push($$[$0]);\n\t    }\n\t    this.$=$$[$0-1];\nbreak;\ncase 12: case 78: case 80: case 92: case 148: case 150: case 151:\nthis.$=$$[$0];\nbreak;\ncase 19:\n yy.setDirection('TB');this.$ = 'TB';\nbreak;\ncase 20:\n yy.setDirection($$[$0-1]);this.$ = $$[$0-1];\nbreak;\ncase 35:\n /* console.warn('finat vs', $$[$0-1].nodes); */ this.$=$$[$0-1].nodes\nbreak;\ncase 36: case 37: case 38: case 39: case 40:\nthis.$=[];\nbreak;\ncase 41:\nthis.$=yy.addSubGraph($$[$0-6],$$[$0-1],$$[$0-4]);\nbreak;\ncase 42:\nthis.$=yy.addSubGraph($$[$0-3],$$[$0-1],$$[$0-3]);\nbreak;\ncase 43:\nthis.$=yy.addSubGraph(undefined,$$[$0-1],undefined);\nbreak;\ncase 48:\n /* console.warn('vs',$$[$0-2].stmt,$$[$0]); */ yy.addLink($$[$0-2].stmt,$$[$0],$$[$0-1]); this.$ = { stmt: $$[$0], nodes: $$[$0].concat($$[$0-2].nodes) } \nbreak;\ncase 49:\n /* console.warn('vs',$$[$0-3].stmt,$$[$0-1]); */ yy.addLink($$[$0-3].stmt,$$[$0-1],$$[$0-2]); this.$ = { stmt: $$[$0-1], nodes: $$[$0-1].concat($$[$0-3].nodes) } \nbreak;\ncase 50:\n/*console.warn('noda', $$[$0-1]);*/ this.$ = {stmt: $$[$0-1], nodes:$$[$0-1] }\nbreak;\ncase 51:\n /*console.warn('noda', $$[$0]);*/ this.$ = {stmt: $$[$0], nodes:$$[$0] }\nbreak;\ncase 52:\n /* console.warn('nod', $$[$0]); */ this.$ = [$$[$0]];\nbreak;\ncase 53:\n this.$ = $$[$0-4].concat($$[$0]); /* console.warn('pip', $$[$0-4][0], $$[$0], this.$); */ \nbreak;\ncase 54:\nthis.$ = [$$[$0-2]];yy.setClass($$[$0-2],$$[$0])\nbreak;\ncase 55:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'square');\nbreak;\ncase 56:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'circle');\nbreak;\ncase 57:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'ellipse');\nbreak;\ncase 58:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'stadium');\nbreak;\ncase 59:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'subroutine');\nbreak;\ncase 60:\nthis.$ = $$[$0-7];yy.addVertex($$[$0-7],$$[$0-1],'rect',undefined,undefined,undefined, Object.fromEntries([[$$[$0-5], $$[$0-3]]]));\nbreak;\ncase 61:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'cylinder');\nbreak;\ncase 62:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'round');\nbreak;\ncase 63:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'diamond');\nbreak;\ncase 64:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'hexagon');\nbreak;\ncase 65:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'odd');\nbreak;\ncase 66:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'trapezoid');\nbreak;\ncase 67:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'inv_trapezoid');\nbreak;\ncase 68:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_right');\nbreak;\ncase 69:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_left');\nbreak;\ncase 70:\n /*console.warn('h: ', $$[$0]);*/this.$ = $$[$0];yy.addVertex($$[$0]);\nbreak;\ncase 71:\n$$[$0-1].text = $$[$0];this.$ = $$[$0-1];\nbreak;\ncase 72: case 73:\n$$[$0-2].text = $$[$0-1];this.$ = $$[$0-2];\nbreak;\ncase 74:\nthis.$ = $$[$0];\nbreak;\ncase 75:\nvar inf = yy.destructLink($$[$0], $$[$0-2]); this.$ = {\"type\":inf.type,\"stroke\":inf.stroke,\"length\":inf.length,\"text\":$$[$0-1]};\nbreak;\ncase 76:\nvar inf = yy.destructLink($$[$0]);this.$ = {\"type\":inf.type,\"stroke\":inf.stroke,\"length\":inf.length};\nbreak;\ncase 77:\nthis.$ = $$[$0-1];\nbreak;\ncase 79: case 93: case 149:\nthis.$=$$[$0-1]+''+$$[$0];\nbreak;\ncase 94: case 95:\nthis.$ = $$[$0-4];yy.addClass($$[$0-2],$$[$0]);\nbreak;\ncase 96:\nthis.$ = $$[$0-4];yy.setClass($$[$0-2], $$[$0]);\nbreak;\ncase 97: case 105:\nthis.$ = $$[$0-1];yy.setClickEvent($$[$0-1], $$[$0]);\nbreak;\ncase 98: case 106:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 99:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 100:\nthis.$ = $$[$0-4];yy.setClickEvent($$[$0-4], $$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-4], $$[$0]);\nbreak;\ncase 101: case 107:\nthis.$ = $$[$0-1];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 102: case 108:\nthis.$ = $$[$0-3];yy.setLink($$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 103: case 109:\nthis.$ = $$[$0-3];yy.setLink($$[$0-3], $$[$0-2], $$[$0]);\nbreak;\ncase 104: case 110:\nthis.$ = $$[$0-5];yy.setLink($$[$0-5], $$[$0-4], $$[$0]);yy.setTooltip($$[$0-5], $$[$0-2]);\nbreak;\ncase 111:\nthis.$ = $$[$0-4];yy.addVertex($$[$0-2],undefined,undefined,$$[$0]);\nbreak;\ncase 112: case 114:\nthis.$ = $$[$0-4];yy.updateLink($$[$0-2],$$[$0]);\nbreak;\ncase 113:\nthis.$ = $$[$0-4];yy.updateLink([$$[$0-2]],$$[$0]);\nbreak;\ncase 115:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate([$$[$0-6]],$$[$0-2]);yy.updateLink([$$[$0-6]],$$[$0]);\nbreak;\ncase 116:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate($$[$0-6],$$[$0-2]);yy.updateLink($$[$0-6],$$[$0]);\nbreak;\ncase 117:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate([$$[$0-4]],$$[$0]);\nbreak;\ncase 118:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate($$[$0-4],$$[$0]);\nbreak;\ncase 119: case 121:\nthis.$ = [$$[$0]]\nbreak;\ncase 120: case 122:\n$$[$0-2].push($$[$0]);this.$ = $$[$0-2];\nbreak;\ncase 124:\nthis.$ = $$[$0-1] + $$[$0];\nbreak;\ncase 146:\nthis.$=$$[$0]\nbreak;\ncase 147:\nthis.$=$$[$0-1]+''+$$[$0]\nbreak;\ncase 152:\nthis.$='v';\nbreak;\ncase 153:\nthis.$='-';\nbreak;\ncase 154:\n this.$={stmt:'dir', value:'TB'};\nbreak;\ncase 155:\n this.$={stmt:'dir', value:'BT'};\nbreak;\ncase 156:\n this.$={stmt:'dir', value:'RL'};\nbreak;\ncase 157:\n this.$={stmt:'dir', value:'LR'};\nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:5,12:$V0,16:4,21:$V1,22:$V2,24:$V3},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:$V0,16:4,21:$V1,22:$V2,24:$V3},o($V4,$V5,{17:11}),{7:12,13:[1,13]},{16:14,21:$V1,22:$V2,24:$V3},{16:15,21:$V1,22:$V2,24:$V3},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,43:31,45:32,46:42,47:$Vb,49:43,59:$Vc,60:$Vd,79:$Ve,80:$Vf,81:$Vg,82:$Vh,83:$Vi,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,111:$Vq,112:$Vr,113:$Vs,114:$Vt,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},{8:61,10:[1,62],15:$VA},o([10,15],[2,6]),o($V4,[2,17]),o($V4,[2,18]),o($V4,[2,19]),{20:[1,65],21:[1,66],22:$VB,27:64,30:67},o($VC,[2,11]),o($VC,[2,12]),o($VC,[2,13]),o($VC,[2,14]),o($VC,[2,15]),o($VC,[2,16]),{9:69,20:$VD,21:$VE,23:$VF,44:70,71:74,74:[1,75],75:[1,76]},{9:77,20:$VD,21:$VE,23:$VF},{9:78,20:$VD,21:$VE,23:$VF},{9:79,20:$VD,21:$VE,23:$VF},{9:80,20:$VD,21:$VE,23:$VF},{9:81,20:$VD,21:$VE,23:$VF},{9:83,20:$VD,21:$VE,22:[1,82],23:$VF},o($VC,[2,44]),o($VG,[2,51],{30:84,22:$VB}),{22:[1,85]},{22:[1,86]},{22:[1,87]},{22:[1,88]},{26:$VH,47:$VI,59:$VJ,60:$VK,77:[1,92],84:$VL,90:91,91:[1,89],93:[1,90],98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($VC,[2,154]),o($VC,[2,155]),o($VC,[2,156]),o($VC,[2,157]),o($VX,[2,52],{48:[1,111]}),o($VY,[2,70],{109:123,40:[1,112],47:$Vb,50:[1,113],52:[1,114],54:[1,115],56:[1,116],58:[1,117],59:$Vc,60:$Vd,62:[1,118],64:[1,119],66:[1,120],67:[1,121],69:[1,122],84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz}),o($VZ,[2,146]),o($VZ,[2,171]),o($VZ,[2,172]),o($VZ,[2,173]),o($VZ,[2,174]),o($VZ,[2,175]),o($VZ,[2,176]),o($VZ,[2,177]),o($VZ,[2,178]),o($VZ,[2,179]),o($VZ,[2,180]),o($VZ,[2,181]),o($VZ,[2,182]),o($VZ,[2,183]),o($VZ,[2,184]),o($VZ,[2,185]),o($VZ,[2,186]),{9:124,20:$VD,21:$VE,23:$VF},{11:125,14:[1,126]},o($V_,[2,8]),o($V4,[2,20]),o($V4,[2,26]),o($V4,[2,27]),{21:[1,127]},o($V$,[2,34],{30:128,22:$VB}),o($VC,[2,35]),{45:129,46:42,47:$Vb,49:43,59:$Vc,60:$Vd,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},o($V01,[2,45]),o($V01,[2,46]),o($V01,[2,47]),o($V11,[2,74],{72:130,61:[1,132],73:[1,131]}),{22:$V21,24:$V31,26:$V41,38:$V51,39:133,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o([47,59,60,61,73,84,88,98,99,102,104,105,115,116,117,118,119,120],[2,76]),o($VC,[2,36]),o($VC,[2,37]),o($VC,[2,38]),o($VC,[2,39]),o($VC,[2,40]),{22:$V21,24:$V31,26:$V41,38:$V51,39:157,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($Vl1,$V5,{17:158}),o($VG,[2,50],{47:$Vm1}),{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,90:160,95:[1,161],98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{88:[1,162],96:163,98:[1,164]},{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,88:[1,165],90:166,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,90:167,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($V_,[2,97],{22:[1,168],92:[1,169]}),o($V_,[2,101],{22:[1,170]}),o($V_,[2,105],{108:95,110:172,22:[1,171],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW}),o($V_,[2,107],{22:[1,173]}),o($Vn1,[2,148]),o($Vn1,[2,150]),o($Vn1,[2,151]),o($Vn1,[2,152]),o($Vn1,[2,153]),o($Vo1,[2,158]),o($Vo1,[2,159]),o($Vo1,[2,160]),o($Vo1,[2,161]),o($Vo1,[2,162]),o($Vo1,[2,163]),o($Vo1,[2,164]),o($Vo1,[2,165]),o($Vo1,[2,166]),o($Vo1,[2,167]),o($Vo1,[2,168]),o($Vo1,[2,169]),o($Vo1,[2,170]),{47:$Vb,49:174,59:$Vc,60:$Vd,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},{22:$V21,24:$V31,26:$V41,38:$V51,39:175,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:177,42:$V61,47:$VI,50:[1,176],59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:178,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:179,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:180,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{59:[1,181]},{22:$V21,24:$V31,26:$V41,38:$V51,39:182,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:183,42:$V61,47:$VI,59:$VJ,60:$VK,64:[1,184],66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:185,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:186,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:187,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($VZ,[2,147]),o($Vp1,[2,3]),{8:188,15:$VA},{15:[2,7]},o($V4,[2,28]),o($V$,[2,33]),o($VG,[2,48],{30:189,22:$VB}),o($V11,[2,71],{22:[1,190]}),{22:[1,191]},{22:$V21,24:$V31,26:$V41,38:$V51,39:192,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,75:[1,193],76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($Vo1,[2,78]),o($Vo1,[2,80]),o($Vo1,[2,136]),o($Vo1,[2,137]),o($Vo1,[2,138]),o($Vo1,[2,139]),o($Vo1,[2,140]),o($Vo1,[2,141]),o($Vo1,[2,142]),o($Vo1,[2,143]),o($Vo1,[2,144]),o($Vo1,[2,145]),o($Vo1,[2,81]),o($Vo1,[2,82]),o($Vo1,[2,83]),o($Vo1,[2,84]),o($Vo1,[2,85]),o($Vo1,[2,86]),o($Vo1,[2,87]),o($Vo1,[2,88]),o($Vo1,[2,89]),o($Vo1,[2,90]),o($Vo1,[2,91]),{9:196,20:$VD,21:$VE,22:$V21,23:$VF,24:$V31,26:$V41,38:$V51,40:[1,195],42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,197],43:31,45:32,46:42,47:$Vb,49:43,59:$Vc,60:$Vd,79:$Ve,80:$Vf,81:$Vg,82:$Vh,83:$Vi,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,111:$Vq,112:$Vr,113:$Vs,114:$Vt,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},{22:$VB,30:198},{22:[1,199],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:172,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:[1,200]},{22:[1,201]},{22:[1,202],99:[1,203]},o($Vq1,[2,119]),{22:[1,204]},{22:[1,205],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:172,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:[1,206],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:172,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{77:[1,207]},o($V_,[2,99],{22:[1,208]}),{77:[1,209],94:[1,210]},{77:[1,211]},o($Vn1,[2,149]),{77:[1,212],94:[1,213]},o($VX,[2,54],{109:123,47:$Vb,59:$Vc,60:$Vd,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz}),{22:$V21,24:$V31,26:$V41,38:$V51,41:[1,214],42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:215,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,51:[1,216],59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,53:[1,217],59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,55:[1,218],59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,57:[1,219],59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{60:[1,220]},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,63:[1,221],66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,65:[1,222],66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,39:223,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,41:[1,224],42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,68:[1,225],70:[1,226],74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,68:[1,228],70:[1,227],74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{9:229,20:$VD,21:$VE,23:$VF},o($VG,[2,49],{47:$Vm1}),o($V11,[2,73]),o($V11,[2,72]),{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,61:[1,230],66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($V11,[2,75]),o($Vo1,[2,79]),{22:$V21,24:$V31,26:$V41,38:$V51,39:231,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($Vl1,$V5,{17:232}),o($VC,[2,43]),{46:233,47:$Vb,49:43,59:$Vc,60:$Vd,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:234,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:248,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:249,95:$Vv1,97:[1,250],98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:251,95:$Vv1,97:[1,252],98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{98:[1,253]},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:254,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:255,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,90:256,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($V_,[2,98]),{77:[1,257]},o($V_,[2,102],{22:[1,258]}),o($V_,[2,103]),o($V_,[2,106]),o($V_,[2,108],{22:[1,259]}),o($V_,[2,109]),o($VY,[2,55]),{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,51:[1,260],59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($VY,[2,62]),o($VY,[2,57]),o($VY,[2,58]),o($VY,[2,59]),{59:[1,261]},o($VY,[2,61]),o($VY,[2,63]),{22:$V21,24:$V31,26:$V41,38:$V51,42:$V61,47:$VI,59:$VJ,60:$VK,65:[1,262],66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($VY,[2,65]),o($VY,[2,66]),o($VY,[2,68]),o($VY,[2,67]),o($VY,[2,69]),o($Vp1,[2,4]),o([22,47,59,60,84,88,98,99,102,104,105,115,116,117,118,119,120],[2,77]),{22:$V21,24:$V31,26:$V41,38:$V51,41:[1,263],42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,264],43:31,45:32,46:42,47:$Vb,49:43,59:$Vc,60:$Vd,79:$Ve,80:$Vf,81:$Vg,82:$Vh,83:$Vi,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,111:$Vq,112:$Vr,113:$Vs,114:$Vt,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},o($VX,[2,53]),o($V_,[2,111],{99:$VC1}),o($VD1,[2,121],{101:266,22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,95:$Vv1,98:$Vw1,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1}),o($VE1,[2,123]),o($VE1,[2,125]),o($VE1,[2,126]),o($VE1,[2,127]),o($VE1,[2,128]),o($VE1,[2,129]),o($VE1,[2,130]),o($VE1,[2,131]),o($VE1,[2,132]),o($VE1,[2,133]),o($VE1,[2,134]),o($VE1,[2,135]),o($V_,[2,112],{99:$VC1}),o($V_,[2,113],{99:$VC1}),{22:[1,267]},o($V_,[2,114],{99:$VC1}),{22:[1,268]},o($Vq1,[2,120]),o($V_,[2,94],{99:$VC1}),o($V_,[2,95],{99:$VC1}),o($V_,[2,96],{108:95,110:172,26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW}),o($V_,[2,100]),{94:[1,269]},{94:[1,270]},{51:[1,271]},{61:[1,272]},{65:[1,273]},{9:274,20:$VD,21:$VE,23:$VF},o($VC,[2,42]),{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,95:$Vv1,98:$Vw1,100:275,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},o($VE1,[2,124]),{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,90:276,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,90:277,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,108:95,110:93,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($V_,[2,104]),o($V_,[2,110]),o($VY,[2,56]),{22:$V21,24:$V31,26:$V41,38:$V51,39:278,42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:134,77:$V91,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},o($VY,[2,64]),o($Vl1,$V5,{17:279}),o($VD1,[2,122],{101:266,22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,95:$Vv1,98:$Vw1,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1}),o($V_,[2,117],{108:95,110:172,22:[1,280],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW}),o($V_,[2,118],{108:95,110:172,22:[1,281],26:$VH,47:$VI,59:$VJ,60:$VK,84:$VL,98:$VM,99:$VN,102:$VO,104:$VP,105:$VQ,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW}),{22:$V21,24:$V31,26:$V41,38:$V51,41:[1,282],42:$V61,47:$VI,59:$VJ,60:$VK,66:$V71,74:$V81,76:194,78:145,79:$Va1,80:$Vb1,81:$Vc1,82:$Vd1,83:$Ve1,84:$Vf1,85:$Vg1,87:136,88:$Vh1,98:$VM,99:$VN,102:$Vi1,104:$VP,105:$VQ,106:$Vj1,107:$Vk1,108:142,115:$VR,116:$VS,117:$VT,118:$VU,119:$VV,120:$VW},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,283],43:31,45:32,46:42,47:$Vb,49:43,59:$Vc,60:$Vd,79:$Ve,80:$Vf,81:$Vg,82:$Vh,83:$Vi,84:$Vj,88:$Vk,98:$Vl,99:$Vm,102:$Vn,104:$Vo,105:$Vp,109:44,111:$Vq,112:$Vr,113:$Vs,114:$Vt,115:$Vu,116:$Vv,117:$Vw,118:$Vx,119:$Vy,120:$Vz},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:284,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},{22:$Vr1,59:$Vs1,60:$Vt1,79:$Vu1,89:285,95:$Vv1,98:$Vw1,100:235,101:236,102:$Vx1,103:$Vy1,104:$Vz1,105:$VA1,106:$VB1},o($VY,[2,60]),o($VC,[2,41]),o($V_,[2,115],{99:$VC1}),o($V_,[2,116],{99:$VC1})],\ndefaultActions: {2:[2,1],9:[2,5],10:[2,2],126:[2,7]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 12; \nbreak;\ncase 1: this.begin('type_directive'); return 13; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 10; \nbreak;\ncase 3: this.popState(); this.popState(); return 15; \nbreak;\ncase 4:return 14;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7:this.begin(\"string\");\nbreak;\ncase 8:this.popState();\nbreak;\ncase 9:return \"STR\";\nbreak;\ncase 10:return 79;\nbreak;\ncase 11:return 88;\nbreak;\ncase 12:return 80;\nbreak;\ncase 13:return 97;\nbreak;\ncase 14:return 81;\nbreak;\ncase 15:return 82;\nbreak;\ncase 16:this.begin(\"href\");\nbreak;\ncase 17:this.popState();\nbreak;\ncase 18:return 93;\nbreak;\ncase 19:this.begin(\"callbackname\");\nbreak;\ncase 20:this.popState();\nbreak;\ncase 21:this.popState(); this.begin(\"callbackargs\");\nbreak;\ncase 22:return 91;\nbreak;\ncase 23:this.popState();\nbreak;\ncase 24:return 92;\nbreak;\ncase 25:this.begin(\"click\");\nbreak;\ncase 26:this.popState();\nbreak;\ncase 27:return 83;\nbreak;\ncase 28:if(yy.lex.firstGraph()){this.begin(\"dir\");}  return 24;\nbreak;\ncase 29:if(yy.lex.firstGraph()){this.begin(\"dir\");}  return 24;\nbreak;\ncase 30:return 38;\nbreak;\ncase 31:return 42;\nbreak;\ncase 32:return 94;\nbreak;\ncase 33:return 94;\nbreak;\ncase 34:return 94;\nbreak;\ncase 35:return 94;\nbreak;\ncase 36:   this.popState();  return 25; \nbreak;\ncase 37:   this.popState();  return 26; \nbreak;\ncase 38:   this.popState();  return 26; \nbreak;\ncase 39:   this.popState();  return 26; \nbreak;\ncase 40:   this.popState();  return 26; \nbreak;\ncase 41:   this.popState();  return 26; \nbreak;\ncase 42:   this.popState();  return 26; \nbreak;\ncase 43:   this.popState();  return 26; \nbreak;\ncase 44:   this.popState();  return 26; \nbreak;\ncase 45:   this.popState();  return 26; \nbreak;\ncase 46:   this.popState();  return 26; \nbreak;\ncase 47:return 111;\nbreak;\ncase 48:return 112;\nbreak;\ncase 49:return 113;\nbreak;\ncase 50:return 114;\nbreak;\ncase 51: return 98;\nbreak;\ncase 52:return 104;\nbreak;\ncase 53:return 48;\nbreak;\ncase 54:return 60;\nbreak;\ncase 55:return 47;\nbreak;\ncase 56:return 20;\nbreak;\ncase 57:return 99;\nbreak;\ncase 58:return 119;\nbreak;\ncase 59:return 75;\nbreak;\ncase 60:return 75;\nbreak;\ncase 61:return 75;\nbreak;\ncase 62:return 74;\nbreak;\ncase 63:return 74;\nbreak;\ncase 64:return 74;\nbreak;\ncase 65:return 52;\nbreak;\ncase 66:return 53;\nbreak;\ncase 67:return 54;\nbreak;\ncase 68:return 55;\nbreak;\ncase 69:return 56;\nbreak;\ncase 70:return 57;\nbreak;\ncase 71:return 58;\nbreak;\ncase 72:return 62;\nbreak;\ncase 73:return 63;\nbreak;\ncase 74:return 102;\nbreak;\ncase 75:return 105;\nbreak;\ncase 76:return 120;\nbreak;\ncase 77:return 117;\nbreak;\ncase 78:return 106;\nbreak;\ncase 79:return 118;\nbreak;\ncase 80:return 118;\nbreak;\ncase 81:return 107;\nbreak;\ncase 82:return 66;\nbreak;\ncase 83:return 85;\nbreak;\ncase 84:return 'SEP';\nbreak;\ncase 85:return 84;\nbreak;\ncase 86:return 59;\nbreak;\ncase 87:return 68;\nbreak;\ncase 88:return 67;\nbreak;\ncase 89:return 70;\nbreak;\ncase 90:return 69;\nbreak;\ncase 91:return 115;\nbreak;\ncase 92:return 116;\nbreak;\ncase 93:return 61;\nbreak;\ncase 94:return 50;\nbreak;\ncase 95:return 51;\nbreak;\ncase 96:return 40;\nbreak;\ncase 97:return 41;\nbreak;\ncase 98:return 64\nbreak;\ncase 99:return 65\nbreak;\ncase 100:return 126;\nbreak;\ncase 101:return 21;\nbreak;\ncase 102:return 22;\nbreak;\ncase 103:return 23;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/,/^(?:((?:(?!\\}%%)[^:.])*))/,/^(?::)/,/^(?:\\}%%)/,/^(?:((?:(?!\\}%%).|\\n)*))/,/^(?:%%(?!\\{)[^\\n]*)/,/^(?:[^\\}]%%[^\\n]*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:style\\b)/,/^(?:default\\b)/,/^(?:linkStyle\\b)/,/^(?:interpolate\\b)/,/^(?:classDef\\b)/,/^(?:class\\b)/,/^(?:href[\\s]+[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:call[\\s]+)/,/^(?:\\([\\s]*\\))/,/^(?:\\()/,/^(?:[^(]*)/,/^(?:\\))/,/^(?:[^)]*)/,/^(?:click[\\s]+)/,/^(?:[\\s\\n])/,/^(?:[^\\s\\n]*)/,/^(?:graph\\b)/,/^(?:flowchart\\b)/,/^(?:subgraph\\b)/,/^(?:end\\b\\s*)/,/^(?:_self\\b)/,/^(?:_blank\\b)/,/^(?:_parent\\b)/,/^(?:_top\\b)/,/^(?:(\\r?\\n)*\\s*\\n)/,/^(?:\\s*LR\\b)/,/^(?:\\s*RL\\b)/,/^(?:\\s*TB\\b)/,/^(?:\\s*BT\\b)/,/^(?:\\s*TD\\b)/,/^(?:\\s*BR\\b)/,/^(?:\\s*<)/,/^(?:\\s*>)/,/^(?:\\s*\\^)/,/^(?:\\s*v\\b)/,/^(?:.*direction\\s+TB[^\\n]*)/,/^(?:.*direction\\s+BT[^\\n]*)/,/^(?:.*direction\\s+RL[^\\n]*)/,/^(?:.*direction\\s+LR[^\\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\\*)/,/^(?:\\s*[xo<]?--+[-xo>]\\s*)/,/^(?:\\s*[xo<]?==+[=xo>]\\s*)/,/^(?:\\s*[xo<]?-?\\.+-[xo>]?\\s*)/,/^(?:\\s*[xo<]?--\\s*)/,/^(?:\\s*[xo<]?==\\s*)/,/^(?:\\s*[xo<]?-\\.\\s*)/,/^(?:\\(-)/,/^(?:-\\))/,/^(?:\\(\\[)/,/^(?:\\]\\))/,/^(?:\\[\\[)/,/^(?:\\]\\])/,/^(?:\\[\\|)/,/^(?:\\[\\()/,/^(?:\\)\\])/,/^(?:-)/,/^(?:\\.)/,/^(?:[\\_])/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\\^)/,/^(?:\\\\\\|)/,/^(?:v\\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\\\\])/,/^(?:\\[\\/)/,/^(?:\\/\\])/,/^(?:\\[\\\\)/,/^(?:[!\"#$%&'*+,-.`?\\\\_/])/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\|)/,/^(?:\\()/,/^(?:\\))/,/^(?:\\[)/,/^(?:\\])/,/^(?:\\{)/,/^(?:\\})/,/^(?:\")/,/^(?:(\\r?\\n)+)/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"callbackargs\":{\"rules\":[23,24],\"inclusive\":false},\"callbackname\":{\"rules\":[20,21,22],\"inclusive\":false},\"href\":{\"rules\":[17,18],\"inclusive\":false},\"click\":{\"rules\":[26,27],\"inclusive\":false},\"vertex\":{\"rules\":[],\"inclusive\":false},\"dir\":{\"rules\":[36,37,38,39,40,41,42,43,44,45,46],\"inclusive\":false},\"string\":{\"rules\":[8,9],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,10,11,12,13,14,15,16,19,25,28,29,30,31,32,33,34,35,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,5],$V2=[7,9,11,12,13,14,15,16,17,18,19,20,22,29,34],$V3=[1,15],$V4=[1,16],$V5=[1,17],$V6=[1,18],$V7=[1,19],$V8=[1,20],$V9=[1,21],$Va=[1,22],$Vb=[1,23],$Vc=[1,25],$Vd=[1,27],$Ve=[1,30],$Vf=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,29,34];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"directive\":4,\"gantt\":5,\"document\":6,\"EOF\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NL\":11,\"dateFormat\":12,\"inclusiveEndDates\":13,\"topAxis\":14,\"axisFormat\":15,\"excludes\":16,\"includes\":17,\"todayMarker\":18,\"title\":19,\"section\":20,\"clickStatement\":21,\"taskTxt\":22,\"taskData\":23,\"openDirective\":24,\"typeDirective\":25,\"closeDirective\":26,\":\":27,\"argDirective\":28,\"click\":29,\"callbackname\":30,\"callbackargs\":31,\"href\":32,\"clickStatementDebug\":33,\"open_directive\":34,\"type_directive\":35,\"arg_directive\":36,\"close_directive\":37,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"gantt\",7:\"EOF\",9:\"SPACE\",11:\"NL\",12:\"dateFormat\",13:\"inclusiveEndDates\",14:\"topAxis\",15:\"axisFormat\",16:\"excludes\",17:\"includes\",18:\"todayMarker\",19:\"title\",20:\"section\",22:\"taskTxt\",23:\"taskData\",27:\":\",29:\"click\",30:\"callbackname\",31:\"callbackargs\",32:\"href\",34:\"open_directive\",35:\"type_directive\",36:\"arg_directive\",37:\"close_directive\"},\nproductions_: [0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[21,2],[21,3],[21,3],[21,4],[21,3],[21,4],[21,2],[33,2],[33,3],[33,3],[33,4],[33,3],[33,4],[33,2],[24,1],[25,1],[28,1],[26,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 2:\n return $$[$0-1]; \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 9:\nyy.setDateFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 10:\nyy.enableInclusiveEndDates();this.$=$$[$0].substr(18);\nbreak;\ncase 11:\nyy.TopAxis();this.$=$$[$0].substr(8);\nbreak;\ncase 12:\nyy.setAxisFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 13:\nyy.setExcludes($$[$0].substr(9));this.$=$$[$0].substr(9);\nbreak;\ncase 14:\nyy.setIncludes($$[$0].substr(9));this.$=$$[$0].substr(9);\nbreak;\ncase 15:\nyy.setTodayMarker($$[$0].substr(12));this.$=$$[$0].substr(12);\nbreak;\ncase 16:\nyy.setTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\ncase 17:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 19:\nyy.addTask($$[$0-1],$$[$0]);this.$='task';\nbreak;\ncase 23:\nthis.$ = $$[$0-1];yy.setClickEvent($$[$0-1], $$[$0], null);\nbreak;\ncase 24:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 25:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], null);yy.setLink($$[$0-2],$$[$0]);\nbreak;\ncase 26:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-2], $$[$0-1]);yy.setLink($$[$0-3],$$[$0]);\nbreak;\ncase 27:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0], null);yy.setLink($$[$0-2],$$[$0-1]);\nbreak;\ncase 28:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-1], $$[$0]);yy.setLink($$[$0-3],$$[$0-2]);\nbreak;\ncase 29:\nthis.$ = $$[$0-1];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 30: case 36:\nthis.$=$$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 31: case 32: case 34:\nthis.$=$$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 33: case 35:\nthis.$=$$[$0-3] + ' ' + $$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 37:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 38:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 39:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 40:\n yy.parseDirective('}%%', 'close_directive', 'gantt'); \nbreak;\n}\n},\ntable: [{3:1,4:2,5:$V0,24:4,34:$V1},{1:[3]},{3:6,4:2,5:$V0,24:4,34:$V1},o($V2,[2,3],{6:7}),{25:8,35:[1,9]},{35:[2,37]},{1:[2,1]},{4:26,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:$V3,13:$V4,14:$V5,15:$V6,16:$V7,17:$V8,18:$V9,19:$Va,20:$Vb,21:24,22:$Vc,24:4,29:$Vd,34:$V1},{26:28,27:[1,29],37:$Ve},o([27,37],[2,38]),o($V2,[2,8],{1:[2,2]}),o($V2,[2,4]),{4:26,10:31,12:$V3,13:$V4,14:$V5,15:$V6,16:$V7,17:$V8,18:$V9,19:$Va,20:$Vb,21:24,22:$Vc,24:4,29:$Vd,34:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,9]),o($V2,[2,10]),o($V2,[2,11]),o($V2,[2,12]),o($V2,[2,13]),o($V2,[2,14]),o($V2,[2,15]),o($V2,[2,16]),o($V2,[2,17]),o($V2,[2,18]),{23:[1,32]},o($V2,[2,20]),{30:[1,33],32:[1,34]},{11:[1,35]},{28:36,36:[1,37]},{11:[2,40]},o($V2,[2,5]),o($V2,[2,19]),o($V2,[2,23],{31:[1,38],32:[1,39]}),o($V2,[2,29],{30:[1,40]}),o($Vf,[2,21]),{26:41,37:$Ve},{37:[2,39]},o($V2,[2,24],{32:[1,42]}),o($V2,[2,25]),o($V2,[2,27],{31:[1,43]}),{11:[1,44]},o($V2,[2,26]),o($V2,[2,28]),o($Vf,[2,22])],\ndefaultActions: {5:[2,37],6:[2,1],30:[2,40],37:[2,39]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 34; \nbreak;\ncase 1: this.begin('type_directive'); return 35; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 27; \nbreak;\ncase 3: this.popState(); this.popState(); return 37; \nbreak;\ncase 4:return 36;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7:/* do nothing */\nbreak;\ncase 8:return 11;\nbreak;\ncase 9:/* skip whitespace */\nbreak;\ncase 10:/* skip comments */\nbreak;\ncase 11:/* skip comments */\nbreak;\ncase 12:this.begin(\"href\");\nbreak;\ncase 13:this.popState();\nbreak;\ncase 14:return 32;\nbreak;\ncase 15:this.begin(\"callbackname\");\nbreak;\ncase 16:this.popState();\nbreak;\ncase 17:this.popState(); this.begin(\"callbackargs\");\nbreak;\ncase 18:return 30;\nbreak;\ncase 19:this.popState();\nbreak;\ncase 20:return 31;\nbreak;\ncase 21:this.begin(\"click\");\nbreak;\ncase 22:this.popState();\nbreak;\ncase 23:return 29;\nbreak;\ncase 24:return 5;\nbreak;\ncase 25:return 12;\nbreak;\ncase 26:return 13;\nbreak;\ncase 27:return 14;\nbreak;\ncase 28:return 15;\nbreak;\ncase 29:return 17;\nbreak;\ncase 30:return 16;\nbreak;\ncase 31:return 18;\nbreak;\ncase 32:return 'date';\nbreak;\ncase 33:return 19;\nbreak;\ncase 34:return 20;\nbreak;\ncase 35:return 22;\nbreak;\ncase 36:return 23;\nbreak;\ncase 37:return 27;\nbreak;\ncase 38:return 7;\nbreak;\ncase 39:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%%(?!\\{)*[^\\n]*)/i,/^(?:[^\\}]%%*[^\\n]*)/i,/^(?:%%*[^\\n]*[\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:href[\\s]+[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:call[\\s]+)/i,/^(?:\\([\\s]*\\))/i,/^(?:\\()/i,/^(?:[^(]*)/i,/^(?:\\))/i,/^(?:[^)]*)/i,/^(?:click[\\s]+)/i,/^(?:[\\s\\n])/i,/^(?:[^\\s\\n]*)/i,/^(?:gantt\\b)/i,/^(?:dateFormat\\s[^#\\n;]+)/i,/^(?:inclusiveEndDates\\b)/i,/^(?:topAxis\\b)/i,/^(?:axisFormat\\s[^#\\n;]+)/i,/^(?:includes\\s[^#\\n;]+)/i,/^(?:excludes\\s[^#\\n;]+)/i,/^(?:todayMarker\\s[^\\n;]+)/i,/^(?:\\d\\d\\d\\d-\\d\\d-\\d\\d\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:section\\s[^#:\\n;]+)/i,/^(?:[^#:\\n;]+)/i,/^(?::[^#\\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"callbackargs\":{\"rules\":[19,20],\"inclusive\":false},\"callbackname\":{\"rules\":[16,17,18],\"inclusive\":false},\"href\":{\"rules\":[13,14],\"inclusive\":false},\"click\":{\"rules\":[22,23],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,11,12,15,21,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[2,3],$V1=[1,7],$V2=[7,12,15,17,19,20,21],$V3=[7,11,12,15,17,19,20,21],$V4=[2,20],$V5=[1,32];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"GG\":4,\":\":5,\"document\":6,\"EOF\":7,\"DIR\":8,\"options\":9,\"body\":10,\"OPT\":11,\"NL\":12,\"line\":13,\"statement\":14,\"COMMIT\":15,\"commit_arg\":16,\"BRANCH\":17,\"ID\":18,\"CHECKOUT\":19,\"MERGE\":20,\"RESET\":21,\"reset_arg\":22,\"STR\":23,\"HEAD\":24,\"reset_parents\":25,\"CARET\":26,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"GG\",5:\":\",7:\"EOF\",8:\"DIR\",11:\"OPT\",12:\"NL\",15:\"COMMIT\",17:\"BRANCH\",18:\"ID\",19:\"CHECKOUT\",20:\"MERGE\",21:\"RESET\",23:\"STR\",24:\"HEAD\",26:\"CARET\"},\nproductions_: [0,[3,4],[3,5],[6,0],[6,2],[9,2],[9,1],[10,0],[10,2],[13,2],[13,1],[14,2],[14,2],[14,2],[14,2],[14,2],[16,0],[16,1],[22,2],[22,2],[25,0],[25,2]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return $$[$0-1]; \nbreak;\ncase 2:\nyy.setDirection($$[$0-3]); return $$[$0-1];\nbreak;\ncase 4:\n yy.setOptions($$[$0-1]); this.$ = $$[$0]\nbreak;\ncase 5:\n$$[$0-1] +=$$[$0]; this.$=$$[$0-1]\nbreak;\ncase 7:\nthis.$ = []\nbreak;\ncase 8:\n$$[$0-1].push($$[$0]); this.$=$$[$0-1];\nbreak;\ncase 9:\nthis.$ =$$[$0-1]\nbreak;\ncase 11:\nyy.commit($$[$0])\nbreak;\ncase 12:\nyy.branch($$[$0])\nbreak;\ncase 13:\nyy.checkout($$[$0])\nbreak;\ncase 14:\nyy.merge($$[$0])\nbreak;\ncase 15:\nyy.reset($$[$0])\nbreak;\ncase 16:\nthis.$ = \"\"\nbreak;\ncase 17:\nthis.$=$$[$0]\nbreak;\ncase 18:\nthis.$ = $$[$0-1]+ \":\" + $$[$0] \nbreak;\ncase 19:\nthis.$ = $$[$0-1]+ \":\"  + yy.count; yy.count = 0\nbreak;\ncase 20:\nyy.count = 0\nbreak;\ncase 21:\n yy.count += 1 \nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},{5:[1,3],8:[1,4]},{6:5,7:$V0,9:6,12:$V1},{5:[1,8]},{7:[1,9]},o($V2,[2,7],{10:10,11:[1,11]}),o($V3,[2,6]),{6:12,7:$V0,9:6,12:$V1},{1:[2,1]},{7:[2,4],12:[1,15],13:13,14:14,15:[1,16],17:[1,17],19:[1,18],20:[1,19],21:[1,20]},o($V3,[2,5]),{7:[1,21]},o($V2,[2,8]),{12:[1,22]},o($V2,[2,10]),{12:[2,16],16:23,23:[1,24]},{18:[1,25]},{18:[1,26]},{18:[1,27]},{18:[1,30],22:28,24:[1,29]},{1:[2,2]},o($V2,[2,9]),{12:[2,11]},{12:[2,17]},{12:[2,12]},{12:[2,13]},{12:[2,14]},{12:[2,15]},{12:$V4,25:31,26:$V5},{12:$V4,25:33,26:$V5},{12:[2,18]},{12:$V4,25:34,26:$V5},{12:[2,19]},{12:[2,21]}],\ndefaultActions: {9:[2,1],21:[2,2],23:[2,11],24:[2,17],25:[2,12],26:[2,13],27:[2,14],28:[2,15],31:[2,18],33:[2,19],34:[2,21]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 12;\nbreak;\ncase 1:/* skip all whitespace */\nbreak;\ncase 2:/* skip comments */\nbreak;\ncase 3:/* skip comments */\nbreak;\ncase 4:return 4;\nbreak;\ncase 5:return 15;\nbreak;\ncase 6:return 17;\nbreak;\ncase 7:return 20;\nbreak;\ncase 8:return 21;\nbreak;\ncase 9:return 19;\nbreak;\ncase 10:return 8;\nbreak;\ncase 11:return 8;\nbreak;\ncase 12:return 5;\nbreak;\ncase 13:return 26\nbreak;\ncase 14:this.begin(\"options\");\nbreak;\ncase 15:this.popState();\nbreak;\ncase 16:return 11;\nbreak;\ncase 17:this.begin(\"string\");\nbreak;\ncase 18:this.popState();\nbreak;\ncase 19:return 23;\nbreak;\ncase 20:return 18;\nbreak;\ncase 21:return 7;\nbreak;\n}\n},\nrules: [/^(?:(\\r?\\n)+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:gitGraph\\b)/i,/^(?:commit\\b)/i,/^(?:branch\\b)/i,/^(?:merge\\b)/i,/^(?:reset\\b)/i,/^(?:checkout\\b)/i,/^(?:LR\\b)/i,/^(?:BT\\b)/i,/^(?::)/i,/^(?:\\^)/i,/^(?:options\\r?\\n)/i,/^(?:end\\r?\\n)/i,/^(?:[^\\n]+\\r?\\n)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[a-zA-Z][-_\\.a-zA-Z0-9]*[-_a-zA-Z0-9])/i,/^(?:$)/i],\nconditions: {\"options\":{\"rules\":[15,16],\"inclusive\":false},\"string\":{\"rules\":[18,19],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,20,21],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,9,10];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"info\":4,\"document\":5,\"EOF\":6,\"line\":7,\"statement\":8,\"NL\":9,\"showInfo\":10,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"info\",6:\"EOF\",9:\"NL\",10:\"showInfo\"},\nproductions_: [0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return yy; \nbreak;\ncase 4:\n \nbreak;\ncase 6:\n yy.setInfo(true);  \nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},o($V0,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},o($V0,[2,3]),o($V0,[2,4]),o($V0,[2,5]),o($V0,[2,6])],\ndefaultActions: {4:[2,1]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\n\t// Pre-lexer code can go here\r\n\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 4    ;\nbreak;\ncase 1:return 9      ;\nbreak;\ncase 2:return 'space';\nbreak;\ncase 3:return 10;\nbreak;\ncase 4:return 6     ;\nbreak;\ncase 5:return 'TXT' ;\nbreak;\n}\n},\nrules: [/^(?:info\\b)/i,/^(?:[\\s\\n\\r]+)/i,/^(?:[\\s]+)/i,/^(?:showInfo\\b)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,5],$V2=[1,6],$V3=[1,7],$V4=[1,9],$V5=[1,11,13,20,21,22,23],$V6=[2,5],$V7=[1,6,11,13,20,21,22,23],$V8=[20,21,22],$V9=[2,8],$Va=[1,18],$Vb=[1,19],$Vc=[1,24],$Vd=[6,20,21,22,23];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"eol\":4,\"directive\":5,\"PIE\":6,\"document\":7,\"showData\":8,\"line\":9,\"statement\":10,\"txt\":11,\"value\":12,\"title\":13,\"title_value\":14,\"openDirective\":15,\"typeDirective\":16,\"closeDirective\":17,\":\":18,\"argDirective\":19,\"NEWLINE\":20,\";\":21,\"EOF\":22,\"open_directive\":23,\"type_directive\":24,\"arg_directive\":25,\"close_directive\":26,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",6:\"PIE\",8:\"showData\",11:\"txt\",12:\"value\",13:\"title\",14:\"title_value\",18:\":\",20:\"NEWLINE\",21:\";\",22:\"EOF\",23:\"open_directive\",24:\"type_directive\",25:\"arg_directive\",26:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[15,1],[16,1],[19,1],[17,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\nyy.setShowData(true);\nbreak;\ncase 7:\n this.$ = $$[$0-1] \nbreak;\ncase 9:\n yy.addSection($$[$0-1],yy.cleanupValue($$[$0])); \nbreak;\ncase 10:\n this.$=$$[$0].trim();yy.setTitle(this.$); \nbreak;\ncase 17:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 18:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 19:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 20:\n yy.parseDirective('}%%', 'close_directive', 'pie'); \nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:$V0,15:8,20:$V1,21:$V2,22:$V3,23:$V4},{1:[3]},{3:10,4:2,5:3,6:$V0,15:8,20:$V1,21:$V2,22:$V3,23:$V4},{3:11,4:2,5:3,6:$V0,15:8,20:$V1,21:$V2,22:$V3,23:$V4},o($V5,$V6,{7:12,8:[1,13]}),o($V7,[2,14]),o($V7,[2,15]),o($V7,[2,16]),{16:14,24:[1,15]},{24:[2,17]},{1:[2,1]},{1:[2,2]},o($V8,$V9,{15:8,9:16,10:17,5:20,1:[2,3],11:$Va,13:$Vb,23:$V4}),o($V5,$V6,{7:21}),{17:22,18:[1,23],26:$Vc},o([18,26],[2,18]),o($V5,[2,6]),{4:25,20:$V1,21:$V2,22:$V3},{12:[1,26]},{14:[1,27]},o($V8,[2,11]),o($V8,$V9,{15:8,9:16,10:17,5:20,1:[2,4],11:$Va,13:$Vb,23:$V4}),o($Vd,[2,12]),{19:28,25:[1,29]},o($Vd,[2,20]),o($V5,[2,7]),o($V8,[2,9]),o($V8,[2,10]),{17:30,26:$Vc},{26:[2,19]},o($Vd,[2,13])],\ndefaultActions: {9:[2,17],10:[2,1],11:[2,2],29:[2,19]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 23; \nbreak;\ncase 1: this.begin('type_directive'); return 24; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 18; \nbreak;\ncase 3: this.popState(); this.popState(); return 26; \nbreak;\ncase 4:return 25;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */{ /*console.log('');*/ }\nbreak;\ncase 7:return 20;\nbreak;\ncase 8:/* do nothing */\nbreak;\ncase 9:/* ignore */\nbreak;\ncase 10: this.begin(\"title\");return 13; \nbreak;\ncase 11: this.popState(); return \"title_value\"; \nbreak;\ncase 12: this.begin(\"string\"); \nbreak;\ncase 13: this.popState(); \nbreak;\ncase 14: return \"txt\"; \nbreak;\ncase 15:return 6;\nbreak;\ncase 16:return 8;\nbreak;\ncase 17:return \"value\";\nbreak;\ncase 18:return 22;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n\\r]+)/i,/^(?:%%[^\\n]*)/i,/^(?:[\\s]+)/i,/^(?:title\\b)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:pie\\b)/i,/^(?:showData\\b)/i,/^(?::[\\s]*[\\d]+(?:\\.[\\d]+)?)/i,/^(?:$)/i],\nconditions: {\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"title\":{\"rules\":[11],\"inclusive\":false},\"string\":{\"rules\":[13,14],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,12,15,16,17,18],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,5],$V2=[1,17],$V3=[2,10],$V4=[1,21],$V5=[1,22],$V6=[1,23],$V7=[1,24],$V8=[1,25],$V9=[1,26],$Va=[1,19],$Vb=[1,27],$Vc=[1,28],$Vd=[1,31],$Ve=[66,67],$Vf=[5,8,14,35,36,37,38,39,40,48,55,57,66,67],$Vg=[5,6,8,14,35,36,37,38,39,40,48,66,67],$Vh=[1,51],$Vi=[1,52],$Vj=[1,53],$Vk=[1,54],$Vl=[1,55],$Vm=[1,56],$Vn=[1,57],$Vo=[57,58],$Vp=[1,69],$Vq=[1,65],$Vr=[1,66],$Vs=[1,67],$Vt=[1,68],$Vu=[1,70],$Vv=[1,74],$Vw=[1,75],$Vx=[1,72],$Vy=[1,73],$Vz=[5,8,14,35,36,37,38,39,40,48,66,67];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"directive\":4,\"NEWLINE\":5,\"RD\":6,\"diagram\":7,\"EOF\":8,\"openDirective\":9,\"typeDirective\":10,\"closeDirective\":11,\":\":12,\"argDirective\":13,\"open_directive\":14,\"type_directive\":15,\"arg_directive\":16,\"close_directive\":17,\"requirementDef\":18,\"elementDef\":19,\"relationshipDef\":20,\"requirementType\":21,\"requirementName\":22,\"STRUCT_START\":23,\"requirementBody\":24,\"ID\":25,\"COLONSEP\":26,\"id\":27,\"TEXT\":28,\"text\":29,\"RISK\":30,\"riskLevel\":31,\"VERIFYMTHD\":32,\"verifyType\":33,\"STRUCT_STOP\":34,\"REQUIREMENT\":35,\"FUNCTIONAL_REQUIREMENT\":36,\"INTERFACE_REQUIREMENT\":37,\"PERFORMANCE_REQUIREMENT\":38,\"PHYSICAL_REQUIREMENT\":39,\"DESIGN_CONSTRAINT\":40,\"LOW_RISK\":41,\"MED_RISK\":42,\"HIGH_RISK\":43,\"VERIFY_ANALYSIS\":44,\"VERIFY_DEMONSTRATION\":45,\"VERIFY_INSPECTION\":46,\"VERIFY_TEST\":47,\"ELEMENT\":48,\"elementName\":49,\"elementBody\":50,\"TYPE\":51,\"type\":52,\"DOCREF\":53,\"ref\":54,\"END_ARROW_L\":55,\"relationship\":56,\"LINE\":57,\"END_ARROW_R\":58,\"CONTAINS\":59,\"COPIES\":60,\"DERIVES\":61,\"SATISFIES\":62,\"VERIFIES\":63,\"REFINES\":64,\"TRACES\":65,\"unqString\":66,\"qString\":67,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"NEWLINE\",6:\"RD\",8:\"EOF\",12:\":\",14:\"open_directive\",15:\"type_directive\",16:\"arg_directive\",17:\"close_directive\",23:\"STRUCT_START\",25:\"ID\",26:\"COLONSEP\",28:\"TEXT\",30:\"RISK\",32:\"VERIFYMTHD\",34:\"STRUCT_STOP\",35:\"REQUIREMENT\",36:\"FUNCTIONAL_REQUIREMENT\",37:\"INTERFACE_REQUIREMENT\",38:\"PERFORMANCE_REQUIREMENT\",39:\"PHYSICAL_REQUIREMENT\",40:\"DESIGN_CONSTRAINT\",41:\"LOW_RISK\",42:\"MED_RISK\",43:\"HIGH_RISK\",44:\"VERIFY_ANALYSIS\",45:\"VERIFY_DEMONSTRATION\",46:\"VERIFY_INSPECTION\",47:\"VERIFY_TEST\",48:\"ELEMENT\",51:\"TYPE\",53:\"DOCREF\",55:\"END_ARROW_L\",57:\"LINE\",58:\"END_ARROW_R\",59:\"CONTAINS\",60:\"COPIES\",61:\"DERIVES\",62:\"SATISFIES\",63:\"VERIFIES\",64:\"REFINES\",65:\"TRACES\",66:\"unqString\",67:\"qString\"},\nproductions_: [0,[3,3],[3,2],[3,4],[4,3],[4,5],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[18,5],[24,5],[24,5],[24,5],[24,5],[24,2],[24,1],[21,1],[21,1],[21,1],[21,1],[21,1],[21,1],[31,1],[31,1],[31,1],[33,1],[33,1],[33,1],[33,1],[19,5],[50,5],[50,5],[50,2],[50,1],[20,5],[20,5],[56,1],[56,1],[56,1],[56,1],[56,1],[56,1],[56,1],[22,1],[22,1],[27,1],[27,1],[29,1],[29,1],[49,1],[49,1],[52,1],[52,1],[54,1],[54,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 6:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 7:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 8:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 9:\n yy.parseDirective('}%%', 'close_directive', 'pie'); \nbreak;\ncase 10:\n this.$ = [] \nbreak;\ncase 16:\n yy.addRequirement($$[$0-3], $$[$0-4]) \nbreak;\ncase 17:\n yy.setNewReqId($$[$0-2]); \nbreak;\ncase 18:\n yy.setNewReqText($$[$0-2]); \nbreak;\ncase 19:\n yy.setNewReqRisk($$[$0-2]); \nbreak;\ncase 20:\n yy.setNewReqVerifyMethod($$[$0-2]); \nbreak;\ncase 23:\n this.$=yy.RequirementType.REQUIREMENT;\nbreak;\ncase 24:\n this.$=yy.RequirementType.FUNCTIONAL_REQUIREMENT;\nbreak;\ncase 25:\n this.$=yy.RequirementType.INTERFACE_REQUIREMENT;\nbreak;\ncase 26:\n this.$=yy.RequirementType.PERFORMANCE_REQUIREMENT;\nbreak;\ncase 27:\n this.$=yy.RequirementType.PHYSICAL_REQUIREMENT;\nbreak;\ncase 28:\n this.$=yy.RequirementType.DESIGN_CONSTRAINT;\nbreak;\ncase 29:\n this.$=yy.RiskLevel.LOW_RISK;\nbreak;\ncase 30:\n this.$=yy.RiskLevel.MED_RISK;\nbreak;\ncase 31:\n this.$=yy.RiskLevel.HIGH_RISK;\nbreak;\ncase 32:\n this.$=yy.VerifyType.VERIFY_ANALYSIS;\nbreak;\ncase 33:\n this.$=yy.VerifyType.VERIFY_DEMONSTRATION;\nbreak;\ncase 34:\n this.$=yy.VerifyType.VERIFY_INSPECTION;\nbreak;\ncase 35:\n this.$=yy.VerifyType.VERIFY_TEST;\nbreak;\ncase 36:\n yy.addElement($$[$0-3]) \nbreak;\ncase 37:\n yy.setNewElementType($$[$0-2]); \nbreak;\ncase 38:\n yy.setNewElementDocRef($$[$0-2]); \nbreak;\ncase 41:\n  yy.addRelationship($$[$0-2], $$[$0], $$[$0-4]) \nbreak;\ncase 42:\n yy.addRelationship($$[$0-2], $$[$0-4], $$[$0]) \nbreak;\ncase 43:\n this.$=yy.Relationships.CONTAINS;\nbreak;\ncase 44:\n this.$=yy.Relationships.COPIES;\nbreak;\ncase 45:\n this.$=yy.Relationships.DERIVES;\nbreak;\ncase 46:\n this.$=yy.Relationships.SATISFIES;\nbreak;\ncase 47:\n this.$=yy.Relationships.VERIFIES;\nbreak;\ncase 48:\n this.$=yy.Relationships.REFINES;\nbreak;\ncase 49:\n this.$=yy.Relationships.TRACES;\nbreak;\n}\n},\ntable: [{3:1,4:2,6:$V0,9:4,14:$V1},{1:[3]},{3:7,4:2,5:[1,6],6:$V0,9:4,14:$V1},{5:[1,8]},{10:9,15:[1,10]},{15:[2,6]},{3:11,4:2,6:$V0,9:4,14:$V1},{1:[2,2]},{4:16,5:$V2,7:12,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{11:29,12:[1,30],17:$Vd},o([12,17],[2,7]),{1:[2,1]},{8:[1,32]},{4:16,5:$V2,7:33,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{4:16,5:$V2,7:34,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{4:16,5:$V2,7:35,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{4:16,5:$V2,7:36,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{4:16,5:$V2,7:37,8:$V3,9:4,14:$V1,18:13,19:14,20:15,21:18,27:20,35:$V4,36:$V5,37:$V6,38:$V7,39:$V8,40:$V9,48:$Va,66:$Vb,67:$Vc},{22:38,66:[1,39],67:[1,40]},{49:41,66:[1,42],67:[1,43]},{55:[1,44],57:[1,45]},o($Ve,[2,23]),o($Ve,[2,24]),o($Ve,[2,25]),o($Ve,[2,26]),o($Ve,[2,27]),o($Ve,[2,28]),o($Vf,[2,52]),o($Vf,[2,53]),o($Vg,[2,4]),{13:46,16:[1,47]},o($Vg,[2,9]),{1:[2,3]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{23:[1,48]},{23:[2,50]},{23:[2,51]},{23:[1,49]},{23:[2,56]},{23:[2,57]},{56:50,59:$Vh,60:$Vi,61:$Vj,62:$Vk,63:$Vl,64:$Vm,65:$Vn},{56:58,59:$Vh,60:$Vi,61:$Vj,62:$Vk,63:$Vl,64:$Vm,65:$Vn},{11:59,17:$Vd},{17:[2,8]},{5:[1,60]},{5:[1,61]},{57:[1,62]},o($Vo,[2,43]),o($Vo,[2,44]),o($Vo,[2,45]),o($Vo,[2,46]),o($Vo,[2,47]),o($Vo,[2,48]),o($Vo,[2,49]),{58:[1,63]},o($Vg,[2,5]),{5:$Vp,24:64,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},{5:$Vv,34:$Vw,50:71,51:$Vx,53:$Vy},{27:76,66:$Vb,67:$Vc},{27:77,66:$Vb,67:$Vc},o($Vz,[2,16]),{26:[1,78]},{26:[1,79]},{26:[1,80]},{26:[1,81]},{5:$Vp,24:82,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},o($Vz,[2,22]),o($Vz,[2,36]),{26:[1,83]},{26:[1,84]},{5:$Vv,34:$Vw,50:85,51:$Vx,53:$Vy},o($Vz,[2,40]),o($Vz,[2,41]),o($Vz,[2,42]),{27:86,66:$Vb,67:$Vc},{29:87,66:[1,88],67:[1,89]},{31:90,41:[1,91],42:[1,92],43:[1,93]},{33:94,44:[1,95],45:[1,96],46:[1,97],47:[1,98]},o($Vz,[2,21]),{52:99,66:[1,100],67:[1,101]},{54:102,66:[1,103],67:[1,104]},o($Vz,[2,39]),{5:[1,105]},{5:[1,106]},{5:[2,54]},{5:[2,55]},{5:[1,107]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[1,108]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[2,35]},{5:[1,109]},{5:[2,58]},{5:[2,59]},{5:[1,110]},{5:[2,60]},{5:[2,61]},{5:$Vp,24:111,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},{5:$Vp,24:112,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},{5:$Vp,24:113,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},{5:$Vp,24:114,25:$Vq,28:$Vr,30:$Vs,32:$Vt,34:$Vu},{5:$Vv,34:$Vw,50:115,51:$Vx,53:$Vy},{5:$Vv,34:$Vw,50:116,51:$Vx,53:$Vy},o($Vz,[2,17]),o($Vz,[2,18]),o($Vz,[2,19]),o($Vz,[2,20]),o($Vz,[2,37]),o($Vz,[2,38])],\ndefaultActions: {5:[2,6],7:[2,2],11:[2,1],32:[2,3],33:[2,11],34:[2,12],35:[2,13],36:[2,14],37:[2,15],39:[2,50],40:[2,51],42:[2,56],43:[2,57],47:[2,8],88:[2,54],89:[2,55],91:[2,29],92:[2,30],93:[2,31],95:[2,32],96:[2,33],97:[2,34],98:[2,35],100:[2,58],101:[2,59],103:[2,60],104:[2,61]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 14; \nbreak;\ncase 1: this.begin('type_directive'); return 15; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 12; \nbreak;\ncase 3: this.popState(); this.popState(); return 17; \nbreak;\ncase 4:return 16;\nbreak;\ncase 5:return 5;\nbreak;\ncase 6:/* skip all whitespace */\nbreak;\ncase 7:/* skip comments */\nbreak;\ncase 8:/* skip comments */\nbreak;\ncase 9:return 8;\nbreak;\ncase 10:return 6;\nbreak;\ncase 11:return 23;\nbreak;\ncase 12:return 34;\nbreak;\ncase 13:return 26;\nbreak;\ncase 14:return 25;\nbreak;\ncase 15:return 28;\nbreak;\ncase 16:return 30;\nbreak;\ncase 17:return 32;\nbreak;\ncase 18:return 35;\nbreak;\ncase 19:return 36;\nbreak;\ncase 20:return 37;\nbreak;\ncase 21:return 38;\nbreak;\ncase 22:return 39;\nbreak;\ncase 23:return 40;\nbreak;\ncase 24:return 41;\nbreak;\ncase 25:return 42;\nbreak;\ncase 26:return 43;\nbreak;\ncase 27:return 44;\nbreak;\ncase 28:return 45;\nbreak;\ncase 29:return 46;\nbreak;\ncase 30:return 47;\nbreak;\ncase 31:return 48;\nbreak;\ncase 32:return 59;\nbreak;\ncase 33:return 60;\nbreak;\ncase 34:return 61;\nbreak;\ncase 35:return 62;\nbreak;\ncase 36:return 63;\nbreak;\ncase 37:return 64;\nbreak;\ncase 38:return 65;\nbreak;\ncase 39:return 51;\nbreak;\ncase 40:return 53;\nbreak;\ncase 41:return 55;\nbreak;\ncase 42:return 58;\nbreak;\ncase 43:return 57;\nbreak;\ncase 44: this.begin(\"string\"); \nbreak;\ncase 45: this.popState(); \nbreak;\ncase 46: return \"qString\"; \nbreak;\ncase 47: yy_.yytext = yy_.yytext.trim(); return 66;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:(\\r?\\n)+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\\b)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?::)/i,/^(?:id\\b)/i,/^(?:text\\b)/i,/^(?:risk\\b)/i,/^(?:verifyMethod\\b)/i,/^(?:requirement\\b)/i,/^(?:functionalRequirement\\b)/i,/^(?:interfaceRequirement\\b)/i,/^(?:performanceRequirement\\b)/i,/^(?:physicalRequirement\\b)/i,/^(?:designConstraint\\b)/i,/^(?:low\\b)/i,/^(?:medium\\b)/i,/^(?:high\\b)/i,/^(?:analysis\\b)/i,/^(?:demonstration\\b)/i,/^(?:inspection\\b)/i,/^(?:test\\b)/i,/^(?:element\\b)/i,/^(?:contains\\b)/i,/^(?:copies\\b)/i,/^(?:derives\\b)/i,/^(?:satisfies\\b)/i,/^(?:verifies\\b)/i,/^(?:refines\\b)/i,/^(?:traces\\b)/i,/^(?:type\\b)/i,/^(?:docref\\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[\\w][^\\r\\n\\{\\<\\>\\-\\=]*)/i],\nconditions: {\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"unqString\":{\"rules\":[],\"inclusive\":false},\"token\":{\"rules\":[],\"inclusive\":false},\"string\":{\"rules\":[45,46],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,47],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,5],$V3=[1,7],$V4=[2,5],$V5=[1,15],$V6=[1,17],$V7=[1,18],$V8=[1,19],$V9=[1,21],$Va=[1,22],$Vb=[1,23],$Vc=[1,29],$Vd=[1,30],$Ve=[1,31],$Vf=[1,32],$Vg=[1,33],$Vh=[1,34],$Vi=[1,37],$Vj=[1,38],$Vk=[1,39],$Vl=[1,40],$Vm=[1,41],$Vn=[1,42],$Vo=[1,45],$Vp=[1,4,5,16,20,22,23,24,30,32,33,34,35,36,38,40,41,42,46,47,48,49,57,67],$Vq=[1,58],$Vr=[4,5,16,20,22,23,24,30,32,33,34,35,36,38,42,46,47,48,49,57,67],$Vs=[4,5,16,20,22,23,24,30,32,33,34,35,36,38,41,42,46,47,48,49,57,67],$Vt=[4,5,16,20,22,23,24,30,32,33,34,35,36,38,40,42,46,47,48,49,57,67],$Vu=[55,56,57],$Vv=[1,4,5,7,16,20,22,23,24,30,32,33,34,35,36,38,40,41,42,46,47,48,49,57,67];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NEWLINE\":5,\"directive\":6,\"SD\":7,\"document\":8,\"line\":9,\"statement\":10,\"openDirective\":11,\"typeDirective\":12,\"closeDirective\":13,\":\":14,\"argDirective\":15,\"participant\":16,\"actor\":17,\"AS\":18,\"restOfLine\":19,\"participant_actor\":20,\"signal\":21,\"autonumber\":22,\"activate\":23,\"deactivate\":24,\"note_statement\":25,\"links_statement\":26,\"link_statement\":27,\"properties_statement\":28,\"details_statement\":29,\"title\":30,\"text2\":31,\"loop\":32,\"end\":33,\"rect\":34,\"opt\":35,\"alt\":36,\"else_sections\":37,\"par\":38,\"par_sections\":39,\"and\":40,\"else\":41,\"note\":42,\"placement\":43,\"over\":44,\"actor_pair\":45,\"links\":46,\"link\":47,\"properties\":48,\"details\":49,\"spaceList\":50,\",\":51,\"left_of\":52,\"right_of\":53,\"signaltype\":54,\"+\":55,\"-\":56,\"ACTOR\":57,\"SOLID_OPEN_ARROW\":58,\"DOTTED_OPEN_ARROW\":59,\"SOLID_ARROW\":60,\"DOTTED_ARROW\":61,\"SOLID_CROSS\":62,\"DOTTED_CROSS\":63,\"SOLID_POINT\":64,\"DOTTED_POINT\":65,\"TXT\":66,\"open_directive\":67,\"type_directive\":68,\"arg_directive\":69,\"close_directive\":70,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NEWLINE\",7:\"SD\",14:\":\",16:\"participant\",18:\"AS\",19:\"restOfLine\",20:\"participant_actor\",22:\"autonumber\",23:\"activate\",24:\"deactivate\",30:\"title\",32:\"loop\",33:\"end\",34:\"rect\",35:\"opt\",36:\"alt\",38:\"par\",40:\"and\",41:\"else\",42:\"note\",44:\"over\",46:\"links\",47:\"link\",48:\"properties\",49:\"details\",51:\",\",52:\"left_of\",53:\"right_of\",55:\"+\",56:\"-\",57:\"ACTOR\",58:\"SOLID_OPEN_ARROW\",59:\"DOTTED_OPEN_ARROW\",60:\"SOLID_ARROW\",61:\"DOTTED_ARROW\",62:\"SOLID_CROSS\",63:\"DOTTED_CROSS\",64:\"SOLID_POINT\",65:\"DOTTED_POINT\",66:\"TXT\",67:\"open_directive\",68:\"type_directive\",69:\"arg_directive\",70:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,1],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,3],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[39,1],[39,4],[37,1],[37,4],[25,4],[25,4],[26,3],[27,3],[28,3],[29,3],[50,2],[50,1],[45,3],[45,1],[43,1],[43,1],[21,5],[21,5],[21,4],[17,1],[54,1],[54,1],[54,1],[54,1],[54,1],[54,1],[54,1],[54,1],[31,1],[11,1],[12,1],[15,1],[13,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n yy.apply($$[$0]);return $$[$0]; \nbreak;\ncase 5:\n this.$ = [] \nbreak;\ncase 6:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 7: case 8:\n this.$ = $$[$0] \nbreak;\ncase 9:\n this.$=[]; \nbreak;\ncase 12:\n$$[$0-3].type='addParticipant';$$[$0-3].description=yy.parseMessage($$[$0-1]); this.$=$$[$0-3];\nbreak;\ncase 13:\n$$[$0-1].type='addParticipant';this.$=$$[$0-1];\nbreak;\ncase 14:\n$$[$0-3].type='addActor';$$[$0-3].description=yy.parseMessage($$[$0-1]); this.$=$$[$0-3];\nbreak;\ncase 15:\n$$[$0-1].type='addActor'; this.$=$$[$0-1];\nbreak;\ncase 17:\nyy.enableSequenceNumbers()\nbreak;\ncase 18:\nthis.$={type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]};\nbreak;\ncase 19:\nthis.$={type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-1]};\nbreak;\ncase 25:\nthis.$=[{type:'setTitle', text:$$[$0-1]}]\nbreak;\ncase 26:\n\n\t\t$$[$0-1].unshift({type: 'loopStart', loopText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.LOOP_START});\n\t\t$$[$0-1].push({type: 'loopEnd', loopText:$$[$0-2], signalType: yy.LINETYPE.LOOP_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 27:\n\n\t\t$$[$0-1].unshift({type: 'rectStart', color:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.RECT_START });\n\t\t$$[$0-1].push({type: 'rectEnd', color:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.RECT_END });\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 28:\n\n\t\t$$[$0-1].unshift({type: 'optStart', optText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.OPT_START});\n\t\t$$[$0-1].push({type: 'optEnd', optText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.OPT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 29:\n\n\t\t// Alt start\n\t\t$$[$0-1].unshift({type: 'altStart', altText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.ALT_START});\n\t\t// Content in alt is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'altEnd', signalType: yy.LINETYPE.ALT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 30:\n\n\t\t// Parallel start\n\t\t$$[$0-1].unshift({type: 'parStart', parText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.PAR_START});\n\t\t// Content in par is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'parEnd', signalType: yy.LINETYPE.PAR_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 33:\n this.$ = $$[$0-3].concat([{type: 'and', parText:yy.parseMessage($$[$0-1]), signalType: yy.LINETYPE.PAR_AND}, $$[$0]]); \nbreak;\ncase 35:\n this.$ = $$[$0-3].concat([{type: 'else', altText:yy.parseMessage($$[$0-1]), signalType: yy.LINETYPE.ALT_ELSE}, $$[$0]]); \nbreak;\ncase 36:\n\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:$$[$0-2], actor:$$[$0-1].actor, text:$$[$0]}];\nbreak;\ncase 37:\n\n\t\t// Coerce actor_pair into a [to, from, ...] array\n\t\t$$[$0-2] = [].concat($$[$0-1], $$[$0-1]).slice(0, 2);\n\t\t$$[$0-2][0] = $$[$0-2][0].actor;\n\t\t$$[$0-2][1] = $$[$0-2][1].actor;\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:yy.PLACEMENT.OVER, actor:$$[$0-2].slice(0, 2), text:$$[$0]}];\nbreak;\ncase 38:\n\n\t\tthis.$ = [$$[$0-1], {type:'addLinks', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 39:\n\n\t\tthis.$ = [$$[$0-1], {type:'addALink', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 40:\n\n\t\tthis.$ = [$$[$0-1], {type:'addProperties', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 41:\n\n\t\tthis.$ = [$$[$0-1], {type:'addDetails', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 44:\n this.$ = [$$[$0-2], $$[$0]]; \nbreak;\ncase 45:\n this.$ = $$[$0]; \nbreak;\ncase 46:\n this.$ = yy.PLACEMENT.LEFTOF; \nbreak;\ncase 47:\n this.$ = yy.PLACEMENT.RIGHTOF; \nbreak;\ncase 48:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t              {type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]}\n\t             ]\nbreak;\ncase 49:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t             {type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-4]}\n\t             ]\nbreak;\ncase 50:\n this.$ = [$$[$0-3],$$[$0-1],{type: 'addMessage', from:$$[$0-3].actor, to:$$[$0-1].actor, signalType:$$[$0-2], msg:$$[$0]}]\nbreak;\ncase 51:\nthis.$={ type: 'addParticipant', actor:$$[$0]}\nbreak;\ncase 52:\n this.$ = yy.LINETYPE.SOLID_OPEN; \nbreak;\ncase 53:\n this.$ = yy.LINETYPE.DOTTED_OPEN; \nbreak;\ncase 54:\n this.$ = yy.LINETYPE.SOLID; \nbreak;\ncase 55:\n this.$ = yy.LINETYPE.DOTTED; \nbreak;\ncase 56:\n this.$ = yy.LINETYPE.SOLID_CROSS; \nbreak;\ncase 57:\n this.$ = yy.LINETYPE.DOTTED_CROSS; \nbreak;\ncase 58:\n this.$ = yy.LINETYPE.SOLID_POINT; \nbreak;\ncase 59:\n this.$ = yy.LINETYPE.DOTTED_POINT; \nbreak;\ncase 60:\nthis.$ = yy.parseMessage($$[$0].trim().substring(1)) \nbreak;\ncase 61:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 62:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 63:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 64:\n yy.parseDirective('}%%', 'close_directive', 'sequence'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:4,7:$V2,11:6,67:$V3},{1:[3]},{3:8,4:$V0,5:$V1,6:4,7:$V2,11:6,67:$V3},{3:9,4:$V0,5:$V1,6:4,7:$V2,11:6,67:$V3},{3:10,4:$V0,5:$V1,6:4,7:$V2,11:6,67:$V3},o([1,4,5,16,20,22,23,24,30,32,34,35,36,38,42,46,47,48,49,57,67],$V4,{8:11}),{12:12,68:[1,13]},{68:[2,61]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,34:$Ve,35:$Vf,36:$Vg,38:$Vh,42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{13:43,14:[1,44],70:$Vo},o([14,70],[2,62]),o($Vp,[2,6]),{6:35,10:46,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,34:$Ve,35:$Vf,36:$Vg,38:$Vh,42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},o($Vp,[2,8]),o($Vp,[2,9]),{17:47,57:$Vn},{17:48,57:$Vn},{5:[1,49]},o($Vp,[2,17]),{17:50,57:$Vn},{17:51,57:$Vn},{5:[1,52]},{5:[1,53]},{5:[1,54]},{5:[1,55]},{5:[1,56]},{31:57,66:$Vq},{19:[1,59]},{19:[1,60]},{19:[1,61]},{19:[1,62]},{19:[1,63]},o($Vp,[2,31]),{54:64,58:[1,65],59:[1,66],60:[1,67],61:[1,68],62:[1,69],63:[1,70],64:[1,71],65:[1,72]},{43:73,44:[1,74],52:[1,75],53:[1,76]},{17:77,57:$Vn},{17:78,57:$Vn},{17:79,57:$Vn},{17:80,57:$Vn},o([5,18,51,58,59,60,61,62,63,64,65,66],[2,51]),{5:[1,81]},{15:82,69:[1,83]},{5:[2,64]},o($Vp,[2,7]),{5:[1,85],18:[1,84]},{5:[1,87],18:[1,86]},o($Vp,[2,16]),{5:[1,88]},{5:[1,89]},o($Vp,[2,20]),o($Vp,[2,21]),o($Vp,[2,22]),o($Vp,[2,23]),o($Vp,[2,24]),{5:[1,90]},{5:[2,60]},o($Vr,$V4,{8:91}),o($Vr,$V4,{8:92}),o($Vr,$V4,{8:93}),o($Vs,$V4,{37:94,8:95}),o($Vt,$V4,{39:96,8:97}),{17:100,55:[1,98],56:[1,99],57:$Vn},o($Vu,[2,52]),o($Vu,[2,53]),o($Vu,[2,54]),o($Vu,[2,55]),o($Vu,[2,56]),o($Vu,[2,57]),o($Vu,[2,58]),o($Vu,[2,59]),{17:101,57:$Vn},{17:103,45:102,57:$Vn},{57:[2,46]},{57:[2,47]},{31:104,66:$Vq},{31:105,66:$Vq},{31:106,66:$Vq},{31:107,66:$Vq},o($Vv,[2,10]),{13:108,70:$Vo},{70:[2,63]},{19:[1,109]},o($Vp,[2,13]),{19:[1,110]},o($Vp,[2,15]),o($Vp,[2,18]),o($Vp,[2,19]),o($Vp,[2,25]),{4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,33:[1,111],34:$Ve,35:$Vf,36:$Vg,38:$Vh,42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,33:[1,112],34:$Ve,35:$Vf,36:$Vg,38:$Vh,42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,33:[1,113],34:$Ve,35:$Vf,36:$Vg,38:$Vh,42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{33:[1,114]},{4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,33:[2,34],34:$Ve,35:$Vf,36:$Vg,38:$Vh,41:[1,115],42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{33:[1,116]},{4:$V5,5:$V6,6:35,9:14,10:16,11:6,16:$V7,17:36,20:$V8,21:20,22:$V9,23:$Va,24:$Vb,25:24,26:25,27:26,28:27,29:28,30:$Vc,32:$Vd,33:[2,32],34:$Ve,35:$Vf,36:$Vg,38:$Vh,40:[1,117],42:$Vi,46:$Vj,47:$Vk,48:$Vl,49:$Vm,57:$Vn,67:$V3},{17:118,57:$Vn},{17:119,57:$Vn},{31:120,66:$Vq},{31:121,66:$Vq},{31:122,66:$Vq},{51:[1,123],66:[2,45]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},{5:[1,124]},{5:[1,125]},{5:[1,126]},o($Vp,[2,26]),o($Vp,[2,27]),o($Vp,[2,28]),o($Vp,[2,29]),{19:[1,127]},o($Vp,[2,30]),{19:[1,128]},{31:129,66:$Vq},{31:130,66:$Vq},{5:[2,50]},{5:[2,36]},{5:[2,37]},{17:131,57:$Vn},o($Vv,[2,11]),o($Vp,[2,12]),o($Vp,[2,14]),o($Vs,$V4,{8:95,37:132}),o($Vt,$V4,{8:97,39:133}),{5:[2,48]},{5:[2,49]},{66:[2,44]},{33:[2,35]},{33:[2,33]}],\ndefaultActions: {7:[2,61],8:[2,1],9:[2,2],10:[2,3],45:[2,64],58:[2,60],75:[2,46],76:[2,47],83:[2,63],104:[2,38],105:[2,39],106:[2,40],107:[2,41],120:[2,50],121:[2,36],122:[2,37],129:[2,48],130:[2,49],131:[2,44],132:[2,35],133:[2,33]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 67; \nbreak;\ncase 1: this.begin('type_directive'); return 68; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 14; \nbreak;\ncase 3: this.popState(); this.popState(); return 70; \nbreak;\ncase 4:return 69;\nbreak;\ncase 5:return 5;\nbreak;\ncase 6:/* skip all whitespace */\nbreak;\ncase 7:/* skip same-line whitespace */\nbreak;\ncase 8:/* skip comments */\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */\nbreak;\ncase 11: this.begin('ID'); return 16; \nbreak;\ncase 12: this.begin('ID'); return 20; \nbreak;\ncase 13: yy_.yytext = yy_.yytext.trim(); this.begin('ALIAS'); return 57; \nbreak;\ncase 14: this.popState(); this.popState(); this.begin('LINE'); return 18; \nbreak;\ncase 15: this.popState(); this.popState(); return 5; \nbreak;\ncase 16: this.begin('LINE'); return 32; \nbreak;\ncase 17: this.begin('LINE'); return 34; \nbreak;\ncase 18: this.begin('LINE'); return 35; \nbreak;\ncase 19: this.begin('LINE'); return 36; \nbreak;\ncase 20: this.begin('LINE'); return 41; \nbreak;\ncase 21: this.begin('LINE'); return 38; \nbreak;\ncase 22: this.begin('LINE'); return 40; \nbreak;\ncase 23: this.popState(); return 19; \nbreak;\ncase 24:return 33;\nbreak;\ncase 25:return 52;\nbreak;\ncase 26:return 53;\nbreak;\ncase 27:return 46;\nbreak;\ncase 28:return 47;\nbreak;\ncase 29:return 48;\nbreak;\ncase 30:return 49;\nbreak;\ncase 31:return 44;\nbreak;\ncase 32:return 42;\nbreak;\ncase 33: this.begin('ID'); return 23; \nbreak;\ncase 34: this.begin('ID'); return 24; \nbreak;\ncase 35:return 30;\nbreak;\ncase 36:return 7;\nbreak;\ncase 37:return 22;\nbreak;\ncase 38:return 51;\nbreak;\ncase 39:return 5;\nbreak;\ncase 40: yy_.yytext = yy_.yytext.trim(); return 57; \nbreak;\ncase 41:return 60;\nbreak;\ncase 42:return 61;\nbreak;\ncase 43:return 58;\nbreak;\ncase 44:return 59;\nbreak;\ncase 45:return 62;\nbreak;\ncase 46:return 63;\nbreak;\ncase 47:return 64;\nbreak;\ncase 48:return 65;\nbreak;\ncase 49:return 66;\nbreak;\ncase 50:return 55;\nbreak;\ncase 51:return 56;\nbreak;\ncase 52:return 5;\nbreak;\ncase 53:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:participant\\b)/i,/^(?:actor\\b)/i,/^(?:[^\\->:\\n,;]+?(?=((?!\\n)\\s)+as(?!\\n)\\s|[#\\n;]|$))/i,/^(?:as\\b)/i,/^(?:(?:))/i,/^(?:loop\\b)/i,/^(?:rect\\b)/i,/^(?:opt\\b)/i,/^(?:alt\\b)/i,/^(?:else\\b)/i,/^(?:par\\b)/i,/^(?:and\\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\\n;]*)/i,/^(?:end\\b)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:links\\b)/i,/^(?:link\\b)/i,/^(?:properties\\b)/i,/^(?:details\\b)/i,/^(?:over\\b)/i,/^(?:note\\b)/i,/^(?:activate\\b)/i,/^(?:deactivate\\b)/i,/^(?:title\\b)/i,/^(?:sequenceDiagram\\b)/i,/^(?:autonumber\\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\\+\\->:\\n,;]+((?!(-x|--x|-\\)|--\\)))[\\-]*[^\\+\\->:\\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\\)])/i,/^(?:--[\\)])/i,/^(?::(?:(?:no)?wrap)?[^#\\n;]+)/i,/^(?:\\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"open_directive\":{\"rules\":[1,8],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3,8],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4,8],\"inclusive\":false},\"ID\":{\"rules\":[7,8,13],\"inclusive\":false},\"ALIAS\":{\"rules\":[7,8,14,15],\"inclusive\":false},\"LINE\":{\"rules\":[7,8,23],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,8,9,10,11,12,16,17,18,19,20,21,22,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,5],$V3=[1,7],$V4=[2,5],$V5=[1,15],$V6=[1,17],$V7=[1,19],$V8=[1,20],$V9=[1,21],$Va=[1,22],$Vb=[1,30],$Vc=[1,23],$Vd=[1,24],$Ve=[1,25],$Vf=[1,26],$Vg=[1,27],$Vh=[1,32],$Vi=[1,33],$Vj=[1,34],$Vk=[1,35],$Vl=[1,31],$Vm=[1,38],$Vn=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,36,37,38,39,42,45],$Vo=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,36,37,38,39,42,45],$Vp=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,36,37,38,39,42,45],$Vq=[4,5,14,15,17,19,20,22,23,24,25,26,27,36,37,38,39,42,45];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NL\":5,\"directive\":6,\"SD\":7,\"document\":8,\"line\":9,\"statement\":10,\"idStatement\":11,\"DESCR\":12,\"-->\":13,\"HIDE_EMPTY\":14,\"scale\":15,\"WIDTH\":16,\"COMPOSIT_STATE\":17,\"STRUCT_START\":18,\"STRUCT_STOP\":19,\"STATE_DESCR\":20,\"AS\":21,\"ID\":22,\"FORK\":23,\"JOIN\":24,\"CHOICE\":25,\"CONCURRENT\":26,\"note\":27,\"notePosition\":28,\"NOTE_TEXT\":29,\"direction\":30,\"openDirective\":31,\"typeDirective\":32,\"closeDirective\":33,\":\":34,\"argDirective\":35,\"direction_tb\":36,\"direction_bt\":37,\"direction_rl\":38,\"direction_lr\":39,\"eol\":40,\";\":41,\"EDGE_STATE\":42,\"left_of\":43,\"right_of\":44,\"open_directive\":45,\"type_directive\":46,\"arg_directive\":47,\"close_directive\":48,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NL\",7:\"SD\",12:\"DESCR\",13:\"-->\",14:\"HIDE_EMPTY\",15:\"scale\",16:\"WIDTH\",17:\"COMPOSIT_STATE\",18:\"STRUCT_START\",19:\"STRUCT_STOP\",20:\"STATE_DESCR\",21:\"AS\",22:\"ID\",23:\"FORK\",24:\"JOIN\",25:\"CHOICE\",26:\"CONCURRENT\",27:\"note\",29:\"NOTE_TEXT\",34:\":\",36:\"direction_tb\",37:\"direction_bt\",38:\"direction_rl\",39:\"direction_lr\",41:\";\",42:\"EDGE_STATE\",43:\"left_of\",44:\"right_of\",45:\"open_directive\",46:\"type_directive\",47:\"arg_directive\",48:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[40,1],[40,1],[11,1],[11,1],[28,1],[28,1],[31,1],[32,1],[35,1],[33,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n /*console.warn('Root document', $$[$0]);*/ yy.setRootDoc($$[$0]);return $$[$0]; \nbreak;\ncase 5:\n this.$ = [] \nbreak;\ncase 6:\n\r\n        if($$[$0]!='nl'){\r\n            $$[$0-1].push($$[$0]);this.$ = $$[$0-1]\r\n        }\r\n        // console.warn('Got document',$$[$0-1], $$[$0]);\r\n    \nbreak;\ncase 7: case 8:\n this.$ = $$[$0] \nbreak;\ncase 9:\n this.$='nl';\nbreak;\ncase 10:\n /*console.warn('got id and descr', $$[$0]);*/this.$={ stmt: 'state', id: $$[$0], type: 'default', description: ''};\nbreak;\ncase 11:\n /*console.warn('got id and descr', $$[$0-1], $$[$0].trim());*/this.$={ stmt: 'state', id: $$[$0-1], type: 'default', description: yy.trimColon($$[$0])};\nbreak;\ncase 12:\n\r\n        /*console.warn('got id', $$[$0-2]);yy.addRelation($$[$0-2], $$[$0]);*/\r\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-2], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0] ,type: 'default', description: ''}};\r\n    \nbreak;\ncase 13:\n\r\n        /*yy.addRelation($$[$0-3], $$[$0-1], $$[$0].substr(1).trim());*/\r\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-3], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0-1] ,type: 'default', description: ''}, description: $$[$0].substr(1).trim()};\r\n    \nbreak;\ncase 17:\n\r\n        /* console.warn('Adding document for state without id ', $$[$0-3]);*/\r\n        this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: '', doc: $$[$0-1] }\r\n    \nbreak;\ncase 18:\n\r\n        var id=$$[$0];\r\n        var description = $$[$0-2].trim();\r\n        if($$[$0].match(':')){\r\n            var parts = $$[$0].split(':');\r\n            id=parts[0];\r\n            description = [description, parts[1]];\r\n        }\r\n        this.$={stmt: 'state', id: id, type: 'default', description: description};\r\n\r\n    \nbreak;\ncase 19:\n\r\n         // console.warn('Adding document for state with id zxzx', $$[$0-3], $$[$0-2], yy.getDirection()); yy.addDocument($$[$0-3]);\r\n         this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: $$[$0-5], doc: $$[$0-1] }\r\n    \nbreak;\ncase 20:\n\r\n        this.$={ stmt: 'state', id: $$[$0], type: 'fork' }\r\n    \nbreak;\ncase 21:\n\r\n        this.$={ stmt: 'state', id: $$[$0], type: 'join' }\r\n    \nbreak;\ncase 22:\n\r\n        this.$={ stmt: 'state', id: $$[$0], type: 'choice' }\r\n    \nbreak;\ncase 23:\n\r\n        this.$={ stmt: 'state', id: yy.getDividerId(), type: 'divider' }\r\n    \nbreak;\ncase 24:\n\r\n        /* console.warn('got NOTE, position: ', $$[$0-2].trim(), 'id = ', $$[$0-1].trim(), 'note: ', $$[$0]);*/\r\n        this.$={ stmt: 'state', id: $$[$0-1].trim(), note:{position: $$[$0-2].trim(), text: $$[$0].trim()}};\r\n    \nbreak;\ncase 30:\n yy.setDirection('TB');this.$={stmt:'dir', value:'TB'};\nbreak;\ncase 31:\n yy.setDirection('BT');this.$={stmt:'dir', value:'BT'};\nbreak;\ncase 32:\n yy.setDirection('RL'); this.$={stmt:'dir', value:'RL'};\nbreak;\ncase 33:\n yy.setDirection('LR');this.$={stmt:'dir', value:'LR'};\nbreak;\ncase 36: case 37:\nthis.$=$$[$0];\nbreak;\ncase 40:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 41:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 42:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 43:\n yy.parseDirective('}%%', 'close_directive', 'state'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:4,7:$V2,31:6,45:$V3},{1:[3]},{3:8,4:$V0,5:$V1,6:4,7:$V2,31:6,45:$V3},{3:9,4:$V0,5:$V1,6:4,7:$V2,31:6,45:$V3},{3:10,4:$V0,5:$V1,6:4,7:$V2,31:6,45:$V3},o([1,4,5,14,15,17,20,22,23,24,25,26,27,36,37,38,39,42,45],$V4,{8:11}),{32:12,46:[1,13]},{46:[2,40]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:6,36:$Vh,37:$Vi,38:$Vj,39:$Vk,42:$Vl,45:$V3},{33:36,34:[1,37],48:$Vm},o([34,48],[2,41]),o($Vn,[2,6]),{6:28,10:39,11:18,14:$V7,15:$V8,17:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:6,36:$Vh,37:$Vi,38:$Vj,39:$Vk,42:$Vl,45:$V3},o($Vn,[2,8]),o($Vn,[2,9]),o($Vn,[2,10],{12:[1,40],13:[1,41]}),o($Vn,[2,14]),{16:[1,42]},o($Vn,[2,16],{18:[1,43]}),{21:[1,44]},o($Vn,[2,20]),o($Vn,[2,21]),o($Vn,[2,22]),o($Vn,[2,23]),{28:45,29:[1,46],43:[1,47],44:[1,48]},o($Vn,[2,26]),o($Vn,[2,27]),o($Vo,[2,36]),o($Vo,[2,37]),o($Vn,[2,30]),o($Vn,[2,31]),o($Vn,[2,32]),o($Vn,[2,33]),o($Vp,[2,28]),{35:49,47:[1,50]},o($Vp,[2,43]),o($Vn,[2,7]),o($Vn,[2,11]),{11:51,22:$Vb,42:$Vl},o($Vn,[2,15]),o($Vq,$V4,{8:52}),{22:[1,53]},{22:[1,54]},{21:[1,55]},{22:[2,38]},{22:[2,39]},{33:56,48:$Vm},{48:[2,42]},o($Vn,[2,12],{12:[1,57]}),{4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,19:[1,58],20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:6,36:$Vh,37:$Vi,38:$Vj,39:$Vk,42:$Vl,45:$V3},o($Vn,[2,18],{18:[1,59]}),{29:[1,60]},{22:[1,61]},o($Vp,[2,29]),o($Vn,[2,13]),o($Vn,[2,17]),o($Vq,$V4,{8:62}),o($Vn,[2,24]),o($Vn,[2,25]),{4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,19:[1,63],20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:6,36:$Vh,37:$Vi,38:$Vj,39:$Vk,42:$Vl,45:$V3},o($Vn,[2,19])],\ndefaultActions: {7:[2,40],8:[2,1],9:[2,2],10:[2,3],47:[2,38],48:[2,39],50:[2,42]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 36;\nbreak;\ncase 1:return 37;\nbreak;\ncase 2:return 38;\nbreak;\ncase 3:return 39;\nbreak;\ncase 4: this.begin('open_directive'); return 45; \nbreak;\ncase 5: this.begin('type_directive'); return 46; \nbreak;\ncase 6: this.popState(); this.begin('arg_directive'); return 34; \nbreak;\ncase 7: this.popState(); this.popState(); return 48; \nbreak;\ncase 8:return 47;\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */{ /*console.log('Crap after close');*/ }\nbreak;\ncase 11:return 5;\nbreak;\ncase 12:/* skip all whitespace */\nbreak;\ncase 13:/* skip same-line whitespace */\nbreak;\ncase 14:/* skip comments */\nbreak;\ncase 15:/* skip comments */\nbreak;\ncase 16: this.pushState('SCALE'); /* console.log('Got scale', yy_.yytext);*/ return 15; \nbreak;\ncase 17:return 16;\nbreak;\ncase 18:this.popState();\nbreak;\ncase 19: /*console.log('Starting STATE zxzx'+yy.getDirection());*/this.pushState('STATE'); \nbreak;\ncase 20:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim(); /*console.warn('Fork Fork: ',yy_.yytext);*/return 23;\nbreak;\ncase 21:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 24;\nbreak;\ncase 22:this.popState();yy_.yytext=yy_.yytext.slice(0,-10).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 25;\nbreak;\ncase 23:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Fork: ',yy_.yytext);*/return 23;\nbreak;\ncase 24:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 24;\nbreak;\ncase 25:this.popState();yy_.yytext=yy_.yytext.slice(0,-10).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 25;\nbreak;\ncase 26: return 36;\nbreak;\ncase 27: return 37;\nbreak;\ncase 28: return 38;\nbreak;\ncase 29: return 39;\nbreak;\ncase 30: /*console.log('Starting STATE_STRING zxzx');*/this.begin(\"STATE_STRING\");\nbreak;\ncase 31:this.popState();this.pushState('STATE_ID');return \"AS\";\nbreak;\ncase 32:this.popState();/* console.log('STATE_ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 33:this.popState();\nbreak;\ncase 34: /*console.log('Long description:', yy_.yytext);*/return \"STATE_DESCR\";\nbreak;\ncase 35:/*console.log('COMPOSIT_STATE', yy_.yytext);*/return 17;\nbreak;\ncase 36:this.popState();\nbreak;\ncase 37:this.popState();this.pushState('struct'); /*console.log('begin struct', yy_.yytext);*/return 18;\nbreak;\ncase 38: /*console.log('Ending struct');*/ this.popState(); return 19;\nbreak;\ncase 39:/* nothing */\nbreak;\ncase 40: this.begin('NOTE'); return 27; \nbreak;\ncase 41: this.popState();this.pushState('NOTE_ID');return 43;\nbreak;\ncase 42: this.popState();this.pushState('NOTE_ID');return 44;\nbreak;\ncase 43: this.popState();this.pushState('FLOATING_NOTE');\nbreak;\ncase 44:this.popState();this.pushState('FLOATING_NOTE_ID');return \"AS\";\nbreak;\ncase 45:/**/\nbreak;\ncase 46: /*console.log('Floating note text: ', yy_.yytext);*/return \"NOTE_TEXT\";\nbreak;\ncase 47:this.popState();/*console.log('Floating note ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 48: this.popState();this.pushState('NOTE_TEXT');/*console.log('Got ID for note', yy_.yytext);*/return 22;\nbreak;\ncase 49: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.substr(2).trim();return 29;\nbreak;\ncase 50: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.slice(0,-8).trim();return 29;\nbreak;\ncase 51: /*console.log('Got state diagram', yy_.yytext,'#');*/return 7; \nbreak;\ncase 52: /*console.log('Got state diagram', yy_.yytext,'#');*/return 7; \nbreak;\ncase 53: /*console.log('HIDE_EMPTY', yy_.yytext,'#');*/return 14; \nbreak;\ncase 54: /*console.log('EDGE_STATE=',yy_.yytext);*/ return 42;\nbreak;\ncase 55: /*console.log('=>ID=',yy_.yytext);*/ return 22;\nbreak;\ncase 56: yy_.yytext = yy_.yytext.trim(); /*console.log('Descr = ', yy_.yytext);*/ return 12; \nbreak;\ncase 57:return 13;\nbreak;\ncase 58:return 26;\nbreak;\ncase 59:return 5;\nbreak;\ncase 60:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:.*direction\\s+TB[^\\n]*)/i,/^(?:.*direction\\s+BT[^\\n]*)/i,/^(?:.*direction\\s+RL[^\\n]*)/i,/^(?:.*direction\\s+LR[^\\n]*)/i,/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:[\\s]+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:scale\\s+)/i,/^(?:\\d+)/i,/^(?:\\s+width\\b)/i,/^(?:state\\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\\[\\[fork\\]\\])/i,/^(?:.*\\[\\[join\\]\\])/i,/^(?:.*\\[\\[choice\\]\\])/i,/^(?:.*direction\\s+TB[^\\n]*)/i,/^(?:.*direction\\s+BT[^\\n]*)/i,/^(?:.*direction\\s+RL[^\\n]*)/i,/^(?:.*direction\\s+LR[^\\n]*)/i,/^(?:[\"])/i,/^(?:\\s*as\\s+)/i,/^(?:[^\\n\\{]*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n\\s\\{]+)/i,/^(?:\\n)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?:[\\n])/i,/^(?:note\\s+)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:\")/i,/^(?:\\s*as\\s*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n]*)/i,/^(?:\\s*[^:\\n\\s\\-]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:[\\s\\S]*?end note\\b)/i,/^(?:stateDiagram\\s+)/i,/^(?:stateDiagram-v2\\s+)/i,/^(?:hide empty description\\b)/i,/^(?:\\[\\*\\])/i,/^(?:[^:\\n\\s\\-\\{]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"LINE\":{\"rules\":[13,14],\"inclusive\":false},\"close_directive\":{\"rules\":[13,14],\"inclusive\":false},\"arg_directive\":{\"rules\":[7,8,13,14],\"inclusive\":false},\"type_directive\":{\"rules\":[6,7,13,14],\"inclusive\":false},\"open_directive\":{\"rules\":[5,13,14],\"inclusive\":false},\"struct\":{\"rules\":[13,14,19,26,27,28,29,38,39,40,54,55,56,57,58],\"inclusive\":false},\"FLOATING_NOTE_ID\":{\"rules\":[47],\"inclusive\":false},\"FLOATING_NOTE\":{\"rules\":[44,45,46],\"inclusive\":false},\"NOTE_TEXT\":{\"rules\":[49,50],\"inclusive\":false},\"NOTE_ID\":{\"rules\":[48],\"inclusive\":false},\"NOTE\":{\"rules\":[41,42,43],\"inclusive\":false},\"SCALE\":{\"rules\":[17,18],\"inclusive\":false},\"ALIAS\":{\"rules\":[],\"inclusive\":false},\"STATE_ID\":{\"rules\":[32],\"inclusive\":false},\"STATE_STRING\":{\"rules\":[33,34],\"inclusive\":false},\"FORK_STATE\":{\"rules\":[],\"inclusive\":false},\"STATE\":{\"rules\":[13,14,20,21,22,23,24,25,30,31,35,36,37],\"inclusive\":false},\"ID\":{\"rules\":[13,14],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,9,10,11,12,14,15,16,19,37,40,51,52,53,54,55,56,57,59,60],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,5],$V2=[6,9,11,17,18,19,21],$V3=[1,15],$V4=[1,16],$V5=[1,17],$V6=[1,21],$V7=[4,6,9,11,17,18,19,21];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"journey\":4,\"document\":5,\"EOF\":6,\"directive\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NEWLINE\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\":\":15,\"argDirective\":16,\"title\":17,\"section\":18,\"taskName\":19,\"taskData\":20,\"open_directive\":21,\"type_directive\":22,\"arg_directive\":23,\"close_directive\":24,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"journey\",6:\"EOF\",9:\"SPACE\",11:\"NEWLINE\",15:\":\",17:\"title\",18:\"section\",19:\"taskName\",20:\"taskData\",21:\"open_directive\",22:\"type_directive\",23:\"arg_directive\",24:\"close_directive\"},\nproductions_: [0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return $$[$0-1]; \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 11:\nyy.setTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\ncase 12:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 13:\nyy.addTask($$[$0-1], $$[$0]);this.$='task';\nbreak;\ncase 15:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 16:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 17:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 18:\n yy.parseDirective('}%%', 'close_directive', 'journey'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,7:3,12:4,21:$V1},{1:[3]},o($V2,[2,3],{5:6}),{3:7,4:$V0,7:3,12:4,21:$V1},{13:8,22:[1,9]},{22:[2,15]},{6:[1,10],7:18,8:11,9:[1,12],10:13,11:[1,14],12:4,17:$V3,18:$V4,19:$V5,21:$V1},{1:[2,2]},{14:19,15:[1,20],24:$V6},o([15,24],[2,16]),o($V2,[2,8],{1:[2,1]}),o($V2,[2,4]),{7:18,10:22,12:4,17:$V3,18:$V4,19:$V5,21:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,11]),o($V2,[2,12]),{20:[1,23]},o($V2,[2,14]),{11:[1,24]},{16:25,23:[1,26]},{11:[2,18]},o($V2,[2,5]),o($V2,[2,13]),o($V7,[2,9]),{14:27,24:$V6},{24:[2,17]},{11:[1,28]},o($V7,[2,10])],\ndefaultActions: {5:[2,15],7:[2,2],21:[2,18],26:[2,17]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 21; \nbreak;\ncase 1: this.begin('type_directive'); return 22; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 15; \nbreak;\ncase 3: this.popState(); this.popState(); return 24; \nbreak;\ncase 4:return 23;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7:return 11;\nbreak;\ncase 8:/* skip whitespace */\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:return 4;\nbreak;\ncase 11:return 17;\nbreak;\ncase 12:return 18;\nbreak;\ncase 13:return 19;\nbreak;\ncase 14:return 20;\nbreak;\ncase 15:return 15;\nbreak;\ncase 16:return 6;\nbreak;\ncase 17:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:journey\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:section\\s[^#:\\n;]+)/i,/^(?:[^#:\\n;]+)/i,/^(?::[^#\\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,11,12,13,14,15,16,17],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import { assignWithDepth } from './utils';\nimport { log } from './logger';\nimport theme from './themes';\nimport config from './defaultConfig';\n\n// debugger;\n\nexport const defaultConfig = Object.freeze(config);\n\nlet siteConfig = assignWithDepth({}, defaultConfig);\nlet configFromInitialize;\nlet directives = [];\nlet currentConfig = assignWithDepth({}, defaultConfig);\n\nexport const updateCurrentConfig = (siteCfg, _directives) => {\n  // start with config beeing the siteConfig\n  let cfg = assignWithDepth({}, siteCfg);\n  // let sCfg = assignWithDepth(defaultConfig, siteConfigDelta);\n\n  // Join directives\n  let sumOfDirectives = {};\n  for (let i = 0; i < _directives.length; i++) {\n    const d = _directives[i];\n    sanitize(d);\n\n    // Apply the data from the directive where the the overrides the themeVaraibles\n    sumOfDirectives = assignWithDepth(sumOfDirectives, d);\n  }\n\n  cfg = assignWithDepth(cfg, sumOfDirectives);\n\n  if (sumOfDirectives.theme) {\n    const tmpConfigFromInitialize = assignWithDepth({}, configFromInitialize);\n    const themeVariables = assignWithDepth(\n      tmpConfigFromInitialize.themeVariables || {},\n      sumOfDirectives.themeVariables\n    );\n    cfg.themeVariables = theme[cfg.theme].getThemeVariables(themeVariables);\n  }\n\n  currentConfig = cfg;\n  return cfg;\n};\n\n/**\n * ## setSiteConfig\n *\n * | Function      | Description                           | Type        | Values                                  |\n * | ------------- | ------------------------------------- | ----------- | --------------------------------------- |\n * | setSiteConfig | Sets the siteConfig to desired values | Put Request | Any Values, except ones in secure array |\n *\n * **Notes:** Sets the siteConfig. The siteConfig is a protected configuration for repeat use. Calls\n * to reset() will reset the currentConfig to siteConfig. Calls to reset(configApi.defaultConfig)\n * will reset siteConfig and currentConfig to the defaultConfig Note: currentConfig is set in this\n * function *Default value: At default, will mirror Global Config**\n *\n * @param conf - The base currentConfig to use as siteConfig\n * @returns {object} - The siteConfig\n */\nexport const setSiteConfig = (conf) => {\n  siteConfig = assignWithDepth({}, defaultConfig);\n  siteConfig = assignWithDepth(siteConfig, conf);\n\n  if (conf.theme) {\n    siteConfig.themeVariables = theme[conf.theme].getThemeVariables(conf.themeVariables);\n  }\n\n  currentConfig = updateCurrentConfig(siteConfig, directives);\n  return siteConfig;\n};\n\nexport const saveConfigFromInitilize = (conf) => {\n  configFromInitialize = assignWithDepth({}, conf);\n};\n\nexport const updateSiteConfig = (conf) => {\n  siteConfig = assignWithDepth(siteConfig, conf);\n  updateCurrentConfig(siteConfig, directives);\n\n  return siteConfig;\n};\n/**\n * ## getSiteConfig\n *\n * | Function      | Description                                       | Type        | Values                           |\n * | ------------- | ------------------------------------------------- | ----------- | -------------------------------- |\n * | setSiteConfig | Returns the current siteConfig base configuration | Get Request | Returns Any Values in siteConfig |\n *\n * **Notes**: Returns **any** values in siteConfig.\n *\n * @returns {object} - The siteConfig\n */\nexport const getSiteConfig = () => {\n  return assignWithDepth({}, siteConfig);\n};\n/**\n * ## setConfig\n *\n * | Function      | Description                           | Type        | Values                                  |\n * | ------------- | ------------------------------------- | ----------- | --------------------------------------- |\n * | setSiteConfig | Sets the siteConfig to desired values | Put Request | Any Values, except ones in secure array |\n *\n * **Notes**: Sets the currentConfig. The parameter conf is sanitized based on the siteConfig.secure\n * keys. Any values found in conf with key found in siteConfig.secure will be replaced with the\n * corresponding siteConfig value.\n *\n * @param {any} conf - The potential currentConfig\n * @returns {any} - The currentConfig merged with the sanitized conf\n */\nexport const setConfig = (conf) => {\n  // sanitize(conf);\n  // Object.keys(conf).forEach(key => {\n  //   const manipulator = manipulators[key];\n  //   conf[key] = manipulator ? manipulator(conf[key]) : conf[key];\n  // });\n\n  assignWithDepth(currentConfig, conf);\n\n  return getConfig();\n};\n\n/**\n * ## getConfig\n *\n * | Function  | Description               | Type        | Return Values                  |\n * | --------- | ------------------------- | ----------- | ------------------------------ |\n * | getConfig | Obtains the currentConfig | Get Request | Any Values from current Config |\n *\n * **Notes**: Returns **any** the currentConfig\n *\n * @returns {any} - The currentConfig\n */\nexport const getConfig = () => {\n  return assignWithDepth({}, currentConfig);\n};\n/**\n * ## sanitize\n *\n * | Function | Description                            | Type        | Values |\n * | -------- | -------------------------------------- | ----------- | ------ |\n * | sanitize | Sets the siteConfig to desired values. | Put Request | None   |\n *\n * Ensures options parameter does not attempt to override siteConfig secure keys **Notes**: modifies\n * options in-place\n *\n * @param {any} options - The potential setConfig parameter\n */\nexport const sanitize = (options) => {\n  // Checking that options are not in the list of excluded options\n  Object.keys(siteConfig.secure).forEach((key) => {\n    if (typeof options[siteConfig.secure[key]] !== 'undefined') {\n      // DO NOT attempt to print options[siteConfig.secure[key]] within `${}` as a malicious script\n      // can exploit the logger's attempt to stringify the value and execute arbitrary code\n      log.debug(\n        `Denied attempt to modify a secure key ${siteConfig.secure[key]}`,\n        options[siteConfig.secure[key]]\n      );\n      delete options[siteConfig.secure[key]];\n    }\n  });\n\n  // Check that there no attempts of prototype pollution\n  Object.keys(options).forEach((key) => {\n    if (key.indexOf('__') === 0) {\n      delete options[key];\n    }\n  });\n  // Check that there no attempts of xss, there should be no tags at all in the directive\n  // blocking data urls as base64 urls can contain svgs with inline script tags\n  Object.keys(options).forEach((key) => {\n    if (typeof options[key] === 'string') {\n      if (\n        options[key].indexOf('<') > -1 ||\n        options[key].indexOf('>') > -1 ||\n        options[key].indexOf('url(data:') > -1\n      ) {\n        delete options[key];\n      }\n    }\n    if (typeof options[key] === 'object') {\n      sanitize(options[key]);\n    }\n  });\n};\n\n/**\n * Pushes in a directive to the configuration\n *\n * @param {object} directive The directive to push in\n */\nexport const addDirective = (directive) => {\n  if (directive.fontFamily) {\n    if (!directive.themeVariables) {\n      directive.themeVariables = { fontFamily: directive.fontFamily };\n    } else {\n      if (!directive.themeVariables.fontFamily) {\n        directive.themeVariables = { fontFamily: directive.fontFamily };\n      }\n    }\n  }\n  directives.push(directive);\n  updateCurrentConfig(siteConfig, directives);\n};\n\n/**\n * ## reset\n *\n * | Function | Description                  | Type        | Required | Values |\n * | -------- | ---------------------------- | ----------- | -------- | ------ |\n * | reset    | Resets currentConfig to conf | Put Request | Required | None   |\n *\n * ## conf\n *\n * | Parameter | Description                                                   | Type       | Required | Values                                       |\n * | --------- | ------------------------------------------------------------- | ---------- | -------- | -------------------------------------------- |\n * | conf      | base set of values, which currentConfig coul be **reset** to. | Dictionary | Required | Any Values, with respect to the secure Array |\n *\n * **Notes**: (default: current siteConfig ) (optional, default `getSiteConfig()`)\n */\nexport const reset = () => {\n  // Replace current config with siteConfig\n  directives = [];\n  updateCurrentConfig(siteConfig, directives);\n};\n","import intersectRect from './intersect/intersect-rect';\nimport { log } from '../logger';\nimport createLabel from './createLabel';\nimport { select } from 'd3';\nimport { getConfig } from '../config';\nimport { evaluate } from '../diagrams/common/common';\n\nconst rect = (parent, node) => {\n  log.trace('Creating subgraph rect for ', node.id, node);\n\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'cluster' + (node.class ? ' ' + node.class : ''))\n    .attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'cluster-label');\n\n  const text = label\n    .node()\n    .appendChild(createLabel(node.labelText, node.labelStyle, undefined, true));\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  const width = node.width <= bbox.width + padding ? bbox.width + padding : node.width;\n  if (node.width <= bbox.width + padding) {\n    node.diff = (bbox.width - node.width) / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n\n  log.trace('Data ', node, JSON.stringify(node));\n  // center the rect around its coordinate\n  rect\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', node.x - width / 2)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', width)\n    .attr('height', node.height + padding);\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' +\n      (node.x - bbox.width / 2) +\n      ', ' +\n      (node.y - node.height / 2 + node.padding / 3) +\n      ')'\n  );\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\n/**\n * Non visiable cluster where the note is group with its\n *\n * @param {any} parent\n * @param {any} node\n * @returns {any} ShapeSvg\n */\nconst noteGroup = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', 'note-cluster').attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  // center the rect around its coordinate\n  rect\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', node.x - node.width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', node.width + padding)\n    .attr('height', node.height + padding)\n    .attr('fill', 'none');\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\nconst roundedWithTitle = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', node.classes).attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'cluster-label');\n  const innerRect = shapeSvg.append('rect');\n\n  const text = label\n    .node()\n    .appendChild(createLabel(node.labelText, node.labelStyle, undefined, true));\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  bbox = text.getBBox();\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (bbox.width + node.padding * 0 - node.width) / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n\n  // center the rect around its coordinate\n  rect\n    .attr('class', 'outer')\n    .attr('x', node.x - width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', width + padding)\n    .attr('height', node.height + padding);\n  innerRect\n    .attr('class', 'inner')\n    .attr('x', node.x - width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding + bbox.height - 1)\n    .attr('width', width + padding)\n    .attr('height', node.height + padding - bbox.height - 3);\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' +\n      (node.x - bbox.width / 2) +\n      ', ' +\n      (node.y -\n        node.height / 2 -\n        node.padding / 3 +\n        (evaluate(getConfig().flowchart.htmlLabels) ? 5 : 3)) +\n      ')'\n  );\n\n  const rectBox = rect.node().getBBox();\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst divider = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', node.classes).attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  // center the rect around its coordinate\n  rect\n    .attr('class', 'divider')\n    .attr('x', node.x - node.width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2)\n    .attr('width', node.width + padding)\n    .attr('height', node.height + padding);\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.diff = -node.padding / 2;\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst shapes = { rect, roundedWithTitle, noteGroup, divider };\n\nlet clusterElems = {};\n\nexport const insertCluster = (elem, node) => {\n  log.trace('Inserting cluster');\n  const shape = node.shape || 'rect';\n  clusterElems[node.id] = shapes[shape](elem, node);\n};\nexport const getClusterTitleWidth = (elem, node) => {\n  const label = createLabel(node.labelText, node.labelStyle, undefined, true);\n  elem.node().appendChild(label);\n  const width = label.getBBox().width;\n  elem.node().removeChild(label);\n  return width;\n};\n\nexport const clear = () => {\n  clusterElems = {};\n};\n\nexport const positionCluster = (node) => {\n  log.info('Position cluster (' + node.id + ', ' + node.x + ', ' + node.y + ')');\n  const el = clusterElems[node.id];\n\n  el.attr('transform', 'translate(' + node.x + ', ' + node.y + ')');\n};\n","import { select } from 'd3';\nimport { log } from '../logger'; // eslint-disable-line\nimport { getConfig } from '../config';\nimport { sanitizeText, evaluate } from '../diagrams/common/common';\n\nconst sanitizeTxt = (txt) => sanitizeText(txt, getConfig());\n\n/**\n * @param dom\n * @param styleFn\n */\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr('style', styleFn);\n  }\n}\n\n/**\n * @param {any} node\n * @returns {SVGForeignObjectElement} Node\n */\nfunction addHtmlLabel(node) {\n  const fo = select(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject'));\n  const div = fo.append('xhtml:div');\n\n  const label = node.label;\n  const labelClass = node.isNode ? 'nodeLabel' : 'edgeLabel';\n  div.html(\n    '<span class=\"' +\n      labelClass +\n      '\" ' +\n      (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : '') +\n      '>' +\n      label +\n      '</span>'\n  );\n\n  applyStyle(div, node.labelStyle);\n  div.style('display', 'inline-block');\n  // Fix for firefox\n  div.style('white-space', 'nowrap');\n  div.attr('xmlns', 'http://www.w3.org/1999/xhtml');\n  return fo.node();\n}\n\nconst createLabel = (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || '';\n  if (typeof vertexText === 'object') vertexText = vertexText[0];\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n    vertexText = vertexText.replace(/\\\\n|\\n/g, '<br />');\n    log.info('vertexText' + vertexText);\n    const node = {\n      isNode,\n      label: vertexText.replace(\n        /fa[lrsb]?:fa-[\\w-]+/g,\n        (s) => `<i class='${s.replace(':', ' ')}'></i>`\n      ),\n      labelStyle: style.replace('fill:', 'color:'),\n    };\n    let vertexNode = addHtmlLabel(node);\n    // vertexNode.parentNode.removeChild(vertexNode);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    svgLabel.setAttribute('style', style.replace('color:', 'fill:'));\n    let rows = [];\n    if (typeof vertexText === 'string') {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n\n    for (let j = 0; j < rows.length; j++) {\n      const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n      tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n      tspan.setAttribute('dy', '1em');\n      tspan.setAttribute('x', '0');\n      if (isTitle) {\n        tspan.setAttribute('class', 'title-row');\n      } else {\n        tspan.setAttribute('class', 'row');\n      }\n      tspan.textContent = rows[j].trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n};\n\nexport default createLabel;\n","import { log } from '../logger'; // eslint-disable-line\nimport createLabel from './createLabel';\nimport { line, curveBasis, select } from 'd3';\nimport { getConfig } from '../config';\nimport utils from '../utils';\nimport { evaluate } from '../diagrams/common/common';\n\nlet edgeLabels = {};\nlet terminalLabels = {};\n\nexport const clear = () => {\n  edgeLabels = {};\n  terminalLabels = {};\n};\n\nexport const insertEdgeLabel = (elem, edge) => {\n  // Create the actual text element\n  const labelElement = createLabel(edge.label, edge.labelStyle);\n\n  // Create outer g, edgeLabel, this will be positioned after graph layout\n  const edgeLabel = elem.insert('g').attr('class', 'edgeLabel');\n\n  // Create inner g, label, this will be positioned now for centering the text\n  const label = edgeLabel.insert('g').attr('class', 'label');\n  label.node().appendChild(labelElement);\n\n  // Center the label\n  let bbox = labelElement.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = labelElement.children[0];\n    const dv = select(labelElement);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  label.attr('transform', 'translate(' + -bbox.width / 2 + ', ' + -bbox.height / 2 + ')');\n\n  // Make element accessible by id for positioning\n  edgeLabels[edge.id] = edgeLabel;\n\n  // Update the abstract data of the edge with the new information about its width and height\n  edge.width = bbox.width;\n  edge.height = bbox.height;\n\n  let fo;\n  if (edge.startLabelLeft) {\n    // Create the actual text element\n    const startLabelElement = createLabel(edge.startLabelLeft, edge.labelStyle);\n    const startEdgeLabelLeft = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = startEdgeLabelLeft.insert('g').attr('class', 'inner');\n    fo = inner.node().appendChild(startLabelElement);\n    const slBox = startLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].startLeft = startEdgeLabelLeft;\n    setTerminalWidth(fo, edge.startLabelLeft);\n  }\n  if (edge.startLabelRight) {\n    // Create the actual text element\n    const startLabelElement = createLabel(edge.startLabelRight, edge.labelStyle);\n    const startEdgeLabelRight = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = startEdgeLabelRight.insert('g').attr('class', 'inner');\n    fo = startEdgeLabelRight.node().appendChild(startLabelElement);\n    inner.node().appendChild(startLabelElement);\n    const slBox = startLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].startRight = startEdgeLabelRight;\n    setTerminalWidth(fo, edge.startLabelRight);\n  }\n  if (edge.endLabelLeft) {\n    // Create the actual text element\n    const endLabelElement = createLabel(edge.endLabelLeft, edge.labelStyle);\n    const endEdgeLabelLeft = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = endEdgeLabelLeft.insert('g').attr('class', 'inner');\n    fo = inner.node().appendChild(endLabelElement);\n    const slBox = endLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    endEdgeLabelLeft.node().appendChild(endLabelElement);\n\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].endLeft = endEdgeLabelLeft;\n    setTerminalWidth(fo, edge.endLabelLeft);\n  }\n  if (edge.endLabelRight) {\n    // Create the actual text element\n    const endLabelElement = createLabel(edge.endLabelRight, edge.labelStyle);\n    const endEdgeLabelRight = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = endEdgeLabelRight.insert('g').attr('class', 'inner');\n\n    fo = inner.node().appendChild(endLabelElement);\n    const slBox = endLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    endEdgeLabelRight.node().appendChild(endLabelElement);\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].endRight = endEdgeLabelRight;\n    setTerminalWidth(fo, edge.endLabelRight);\n  }\n};\n\n/**\n * @param {any} fo\n * @param {any} value\n */\nfunction setTerminalWidth(fo, value) {\n  if (getConfig().flowchart.htmlLabels && fo) {\n    fo.style.width = value.length * 9 + 'px';\n    fo.style.height = '12px';\n  }\n}\n\nexport const positionEdgeLabel = (edge, paths) => {\n  log.info('Moving label abc78 ', edge.id, edge.label, edgeLabels[edge.id]);\n  let path = paths.updatedPath ? paths.updatedPath : paths.originalPath;\n  if (edge.label) {\n    const el = edgeLabels[edge.id];\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      //   // debugger;\n      const pos = utils.calcLabelPosition(path);\n      log.info('Moving label from (', x, ',', y, ') to (', pos.x, ',', pos.y, ') abc78');\n      // x = pos.x;\n      // y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n\n  //let path = paths.updatedPath ? paths.updatedPath : paths.originalPath;\n  if (edge.startLabelLeft) {\n    const el = terminalLabels[edge.id].startLeft;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeStart ? 10 : 0, 'start_left', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.startLabelRight) {\n    const el = terminalLabels[edge.id].startRight;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(\n        edge.arrowTypeStart ? 10 : 0,\n        'start_right',\n        path\n      );\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.endLabelLeft) {\n    const el = terminalLabels[edge.id].endLeft;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, 'end_left', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.endLabelRight) {\n    const el = terminalLabels[edge.id].endRight;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, 'end_right', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n};\n\n// const getRelationType = function(type) {\n//   switch (type) {\n//     case stateDb.relationType.AGGREGATION:\n//       return 'aggregation';\n//     case stateDb.relationType.EXTENSION:\n//       return 'extension';\n//     case stateDb.relationType.COMPOSITION:\n//       return 'composition';\n//     case stateDb.relationType.DEPENDENCY:\n//       return 'dependency';\n//   }\n// };\n\nconst outsideNode = (node, point) => {\n  // log.warn('Checking bounds ', node, point);\n  const x = node.x;\n  const y = node.y;\n  const dx = Math.abs(point.x - x);\n  const dy = Math.abs(point.y - y);\n  const w = node.width / 2;\n  const h = node.height / 2;\n  if (dx >= w || dy >= h) {\n    return true;\n  }\n  return false;\n};\n\nexport const intersection = (node, outsidePoint, insidePoint) => {\n  log.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(outsidePoint)}\n  insidePoint : ${JSON.stringify(insidePoint)}\n  node        : x:${node.x} y:${node.y} w:${node.width} h:${node.height}`);\n  const x = node.x;\n  const y = node.y;\n\n  const dx = Math.abs(x - insidePoint.x);\n  // const dy = Math.abs(y - insidePoint.y);\n  const w = node.width / 2;\n  let r = insidePoint.x < outsidePoint.x ? w - dx : w + dx;\n  const h = node.height / 2;\n\n  // const edges = {\n  //   x1: x - w,\n  //   x2: x + w,\n  //   y1: y - h,\n  //   y2: y + h\n  // };\n\n  // if (\n  //   outsidePoint.x === edges.x1 ||\n  //   outsidePoint.x === edges.x2 ||\n  //   outsidePoint.y === edges.y1 ||\n  //   outsidePoint.y === edges.y2\n  // ) {\n  //   log.warn('abc89 calc equals on edge', outsidePoint, edges);\n  //   return outsidePoint;\n  // }\n\n  const Q = Math.abs(outsidePoint.y - insidePoint.y);\n  const R = Math.abs(outsidePoint.x - insidePoint.x);\n  // log.warn();\n  if (Math.abs(y - outsidePoint.y) * w > Math.abs(x - outsidePoint.x) * h) { // eslint-disable-line\n    // Intersection is top or bottom of rect.\n    // let q = insidePoint.y < outsidePoint.y ? outsidePoint.y - h - y : y - h - outsidePoint.y;\n    let q = insidePoint.y < outsidePoint.y ? outsidePoint.y - h - y : y - h - outsidePoint.y;\n    r = (R * q) / Q;\n    const res = {\n      x: insidePoint.x < outsidePoint.x ? insidePoint.x + r : insidePoint.x - R + r,\n      y: insidePoint.y < outsidePoint.y ? insidePoint.y + Q - q : insidePoint.y - Q + q,\n    };\n\n    if (r === 0) {\n      res.x = outsidePoint.x;\n      res.y = outsidePoint.y;\n    }\n    if (R === 0) {\n      res.x = outsidePoint.x;\n    }\n    if (Q === 0) {\n      res.y = outsidePoint.y;\n    }\n\n    log.warn(`abc89 topp/bott calc, Q ${Q}, q ${q}, R ${R}, r ${r}`, res);\n\n    return res;\n  } else {\n    // Intersection onn sides of rect\n    if (insidePoint.x < outsidePoint.x) {\n      r = outsidePoint.x - w - x;\n    } else {\n      // r = outsidePoint.x - w - x;\n      r = x - w - outsidePoint.x;\n    }\n    let q = (Q * r) / R;\n    //  OK let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : insidePoint.x + dx - w;\n    // OK let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : outsidePoint.x + r;\n    let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : insidePoint.x - R + r;\n    // let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : outsidePoint.x + r;\n    let _y = insidePoint.y < outsidePoint.y ? insidePoint.y + q : insidePoint.y - q;\n    log.warn(`sides calc abc89, Q ${Q}, q ${q}, R ${R}, r ${r}`, { _x, _y });\n    if (r === 0) {\n      _x = outsidePoint.x;\n      _y = outsidePoint.y;\n    }\n    if (R === 0) {\n      _x = outsidePoint.x;\n    }\n    if (Q === 0) {\n      _y = outsidePoint.y;\n    }\n\n    return { x: _x, y: _y };\n  }\n};\n/**\n * This function will page a path and node where the last point(s) in the path is inside the node\n * and return an update path ending by the border of the node.\n *\n * @param {Array} _points\n * @param {any} boundryNode\n * @returns {Array} Points\n */\nconst cutPathAtIntersect = (_points, boundryNode) => {\n  log.warn('abc88 cutPathAtIntersect', _points, boundryNode);\n  let points = [];\n  let lastPointOutside = _points[0];\n  let isInside = false;\n  _points.forEach((point) => {\n    // const node = clusterDb[edge.toCluster].node;\n    log.info('abc88 checking point', point, boundryNode);\n\n    // check if point is inside the boundry rect\n    if (!outsideNode(boundryNode, point) && !isInside) {\n      // First point inside the rect found\n      // Calc the intersection coord between the point anf the last opint ouside the rect\n      const inter = intersection(boundryNode, lastPointOutside, point);\n      log.warn('abc88 inside', point, lastPointOutside, inter);\n      log.warn('abc88 intersection', inter);\n\n      // // Check case where the intersection is the same as the last point\n      let pointPresent = false;\n      points.forEach((p) => {\n        pointPresent = pointPresent || (p.x === inter.x && p.y === inter.y);\n      });\n      // // if (!pointPresent) {\n      if (!points.find((e) => e.x === inter.x && e.y === inter.y)) {\n        points.push(inter);\n      } else {\n        log.warn('abc88 no intersect', inter, points);\n      }\n      // points.push(inter);\n      isInside = true;\n    } else {\n      // Outside\n      log.warn('abc88 outside', point, lastPointOutside);\n      lastPointOutside = point;\n      // points.push(point);\n      if (!isInside) points.push(point);\n    }\n  });\n  log.warn('abc88 returning points', points);\n  return points;\n};\n\n//(edgePaths, e, edge, clusterDb, diagramtype, graph)\nexport const insertEdge = function (elem, e, edge, clusterDb, diagramType, graph) {\n  let points = edge.points;\n  let pointsHasChanged = false;\n  const tail = graph.node(e.v);\n  var head = graph.node(e.w);\n\n  log.info('abc88 InsertEdge: ', edge);\n  if (head.intersect && tail.intersect) {\n    points = points.slice(1, edge.points.length - 1);\n    points.unshift(tail.intersect(points[0]));\n    log.info(\n      'Last point',\n      points[points.length - 1],\n      head,\n      head.intersect(points[points.length - 1])\n    );\n    points.push(head.intersect(points[points.length - 1]));\n  }\n  if (edge.toCluster) {\n    log.info('to cluster abc88', clusterDb[edge.toCluster]);\n    points = cutPathAtIntersect(edge.points, clusterDb[edge.toCluster].node);\n    // log.trace('edge', edge);\n    // points = [];\n    // let lastPointOutside; // = edge.points[0];\n    // let isInside = false;\n    // edge.points.forEach(point => {\n    //   const node = clusterDb[edge.toCluster].node;\n    //   log.warn('checking from', edge.fromCluster, point, node);\n\n    //   if (!outsideNode(node, point) && !isInside) {\n    //     log.trace('inside', edge.toCluster, point, lastPointOutside);\n\n    //     // First point inside the rect\n    //     const inter = intersection(node, lastPointOutside, point);\n\n    //     let pointPresent = false;\n    //     points.forEach(p => {\n    //       pointPresent = pointPresent || (p.x === inter.x && p.y === inter.y);\n    //     });\n    //     // if (!pointPresent) {\n    //     if (!points.find(e => e.x === inter.x && e.y === inter.y)) {\n    //       points.push(inter);\n    //     } else {\n    //       log.warn('no intersect', inter, points);\n    //     }\n    //     isInside = true;\n    // } else {\n    //   // outtside\n    //   lastPointOutside = point;\n    //   if (!isInside) points.push(point);\n    // }\n    // });\n    pointsHasChanged = true;\n  }\n\n  if (edge.fromCluster) {\n    log.info('from cluster abc88', clusterDb[edge.fromCluster]);\n    points = cutPathAtIntersect(points.reverse(), clusterDb[edge.fromCluster].node).reverse();\n    // log.warn('edge', edge);\n    // log.warn('from cluster', clusterDb[edge.fromCluster], points);\n    // const updatedPoints = [];\n    // let lastPointOutside = edge.points[edge.points.length - 1];\n    // let isInside = false;\n    // for (let i = points.length - 1; i >= 0; i--) {\n    //   const point = points[i];\n    //   const node = clusterDb[edge.fromCluster].node;\n    //   log.warn('checking to', edge.fromCluster, point, node);\n\n    //   if (!outsideNode(node, point) && !isInside) {\n    //     log.warn('inside', edge.fromCluster, point, node);\n\n    //     // First point inside the rect\n    //     const inter = intersection(node, lastPointOutside, point);\n    //     log.warn('intersect', intersection(node, lastPointOutside, point));\n    //     let pointPresent = false;\n    //     points.forEach(p => {\n    //       pointPresent = pointPresent || (p.x === inter.x && p.y === inter.y);\n    //     });\n    //     // if (!pointPresent) {\n    //     if (!points.find(e => e.x === inter.x && e.y === inter.y)) {\n    //       updatedPoints.unshift(inter);\n    //       log.warn('Adding point -updated = ', updatedPoints);\n    //     } else {\n    //       log.warn('no intersect', inter, points);\n    //     }\n    //     // points.push(insterection);\n    //     isInside = true;\n    //   } else {\n    //     // at the outside\n    //     // if (!isInside) updatedPoints.unshift(point);\n    //     updatedPoints.unshift(point);\n    //     log.warn('Outside point', point, updatedPoints);\n    //   }\n    //   lastPointOutside = point;\n    // }\n    // points = updatedPoints;\n    // points = edge.points;\n    pointsHasChanged = true;\n  }\n\n  // The data for our line\n  const lineData = points.filter((p) => !Number.isNaN(p.y));\n\n  // This is the accessor function we talked about above\n  let curve;\n  // Currently only flowcharts get the curve from the settings, perhaps this should\n  // be expanded to a common setting? Restricting it for now in order not to cause side-effects that\n  // have not been thought through\n  if (diagramType === 'graph' || diagramType === 'flowchart') {\n    curve = edge.curve || curveBasis;\n  } else {\n    curve = curveBasis;\n  }\n  // curve = curveLinear;\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curve);\n\n  // Contruct stroke classes based on properties\n  let strokeClasses;\n  switch (edge.thickness) {\n    case 'normal':\n      strokeClasses = 'edge-thickness-normal';\n      break;\n    case 'thick':\n      strokeClasses = 'edge-thickness-thick';\n      break;\n    default:\n      strokeClasses = '';\n  }\n  switch (edge.pattern) {\n    case 'solid':\n      strokeClasses += ' edge-pattern-solid';\n      break;\n    case 'dotted':\n      strokeClasses += ' edge-pattern-dotted';\n      break;\n    case 'dashed':\n      strokeClasses += ' edge-pattern-dashed';\n      break;\n  }\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', edge.id)\n    .attr('class', ' ' + strokeClasses + (edge.classes ? ' ' + edge.classes : ''))\n    .attr('style', edge.style);\n\n  // DEBUG code, adds a red circle at each edge coordinate\n  // edge.points.forEach(point => {\n  //   elem\n  //     .append('circle')\n  //     .style('stroke', 'red')\n  //     .style('fill', 'red')\n  //     .attr('r', 1)\n  //     .attr('cx', point.x)\n  //     .attr('cy', point.y);\n  // });\n\n  let url = '';\n  if (getConfig().state.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n  log.info('arrowTypeStart', edge.arrowTypeStart);\n  log.info('arrowTypeEnd', edge.arrowTypeEnd);\n\n  switch (edge.arrowTypeStart) {\n    case 'arrow_cross':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-crossStart' + ')');\n      break;\n    case 'arrow_point':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-pointStart' + ')');\n      break;\n    case 'arrow_barb':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-barbStart' + ')');\n      break;\n    case 'arrow_circle':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-circleStart' + ')');\n      break;\n    case 'aggregation':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-aggregationStart' + ')');\n      break;\n    case 'extension':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-extensionStart' + ')');\n      break;\n    case 'composition':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-compositionStart' + ')');\n      break;\n    case 'dependency':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-dependencyStart' + ')');\n      break;\n    default:\n  }\n  switch (edge.arrowTypeEnd) {\n    case 'arrow_cross':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-crossEnd' + ')');\n      break;\n    case 'arrow_point':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-pointEnd' + ')');\n      break;\n    case 'arrow_barb':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-barbEnd' + ')');\n      break;\n    case 'arrow_circle':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-circleEnd' + ')');\n      break;\n    case 'aggregation':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-aggregationEnd' + ')');\n      break;\n    case 'extension':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-extensionEnd' + ')');\n      break;\n    case 'composition':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-compositionEnd' + ')');\n      break;\n    case 'dependency':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-dependencyEnd' + ')');\n      break;\n    default:\n  }\n  let paths = {};\n  if (pointsHasChanged) {\n    paths.updatedPath = points;\n  }\n  paths.originalPath = edge.points;\n  return paths;\n};\n","import dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport insertMarkers from './markers';\nimport { updateNodeBounds } from './shapes/util';\nimport {\n  clear as clearGraphlib,\n  clusterDb,\n  adjustClustersAndEdges,\n  findNonClusterChild,\n  sortNodesByHierarchy,\n} from './mermaid-graphlib';\nimport { insertNode, positionNode, clear as clearNodes, setNodeElem } from './nodes';\nimport { insertCluster, clear as clearClusters } from './clusters';\nimport { insertEdgeLabel, positionEdgeLabel, insertEdge, clear as clearEdges } from './edges';\nimport { log } from '../logger';\n\nconst recursiveRender = (_elem, graph, diagramtype, parentCluster) => {\n  log.info('Graph in recursive render: XXX', graphlib.json.write(graph), parentCluster);\n  const dir = graph.graph().rankdir;\n  log.trace('Dir in recursive render - dir:', dir);\n\n  const elem = _elem.insert('g').attr('class', 'root'); // eslint-disable-line\n  if (!graph.nodes()) {\n    log.info('No nodes found for', graph);\n  } else {\n    log.info('Recursive render XXX', graph.nodes());\n  }\n  if (graph.edges().length > 0) {\n    log.trace('Recursive edges', graph.edge(graph.edges()[0]));\n  }\n  const clusters = elem.insert('g').attr('class', 'clusters'); // eslint-disable-line\n  const edgePaths = elem.insert('g').attr('class', 'edgePaths');\n  const edgeLabels = elem.insert('g').attr('class', 'edgeLabels');\n  const nodes = elem.insert('g').attr('class', 'nodes');\n\n  // Insert nodes, this will insert them into the dom and each node will get a size. The size is updated\n  // to the abstract node and is later used by dagre for the layout\n  graph.nodes().forEach(function (v) {\n    const node = graph.node(v);\n    if (typeof parentCluster !== 'undefined') {\n      const data = JSON.parse(JSON.stringify(parentCluster.clusterData));\n      // data.clusterPositioning = true;\n      log.info('Setting data for cluster XXX (', v, ') ', data, parentCluster);\n      graph.setNode(parentCluster.id, data);\n      if (!graph.parent(v)) {\n        log.trace('Setting parent', v, parentCluster.id);\n        graph.setParent(v, parentCluster.id, data);\n      }\n    }\n    log.info('(Insert) Node XXX' + v + ': ' + JSON.stringify(graph.node(v)));\n    if (node && node.clusterNode) {\n      // const children = graph.children(v);\n      log.info('Cluster identified', v, node.width, graph.node(v));\n      const o = recursiveRender(nodes, node.graph, diagramtype, graph.node(v));\n      const newEl = o.elem;\n      updateNodeBounds(node, newEl);\n      node.diff = o.diff || 0;\n      log.info('Node bounds (abc123)', v, node, node.width, node.x, node.y);\n      setNodeElem(newEl, node);\n\n      log.warn('Recursive render complete ', newEl, node);\n    } else {\n      if (graph.children(v).length > 0) {\n        // This is a cluster but not to be rendered recusively\n        // Render as before\n        log.info('Cluster - the non recursive path XXX', v, node.id, node, graph);\n        log.info(findNonClusterChild(node.id, graph));\n        clusterDb[node.id] = { id: findNonClusterChild(node.id, graph), node };\n        // insertCluster(clusters, graph.node(v));\n      } else {\n        log.info('Node - the non recursive path', v, node.id, node);\n        insertNode(nodes, graph.node(v), dir);\n      }\n    }\n  });\n\n  // Insert labels, this will insert them into the dom so that the width can be calculated\n  // Also figure out which edges point to/from clusters and adjust them accordingly\n  // Edges from/to clusters really points to the first child in the cluster.\n  // TODO: pick optimal child in the cluster to us as link anchor\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e.v, e.w, e.name);\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ', e, ' ', JSON.stringify(graph.edge(e)));\n\n    // Check if link is either from or to a cluster\n    log.info('Fix', clusterDb, 'ids:', e.v, e.w, 'Translateing: ', clusterDb[e.v], clusterDb[e.w]);\n    insertEdgeLabel(edgeLabels, edge);\n  });\n\n  graph.edges().forEach(function (e) {\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n  });\n  log.info('#############################################');\n  log.info('###                Layout                 ###');\n  log.info('#############################################');\n  log.info(graph);\n  dagre.layout(graph);\n  log.info('Graph after layout:', graphlib.json.write(graph));\n  // Move the nodes to the correct place\n  let diff = 0;\n  sortNodesByHierarchy(graph).forEach(function (v) {\n    const node = graph.node(v);\n    log.info('Position ' + v + ': ' + JSON.stringify(graph.node(v)));\n    log.info(\n      'Position ' + v + ': (' + node.x,\n      ',' + node.y,\n      ') width: ',\n      node.width,\n      ' height: ',\n      node.height\n    );\n    if (node && node.clusterNode) {\n      // clusterDb[node.id].node = node;\n\n      positionNode(node);\n    } else {\n      // Non cluster node\n      if (graph.children(v).length > 0) {\n        // A cluster in the non-recurive way\n        // positionCluster(node);\n        insertCluster(clusters, node);\n        clusterDb[node.id].node = node;\n      } else {\n        positionNode(node);\n      }\n    }\n  });\n\n  // Move the edge labels to the correct place after layout\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e);\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(edge), edge);\n\n    const paths = insertEdge(edgePaths, e, edge, clusterDb, diagramtype, graph);\n    positionEdgeLabel(edge, paths);\n  });\n\n  graph.nodes().forEach(function (v) {\n    const n = graph.node(v);\n    log.info(v, n.type, n.diff);\n    if (n.type === 'group') {\n      diff = n.diff;\n    }\n  });\n  return { elem, diff };\n};\n\nexport const render = (elem, graph, markers, diagramtype, id) => {\n  insertMarkers(elem, markers, diagramtype, id);\n  clearNodes();\n  clearEdges();\n  clearClusters();\n  clearGraphlib();\n\n  log.warn('Graph at first:', graphlib.json.write(graph));\n  adjustClustersAndEdges(graph);\n  log.warn('Graph after:', graphlib.json.write(graph));\n  // log.warn('Graph ever  after:', graphlib.json.write(graph.node('A').graph));\n  recursiveRender(elem, graph, diagramtype);\n};\n\n// const shapeDefinitions = {};\n// export const addShape = ({ shapeType: fun }) => {\n//   shapeDefinitions[shapeType] = fun;\n// };\n\n// const arrowDefinitions = {};\n// export const addArrow = ({ arrowType: fun }) => {\n//   arrowDefinitions[arrowType] = fun;\n// };\n","/*\n * Borrowed with love from from dagrge-d3. Many thanks to cpettitt!\n */\n\nimport node from './intersect-node.js';\nimport circle from './intersect-circle.js';\nimport ellipse from './intersect-ellipse.js';\nimport polygon from './intersect-polygon.js';\nimport rect from './intersect-rect.js';\n\nexport default {\n  node,\n  circle,\n  ellipse,\n  polygon,\n  rect,\n};\n","import intersectEllipse from './intersect-ellipse';\n\n/**\n * @param node\n * @param rx\n * @param point\n */\nfunction intersectCircle(node, rx, point) {\n  return intersectEllipse(node, rx, rx, point);\n}\n\nexport default intersectCircle;\n","/**\n * @param node\n * @param rx\n * @param ry\n * @param point\n */\nfunction intersectEllipse(node, rx, ry, point) {\n  // Formulae from: http://mathworld.wolfram.com/Ellipse-LineIntersection.html\n\n  var cx = node.x;\n  var cy = node.y;\n\n  var px = cx - point.x;\n  var py = cy - point.y;\n\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n\n  var dx = Math.abs((rx * ry * px) / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs((rx * ry * py) / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n\n  return { x: cx + dx, y: cy + dy };\n}\n\nexport default intersectEllipse;\n","/**\n * Returns the point at which two lines, p and q, intersect or returns undefined if they do not intersect.\n *\n * @param p1\n * @param p2\n * @param q1\n * @param q2\n */\nfunction intersectLine(p1, p2, q1, q2) {\n  // Algorithm from J. Avro, (ed.) Graphics Gems, No 2, Morgan Kaufmann, 1994,\n  // p7 and p473.\n\n  var a1, a2, b1, b2, c1, c2;\n  var r1, r2, r3, r4;\n  var denom, offset, num;\n  var x, y;\n\n  // Compute a1, b1, c1, where line joining points 1 and 2 is F(x,y) = a1 x +\n  // b1 y + c1 = 0.\n  a1 = p2.y - p1.y;\n  b1 = p1.x - p2.x;\n  c1 = p2.x * p1.y - p1.x * p2.y;\n\n  // Compute r3 and r4.\n  r3 = a1 * q1.x + b1 * q1.y + c1;\n  r4 = a1 * q2.x + b1 * q2.y + c1;\n\n  // Check signs of r3 and r4. If both point 3 and point 4 lie on\n  // same side of line 1, the line segments do not intersect.\n  if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n    return /*DONT_INTERSECT*/;\n  }\n\n  // Compute a2, b2, c2 where line joining points 3 and 4 is G(x,y) = a2 x + b2 y + c2 = 0\n  a2 = q2.y - q1.y;\n  b2 = q1.x - q2.x;\n  c2 = q2.x * q1.y - q1.x * q2.y;\n\n  // Compute r1 and r2\n  r1 = a2 * p1.x + b2 * p1.y + c2;\n  r2 = a2 * p2.x + b2 * p2.y + c2;\n\n  // Check signs of r1 and r2. If both point 1 and point 2 lie\n  // on same side of second line segment, the line segments do\n  // not intersect.\n  if (r1 !== 0 && r2 !== 0 && sameSign(r1, r2)) {\n    return /*DONT_INTERSECT*/;\n  }\n\n  // Line segments intersect: compute intersection point.\n  denom = a1 * b2 - a2 * b1;\n  if (denom === 0) {\n    return /*COLLINEAR*/;\n  }\n\n  offset = Math.abs(denom / 2);\n\n  // The denom/2 is to get rounding instead of truncating. It\n  // is added or subtracted to the numerator, depending upon the\n  // sign of the numerator.\n  num = b1 * c2 - b2 * c1;\n  x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n\n  num = a2 * c1 - a1 * c2;\n  y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n\n  return { x: x, y: y };\n}\n\n/**\n * @param r1\n * @param r2\n */\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n\nexport default intersectLine;\n","module.exports = intersectNode;\n\n/**\n * @param node\n * @param point\n */\nfunction intersectNode(node, point) {\n  // console.info('Intersect Node');\n  return node.intersect(point);\n}\n","/* eslint \"no-console\": off */\n\nimport intersectLine from './intersect-line';\n\nexport default intersectPolygon;\n\n/**\n * Returns the point ({x, y}) at which the point argument intersects with the node argument assuming\n * that it has the shape specified by polygon.\n *\n * @param node\n * @param polyPoints\n * @param point\n */\nfunction intersectPolygon(node, polyPoints, point) {\n  var x1 = node.x;\n  var y1 = node.y;\n\n  var intersections = [];\n\n  var minX = Number.POSITIVE_INFINITY;\n  var minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === 'function') {\n    polyPoints.forEach(function (entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n\n  var left = x1 - node.width / 2 - minX;\n  var top = y1 - node.height / 2 - minY;\n\n  for (var i = 0; i < polyPoints.length; i++) {\n    var p1 = polyPoints[i];\n    var p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    var intersect = intersectLine(\n      node,\n      point,\n      { x: left + p1.x, y: top + p1.y },\n      { x: left + p2.x, y: top + p2.y }\n    );\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n\n  if (!intersections.length) {\n    // console.log('NO INTERSECTION FOUND, RETURN NODE CENTER', node);\n    return node;\n  }\n\n  if (intersections.length > 1) {\n    // More intersections, find the one nearest to edge end point\n    intersections.sort(function (p, q) {\n      var pdx = p.x - point.x;\n      var pdy = p.y - point.y;\n      var distp = Math.sqrt(pdx * pdx + pdy * pdy);\n\n      var qdx = q.x - point.x;\n      var qdy = q.y - point.y;\n      var distq = Math.sqrt(qdx * qdx + qdy * qdy);\n\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n","const intersectRect = (node, point) => {\r\n  var x = node.x;\r\n  var y = node.y;\r\n\r\n  // Rectangle intersection algorithm from:\r\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\r\n  var dx = point.x - x;\r\n  var dy = point.y - y;\r\n  var w = node.width / 2;\r\n  var h = node.height / 2;\r\n\r\n  var sx, sy;\r\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\r\n    // Intersection is top or bottom of rect.\r\n    if (dy < 0) {\r\n      h = -h;\r\n    }\r\n    sx = dy === 0 ? 0 : (h * dx) / dy;\r\n    sy = h;\r\n  } else {\r\n    // Intersection is left or right of rect.\r\n    if (dx < 0) {\r\n      w = -w;\r\n    }\r\n    sx = w;\r\n    sy = dx === 0 ? 0 : (w * dy) / dx;\r\n  }\r\n\r\n  return { x: x + sx, y: y + sy };\r\n};\r\n\r\nexport default intersectRect;\r\n","/** Setup arrow head and define the marker. The result is appended to the svg. */\n\nimport { log } from '../logger';\n\n// Only add the number of markers that the diagram needs\nconst insertMarkers = (elem, markerArray, type, id) => {\n  markerArray.forEach((markerName) => {\n    markers[markerName](elem, type, id);\n  });\n};\n\nconst extension = (elem, type, id) => {\n  log.trace('Making markers for ', id);\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-extensionStart')\n    .attr('class', 'marker extension ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,7 L18,13 V 1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-extensionEnd')\n    .attr('class', 'marker extension ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,1 V 13 L18,7 Z'); // this is actual shape for arrowhead\n};\n\nconst composition = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-compositionStart')\n    .attr('class', 'marker composition ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-compositionEnd')\n    .attr('class', 'marker composition ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n};\nconst aggregation = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-aggregationStart')\n    .attr('class', 'marker aggregation ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-aggregationEnd')\n    .attr('class', 'marker aggregation ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n};\nconst dependency = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-dependencyStart')\n    .attr('class', 'marker dependency ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 5,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-dependencyEnd')\n    .attr('class', 'marker dependency ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\nconst point = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-pointEnd')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n  elem\n    .append('marker')\n    .attr('id', type + '-pointStart')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 0)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 5 L 10 10 L 10 0 z')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n};\nconst circle = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-circleEnd')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 11)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', '5')\n    .attr('cy', '5')\n    .attr('r', '5')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n\n  elem\n    .append('marker')\n    .attr('id', type + '-circleStart')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', -1)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', '5')\n    .attr('cy', '5')\n    .attr('r', '5')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n};\nconst cross = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-crossEnd')\n    .attr('class', 'marker cross ' + type)\n    .attr('viewBox', '0 0 11 11')\n    .attr('refX', 12)\n    .attr('refY', 5.2)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('path')\n    // .attr('stroke', 'black')\n    .attr('d', 'M 1,1 l 9,9 M 10,1 l -9,9')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 2)\n    .style('stroke-dasharray', '1,0');\n\n  elem\n    .append('marker')\n    .attr('id', type + '-crossStart')\n    .attr('class', 'marker cross ' + type)\n    .attr('viewBox', '0 0 11 11')\n    .attr('refX', -1)\n    .attr('refY', 5.2)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('path')\n    // .attr('stroke', 'black')\n    .attr('d', 'M 1,1 l 9,9 M 10,1 l -9,9')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 2)\n    .style('stroke-dasharray', '1,0');\n};\nconst barb = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-barbEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 14)\n    .attr('markerUnits', 'strokeWidth')\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 19,7 L9,13 L14,7 L9,1 Z');\n};\n\n// TODO rename the class diagram markers to something shape descriptive and semanitc free\nconst markers = {\n  extension,\n  composition,\n  aggregation,\n  dependency,\n  point,\n  circle,\n  cross,\n  barb,\n};\nexport default insertMarkers;\n","/** Decorates with functions required by mermaids dagre-wrapper. */\nimport { log } from '../logger';\nimport graphlib from 'graphlib';\n\nexport let clusterDb = {};\nlet decendants = {};\nlet parents = {};\n\nexport const clear = () => {\n  decendants = {};\n  parents = {};\n  clusterDb = {};\n};\n\nconst isDecendant = (id, ancenstorId) => {\n  // if (id === ancenstorId) return true;\n\n  log.trace(\n    'In isDecendant',\n    ancenstorId,\n    ' ',\n    id,\n    ' = ',\n    decendants[ancenstorId].indexOf(id) >= 0\n  );\n  if (decendants[ancenstorId].indexOf(id) >= 0) return true;\n\n  return false;\n};\n\nconst edgeInCluster = (edge, clusterId) => {\n  log.info('Decendants of ', clusterId, ' is ', decendants[clusterId]);\n  log.info('Edge is ', edge);\n  // Edges to/from the cluster is not in the cluster, they are in the parent\n  if (edge.v === clusterId) return false;\n  if (edge.w === clusterId) return false;\n\n  if (!decendants[clusterId]) {\n    log.debug('Tilt, ', clusterId, ',not in decendants');\n    return false;\n  }\n  log.info('Here ');\n\n  if (decendants[clusterId].indexOf(edge.v) >= 0) return true;\n  if (isDecendant(edge.v, clusterId)) return true;\n  if (isDecendant(edge.w, clusterId)) return true;\n  if (decendants[clusterId].indexOf(edge.w) >= 0) return true;\n\n  return false;\n};\n\nconst copy = (clusterId, graph, newGraph, rootId) => {\n  log.warn(\n    'Copying children of ',\n    clusterId,\n    'root',\n    rootId,\n    'data',\n    graph.node(clusterId),\n    rootId\n  );\n  const nodes = graph.children(clusterId) || [];\n\n  // Include cluster node if it is not the root\n  if (clusterId !== rootId) {\n    nodes.push(clusterId);\n  }\n\n  log.warn('Copying (nodes) clusterId', clusterId, 'nodes', nodes);\n\n  nodes.forEach((node) => {\n    if (graph.children(node).length > 0) {\n      copy(node, graph, newGraph, rootId);\n    } else {\n      const data = graph.node(node);\n      log.info('cp ', node, ' to ', rootId, ' with parent ', clusterId); //,node, data, ' parent is ', clusterId);\n      newGraph.setNode(node, data);\n      if (rootId !== graph.parent(node)) {\n        log.warn('Setting parent', node, graph.parent(node));\n        newGraph.setParent(node, graph.parent(node));\n      }\n\n      if (clusterId !== rootId && node !== clusterId) {\n        log.debug('Setting parent', node, clusterId);\n        newGraph.setParent(node, clusterId);\n      } else {\n        log.info('In copy ', clusterId, 'root', rootId, 'data', graph.node(clusterId), rootId);\n        log.debug(\n          'Not Setting parent for node=',\n          node,\n          'cluster!==rootId',\n          clusterId !== rootId,\n          'node!==clusterId',\n          node !== clusterId\n        );\n      }\n      const edges = graph.edges(node);\n      log.debug('Copying Edges', edges);\n      edges.forEach((edge) => {\n        log.info('Edge', edge);\n        const data = graph.edge(edge.v, edge.w, edge.name);\n        log.info('Edge data', data, rootId);\n        try {\n          // Do not copy edges in and out of the root cluster, they belong to the parent graph\n          if (edgeInCluster(edge, rootId)) {\n            log.info('Copying as ', edge.v, edge.w, data, edge.name);\n            newGraph.setEdge(edge.v, edge.w, data, edge.name);\n            log.info('newGraph edges ', newGraph.edges(), newGraph.edge(newGraph.edges()[0]));\n          } else {\n            log.info(\n              'Skipping copy of edge ',\n              edge.v,\n              '-->',\n              edge.w,\n              ' rootId: ',\n              rootId,\n              ' clusterId:',\n              clusterId\n            );\n          }\n        } catch (e) {\n          log.error(e);\n        }\n      });\n    }\n    log.debug('Removing node', node);\n    graph.removeNode(node);\n  });\n};\nexport const extractDecendants = (id, graph) => {\n  // log.debug('Extracting ', id);\n  const children = graph.children(id);\n  let res = [].concat(children);\n\n  for (let i = 0; i < children.length; i++) {\n    parents[children[i]] = id;\n    res = res.concat(extractDecendants(children[i], graph));\n  }\n\n  return res;\n};\n\n/**\n * Validates the graph, checking that all parent child relation points to existing nodes and that\n * edges between nodes also ia correct. When not correct the function logs the discrepancies.\n *\n * @param graph\n */\nexport const validate = (graph) => {\n  const edges = graph.edges();\n  log.trace('Edges: ', edges);\n  for (let i = 0; i < edges.length; i++) {\n    if (graph.children(edges[i].v).length > 0) {\n      log.trace('The node ', edges[i].v, ' is part of and edge even though it has children');\n      return false;\n    }\n    if (graph.children(edges[i].w).length > 0) {\n      log.trace('The node ', edges[i].w, ' is part of and edge even though it has children');\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Finds a child that is not a cluster. When faking a edge between a node and a cluster.\n *\n * @param {Finds a} id\n * @param {any} graph\n */\nexport const findNonClusterChild = (id, graph) => {\n  // const node = graph.node(id);\n  log.trace('Searching', id);\n  // const children = graph.children(id).reverse();\n  const children = graph.children(id); //.reverse();\n  log.trace('Searching children of id ', id, children);\n  if (children.length < 1) {\n    log.trace('This is a valid node', id);\n    return id;\n  }\n  for (let i = 0; i < children.length; i++) {\n    const _id = findNonClusterChild(children[i], graph);\n    if (_id) {\n      log.trace('Found replacement for', id, ' => ', _id);\n      return _id;\n    }\n  }\n};\n\nconst getAnchorId = (id) => {\n  if (!clusterDb[id]) {\n    return id;\n  }\n  // If the cluster has no external connections\n  if (!clusterDb[id].externalConnections) {\n    return id;\n  }\n\n  // Return the replacement node\n  if (clusterDb[id]) {\n    return clusterDb[id].id;\n  }\n  return id;\n};\n\nexport const adjustClustersAndEdges = (graph, depth) => {\n  if (!graph || depth > 10) {\n    log.debug('Opting out, no graph ');\n    return;\n  } else {\n    log.debug('Opting in, graph ');\n  }\n  // Go through the nodes and for each cluster found, save a replacment node, this can be used when\n  // faking a link to a cluster\n  graph.nodes().forEach(function (id) {\n    const children = graph.children(id);\n    if (children.length > 0) {\n      log.warn(\n        'Cluster identified',\n        id,\n        ' Replacement id in edges: ',\n        findNonClusterChild(id, graph)\n      );\n      decendants[id] = extractDecendants(id, graph);\n      clusterDb[id] = { id: findNonClusterChild(id, graph), clusterData: graph.node(id) };\n    }\n  });\n\n  // Check incoming and outgoing edges for each cluster\n  graph.nodes().forEach(function (id) {\n    const children = graph.children(id);\n    const edges = graph.edges();\n    if (children.length > 0) {\n      log.debug('Cluster identified', id, decendants);\n      edges.forEach((edge) => {\n        // log.debug('Edge, decendants: ', edge, decendants[id]);\n\n        // Check if any edge leaves the cluster (not the actual cluster, thats a link from the box)\n        if (edge.v !== id && edge.w !== id) {\n          // Any edge where either the one of the nodes is decending to the cluster but not the other\n          // if (decendants[id].indexOf(edge.v) < 0 && decendants[id].indexOf(edge.w) < 0) {\n\n          const d1 = isDecendant(edge.v, id);\n          const d2 = isDecendant(edge.w, id);\n\n          // d1 xor d2 - if either d1 is true and d2 is false or the other way around\n          if (d1 ^ d2) {\n            log.warn('Edge: ', edge, ' leaves cluster ', id);\n            log.warn('Decendants of XXX ', id, ': ', decendants[id]);\n            clusterDb[id].externalConnections = true;\n          }\n        }\n      });\n    } else {\n      log.debug('Not a cluster ', id, decendants);\n    }\n  });\n\n  // For clusters with incoming and/or outgoing edges translate those edges to a real node\n  // in the cluster inorder to fake the edge\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e);\n    log.warn('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n    log.warn('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(graph.edge(e)));\n\n    let v = e.v;\n    let w = e.w;\n    // Check if link is either from or to a cluster\n    log.warn(\n      'Fix XXX',\n      clusterDb,\n      'ids:',\n      e.v,\n      e.w,\n      'Translateing: ',\n      clusterDb[e.v],\n      ' --- ',\n      clusterDb[e.w]\n    );\n    if (clusterDb[e.v] || clusterDb[e.w]) {\n      log.warn('Fixing and trixing - removing XXX', e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      if (v !== e.v) edge.fromCluster = e.v;\n      if (w !== e.w) edge.toCluster = e.w;\n      log.warn('Fix Replacing with XXX', v, w, e.name);\n      graph.setEdge(v, w, edge, e.name);\n    }\n  });\n  log.warn('Adjusted Graph', graphlib.json.write(graph));\n  extractor(graph, 0);\n\n  log.trace(clusterDb);\n\n  // Remove references to extracted cluster\n  // graph.edges().forEach(edge => {\n  //   if (isDecendant(edge.v, clusterId) || isDecendant(edge.w, clusterId)) {\n  //     graph.removeEdge(edge);\n  //   }\n  // });\n};\n\nexport const extractor = (graph, depth) => {\n  log.warn('extractor - ', depth, graphlib.json.write(graph), graph.children('D'));\n  if (depth > 10) {\n    log.error('Bailing out');\n    return;\n  }\n  // For clusters without incoming and/or outgoing edges, create a new cluster-node\n  // containing the nodes and edges in the custer in a new graph\n  // for (let i = 0;)\n  let nodes = graph.nodes();\n  let hasChildren = false;\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    const children = graph.children(node);\n    hasChildren = hasChildren || children.length > 0;\n  }\n\n  if (!hasChildren) {\n    log.debug('Done, no node has children', graph.nodes());\n    return;\n  }\n  // const clusters = Object.keys(clusterDb);\n  // clusters.forEach(clusterId => {\n  log.debug('Nodes = ', nodes, depth);\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n\n    log.debug(\n      'Extracting node',\n      node,\n      clusterDb,\n      clusterDb[node] && !clusterDb[node].externalConnections,\n      !graph.parent(node),\n      graph.node(node),\n      graph.children('D'),\n      ' Depth ',\n      depth\n    );\n    // Note that the node might have been removed after the Object.keys call so better check\n    // that it still is in the game\n    if (!clusterDb[node]) {\n      // Skip if the node is not a cluster\n      log.debug('Not a cluster', node, depth);\n      // break;\n    } else if (\n      !clusterDb[node].externalConnections &&\n      // !graph.parent(node) &&\n      graph.children(node) &&\n      graph.children(node).length > 0\n    ) {\n      log.warn(\n        'Cluster without external connections, without a parent and with children',\n        node,\n        depth\n      );\n\n      const graphSettings = graph.graph();\n      let dir = graphSettings.rankdir === 'TB' ? 'LR' : 'TB';\n      if (clusterDb[node]) {\n        if (clusterDb[node].clusterData && clusterDb[node].clusterData.dir) {\n          dir = clusterDb[node].clusterData.dir;\n          log.warn('Fixing dir', clusterDb[node].clusterData.dir, dir);\n        }\n      }\n\n      const clusterGraph = new graphlib.Graph({\n        multigraph: true,\n        compound: true,\n      })\n        .setGraph({\n          rankdir: dir, // Todo: set proper spacing\n          nodesep: 50,\n          ranksep: 50,\n          marginx: 8,\n          marginy: 8,\n        })\n        .setDefaultEdgeLabel(function () {\n          return {};\n        });\n\n      log.warn('Old graph before copy', graphlib.json.write(graph));\n      copy(node, graph, clusterGraph, node);\n      graph.setNode(node, {\n        clusterNode: true,\n        id: node,\n        clusterData: clusterDb[node].clusterData,\n        labelText: clusterDb[node].labelText,\n        graph: clusterGraph,\n      });\n      log.warn('New graph after copy node: (', node, ')', graphlib.json.write(clusterGraph));\n      log.debug('Old graph after copy', graphlib.json.write(graph));\n    } else {\n      log.warn(\n        'Cluster ** ',\n        node,\n        ' **not meeting the criteria !externalConnections:',\n        !clusterDb[node].externalConnections,\n        ' no parent: ',\n        !graph.parent(node),\n        ' children ',\n        graph.children(node) && graph.children(node).length > 0,\n        graph.children('D'),\n        depth\n      );\n      log.debug(clusterDb);\n    }\n  }\n\n  nodes = graph.nodes();\n  log.warn('New list of nodes', nodes);\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    const data = graph.node(node);\n    log.warn(' Now next level', node, data);\n    if (data.clusterNode) {\n      extractor(data.graph, depth + 1);\n    }\n  }\n};\n\nconst sorter = (graph, nodes) => {\n  if (nodes.length === 0) return [];\n  let result = Object.assign(nodes);\n  nodes.forEach((node) => {\n    const children = graph.children(node);\n    const sorted = sorter(graph, children);\n    result = result.concat(sorted);\n  });\n\n  return result;\n};\n\nexport const sortNodesByHierarchy = (graph) => sorter(graph, graph.children());\n","import { select } from 'd3';\nimport { log } from '../logger'; // eslint-disable-line\nimport { labelHelper, updateNodeBounds, insertPolygonShape } from './shapes/util';\nimport { getConfig } from '../config';\nimport intersect from './intersect/index.js';\nimport createLabel from './createLabel';\nimport note from './shapes/note';\nimport { parseMember } from '../diagrams/class/svgDraw';\nimport { evaluate, sanitizeText as sanitize } from '../diagrams/common/common';\n\nconst sanitizeText = (txt) => sanitize(txt, getConfig());\n\nconst question = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 },\n  ];\n\n  log.info('Question main (Circle)');\n\n  const questionElem = insertPolygonShape(shapeSvg, s, s, points);\n  questionElem.attr('style', node.style);\n  updateNodeBounds(node, questionElem);\n\n  node.intersect = function (point) {\n    log.warn('Intersect called');\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst choice = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n\n  const s = 28;\n  const points = [\n    { x: 0, y: s / 2 },\n    { x: s / 2, y: 0 },\n    { x: 0, y: -s / 2 },\n    { x: -s / 2, y: 0 },\n  ];\n\n  const choice = shapeSvg.insert('polygon', ':first-child').attr(\n    'points',\n    points\n      .map(function (d) {\n        return d.x + ',' + d.y;\n      })\n      .join(' ')\n  );\n  // center the circle around its coordinate\n  choice.attr('class', 'state-start').attr('r', 7).attr('width', 28).attr('height', 28);\n  node.width = 28;\n  node.height = 28;\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 14, point);\n  };\n\n  return shapeSvg;\n};\n\nconst hexagon = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const f = 4;\n  const h = bbox.height + node.padding;\n  const m = h / f;\n  const w = bbox.width + 2 * m + node.padding;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n\n  const hex = insertPolygonShape(shapeSvg, w, h, points);\n  hex.attr('style', node.style);\n  updateNodeBounds(node, hex);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst rect_left_inv_arrow = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: -h / 2, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: -h / 2, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n\n  node.width = w + h;\n  node.height = h;\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst lean_right = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst lean_left = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (2 * h) / 6, y: 0 },\n    { x: w + h / 6, y: 0 },\n    { x: w - (2 * h) / 6, y: -h },\n    { x: -h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst trapezoid = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst inv_trapezoid = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: h / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: (-2 * h) / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst rect_right_inv_arrow = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + h / 2, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w + h / 2, y: -h },\n    { x: 0, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst cylinder = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = bbox.height + ry + node.padding;\n\n  const shape =\n    'M 0,' +\n    ry +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    -w +\n    ' 0 l 0,' +\n    h +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 l 0,' +\n    -h;\n\n  const el = shapeSvg\n    .attr('label-offset-y', ry)\n    .insert('path', ':first-child')\n    .attr('style', node.style)\n    .attr('d', shape)\n    .attr('transform', 'translate(' + -w / 2 + ',' + -(h / 2 + ry) + ')');\n\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    const pos = intersect.rect(node, point);\n    const x = pos.x - node.x;\n\n    if (\n      rx != 0 &&\n      (Math.abs(x) < node.width / 2 ||\n        (Math.abs(x) == node.width / 2 && Math.abs(pos.y - node.y) > node.height / 2 - ry))\n    ) {\n      // ellipsis equation: x*x / a*a + y*y / b*b = 1\n      // solve for y to get adjustion value for pos.y\n      let y = ry * ry * (1 - (x * x) / (rx * rx));\n      if (y != 0) y = Math.sqrt(y);\n      y = ry - y;\n      if (point.y - node.y > 0) y = -y;\n\n      pos.y += y;\n    }\n\n    return pos;\n  };\n\n  return shapeSvg;\n};\n\nconst rect = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes, true);\n\n  log.trace('Classes = ', node.classes);\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const totalWidth = bbox.width + node.padding;\n  const totalHeight = bbox.height + node.padding;\n  rect\n    .attr('class', 'basic label-container')\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', totalWidth)\n    .attr('height', totalHeight);\n\n  if (node.props) {\n    const propKeys = new Set(Object.keys(node.props));\n    if (node.props.borders) {\n      applyNodePropertyBorders(rect, node.props.borders, totalWidth, totalHeight);\n      propKeys.delete('borders');\n    }\n    propKeys.forEach((propKey) => {\n      log.warn(`Unknown node property ${propKey}`);\n    });\n  }\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\n/**\n * @param rect\n * @param borders\n * @param totalWidth\n * @param totalHeight\n */\nfunction applyNodePropertyBorders(rect, borders, totalWidth, totalHeight) {\n  const strokeDashArray = [];\n  const addBorder = (length) => {\n    strokeDashArray.push(length);\n    strokeDashArray.push(0);\n  };\n  const skipBorder = (length) => {\n    strokeDashArray.push(0);\n    strokeDashArray.push(length);\n  };\n  if (borders.includes('t')) {\n    log.debug('add top border');\n    addBorder(totalWidth);\n  } else {\n    skipBorder(totalWidth);\n  }\n  if (borders.includes('r')) {\n    log.debug('add right border');\n    addBorder(totalHeight);\n  } else {\n    skipBorder(totalHeight);\n  }\n  if (borders.includes('b')) {\n    log.debug('add bottom border');\n    addBorder(totalWidth);\n  } else {\n    skipBorder(totalWidth);\n  }\n  if (borders.includes('l')) {\n    log.debug('add left border');\n    addBorder(totalHeight);\n  } else {\n    skipBorder(totalHeight);\n  }\n  rect.attr('stroke-dasharray', strokeDashArray.join(' '));\n}\n\nconst rectWithTitle = (parent, node) => {\n  // const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes);\n\n  let classes;\n  if (!node.classes) {\n    classes = 'node default';\n  } else {\n    classes = 'node ' + node.classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the title label and insert it after the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n  // const innerRect = shapeSvg.insert('rect');\n  const innerLine = shapeSvg.insert('line');\n\n  const label = shapeSvg.insert('g').attr('class', 'label');\n\n  const text2 = node.labelText.flat ? node.labelText.flat() : node.labelText;\n  // const text2 = typeof text2prim === 'object' ? text2prim[0] : text2prim;\n\n  let title = '';\n  if (typeof text2 === 'object') {\n    title = text2[0];\n  } else {\n    title = text2;\n  }\n  log.info('Label text abc79', title, text2, typeof text2 === 'object');\n\n  const text = label.node().appendChild(createLabel(title, node.labelStyle, true, true));\n  let bbox = { width: 0, height: 0 };\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  log.info('Text 2', text2);\n  const textRows = text2.slice(1, text2.length);\n  let titleBox = text.getBBox();\n  const descr = label\n    .node()\n    .appendChild(\n      createLabel(textRows.join ? textRows.join('<br/>') : textRows, node.labelStyle, true, true)\n    );\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = descr.children[0];\n    const dv = select(descr);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  // bbox = label.getBBox();\n  // log.info(descr);\n  const halfPadding = node.padding / 2;\n  select(descr).attr(\n    'transform',\n    'translate( ' +\n      // (titleBox.width - bbox.width) / 2 +\n      (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) +\n      ', ' +\n      (titleBox.height + halfPadding + 5) +\n      ')'\n  );\n  select(text).attr(\n    'transform',\n    'translate( ' +\n      // (titleBox.width - bbox.width) / 2 +\n      (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) +\n      ', ' +\n      0 +\n      ')'\n  );\n  // Get the size of the label\n\n  // Bounding box for title and text\n  bbox = label.node().getBBox();\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' + -bbox.width / 2 + ', ' + (-bbox.height / 2 - halfPadding + 3) + ')'\n  );\n\n  rect\n    .attr('class', 'outer title-state')\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  innerLine\n    .attr('class', 'divider')\n    .attr('x1', -bbox.width / 2 - halfPadding)\n    .attr('x2', bbox.width / 2 + halfPadding)\n    .attr('y1', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding)\n    .attr('y2', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst stadium = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n\n  // add the rect\n  const rect = shapeSvg\n    .insert('rect', ':first-child')\n    .attr('style', node.style)\n    .attr('rx', h / 2)\n    .attr('ry', h / 2)\n    .attr('x', -w / 2)\n    .attr('y', -h / 2)\n    .attr('width', w)\n    .attr('height', h);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst circle = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, undefined, true);\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  // center the circle around its coordinate\n  circle\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('r', bbox.width / 2 + halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  log.info('Circle main');\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    log.info('Circle intersect', node, bbox.width / 2 + halfPadding, point);\n    return intersect.circle(node, bbox.width / 2 + halfPadding, point);\n  };\n\n  return shapeSvg;\n};\n\nconst subroutine = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst start = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  // center the circle around its coordinate\n  circle.attr('class', 'state-start').attr('r', 7).attr('width', 14).attr('height', 14);\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 7, point);\n  };\n\n  return shapeSvg;\n};\n\nconst forkJoin = (parent, node, dir) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n\n  let width = 70;\n  let height = 10;\n\n  if (dir === 'LR') {\n    width = 10;\n    height = 70;\n  }\n\n  const shape = shapeSvg\n    .append('rect')\n    .attr('x', (-1 * width) / 2)\n    .attr('y', (-1 * height) / 2)\n    .attr('width', width)\n    .attr('height', height)\n    .attr('class', 'fork-join');\n\n  updateNodeBounds(node, shape);\n  node.height = node.height + node.padding / 2;\n  node.width = node.width + node.padding / 2;\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst end = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n  const innerCircle = shapeSvg.insert('circle', ':first-child');\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  circle.attr('class', 'state-start').attr('r', 7).attr('width', 14).attr('height', 14);\n\n  innerCircle.attr('class', 'state-end').attr('r', 5).attr('width', 10).attr('height', 10);\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 7, point);\n  };\n\n  return shapeSvg;\n};\n\nconst class_box = (parent, node) => {\n  const halfPadding = node.padding / 2;\n  const rowPadding = 4;\n  const lineHeight = 8;\n\n  let classes;\n  if (!node.classes) {\n    classes = 'node default';\n  } else {\n    classes = 'node ' + node.classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the title label and insert it after the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n  const topLine = shapeSvg.insert('line');\n  const bottomLine = shapeSvg.insert('line');\n  let maxWidth = 0;\n  let maxHeight = rowPadding;\n\n  const labelContainer = shapeSvg.insert('g').attr('class', 'label');\n  let verticalPos = 0;\n  const hasInterface = node.classData.annotations && node.classData.annotations[0];\n\n  // 1. Create the labels\n  const interfaceLabelText = node.classData.annotations[0]\n    ? '«' + node.classData.annotations[0] + '»'\n    : '';\n  const interfaceLabel = labelContainer\n    .node()\n    .appendChild(createLabel(interfaceLabelText, node.labelStyle, true, true));\n  let interfaceBBox = interfaceLabel.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = interfaceLabel.children[0];\n    const dv = select(interfaceLabel);\n    interfaceBBox = div.getBoundingClientRect();\n    dv.attr('width', interfaceBBox.width);\n    dv.attr('height', interfaceBBox.height);\n  }\n  if (node.classData.annotations[0]) {\n    maxHeight += interfaceBBox.height + rowPadding;\n    maxWidth += interfaceBBox.width;\n  }\n\n  let classTitleString = node.classData.id;\n\n  if (node.classData.type !== undefined && node.classData.type !== '') {\n    if (getConfig().flowchart.htmlLabels) {\n      classTitleString += '&lt;' + node.classData.type + '&gt;';\n    } else {\n      classTitleString += '<' + node.classData.type + '>';\n    }\n  }\n  const classTitleLabel = labelContainer\n    .node()\n    .appendChild(createLabel(classTitleString, node.labelStyle, true, true));\n  select(classTitleLabel).attr('class', 'classTitle');\n  let classTitleBBox = classTitleLabel.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = classTitleLabel.children[0];\n    const dv = select(classTitleLabel);\n    classTitleBBox = div.getBoundingClientRect();\n    dv.attr('width', classTitleBBox.width);\n    dv.attr('height', classTitleBBox.height);\n  }\n  maxHeight += classTitleBBox.height + rowPadding;\n  if (classTitleBBox.width > maxWidth) {\n    maxWidth = classTitleBBox.width;\n  }\n  const classAttributes = [];\n  node.classData.members.forEach((str) => {\n    const parsedInfo = parseMember(str);\n    let parsedText = parsedInfo.displayText;\n    if (getConfig().flowchart.htmlLabels) {\n      parsedText = parsedText.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    const lbl = labelContainer\n      .node()\n      .appendChild(\n        createLabel(\n          parsedText,\n          parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,\n          true,\n          true\n        )\n      );\n    let bbox = lbl.getBBox();\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      const div = lbl.children[0];\n      const dv = select(lbl);\n      bbox = div.getBoundingClientRect();\n      dv.attr('width', bbox.width);\n      dv.attr('height', bbox.height);\n    }\n    if (bbox.width > maxWidth) {\n      maxWidth = bbox.width;\n    }\n    maxHeight += bbox.height + rowPadding;\n    classAttributes.push(lbl);\n  });\n\n  maxHeight += lineHeight;\n\n  const classMethods = [];\n  node.classData.methods.forEach((str) => {\n    const parsedInfo = parseMember(str);\n    let displayText = parsedInfo.displayText;\n    if (getConfig().flowchart.htmlLabels) {\n      displayText = displayText.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    const lbl = labelContainer\n      .node()\n      .appendChild(\n        createLabel(\n          displayText,\n          parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,\n          true,\n          true\n        )\n      );\n    let bbox = lbl.getBBox();\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      const div = lbl.children[0];\n      const dv = select(lbl);\n      bbox = div.getBoundingClientRect();\n      dv.attr('width', bbox.width);\n      dv.attr('height', bbox.height);\n    }\n    if (bbox.width > maxWidth) {\n      maxWidth = bbox.width;\n    }\n    maxHeight += bbox.height + rowPadding;\n\n    classMethods.push(lbl);\n  });\n\n  maxHeight += lineHeight;\n\n  // 2. Position the labels\n\n  // position the interface label\n  if (hasInterface) {\n    let diffX = (maxWidth - interfaceBBox.width) / 2;\n    select(interfaceLabel).attr(\n      'transform',\n      'translate( ' + ((-1 * maxWidth) / 2 + diffX) + ', ' + (-1 * maxHeight) / 2 + ')'\n    );\n    verticalPos = interfaceBBox.height + rowPadding;\n  }\n  // Positin the class title label\n  let diffX = (maxWidth - classTitleBBox.width) / 2;\n  select(classTitleLabel).attr(\n    'transform',\n    'translate( ' +\n      ((-1 * maxWidth) / 2 + diffX) +\n      ', ' +\n      ((-1 * maxHeight) / 2 + verticalPos) +\n      ')'\n  );\n  verticalPos += classTitleBBox.height + rowPadding;\n\n  topLine\n    .attr('class', 'divider')\n    .attr('x1', -maxWidth / 2 - halfPadding)\n    .attr('x2', maxWidth / 2 + halfPadding)\n    .attr('y1', -maxHeight / 2 - halfPadding + lineHeight + verticalPos)\n    .attr('y2', -maxHeight / 2 - halfPadding + lineHeight + verticalPos);\n\n  verticalPos += lineHeight;\n\n  classAttributes.forEach((lbl) => {\n    select(lbl).attr(\n      'transform',\n      'translate( ' +\n        -maxWidth / 2 +\n        ', ' +\n        ((-1 * maxHeight) / 2 + verticalPos + lineHeight / 2) +\n        ')'\n    );\n    verticalPos += classTitleBBox.height + rowPadding;\n  });\n\n  verticalPos += lineHeight;\n  bottomLine\n    .attr('class', 'divider')\n    .attr('x1', -maxWidth / 2 - halfPadding)\n    .attr('x2', maxWidth / 2 + halfPadding)\n    .attr('y1', -maxHeight / 2 - halfPadding + lineHeight + verticalPos)\n    .attr('y2', -maxHeight / 2 - halfPadding + lineHeight + verticalPos);\n\n  verticalPos += lineHeight;\n\n  classMethods.forEach((lbl) => {\n    select(lbl).attr(\n      'transform',\n      'translate( ' + -maxWidth / 2 + ', ' + ((-1 * maxHeight) / 2 + verticalPos) + ')'\n    );\n    verticalPos += classTitleBBox.height + rowPadding;\n  });\n  //\n  // let bbox;\n  // if (evaluate(getConfig().flowchart.htmlLabels)) {\n  //   const div = interfaceLabel.children[0];\n  //   const dv = select(interfaceLabel);\n  //   bbox = div.getBoundingClientRect();\n  //   dv.attr('width', bbox.width);\n  //   dv.attr('height', bbox.height);\n  // }\n  // bbox = labelContainer.getBBox();\n\n  // log.info('Text 2', text2);\n  // const textRows = text2.slice(1, text2.length);\n  // let titleBox = text.getBBox();\n  // const descr = label\n  //   .node()\n  //   .appendChild(createLabel(textRows.join('<br/>'), node.labelStyle, true, true));\n\n  // if (evaluate(getConfig().flowchart.htmlLabels)) {\n  //   const div = descr.children[0];\n  //   const dv = select(descr);\n  //   bbox = div.getBoundingClientRect();\n  //   dv.attr('width', bbox.width);\n  //   dv.attr('height', bbox.height);\n  // }\n  // // bbox = label.getBBox();\n  // // log.info(descr);\n  // select(descr).attr(\n  //   'transform',\n  //   'translate( ' +\n  //     // (titleBox.width - bbox.width) / 2 +\n  //     (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) +\n  //     ', ' +\n  //     (titleBox.height + halfPadding + 5) +\n  //     ')'\n  // );\n  // select(text).attr(\n  //   'transform',\n  //   'translate( ' +\n  //     // (titleBox.width - bbox.width) / 2 +\n  //     (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) +\n  //     ', ' +\n  //     0 +\n  //     ')'\n  // );\n  // // Get the size of the label\n\n  // // Bounding box for title and text\n  // bbox = label.node().getBBox();\n\n  // // Center the label\n  // label.attr(\n  //   'transform',\n  //   'translate(' + -bbox.width / 2 + ', ' + (-bbox.height / 2 - halfPadding + 3) + ')'\n  // );\n\n  rect\n    .attr('class', 'outer title-state')\n    .attr('x', -maxWidth / 2 - halfPadding)\n    .attr('y', -(maxHeight / 2) - halfPadding)\n    .attr('width', maxWidth + node.padding)\n    .attr('height', maxHeight + node.padding);\n\n  // innerLine\n  //   .attr('class', 'divider')\n  //   .attr('x1', -bbox.width / 2 - halfPadding)\n  //   .attr('x2', bbox.width / 2 + halfPadding)\n  //   .attr('y1', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding)\n  //   .attr('y2', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst shapes = {\n  question,\n  rect,\n  rectWithTitle,\n  choice,\n  circle,\n  stadium,\n  hexagon,\n  rect_left_inv_arrow,\n  lean_right,\n  lean_left,\n  trapezoid,\n  inv_trapezoid,\n  rect_right_inv_arrow,\n  cylinder,\n  start,\n  end,\n  note,\n  subroutine,\n  fork: forkJoin,\n  join: forkJoin,\n  class_box,\n};\n\nlet nodeElems = {};\n\nexport const insertNode = (elem, node, dir) => {\n  let newEl;\n  let el;\n\n  // Add link when appropriate\n  if (node.link) {\n    let target;\n    if (getConfig().securityLevel === 'sandbox') {\n      target = '_top';\n    } else if (node.linkTarget) {\n      target = node.linkTarget || '_blank';\n    }\n    newEl = elem.insert('svg:a').attr('xlink:href', node.link).attr('target', target);\n    el = shapes[node.shape](newEl, node, dir);\n  } else {\n    el = shapes[node.shape](elem, node, dir);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr('title', node.tooltip);\n  }\n  if (node.class) {\n    el.attr('class', 'node default ' + node.class);\n  }\n\n  nodeElems[node.id] = newEl;\n\n  if (node.haveCallback) {\n    nodeElems[node.id].attr('class', nodeElems[node.id].attr('class') + ' clickable');\n  }\n};\nexport const setNodeElem = (elem, node) => {\n  nodeElems[node.id] = elem;\n};\nexport const clear = () => {\n  nodeElems = {};\n};\n\nexport const positionNode = (node) => {\n  const el = nodeElems[node.id];\n  log.trace(\n    'Transforming node',\n    node.diff,\n    node,\n    'translate(' + (node.x - node.width / 2 - 5) + ', ' + node.width / 2 + ')'\n  );\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\n      'transform',\n      'translate(' +\n        (node.x + diff - node.width / 2) +\n        ', ' +\n        (node.y - node.height / 2 - padding) +\n        ')'\n    );\n  } else {\n    el.attr('transform', 'translate(' + node.x + ', ' + node.y + ')');\n  }\n  return diff;\n};\n","import { updateNodeBounds, labelHelper } from './util';\nimport { log } from '../../logger'; // eslint-disable-line\nimport intersect from '../intersect/index.js';\n\nconst note = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes, true);\n\n  log.info('Classes = ', node.classes);\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  rect\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nexport default note;\n","import createLabel from '../createLabel';\nimport { getConfig } from '../../config';\nimport { decodeEntities } from '../../mermaidAPI';\nimport { select } from 'd3';\nimport { evaluate, sanitizeText } from '../../diagrams/common/common';\nexport const labelHelper = (parent, node, _classes, isNode) => {\n  let classes;\n  if (!_classes) {\n    classes = 'node default';\n  } else {\n    classes = _classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'label').attr('style', node.labelStyle);\n\n  const labelText = typeof node.labelText === 'string' ? node.labelText : node.labelText[0];\n\n  const text = label\n    .node()\n    .appendChild(\n      createLabel(\n        sanitizeText(decodeEntities(labelText), getConfig()),\n        node.labelStyle,\n        false,\n        isNode\n      )\n    );\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n\n  const halfPadding = node.padding / 2;\n\n  // Center the label\n  label.attr('transform', 'translate(' + -bbox.width / 2 + ', ' + -bbox.height / 2 + ')');\n\n  return { shapeSvg, bbox, halfPadding, label };\n};\n\nexport const updateNodeBounds = (node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n};\n\n/**\n * @param parent\n * @param w\n * @param h\n * @param points\n */\nexport function insertPolygonShape(parent, w, h, points) {\n  return parent\n    .insert('polygon', ':first-child')\n    .attr(\n      'points',\n      points\n        .map(function (d) {\n          return d.x + ',' + d.y;\n        })\n        .join(' ')\n    )\n    .attr('class', 'label-container')\n    .attr('transform', 'translate(' + -w / 2 + ',' + h / 2 + ')');\n}\n","import theme from './themes';\n/**\n * **Configuration methods in Mermaid version 8.6.0 have been updated, to learn more[[click\n * here](8.6.0_docs.md)].**\n *\n * ## **What follows are config instructions for older versions**\n *\n * These are the default options which can be overridden with the initialization call like so:\n *\n * **Example 1:**<pre> mermaid.initialize({ flowchart:{ htmlLabels: false } }); </pre>\n *\n * **Example 2:**<pre> <script> var config = { startOnLoad:true, flowchart:{ useMaxWidth:true,\n * htmlLabels:true, curve:'cardinal', },\n *\n *     securityLevel:'loose',\n *\n * }; mermaid.initialize(config); </script> </pre>\n *\n * A summary of all options and their defaults is found [here](#mermaidapi-configuration-defaults).\n * A description of each option follows below.\n *\n * @name Configuration\n */\nconst config = {\n  /**\n   * Theme , the CSS style sheet\n   *\n   * | Parameter | Description     | Type   | Required | Values                                         |\n   * | --------- | --------------- | ------ | -------- | ---------------------------------------------- |\n   * | theme     | Built in Themes | string | Optional | 'default', 'forest', 'dark', 'neutral', 'null' |\n   *\n   * **Notes:** To disable any pre-defined mermaid theme, use \"null\".<pre> \"theme\": \"forest\",\n   * \"themeCSS\": \".node rect { fill: red; }\" </pre>\n   */\n  theme: 'default',\n  themeVariables: theme['default'].getThemeVariables(),\n  themeCSS: undefined,\n  /* **maxTextSize** - The maximum allowed size of the users text diagram */\n  maxTextSize: 50000,\n  darkMode: false,\n\n  /**\n   * | Parameter  | Description                                            | Type   | Required | Values                      |\n   * | ---------- | ------------------------------------------------------ | ------ | -------- | --------------------------- |\n   * | fontFamily | specifies the font to be used in the rendered diagrams | string | Required | Any Possible CSS FontFamily |\n   *\n   * **Notes:** Default value: '\"trebuchet ms\", verdana, arial, sans-serif;'.\n   */\n  fontFamily: '\"trebuchet ms\", verdana, arial, sans-serif;',\n\n  /**\n   * | Parameter | Description                                           | Type             | Required | Values        |\n   * | --------- | ----------------------------------------------------- | ---------------- | -------- | ------------- |\n   * | logLevel  | This option decides the amount of logging to be used. | string \\| number | Required | 1, 2, 3, 4, 5 |\n   *\n   * **Notes:**\n   *\n   * - Debug: 1\n   * - Info: 2\n   * - Warn: 3\n   * - Error: 4\n   * - Fatal: 5 (default)\n   */\n  logLevel: 5,\n\n  /**\n   * | Parameter     | Description                       | Type   | Required | Values                          |\n   * | ------------- | --------------------------------- | ------ | -------- | ------------------------------- |\n   * | securitylevel | Level of trust for parsed diagram | string | Required | 'strict', 'loose', 'antiscript' |\n   *\n   * **Notes**:\n   *\n   * - **strict**: (**default**) tags in text are encoded, click functionality is disabled\n   * - **loose**: tags in text are allowed, click functionality is enabled\n   * - **antiscript**: html tags in text are allowed, (only script element is removed), click\n   *   functionality is enabled\n   */\n  securityLevel: 'strict',\n\n  /**\n   * | Parameter   | Description                                  | Type    | Required | Values      |\n   * | ----------- | -------------------------------------------- | ------- | -------- | ----------- |\n   * | startOnLoad | Dictates whether mermaid starts on Page load | boolean | Required | true, false |\n   *\n   * **Notes:** Default value: true\n   */\n  startOnLoad: true,\n\n  /**\n   * | Parameter           | Description                                                                  | Type    | Required | Values      |\n   * | ------------------- | ---------------------------------------------------------------------------- | ------- | -------- | ----------- |\n   * | arrowMarkerAbsolute | Controls whether or arrow markers in html code are absolute paths or anchors | boolean | Required | true, false |\n   *\n   * **Notes**:\n   *\n   * This matters if you are using base tag settings.\n   *\n   * Default value: false\n   */\n  arrowMarkerAbsolute: false,\n\n  /**\n   * This option controls which currentConfig keys are considered *secure* and can only be changed\n   * via call to mermaidAPI.initialize. Calls to mermaidAPI.reinitialize cannot make changes to the\n   * `secure` keys in the current currentConfig. This prevents malicious graph directives from\n   * overriding a site's default security.\n   *\n   * **Notes**:\n   *\n   * Default value: ['secure', 'securityLevel', 'startOnLoad', 'maxTextSize']\n   */\n  secure: ['secure', 'securityLevel', 'startOnLoad', 'maxTextSize'],\n\n  /**\n   * This option controls if the generated ids of nodes in the SVG are generated randomly or based\n   * on a seed. If set to false, the IDs are generated based on the current date and thus are not\n   * deterministic. This is the default behaviour.\n   *\n   * **Notes**:\n   *\n   * This matters if your files are checked into sourcecontrol e.g. git and should not change unless\n   * content is changed.\n   *\n   * Default value: false\n   */\n  deterministicIds: false,\n\n  /**\n   * This option is the optional seed for deterministic ids. if set to undefined but\n   * deterministicIds is true, a simple number iterator is used. You can set this attribute to base\n   * the seed on a static string.\n   */\n  deterministicIDSeed: undefined,\n\n  /** The object containing configurations specific for flowcharts */\n  flowchart: {\n    /**\n     * | Parameter      | Description                                     | Type    | Required | Values             |\n     * | -------------- | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramPadding | Amount of padding around the diagram as a whole | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The amount of padding around the diagram as a whole so that embedded diagrams have margins,\n     * expressed in pixels\n     *\n     * Default value: 8\n     */\n    diagramPadding: 8,\n\n    /**\n     * | Parameter  | Description                                                                                  | Type    | Required | Values      |\n     * | ---------- | -------------------------------------------------------------------------------------------- | ------- | -------- | ----------- |\n     * | htmlLabels | Flag for setting whether or not a html tag should be used for rendering labels on the edges. | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: true.\n     */\n    htmlLabels: true,\n\n    /**\n     * | Parameter   | Description                                         | Type    | Required | Values              |\n     * | ----------- | --------------------------------------------------- | ------- | -------- | ------------------- |\n     * | nodeSpacing | Defines the spacing between nodes on the same level | Integer | Required | Any positive Number |\n     *\n     * **Notes:**\n     *\n     * Pertains to horizontal spacing for TB (top to bottom) or BT (bottom to top) graphs, and the\n     * vertical spacing for LR as well as RL graphs.**\n     *\n     * Default value: 50\n     */\n    nodeSpacing: 50,\n\n    /**\n     * | Parameter   | Description                                           | Type    | Required | Values              |\n     * | ----------- | ----------------------------------------------------- | ------- | -------- | ------------------- |\n     * | rankSpacing | Defines the spacing between nodes on different levels | Integer | Required | Any Positive Number |\n     *\n     * **Notes**:\n     *\n     * Pertains to vertical spacing for TB (top to bottom) or BT (bottom to top), and the horizontal\n     * spacing for LR as well as RL graphs.\n     *\n     * Default value 50\n     */\n    rankSpacing: 50,\n\n    /**\n     * | Parameter | Description                                        | Type   | Required | Values                        |\n     * | --------- | -------------------------------------------------- | ------ | -------- | ----------------------------- |\n     * | curve     | Defines how mermaid renders curves for flowcharts. | string | Required | 'basis', 'linear', 'cardinal' |\n     *\n     * **Notes:**\n     *\n     * Default Value: 'basis'\n     */\n    curve: 'basis',\n    // Only used in new experimental rendering\n    // represents the padding between the labels and the shape\n    padding: 15,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes:**\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-d3',\n  },\n\n  /** The object containing configurations specific for sequence diagrams */\n  sequence: {\n    /**\n     * | Parameter       | Description                  | Type    | Required | Values             |\n     * | --------------- | ---------------------------- | ------- | -------- | ------------------ |\n     * | activationWidth | Width of the activation rect | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value :10\n     */\n    activationWidth: 10,\n\n    /**\n     * | Parameter      | Description                                          | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginX | Margin to the right and left of the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    diagramMarginX: 50,\n\n    /**\n     * | Parameter      | Description                                       | Type    | Required | Values             |\n     * | -------------- | ------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginY | Margin to the over and under the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    diagramMarginY: 10,\n\n    /**\n     * | Parameter   | Description           | Type    | Required | Values             |\n     * | ----------- | --------------------- | ------- | -------- | ------------------ |\n     * | actorMargin | Margin between actors | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    actorMargin: 50,\n\n    /**\n     * | Parameter | Description          | Type    | Required | Values             |\n     * | --------- | -------------------- | ------- | -------- | ------------------ |\n     * | width     | Width of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 150\n     */\n    width: 150,\n\n    /**\n     * | Parameter | Description           | Type    | Required | Values             |\n     * | --------- | --------------------- | ------- | -------- | ------------------ |\n     * | height    | Height of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 65\n     */\n    height: 65,\n\n    /**\n     * | Parameter | Description              | Type    | Required | Values             |\n     * | --------- | ------------------------ | ------- | -------- | ------------------ |\n     * | boxMargin | Margin around loop boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    boxMargin: 10,\n\n    /**\n     * | Parameter     | Description                                  | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | boxTextMargin | Margin around the text in loop/alt/opt boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 5\n     */\n    boxTextMargin: 5,\n\n    /**\n     * | Parameter  | Description         | Type    | Required | Values             |\n     * | ---------- | ------------------- | ------- | -------- | ------------------ |\n     * | noteMargin | margin around notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    noteMargin: 10,\n\n    /**\n     * | Parameter     | Description            | Type    | Required | Values             |\n     * | ------------- | ---------------------- | ------- | -------- | ------------------ |\n     * | messageMargin | Space between messages | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 35\n     */\n    messageMargin: 35,\n\n    /**\n     * | Parameter    | Description                 | Type   | Required | Values                    |\n     * | ------------ | --------------------------- | ------ | -------- | ------------------------- |\n     * | messageAlign | Multiline message alignment | string | Required | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    messageAlign: 'center',\n\n    /**\n     * | Parameter    | Description                 | Type    | Required | Values      |\n     * | ------------ | --------------------------- | ------- | -------- | ----------- |\n     * | mirrorActors | Mirror actors under diagram | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: true\n     */\n    mirrorActors: true,\n\n    /**\n     * | Parameter  | Description                                                             | Type    | Required | Values      |\n     * | ---------- | ----------------------------------------------------------------------- | ------- | -------- | ----------- |\n     * | forceMenus | forces actor popup menus to always be visible (to support E2E testing). | Boolean | Required | True, False |\n     *\n     * **Notes:**\n     *\n     * Default value: false.\n     */\n    forceMenus: false,\n\n    /**\n     * | Parameter       | Description                                | Type    | Required | Values             |\n     * | --------------- | ------------------------------------------ | ------- | -------- | ------------------ |\n     * | bottomMarginAdj | Prolongs the edge of the diagram downwards | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Depending on css styling this might need adjustment.\n     *\n     * Default value: 1\n     */\n    bottomMarginAdj: 1,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:** When this flag is set to true, the height and width is set to 100% and is then\n     * scaling with the available space. If set to false, the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter   | Description                          | Type    | Required | Values      |\n     * | ----------- | ------------------------------------ | ------- | -------- | ----------- |\n     * | rightAngles | display curve arrows as right angles | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * This will display arrows that start and begin at the same node as right angles, rather than a curve\n     *\n     * Default value: false\n     */\n    rightAngles: false,\n\n    /**\n     * | Parameter           | Description                     | Type    | Required | Values      |\n     * | ------------------- | ------------------------------- | ------- | -------- | ----------- |\n     * | showSequenceNumbers | This will show the node numbers | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: false\n     */\n    showSequenceNumbers: false,\n\n    /**\n     * | Parameter     | Description                                        | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------------- | ------- | -------- | ------------------ |\n     * | actorFontSize | This sets the font size of the actor's description | Integer | Require  | Any Positive Value |\n     *\n     * **Notes:** **Default value 14**..\n     */\n    actorFontSize: 14,\n\n    /**\n     * | Parameter       | Description                                          | Type   | Required | Values                      |\n     * | --------------- | ---------------------------------------------------- | ------ | -------- | --------------------------- |\n     * | actorFontFamily | This sets the font family of the actor's description | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: \"'Open-Sans\", \"sans-serif\"'\n     */\n    actorFontFamily: '\"Open-Sans\", \"sans-serif\"',\n\n    /**\n     * This sets the font weight of the actor's description\n     *\n     * **Notes:** Default value: 400.\n     */\n    actorFontWeight: 400,\n\n    /**\n     * | Parameter    | Description                                     | Type    | Required | Values             |\n     * | ------------ | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | noteFontSize | This sets the font size of actor-attached notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 14\n     */\n    noteFontSize: 14,\n\n    /**\n     * | Parameter      | Description                                        | Type   | Required | Values                      |\n     * | -------------- | -------------------------------------------------- | ------ | -------- | --------------------------- |\n     * | noteFontFamily | This sets the font family of actor-attached notes. | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: ''\"trebuchet ms\", verdana, arial, sans-serif'\n     */\n    noteFontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n\n    /**\n     * This sets the font weight of the note's description\n     *\n     * **Notes:** Default value: 400\n     */\n    noteFontWeight: 400,\n\n    /**\n     * | Parameter | Description                                          | Type   | Required | Values                    |\n     * | --------- | ---------------------------------------------------- | ------ | -------- | ------------------------- |\n     * | noteAlign | This sets the text alignment of actor-attached notes | string | required | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    noteAlign: 'center',\n\n    /**\n     * | Parameter       | Description                               | Type    | Required | Values              |\n     * | --------------- | ----------------------------------------- | ------- | -------- | ------------------- |\n     * | messageFontSize | This sets the font size of actor messages | Integer | Required | Any Positive Number |\n     *\n     * **Notes:** Default value: 16\n     */\n    messageFontSize: 16,\n\n    /**\n     * | Parameter         | Description                                 | Type   | Required | Values                      |\n     * | ----------------- | ------------------------------------------- | ------ | -------- | --------------------------- |\n     * | messageFontFamily | This sets the font family of actor messages | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: '\"trebuchet ms\", verdana, arial, sans-serif'\n     */\n    messageFontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n\n    /**\n     * This sets the font weight of the message's description\n     *\n     * **Notes:** Default value: 400.\n     */\n    messageFontWeight: 400,\n\n    /**\n     * This sets the auto-wrap state for the diagram\n     *\n     * **Notes:** Default value: false.\n     */\n    wrap: false,\n\n    /**\n     * This sets the auto-wrap padding for the diagram (sides only)\n     *\n     * **Notes:** Default value: 0.\n     */\n    wrapPadding: 10,\n\n    /**\n     * This sets the width of the loop-box (loop, alt, opt, par)\n     *\n     * **Notes:** Default value: 50.\n     */\n    labelBoxWidth: 50,\n\n    /**\n     * This sets the height of the loop-box (loop, alt, opt, par)\n     *\n     * **Notes:** Default value: 20.\n     */\n    labelBoxHeight: 20,\n\n    messageFont: function () {\n      return {\n        fontFamily: this.messageFontFamily,\n        fontSize: this.messageFontSize,\n        fontWeight: this.messageFontWeight,\n      };\n    },\n    noteFont: function () {\n      return {\n        fontFamily: this.noteFontFamily,\n        fontSize: this.noteFontSize,\n        fontWeight: this.noteFontWeight,\n      };\n    },\n    actorFont: function () {\n      return {\n        fontFamily: this.actorFontFamily,\n        fontSize: this.actorFontSize,\n        fontWeight: this.actorFontWeight,\n      };\n    },\n  },\n\n  /** The object containing configurations specific for gantt diagrams */\n  gantt: {\n    /**\n     * ### titleTopMargin\n     *\n     * | Parameter      | Description                                    | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------- | ------- | -------- | ------------------ |\n     * | titleTopMargin | Margin top for the text over the gantt diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 25\n     */\n    titleTopMargin: 25,\n\n    /**\n     * | Parameter | Description                         | Type    | Required | Values             |\n     * | --------- | ----------------------------------- | ------- | -------- | ------------------ |\n     * | barHeight | The height of the bars in the graph | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 20\n     */\n    barHeight: 20,\n\n    /**\n     * | Parameter | Description                                                      | Type    | Required | Values             |\n     * | --------- | ---------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | barGap    | The margin between the different activities in the gantt diagram | Integer | Optional | Any Positive Value |\n     *\n     * **Notes:** Default value: 4\n     */\n    barGap: 4,\n\n    /**\n     * | Parameter  | Description                                                                | Type    | Required | Values             |\n     * | ---------- | -------------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | topPadding | Margin between title and gantt diagram and between axis and gantt diagram. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    topPadding: 50,\n\n    /**\n     * | Parameter    | Description                                                             | Type    | Required | Values             |\n     * | ------------ | ----------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | rightPadding | The space allocated for the section name to the right of the activities | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 75\n     */\n    rightPadding: 75,\n\n    /**\n     * | Parameter   | Description                                                            | Type    | Required | Values             |\n     * | ----------- | ---------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | leftPadding | The space allocated for the section name to the left of the activities | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 75\n     */\n    leftPadding: 75,\n\n    /**\n     * | Parameter            | Description                                  | Type    | Required | Values             |\n     * | -------------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | gridLineStartPadding | Vertical starting position of the grid lines | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 35\n     */\n    gridLineStartPadding: 35,\n\n    /**\n     * | Parameter | Description | Type    | Required | Values             |\n     * | --------- | ----------- | ------- | -------- | ------------------ |\n     * | fontSize  | Font size   | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 11\n     */\n    fontSize: 11,\n\n    /**\n     * | Parameter       | Description            | Type    | Required | Values             |\n     * | --------------- | ---------------------- | ------- | -------- | ------------------ |\n     * | sectionFontSize | Font size for sections | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 11\n     */\n    sectionFontSize: 11,\n\n    /**\n     * | Parameter           | Description                              | Type    | Required | Values             |\n     * | ------------------- | ---------------------------------------- | ------- | -------- | ------------------ |\n     * | numberSectionStyles | The number of alternating section styles | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:** Default value: 4\n     */\n    numberSectionStyles: 4,\n\n    /**\n     * | Parameter  | Description                 | Type | Required | Values           |\n     * | ---------- | --------------------------- | ---- | -------- | ---------------- |\n     * | axisFormat | Datetime format of the axis | 3    | Required | Date in yy-mm-dd |\n     *\n     * **Notes:**\n     *\n     * This might need adjustment to match your locale and preferences\n     *\n     * Default value: '%Y-%m-%d'.\n     */\n    axisFormat: '%Y-%m-%d',\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter | Description | Type    | Required | Values      |\n     * | --------- | ----------- | ------- | -------- | ----------- |\n     * | topAxis   | See notes   | Boolean | 4        | True, False |\n     *\n     * **Notes:** when this flag is set date labels will be added to the top of the chart\n     *\n     * **Default value false**.\n     */\n    topAxis: false,\n\n    useWidth: undefined,\n  },\n\n  /** The object containing configurations specific for journey diagrams */\n  journey: {\n    /**\n     * | Parameter      | Description                                          | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginX | Margin to the right and left of the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    diagramMarginX: 50,\n\n    /**\n     * | Parameter      | Description                                        | Type    | Required | Values             |\n     * | -------------- | -------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginY | Margin to the over and under the sequence diagram. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    diagramMarginY: 10,\n\n    /**\n     * | Parameter   | Description           | Type    | Required | Values             |\n     * | ----------- | --------------------- | ------- | -------- | ------------------ |\n     * | actorMargin | Margin between actors | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    leftMargin: 150,\n\n    /**\n     * | Parameter | Description          | Type    | Required | Values             |\n     * | --------- | -------------------- | ------- | -------- | ------------------ |\n     * | width     | Width of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 150\n     */\n    width: 150,\n\n    /**\n     * | Parameter | Description           | Type    | Required | Values             |\n     * | --------- | --------------------- | ------- | -------- | ------------------ |\n     * | height    | Height of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 65\n     */\n    height: 50,\n\n    /**\n     * | Parameter | Description              | Type    | Required | Values             |\n     * | --------- | ------------------------ | ------- | -------- | ------------------ |\n     * | boxMargin | Margin around loop boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    boxMargin: 10,\n\n    /**\n     * | Parameter     | Description                                  | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | boxTextMargin | Margin around the text in loop/alt/opt boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 5\n     */\n    boxTextMargin: 5,\n\n    /**\n     * | Parameter  | Description         | Type    | Required | Values             |\n     * | ---------- | ------------------- | ------- | -------- | ------------------ |\n     * | noteMargin | Margin around notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    noteMargin: 10,\n\n    /**\n     * | Parameter     | Description             | Type    | Required | Values             |\n     * | ------------- | ----------------------- | ------- | -------- | ------------------ |\n     * | messageMargin | Space between messages. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Space between messages.\n     *\n     * Default value: 35\n     */\n    messageMargin: 35,\n\n    /**\n     * | Parameter    | Description                 | Type | Required | Values                    |\n     * | ------------ | --------------------------- | ---- | -------- | ------------------------- |\n     * | messageAlign | Multiline message alignment | 3    | 4        | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    messageAlign: 'center',\n\n    /**\n     * | Parameter       | Description                                | Type    | Required | Values             |\n     * | --------------- | ------------------------------------------ | ------- | -------- | ------------------ |\n     * | bottomMarginAdj | Prolongs the edge of the diagram downwards | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Depending on css styling this might need adjustment.\n     *\n     * Default value: 1\n     */\n    bottomMarginAdj: 1,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter   | Description                       | Type | Required | Values      |\n     * | ----------- | --------------------------------- | ---- | -------- | ----------- |\n     * | rightAngles | Curved Arrows become Right Angles | 3    | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * This will display arrows that start and begin at the same node as right angles, rather than a curves\n     *\n     * Default value: false\n     */\n    rightAngles: false,\n    taskFontSize: 14,\n    taskFontFamily: '\"Open-Sans\", \"sans-serif\"',\n    taskMargin: 50,\n    // width of activation box\n    activationWidth: 10,\n\n    // text placement as: tspan | fo | old only text as before\n    textPlacement: 'fo',\n    actorColours: ['#8FBC8F', '#7CFC00', '#00FFFF', '#20B2AA', '#B0E0E6', '#FFFFE0'],\n\n    sectionFills: ['#191970', '#8B008B', '#4B0082', '#2F4F4F', '#800000', '#8B4513', '#00008B'],\n    sectionColours: ['#fff'],\n  },\n  class: {\n    arrowMarkerAbsolute: false,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes**:\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-wrapper',\n  },\n  git: {\n    arrowMarkerAbsolute: false,\n\n    useWidth: undefined,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n  },\n  state: {\n    dividerMargin: 10,\n    sizeUnit: 5,\n    padding: 8,\n    textHeight: 10,\n    titleShift: -15,\n    noteMargin: 10,\n    forkWidth: 70,\n    forkHeight: 7,\n    // Used\n    miniPadding: 2,\n    // Font size factor, this is used to guess the width of the edges labels before rendering by dagre\n    // layout. This might need updating if/when switching font\n    fontSizeFactor: 5.02,\n    fontSize: 24,\n    labelHeight: 16,\n    edgeLengthFactor: '20',\n    compositTitleSize: 35,\n    radius: 5,\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes:**\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-wrapper',\n  },\n\n  /** The object containing configurations specific for entity relationship diagrams */\n  er: {\n    /**\n     * | Parameter      | Description                                     | Type    | Required | Values             |\n     * | -------------- | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramPadding | Amount of padding around the diagram as a whole | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The amount of padding around the diagram as a whole so that embedded diagrams have margins,\n     * expressed in pixels\n     *\n     * Default value: 20\n     */\n    diagramPadding: 20,\n\n    /**\n     * | Parameter       | Description                              | Type   | Required | Values                 |\n     * | --------------- | ---------------------------------------- | ------ | -------- | ---------------------- |\n     * | layoutDirection | Directional bias for layout of entities. | string | Required | \"TB\", \"BT\", \"LR\", \"RL\" |\n     *\n     * **Notes:**\n     *\n     * 'TB' for Top-Bottom, 'BT'for Bottom-Top, 'LR' for Left-Right, or 'RL' for Right to Left.\n     *\n     * T = top, B = bottom, L = left, and R = right.\n     *\n     * Default value: 'TB'\n     */\n    layoutDirection: 'TB',\n\n    /**\n     * | Parameter      | Description                        | Type    | Required | Values             |\n     * | -------------- | ---------------------------------- | ------- | -------- | ------------------ |\n     * | minEntityWidth | The minimum width of an entity box | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Expressed in pixels. Default value: 100\n     */\n    minEntityWidth: 100,\n\n    /**\n     * | Parameter       | Description                         | Type    | Required | Values             |\n     * | --------------- | ----------------------------------- | ------- | -------- | ------------------ |\n     * | minEntityHeight | The minimum height of an entity box | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:** Expressed in pixels Default value: 75\n     */\n    minEntityHeight: 75,\n\n    /**\n     * | Parameter     | Description                                                 | Type    | Required | Values             |\n     * | ------------- | ----------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | entityPadding | Minimum internal padding betweentext in box and box borders | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The minimum internal padding betweentext in an entity box and the enclosing box borders,\n     * expressed in pixels.\n     *\n     * Default value: 15\n     */\n    entityPadding: 15,\n\n    /**\n     * | Parameter | Description                         | Type   | Required | Values               |\n     * | --------- | ----------------------------------- | ------ | -------- | -------------------- |\n     * | stroke    | Stroke color of box edges and lines | string | 4        | Any recognized color |\n     *\n     * **Notes:** Default value: 'gray'\n     */\n    stroke: 'gray',\n\n    /**\n     * | Parameter | Description                | Type   | Required | Values               |\n     * | --------- | -------------------------- | ------ | -------- | -------------------- |\n     * | fill      | Fill color of entity boxes | string | 4        | Any recognized color |\n     *\n     * **Notes:** Default value: 'honeydew'\n     */\n    fill: 'honeydew',\n\n    /**\n     * | Parameter | Description         | Type    | Required | Values             |\n     * | --------- | ------------------- | ------- | -------- | ------------------ |\n     * | fontSize  | Font Size in pixels | Integer |          | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Font size (expressed as an integer representing a number of pixels) Default value: 12\n     */\n    fontSize: 12,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n  },\n\n  /** The object containing configurations specific for pie diagrams */\n  pie: {\n    useWidth: undefined,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n  },\n\n  /** The object containing configurations specific for req diagrams */\n  requirement: {\n    useWidth: undefined,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    rect_fill: '#f9f9f9',\n    text_color: '#333',\n    rect_border_size: '0.5px',\n    rect_border_color: '#bbb',\n    rect_min_width: 200,\n    rect_min_height: 200,\n    fontSize: 14,\n    rect_padding: 10,\n    line_height: 20,\n  },\n};\n\nconfig.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\nconfig.git.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n\nconst keyify = (obj, prefix = '') =>\n  Object.keys(obj).reduce((res, el) => {\n    if (Array.isArray(obj[el])) {\n      return res;\n    } else if (typeof obj[el] === 'object' && obj[el] !== null) {\n      return [...res, prefix + el, ...keyify(obj[el], '')];\n    }\n    return [...res, prefix + el];\n  }, []);\n\nexport const configKeys = keyify(config, '');\nexport default config;\n","import { select } from 'd3';\nimport { log } from '../../logger';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport utils from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\n\nconst MERMAID_DOM_ID_PREFIX = 'classid-';\n\nlet relations = [];\nlet classes = {};\nlet classCounter = 0;\n\nlet funs = [];\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, configApi.getConfig());\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst splitClassNameAndType = function (id) {\n  let genericType = '';\n  let className = id;\n\n  if (id.indexOf('~') > 0) {\n    let split = id.split('~');\n    className = split[0];\n\n    genericType = common.sanitizeText(split[1], configApi.getConfig());\n  }\n\n  return { className: className, type: genericType };\n};\n\n/**\n * Function called by parser when a node definition has been found.\n *\n * @param id\n * @public\n */\nexport const addClass = function (id) {\n  let classId = splitClassNameAndType(id);\n  // Only add class if not exists\n  if (typeof classes[classId.className] !== 'undefined') return;\n\n  classes[classId.className] = {\n    id: classId.className,\n    type: classId.type,\n    cssClasses: [],\n    methods: [],\n    members: [],\n    annotations: [],\n    domId: MERMAID_DOM_ID_PREFIX + classId.className + '-' + classCounter,\n  };\n\n  classCounter++;\n};\n\n/**\n * Function to lookup domId from id in the graph definition.\n *\n * @param id\n * @public\n */\nexport const lookUpDomId = function (id) {\n  const classKeys = Object.keys(classes);\n  for (let i = 0; i < classKeys.length; i++) {\n    if (classes[classKeys[i]].id === id) {\n      return classes[classKeys[i]].domId;\n    }\n  }\n};\n\nexport const clear = function () {\n  relations = [];\n  classes = {};\n  funs = [];\n  funs.push(setupToolTips);\n};\n\nexport const getClass = function (id) {\n  return classes[id];\n};\nexport const getClasses = function () {\n  return classes;\n};\n\nexport const getRelations = function () {\n  return relations;\n};\n\nexport const addRelation = function (relation) {\n  log.debug('Adding relation: ' + JSON.stringify(relation));\n  addClass(relation.id1);\n  addClass(relation.id2);\n\n  relation.id1 = splitClassNameAndType(relation.id1).className;\n  relation.id2 = splitClassNameAndType(relation.id2).className;\n\n  relation.relationTitle1 = common.sanitizeText(\n    relation.relationTitle1.trim(),\n    configApi.getConfig()\n  );\n\n  relation.relationTitle2 = common.sanitizeText(\n    relation.relationTitle2.trim(),\n    configApi.getConfig()\n  );\n\n  relations.push(relation);\n};\n\n/**\n * Adds an annotation to the specified class Annotations mark special properties of the given type\n * (like 'interface' or 'service')\n *\n * @param className The class name\n * @param annotation The name of the annotation without any brackets\n * @public\n */\nexport const addAnnotation = function (className, annotation) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  classes[validatedClassName].annotations.push(annotation);\n};\n\n/**\n * Adds a member to the specified class\n *\n * @param className The class name\n * @param member The full name of the member. If the member is enclosed in <<brackets>> it is\n *   treated as an annotation If the member is ending with a closing bracket ) it is treated as a\n *   method Otherwise the member will be treated as a normal property\n * @public\n */\nexport const addMember = function (className, member) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  const theClass = classes[validatedClassName];\n\n  if (typeof member === 'string') {\n    // Member can contain white spaces, we trim them out\n    const memberString = member.trim();\n\n    if (memberString.startsWith('<<') && memberString.endsWith('>>')) {\n      // Remove leading and trailing brackets\n      // theClass.annotations.push(memberString.substring(2, memberString.length - 2));\n      theClass.annotations.push(sanitizeText(memberString.substring(2, memberString.length - 2)));\n    } else if (memberString.indexOf(')') > 0) {\n      theClass.methods.push(sanitizeText(memberString));\n    } else if (memberString) {\n      theClass.members.push(sanitizeText(memberString));\n    }\n  }\n};\n\nexport const addMembers = function (className, members) {\n  if (Array.isArray(members)) {\n    members.reverse();\n    members.forEach((member) => addMember(className, member));\n  }\n};\n\nexport const cleanupLabel = function (label) {\n  if (label.substring(0, 1) === ':') {\n    return common.sanitizeText(label.substr(1).trim(), configApi.getConfig());\n  } else {\n    return sanitizeText(label.trim());\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setCssClass = function (ids, className) {\n  ids.split(',').forEach(function (_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].cssClasses.push(className);\n    }\n  });\n};\n\n/**\n * Called by parser when a tooltip is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param tooltip Tooltip to add\n */\nconst setTooltip = function (ids, tooltip) {\n  const config = configApi.getConfig();\n  ids.split(',').forEach(function (id) {\n    if (typeof tooltip !== 'undefined') {\n      classes[id].tooltip = common.sanitizeText(tooltip, config);\n    }\n  });\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param target Target of the link, _blank by default as originally defined in the svgDraw.js file\n */\nexport const setLink = function (ids, linkStr, target) {\n  const config = configApi.getConfig();\n  ids.split(',').forEach(function (_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].link = utils.formatUrl(linkStr, config);\n      if (config.securityLevel === 'sandbox') {\n        classes[id].linkTarget = '_top';\n      } else if (typeof target === 'string') {\n        classes[id].linkTarget = sanitizeText(target);\n      } else {\n        classes[id].linkTarget = '_blank';\n      }\n    }\n  });\n  setCssClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs Function args the function should be called with\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFunc(id, functionName, functionArgs);\n    classes[id].haveCallback = true;\n  });\n  setCssClass(ids, 'clickable');\n};\n\nconst setClickFunc = function (domId, functionName, functionArgs) {\n  const config = configApi.getConfig();\n  let id = domId;\n  let elemId = lookUpDomId(id);\n\n  if (config.securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  if (typeof classes[id] !== 'undefined') {\n    let argList = [];\n    if (typeof functionArgs === 'string') {\n      /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n      argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n      for (let i = 0; i < argList.length; i++) {\n        let item = argList[i].trim();\n        /* Removes all double quotes at the start and end of an argument */\n        /* This preserves all starting and ending whitespace inside */\n        if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n          item = item.substr(1, item.length - 2);\n        }\n        argList[i] = item;\n      }\n    }\n\n    /* if no arguments passed into callback, default to passing in id */\n    if (argList.length === 0) {\n      argList.push(elemId);\n    }\n\n    funs.push(function () {\n      const elem = document.querySelector(`[id=\"${elemId}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function () {\n            utils.runFunc(functionName, ...argList);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1,\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3,\n};\n\nconst setupToolTips = function (element) {\n  let tooltipElem = select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = select('body').append('div').attr('class', 'mermaidTooltip').style('opacity', 0);\n  }\n\n  const svg = select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function () {\n      const el = select(this);\n      const title = el.attr('title');\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem.transition().duration(200).style('opacity', '.9');\n      tooltipElem\n        .html(el.attr('title'))\n        .style('left', window.scrollX + rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', window.scrollY + rect.top - 14 + document.body.scrollTop + 'px');\n      el.classed('hover', true);\n    })\n    .on('mouseout', function () {\n      tooltipElem.transition().duration(500).style('opacity', 0);\n      const el = select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\nlet direction = 'TB';\nconst getDirection = () => direction;\nconst setDirection = (dir) => {\n  direction = dir;\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().class,\n  addClass,\n  bindFunctions,\n  clear,\n  getClass,\n  getClasses,\n  addAnnotation,\n  getRelations,\n  addRelation,\n  getDirection,\n  setDirection,\n  addMember,\n  addMembers,\n  cleanupLabel,\n  lineType,\n  relationType,\n  setClickEvent,\n  setCssClass,\n  setLink,\n  setTooltip,\n  lookUpDomId,\n};\n","import { select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport classDb, { lookUpDomId } from './classDb';\nimport { parser } from './parser/classDiagram';\nimport svgDraw from './svgDraw';\nimport { getConfig } from '../../config';\nimport { render } from '../../dagre-wrapper/index.js';\n// import addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { curveLinear } from 'd3';\nimport { interpolateToCurve, getStylesFromArray, configureSvgSize } from '../../utils';\nimport common from '../common/common';\n\nparser.yy = classDb;\n\nlet idCache = {};\nconst padding = 20;\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, getConfig());\n\nconst conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n};\n\n/**\n * Function that adds the vertices found during parsing to the graph to be rendered.\n *\n * @param {Object<\n *   string,\n *   { cssClasses: string[]; text: string; id: string; type: string; domId: string }\n * >} classes\n *   Object containing the vertices.\n * @param {SVGGElement} g The graph that is to be drawn.\n */\nexport const addClasses = function (classes, g) {\n  // const svg = select(`[id=\"${svgId}\"]`);\n  const keys = Object.keys(classes);\n  log.info('keys:', keys);\n  log.info(classes);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = classes[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let cssClassStr = '';\n    if (vertex.cssClasses.length > 0) {\n      cssClassStr = cssClassStr + ' ' + vertex.cssClasses.join(' ');\n    }\n    // if (vertex.classes.length > 0) {\n    //   classStr = vertex.classes.join(' ');\n    // }\n\n    const styles = { labelStyle: '' }; //getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    // let vertexNode;\n    // if (evaluate(getConfig().flowchart.htmlLabels)) {\n    //   const node = {\n    //     label: vertexText.replace(\n    //       /fa[lrsb]?:fa-[\\w-]+/g,\n    //       s => `<i class='${s.replace(':', ' ')}'></i>`\n    //     )\n    //   };\n    //   vertexNode = addHtmlLabel(svg, node).node();\n    //   vertexNode.parentNode.removeChild(vertexNode);\n    // } else {\n    //   const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    //   svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n    //   const rows = vertexText.split(common.lineBreakRegex);\n\n    //   for (let j = 0; j < rows.length; j++) {\n    //     const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n    //     tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n    //     tspan.setAttribute('dy', '1em');\n    //     tspan.setAttribute('x', '1');\n    //     tspan.textContent = rows[j];\n    //     svgLabel.appendChild(tspan);\n    //   }\n    //   vertexNode = svgLabel;\n    // }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'class':\n        _shape = 'class_box';\n        break;\n      default:\n        _shape = 'class_box';\n    }\n    // Add the node\n    g.setNode(vertex.id, {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: sanitizeText(vertexText),\n      classData: vertex,\n      rx: radious,\n      ry: radious,\n      class: cssClassStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: vertex.domId,\n      haveCallback: vertex.haveCallback,\n      link: vertex.link,\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      padding: getConfig().flowchart.padding,\n    });\n\n    log.info('setNode', {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: cssClassStr,\n      style: styles.style,\n      id: vertex.id,\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      padding: getConfig().flowchart.padding,\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph defninition\n *\n * @param relations\n * @param {object} g The graph object\n */\nexport const addRelations = function (relations, g) {\n  let cnt = 0;\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  // if (typeof relations.defaultStyle !== 'undefined') {\n  //   const defaultStyles = getStylesFromArray(relations.defaultStyle);\n  //   defaultStyle = defaultStyles.style;\n  //   defaultLabelStyle = defaultStyles.labelStyle;\n  // }\n\n  relations.forEach(function (edge) {\n    cnt++;\n    const edgeData = {};\n    //Set relationship style and line type\n    edgeData.classes = 'relation';\n    edgeData.pattern = edge.relation.lineType == 1 ? 'dashed' : 'solid';\n\n    edgeData.id = 'id' + cnt;\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    log.info(edgeData, edge);\n    //Set edge extra labels\n    //edgeData.startLabelLeft = edge.relationTitle1;\n    edgeData.startLabelRight = edge.relationTitle1 === 'none' ? '' : edge.relationTitle1;\n    edgeData.endLabelLeft = edge.relationTitle2 === 'none' ? '' : edge.relationTitle2;\n    //edgeData.endLabelRight = edge.relationTitle2;\n\n    //Set relation arrow types\n    edgeData.arrowTypeStart = getArrowMarker(edge.relation.type1);\n    edgeData.arrowTypeEnd = getArrowMarker(edge.relation.type2);\n    let style = '';\n    let labelStyle = '';\n\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    } else {\n      style = 'fill:none';\n      if (typeof defaultStyle !== 'undefined') {\n        style = defaultStyle;\n      }\n      if (typeof defaultLabelStyle !== 'undefined') {\n        labelStyle = defaultLabelStyle;\n      }\n    }\n\n    edgeData.style = style;\n    edgeData.labelStyle = labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof relations.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(relations.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    edge.text = edge.title;\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n\n      if (getConfig().flowchart.htmlLabels) {\n        // eslint-disable-line\n        edgeData.labelType = 'html';\n        edgeData.label = '<span class=\"edgeLabel\">' + edge.text + '</span>';\n      } else {\n        edgeData.labelType = 'text';\n        edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n        if (typeof edge.style === 'undefined') {\n          edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none';\n        }\n\n        edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n      }\n    }\n    // Add the edge to the graph\n    g.setEdge(edge.id1, edge.id2, edgeData, cnt);\n  });\n};\n\n/**\n * Gets the ID with the same label as in the cache\n *\n * @param {string} label The label to look for\n * @returns {string} The resulting ID\n */\nconst getGraphId = function (label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\n\n/**\n * Merges the value of `conf` with the passed `cnf`\n *\n * @param {object} cnf Config to merge\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {string} text\n * @param {string} id\n */\nexport const draw = function (text, id) {\n  log.info('Drawing class - ', id);\n  classDb.clear();\n  // const parser = classDb.parser;\n  // parser.yy = classDb;\n\n  // Parse the graph definition\n  // try {\n  parser.parse(text);\n  // } catch (err) {\n  // log.debug('Parsing failed');\n  // }\n\n  // Fetch the default direction, use TD if none was found\n  //let dir = 'TD';\n\n  const conf = getConfig().flowchart;\n  const securityLevel = getConfig().securityLevel;\n  log.info('config:', conf);\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: classDb.getDirection(),\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  // let subG;\n  // const subGraphs = flowDb.getSubGraphs();\n  // log.info('Subgraphs - ', subGraphs);\n  // for (let i = subGraphs.length - 1; i >= 0; i--) {\n  //   subG = subGraphs[i];\n  //   log.info('Subgraph - ', subG);\n  //   flowDb.addVertex(subG.id, subG.title, 'group', undefined, subG.classes);\n  // }\n\n  // Fetch the verices/nodes and edges/links from the parsed graph definition\n  const classes = classDb.getClasses();\n  const relations = classDb.getRelations();\n\n  log.info(relations);\n  // let i = 0;\n  // for (i = subGraphs.length - 1; i >= 0; i--) {\n  //   subG = subGraphs[i];\n\n  //   selectAll('cluster').append('text');\n\n  //   for (let j = 0; j < subG.nodes.length; j++) {\n  //     g.setParent(subG.nodes[j], subG.id);\n  //   }\n  // }\n  addClasses(classes, g, id);\n  addRelations(relations, g);\n\n  // Add custom shapes\n  // flowChartShapes.addToRenderV2(addShape);\n\n  // Set up an SVG group so that we can translate the final graph.\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const svg = root.select(`[id=\"${id}\"]`);\n  svg.attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(element, g, ['aggregation', 'extension', 'composition', 'dependency'], 'classDiagram', id);\n\n  // element.selectAll('g.node').attr('title', function() {\n  //   return flowDb.getTooltip(this.id);\n  // });\n\n  const padding = 8;\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n  log.debug(\n    `new ViewBox 0 0 ${width} ${height}`,\n    `translate(${padding - g._label.marginx}, ${padding - g._label.marginy})`\n  );\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `0 0 ${width} ${height}`);\n  svg\n    .select('g')\n    .attr('transform', `translate(${padding - g._label.marginx}, ${padding - svgBounds.y})`);\n\n  // Index nodes\n  // flowDb.indexNodes('subGraph' + i);\n\n  // Add label rects for non html labels\n  if (!conf.htmlLabels) {\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      // rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  // If node has a link, wrap it in an anchor SVG object.\n  // const keys = Object.keys(classes);\n  // keys.forEach(function(key) {\n  //   const vertex = classes[key];\n\n  //   if (vertex.link) {\n  //     const node = select('#' + id + ' [id=\"' + key + '\"]');\n  //     if (node) {\n  //       const link = document.createElementNS('http://www.w3.org/2000/svg', 'a');\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n\n  //       const linkNode = node.insert(function() {\n  //         return link;\n  //       }, ':first-child');\n\n  //       const shape = node.select('.label-container');\n  //       if (shape) {\n  //         linkNode.append(function() {\n  //           return shape.node();\n  //         });\n  //       }\n\n  //       const label = node.select('.label');\n  //       if (label) {\n  //         linkNode.append(function() {\n  //           return label.node();\n  //         });\n  //       }\n  //     }\n  //   }\n  // });\n};\n\n/**\n * Gets the arrow marker for a type index\n *\n * @param {number} type The type to look for\n * @returns {'aggregation' | 'extension' | 'composition' | 'dependency'} The arrow marker\n */\nfunction getArrowMarker(type) {\n  let marker;\n  switch (type) {\n    case 0:\n      marker = 'aggregation';\n      break;\n    case 1:\n      marker = 'extension';\n      break;\n    case 2:\n      marker = 'composition';\n      break;\n    case 3:\n      marker = 'dependency';\n      break;\n    default:\n      marker = 'none';\n  }\n  return marker;\n}\n\nexport default {\n  setConf,\n  draw,\n};\n","import { select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport classDb, { lookUpDomId } from './classDb';\nimport { parser } from './parser/classDiagram';\nimport svgDraw from './svgDraw';\nimport { configureSvgSize } from '../../utils';\nimport { getConfig } from '../../config';\n\nparser.yy = classDb;\n\nlet idCache = {};\nconst padding = 20;\n\nconst conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n};\n\n/**\n * Gets the ID with the same label as in the cache\n *\n * @param {string} label The label to look for\n * @returns {string} The resulting ID\n */\nconst getGraphId = function (label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {SVGSVGElement} elem The SVG element to append to\n */\nconst insertMarkers = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,7 L18,13 V 1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,1 V 13 L18,7 Z'); // this is actual shape for arrowhead\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 5,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n\n/**\n * Merges the value of `conf` with the passed `cnf`\n *\n * @param {object} cnf Config to merge\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {string} text\n * @param {string} id\n */\nexport const draw = function (text, id) {\n  idCache = {};\n  parser.yy.clear();\n  parser.parse(text);\n\n  log.info('Rendering diagram ' + text);\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Fetch the default direction, use TD if none was found\n  const diagram = root.select(`[id='${id}']`);\n  diagram.attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n  });\n\n  // Set an object for the graph label\n  g.setGraph({\n    isMultiGraph: true,\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  g.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  const classes = classDb.getClasses();\n  const keys = Object.keys(classes);\n\n  for (let i = 0; i < keys.length; i++) {\n    const classDef = classes[keys[i]];\n    const node = svgDraw.drawClass(diagram, classDef, conf);\n    idCache[node.id] = node;\n\n    // Add nodes to the graph. The first argument is the node id. The second is\n    // metadata about the node. In this case we're going to add labels to each of\n    // our nodes.\n    g.setNode(node.id, node);\n\n    log.info('Org height: ' + node.height);\n  }\n\n  const relations = classDb.getRelations();\n  relations.forEach(function (relation) {\n    log.info(\n      'tjoho' + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(\n      getGraphId(relation.id1),\n      getGraphId(relation.id2),\n      {\n        relation: relation,\n      },\n      relation.title || 'DEFAULT'\n    );\n  });\n\n  dagre.layout(g);\n  g.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof g.node(v) !== 'undefined') {\n      log.debug('Node ' + v + ': ' + JSON.stringify(g.node(v)));\n      root\n        .select('#' + lookUpDomId(v))\n        .attr(\n          'transform',\n          'translate(' +\n            (g.node(v).x - g.node(v).width / 2) +\n            ',' +\n            (g.node(v).y - g.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n\n  g.edges().forEach(function (e) {\n    if (typeof e !== 'undefined' && typeof g.edge(e) !== 'undefined') {\n      log.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(g.edge(e)));\n      svgDraw.drawEdge(diagram, g.edge(e), g.edge(e).relation, conf);\n    }\n  });\n\n  const svgBounds = diagram.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  diagram.attr('viewBox', vBox);\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `g.classGroup text {\n  fill: ${options.nodeBorder};\n  fill: ${options.classText};\n  stroke: none;\n  font-family: ${options.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${options.classText};\n}\n.edgeLabel .label rect {\n  fill: ${options.mainBkg};\n}\n.label text {\n  fill: ${options.classText};\n}\n.edgeLabel .label span {\n  background: ${options.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${options.nodeBorder};\n  stroke: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${options.mainBkg};\n  stroke: ${options.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${options.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${options.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n#compositionStart, .composition {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n}\n\n`;\n\nexport default getStyles;\n","import { line, curveBasis } from 'd3';\nimport { lookUpDomId, relationType } from './classDb';\nimport utils from '../../utils';\nimport { log } from '../../logger';\n\nlet edgeCount = 0;\nexport const drawEdge = function (elem, path, relation, conf) {\n  const getRelationType = function (type) {\n    switch (type) {\n      case relationType.AGGREGATION:\n        return 'aggregation';\n      case relationType.EXTENSION:\n        return 'extension';\n      case relationType.COMPOSITION:\n        return 'composition';\n      case relationType.DEPENDENCY:\n        return 'dependency';\n    }\n  };\n\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'relation');\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  if (relation.relation.lineType == 1) {\n    svgPath.attr('class', 'relation dashed-line');\n  }\n  if (relation.relation.type1 !== 'none') {\n    svgPath.attr(\n      'marker-start',\n      'url(' + url + '#' + getRelationType(relation.relation.type1) + 'Start' + ')'\n    );\n  }\n  if (relation.relation.type2 !== 'none') {\n    svgPath.attr(\n      'marker-end',\n      'url(' + url + '#' + getRelationType(relation.relation.type2) + 'End' + ')'\n    );\n  }\n\n  let x, y;\n  const l = path.points.length;\n  // Calculate Label position\n  let labelPosition = utils.calcLabelPosition(path.points);\n  x = labelPosition.x;\n  y = labelPosition.y;\n\n  let p1_card_x, p1_card_y;\n  let p2_card_x, p2_card_y;\n\n  if (l % 2 !== 0 && l > 1) {\n    let cardinality_1_point = utils.calcCardinalityPosition(\n      relation.relation.type1 !== 'none',\n      path.points,\n      path.points[0]\n    );\n    let cardinality_2_point = utils.calcCardinalityPosition(\n      relation.relation.type2 !== 'none',\n      path.points,\n      path.points[l - 1]\n    );\n\n    log.debug('cardinality_1_point ' + JSON.stringify(cardinality_1_point));\n    log.debug('cardinality_2_point ' + JSON.stringify(cardinality_2_point));\n\n    p1_card_x = cardinality_1_point.x;\n    p1_card_y = cardinality_1_point.y;\n    p2_card_x = cardinality_2_point.x;\n    p2_card_y = cardinality_2_point.y;\n  }\n\n  if (typeof relation.title !== 'undefined') {\n    const g = elem.append('g').attr('class', 'classLabel');\n    const label = g\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('fill', 'red')\n      .attr('text-anchor', 'middle')\n      .text(relation.title);\n\n    window.label = label;\n    const bounds = label.node().getBBox();\n\n    g.insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', bounds.x - conf.padding / 2)\n      .attr('y', bounds.y - conf.padding / 2)\n      .attr('width', bounds.width + conf.padding)\n      .attr('height', bounds.height + conf.padding);\n  }\n\n  log.info('Rendering relation ' + JSON.stringify(relation));\n  if (typeof relation.relationTitle1 !== 'undefined' && relation.relationTitle1 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type1')\n      .attr('x', p1_card_x)\n      .attr('y', p1_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle1);\n  }\n  if (typeof relation.relationTitle2 !== 'undefined' && relation.relationTitle2 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type2')\n      .attr('x', p2_card_x)\n      .attr('y', p2_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle2);\n  }\n\n  edgeCount++;\n};\n\n/**\n * Renders a class diagram\n *\n * @param {SVGSVGElement} elem The element to draw it into\n * @param classDef\n * @param conf\n * @todo Add more information in the JSDOC here\n */\nexport const drawClass = function (elem, classDef, conf) {\n  log.info('Rendering class ' + classDef);\n\n  const id = classDef.id;\n  const classInfo = {\n    id: id,\n    label: classDef.id,\n    width: 0,\n    height: 0,\n  };\n\n  // add class group\n  const g = elem.append('g').attr('id', lookUpDomId(id)).attr('class', 'classGroup');\n\n  // add title\n  let title;\n  if (classDef.link) {\n    title = g\n      .append('svg:a')\n      .attr('xlink:href', classDef.link)\n      .attr('target', classDef.linkTarget)\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  } else {\n    title = g\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  }\n\n  // add annotations\n  let isFirst = true;\n  classDef.annotations.forEach(function (member) {\n    const titleText2 = title.append('tspan').text('«' + member + '»');\n    if (!isFirst) titleText2.attr('dy', conf.textHeight);\n    isFirst = false;\n  });\n\n  let classTitleString = classDef.id;\n\n  if (classDef.type !== undefined && classDef.type !== '') {\n    classTitleString += '<' + classDef.type + '>';\n  }\n\n  const classTitle = title.append('tspan').text(classTitleString).attr('class', 'title');\n\n  // If class has annotations the title needs to have an offset of the text height\n  if (!isFirst) classTitle.attr('dy', conf.textHeight);\n\n  const titleHeight = title.node().getBBox().height;\n\n  const membersLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin / 2)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin / 2);\n\n  const members = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + conf.dividerMargin + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n  classDef.members.forEach(function (member) {\n    addTspan(members, member, isFirst, conf);\n    isFirst = false;\n  });\n\n  const membersBox = members.node().getBBox();\n\n  const methodsLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin + membersBox.height)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin + membersBox.height);\n\n  const methods = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + 2 * conf.dividerMargin + membersBox.height + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n\n  classDef.methods.forEach(function (method) {\n    addTspan(methods, method, isFirst, conf);\n    isFirst = false;\n  });\n\n  const classBox = g.node().getBBox();\n  var cssClassStr = ' ';\n\n  if (classDef.cssClasses.length > 0) {\n    cssClassStr = cssClassStr + classDef.cssClasses.join(' ');\n  }\n\n  const rect = g\n    .insert('rect', ':first-child')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', classBox.width + 2 * conf.padding)\n    .attr('height', classBox.height + conf.padding + 0.5 * conf.dividerMargin)\n    .attr('class', cssClassStr);\n\n  const rectWidth = rect.node().getBBox().width;\n\n  // Center title\n  // We subtract the width of each text element from the class box width and divide it by 2\n  title.node().childNodes.forEach(function (x) {\n    x.setAttribute('x', (rectWidth - x.getBBox().width) / 2);\n  });\n\n  if (classDef.tooltip) {\n    title.insert('title').text(classDef.tooltip);\n  }\n\n  membersLine.attr('x2', rectWidth);\n  methodsLine.attr('x2', rectWidth);\n\n  classInfo.width = rectWidth;\n  classInfo.height = classBox.height + conf.padding + 0.5 * conf.dividerMargin;\n\n  return classInfo;\n};\n\nexport const parseMember = function (text) {\n  const fieldRegEx = /^(\\+|-|~|#)?(\\w+)(~\\w+~|\\[\\])?\\s+(\\w+) *(\\*|\\$)?$/;\n  const methodRegEx = /^([+|\\-|~|#])?(\\w+) *\\( *(.*)\\) *(\\*|\\$)? *(\\w*[~|[\\]]*\\s*\\w*~?)$/;\n\n  let fieldMatch = text.match(fieldRegEx);\n  let methodMatch = text.match(methodRegEx);\n\n  if (fieldMatch && !methodMatch) {\n    return buildFieldDisplay(fieldMatch);\n  } else if (methodMatch) {\n    return buildMethodDisplay(methodMatch);\n  } else {\n    return buildLegacyDisplay(text);\n  }\n};\n\nconst buildFieldDisplay = function (parsedText) {\n  let cssStyle = '';\n  let displayText = '';\n\n  try {\n    let visibility = parsedText[1] ? parsedText[1].trim() : '';\n    let fieldType = parsedText[2] ? parsedText[2].trim() : '';\n    let genericType = parsedText[3] ? parseGenericTypes(parsedText[3].trim()) : '';\n    let fieldName = parsedText[4] ? parsedText[4].trim() : '';\n    let classifier = parsedText[5] ? parsedText[5].trim() : '';\n\n    displayText = visibility + fieldType + genericType + ' ' + fieldName;\n    cssStyle = parseClassifier(classifier);\n  } catch (err) {\n    displayText = parsedText;\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\nconst buildMethodDisplay = function (parsedText) {\n  let cssStyle = '';\n  let displayText = '';\n\n  try {\n    let visibility = parsedText[1] ? parsedText[1].trim() : '';\n    let methodName = parsedText[2] ? parsedText[2].trim() : '';\n    let parameters = parsedText[3] ? parseGenericTypes(parsedText[3].trim()) : '';\n    let classifier = parsedText[4] ? parsedText[4].trim() : '';\n    let returnType = parsedText[5] ? ' : ' + parseGenericTypes(parsedText[5]).trim() : '';\n\n    displayText = visibility + methodName + '(' + parameters + ')' + returnType;\n    cssStyle = parseClassifier(classifier);\n  } catch (err) {\n    displayText = parsedText;\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\nconst buildLegacyDisplay = function (text) {\n  // if for some reason we dont have any match, use old format to parse text\n  let displayText = '';\n  let cssStyle = '';\n  let memberText = '';\n  let returnType = '';\n  let methodStart = text.indexOf('(');\n  let methodEnd = text.indexOf(')');\n\n  if (methodStart > 1 && methodEnd > methodStart && methodEnd <= text.length) {\n    let visibility = '';\n    let methodName = '';\n\n    let firstChar = text.substring(0, 1);\n    if (firstChar.match(/\\w/)) {\n      methodName = text.substring(0, methodStart).trim();\n    } else {\n      if (firstChar.match(/\\+|-|~|#/)) {\n        visibility = firstChar;\n      }\n\n      methodName = text.substring(1, methodStart).trim();\n    }\n\n    let parameters = text.substring(methodStart + 1, methodEnd);\n    let classifier = text.substring(methodEnd + 1, 1);\n    cssStyle = parseClassifier(classifier);\n\n    displayText = visibility + methodName + '(' + parseGenericTypes(parameters.trim()) + ')';\n\n    if (methodEnd < memberText.length) {\n      returnType = text.substring(methodEnd + 2).trim();\n      if (returnType !== '') {\n        returnType = ' : ' + parseGenericTypes(returnType);\n      }\n    }\n  } else {\n    // finally - if all else fails, just send the text back as written (other than parsing for generic types)\n    displayText = parseGenericTypes(text);\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\n/**\n * Adds a <tspan> for a member in a diagram\n *\n * @param {SVGElement} textEl The element to append to\n * @param {string} txt The member\n * @param {boolean} isFirst\n * @param {{ padding: string; textHeight: string }} conf The configuration for the member\n */\nconst addTspan = function (textEl, txt, isFirst, conf) {\n  let member = parseMember(txt);\n\n  const tSpan = textEl.append('tspan').attr('x', conf.padding).text(member.displayText);\n\n  if (member.cssStyle !== '') {\n    tSpan.attr('style', member.cssStyle);\n  }\n\n  if (!isFirst) {\n    tSpan.attr('dy', conf.textHeight);\n  }\n};\n\n/**\n * Makes generics in typescript syntax\n *\n * @example <caption>Array of array of strings in typescript syntax</caption>\n *   // returns \"Array<Array<string>>\"\n *   parseGenericTypes('Array~Array~string~~');\n *\n * @param {string} text The text to convert\n * @returns {string} The converted string\n */\nconst parseGenericTypes = function (text) {\n  let cleanedText = text;\n\n  if (text.indexOf('~') != -1) {\n    cleanedText = cleanedText.replace('~', '<');\n    cleanedText = cleanedText.replace('~', '>');\n\n    return parseGenericTypes(cleanedText);\n  } else {\n    return cleanedText;\n  }\n};\n\n/**\n * Gives the styles for a classifier\n *\n * @param {'+' | '-' | '#' | '~' | '*' | '$'} classifier The classifier string\n * @returns {string} Styling for the classifier\n */\nconst parseClassifier = function (classifier) {\n  switch (classifier) {\n    case '*':\n      return 'font-style:italic;';\n    case '$':\n      return 'text-decoration:underline;';\n    default:\n      return '';\n  }\n};\n\nexport default {\n  drawClass,\n  drawEdge,\n  parseMember,\n};\n","import DOMPurify from 'dompurify';\n\n/**\n * Gets the number of lines in a string\n *\n * @param {string | undefined} s The string to check the lines for\n * @returns {number} The number of lines in that string\n */\nexport const getRows = (s) => {\n  if (!s) return 1;\n  let str = breakToPlaceholder(s);\n  str = str.replace(/\\\\n/g, '#br#');\n  return str.split('#br#');\n};\n\nexport const removeEscapes = (text) => {\n  let newStr = text.replace(/\\\\u[\\dA-F]{4}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\u/g, ''), 16));\n  });\n\n  newStr = newStr.replace(/\\\\x([0-9a-f]{2})/gi, (_, c) => String.fromCharCode(parseInt(c, 16)));\n  newStr = newStr.replace(/\\\\[\\d\\d\\d]{3}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\/g, ''), 8));\n  });\n  newStr = newStr.replace(/\\\\[\\d\\d\\d]{2}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\/g, ''), 8));\n  });\n\n  return newStr;\n};\n\n/**\n * Removes script tags from a text\n *\n * @param {string} txt The text to sanitize\n * @returns {string} The safer text\n */\nexport const removeScript = (txt) => {\n  var rs = '';\n  var idx = 0;\n\n  while (idx >= 0) {\n    idx = txt.indexOf('<script');\n    if (idx >= 0) {\n      rs += txt.substr(0, idx);\n      txt = txt.substr(idx + 1);\n\n      idx = txt.indexOf('</script>');\n      if (idx >= 0) {\n        idx += 9;\n        txt = txt.substr(idx);\n      }\n    } else {\n      rs += txt;\n      idx = -1;\n      break;\n    }\n  }\n  let decodedText = removeEscapes(rs);\n  decodedText = decodedText.replace(/script>/gi, '#');\n  decodedText = decodedText.replace(/javascript:/gi, '#');\n  decodedText = decodedText.replace(/onerror=/gi, 'onerror:');\n  decodedText = decodedText.replace(/<iframe/gi, '');\n  return decodedText;\n};\n\nconst sanitizeMore = (text, config) => {\n  let txt = text;\n  let htmlLabels = true;\n  if (\n    config.flowchart &&\n    (config.flowchart.htmlLabels === false || config.flowchart.htmlLabels === 'false')\n  ) {\n    htmlLabels = false;\n  }\n\n  if (htmlLabels) {\n    const level = config.securityLevel;\n\n    if (level === 'antiscript' || level === 'strict') {\n      txt = removeScript(txt);\n    } else if (level !== 'loose') {\n      // eslint-disable-line\n      txt = breakToPlaceholder(txt);\n      txt = txt.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n      txt = txt.replace(/=/g, '&equals;');\n      txt = placeholderToBreak(txt);\n    }\n  }\n\n  return txt;\n};\n\nexport const sanitizeText = (text, config) => {\n  if (!text) return text;\n  const txt = DOMPurify.sanitize(sanitizeMore(text, config));\n  return txt;\n};\n\nexport const sanitizeTextOrArray = (a, config) => {\n  if (typeof a === 'string') return sanitizeText(a, config);\n\n  const f = (x) => sanitizeText(x, config);\n  return a.flat().map(f);\n};\n\nexport const lineBreakRegex = /<br\\s*\\/?>/gi;\n\n/**\n * Whether or not a text has any linebreaks\n *\n * @param {string} text The text to test\n * @returns {boolean} Whether or not the text has breaks\n */\nexport const hasBreaks = (text) => {\n  return lineBreakRegex.test(text);\n};\n\n/**\n * Splits on <br> tags\n *\n * @param {string} text Text to split\n * @returns {string[]} List of lines as strings\n */\nexport const splitBreaks = (text) => {\n  return text.split(lineBreakRegex);\n};\n\n/**\n * Converts placeholders to linebreaks in HTML\n *\n * @param {string} s HTML with placeholders\n * @returns {string} HTML with breaks instead of placeholders\n */\nconst placeholderToBreak = (s) => {\n  return s.replace(/#br#/g, '<br/>');\n};\n\n/**\n * Opposite of `placeholderToBreak`, converts breaks to placeholders\n *\n * @param {string} s HTML string\n * @returns {string} String with placeholders\n */\nconst breakToPlaceholder = (s) => {\n  return s.replace(lineBreakRegex, '#br#');\n};\n\n/**\n * Gets the current URL\n *\n * @param {boolean} useAbsolute Whether to return the absolute URL or not\n * @returns {string} The current URL\n */\nconst getUrl = (useAbsolute) => {\n  let url = '';\n  if (useAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  return url;\n};\n\n/**\n * Converts a string/boolean into a boolean\n *\n * @param {string | boolean} val String or boolean to convert\n * @returns {boolean} The result from the input\n */\nexport const evaluate = (val) => (val === 'false' || val === false ? false : true);\n\nexport default {\n  getRows,\n  sanitizeText,\n  sanitizeTextOrArray,\n  hasBreaks,\n  splitBreaks,\n  lineBreakRegex,\n  removeScript,\n  getUrl,\n  evaluate,\n  removeEscapes,\n};\n","import { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\n\nlet entities = {};\nlet relationships = [];\nlet title = '';\n\nconst Cardinality = {\n  ZERO_OR_ONE: 'ZERO_OR_ONE',\n  ZERO_OR_MORE: 'ZERO_OR_MORE',\n  ONE_OR_MORE: 'ONE_OR_MORE',\n  ONLY_ONE: 'ONLY_ONE',\n};\n\nconst Identification = {\n  NON_IDENTIFYING: 'NON_IDENTIFYING',\n  IDENTIFYING: 'IDENTIFYING',\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addEntity = function (name) {\n  if (typeof entities[name] === 'undefined') {\n    entities[name] = { attributes: [] };\n    log.info('Added new entity :', name);\n  }\n\n  return entities[name];\n};\n\nconst getEntities = () => entities;\n\nconst addAttributes = function (entityName, attribs) {\n  let entity = addEntity(entityName); // May do nothing (if entity has already been added)\n\n  // Process attribs in reverse order due to effect of recursive construction (last attribute is first)\n  let i;\n  for (i = attribs.length - 1; i >= 0; i--) {\n    entity.attributes.push(attribs[i]);\n    log.debug('Added attribute ', attribs[i].attributeName);\n  }\n};\n\n/**\n * Add a relationship\n *\n * @param entA The first entity in the relationship\n * @param rolA The role played by the first entity in relation to the second\n * @param entB The second entity in the relationship\n * @param rSpec The details of the relationship between the two entities\n */\nconst addRelationship = function (entA, rolA, entB, rSpec) {\n  let rel = {\n    entityA: entA,\n    roleA: rolA,\n    entityB: entB,\n    relSpec: rSpec,\n  };\n\n  relationships.push(rel);\n  log.debug('Added new relationship :', rel);\n};\n\nconst getRelationships = () => relationships;\n\n// Keep this - TODO: revisit...allow the diagram to have a title\nconst setTitle = function (txt) {\n  title = txt;\n};\n\nconst getTitle = function () {\n  return title;\n};\n\nconst clear = function () {\n  entities = {};\n  relationships = [];\n  title = '';\n};\n\nexport default {\n  Cardinality,\n  Identification,\n  parseDirective,\n  getConfig: () => configApi.getConfig().er,\n  addEntity,\n  addAttributes,\n  getEntities,\n  addRelationship,\n  getRelationships,\n  clear,\n  setTitle,\n  getTitle,\n};\n","const ERMarkers = {\n  ONLY_ONE_START: 'ONLY_ONE_START',\n  ONLY_ONE_END: 'ONLY_ONE_END',\n  ZERO_OR_ONE_START: 'ZERO_OR_ONE_START',\n  ZERO_OR_ONE_END: 'ZERO_OR_ONE_END',\n  ONE_OR_MORE_START: 'ONE_OR_MORE_START',\n  ONE_OR_MORE_END: 'ONE_OR_MORE_END',\n  ZERO_OR_MORE_START: 'ZERO_OR_MORE_START',\n  ZERO_OR_MORE_END: 'ZERO_OR_MORE_END',\n};\n\n/**\n * Put the markers into the svg DOM for later use with edge paths\n *\n * @param elem\n * @param conf\n */\nconst insertMarkers = function (elem, conf) {\n  let marker;\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONLY_ONE_START)\n    .attr('refX', 0)\n    .attr('refY', 9)\n    .attr('markerWidth', 18)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M9,0 L9,18 M15,0 L15,18');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONLY_ONE_END)\n    .attr('refX', 18)\n    .attr('refY', 9)\n    .attr('markerWidth', 18)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M3,0 L3,18 M9,0 L9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_ONE_START)\n    .attr('refX', 0)\n    .attr('refY', 9)\n    .attr('markerWidth', 30)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 21)\n    .attr('cy', 9)\n    .attr('r', 6);\n  marker.append('path').attr('stroke', conf.stroke).attr('fill', 'none').attr('d', 'M9,0 L9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_ONE_END)\n    .attr('refX', 30)\n    .attr('refY', 9)\n    .attr('markerWidth', 30)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 9)\n    .attr('cy', 9)\n    .attr('r', 6);\n  marker.append('path').attr('stroke', conf.stroke).attr('fill', 'none').attr('d', 'M21,0 L21,18');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONE_OR_MORE_START)\n    .attr('refX', 18)\n    .attr('refY', 18)\n    .attr('markerWidth', 45)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONE_OR_MORE_END)\n    .attr('refX', 27)\n    .attr('refY', 18)\n    .attr('markerWidth', 45)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_MORE_START)\n    .attr('refX', 18)\n    .attr('refY', 18)\n    .attr('markerWidth', 57)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 48)\n    .attr('cy', 18)\n    .attr('r', 6);\n  marker\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M0,18 Q18,0 36,18 Q18,36 0,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_MORE_END)\n    .attr('refX', 39)\n    .attr('refY', 18)\n    .attr('markerWidth', 57)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 9)\n    .attr('cy', 18)\n    .attr('r', 6);\n  marker\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M21,18 Q39,0 57,18 Q39,36 21,18');\n\n  return;\n};\n\nexport default {\n  ERMarkers,\n  insertMarkers,\n};\n","import graphlib from 'graphlib';\nimport { line, curveBasis, select } from 'd3';\nimport erDb from './erDb';\nimport erParser from './parser/erDiagram';\nimport dagre from 'dagre';\nimport { getConfig } from '../../config';\nimport { log } from '../../logger';\nimport erMarkers from './erMarkers';\nimport { configureSvgSize } from '../../utils';\n\nconst conf = {};\n\n/**\n * Allows the top-level API module to inject config specific to this renderer, storing it in the\n * local conf object. Note that generic config still needs to be retrieved using getConfig()\n * imported from the config module\n *\n * @param cnf\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Draw attributes for an entity\n *\n * @param groupNode The svg group node for the entity\n * @param entityTextNode The svg node for the entity label text\n * @param attributes An array of attributes defined for the entity (each attribute has a type and a name)\n * @returns The bounding box of the entity, after attributes have been added\n */\nconst drawAttributes = (groupNode, entityTextNode, attributes) => {\n  const heightPadding = conf.entityPadding / 3; // Padding internal to attribute boxes\n  const widthPadding = conf.entityPadding / 3; // Ditto\n  const attrFontSize = conf.fontSize * 0.85;\n  const labelBBox = entityTextNode.node().getBBox();\n  const attributeNodes = []; // Intermediate storage for attribute nodes created so that we can do a second pass\n  let hasKeyType = false;\n  let hasComment = false;\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeyWidth = 0;\n  let maxCommentWidth = 0;\n  let cumulativeHeight = labelBBox.height + heightPadding * 2;\n  let attrNum = 1;\n\n  // Check to see if any of the attributes has a key or a comment\n  attributes.forEach((item) => {\n    if (item.attributeKeyType !== undefined) {\n      hasKeyType = true;\n    }\n\n    if (item.attributeComment !== undefined) {\n      hasComment = true;\n    }\n  });\n\n  attributes.forEach((item) => {\n    const attrPrefix = `${entityTextNode.node().id}-attr-${attrNum}`;\n    let nodeHeight = 0;\n\n    // Add a text node for the attribute type\n    const typeNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', `${attrPrefix}-type`)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'left')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n      )\n      .text(item.attributeType);\n\n    // Add a text node for the attribute name\n    const nameNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', `${attrPrefix}-name`)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'left')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n      )\n      .text(item.attributeName);\n\n    const attributeNode = {};\n    attributeNode.tn = typeNode;\n    attributeNode.nn = nameNode;\n\n    const typeBBox = typeNode.node().getBBox();\n    const nameBBox = nameNode.node().getBBox();\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width);\n    maxNameWidth = Math.max(maxNameWidth, nameBBox.width);\n\n    nodeHeight = Math.max(typeBBox.height, nameBBox.height);\n\n    if (hasKeyType) {\n      const keyTypeNode = groupNode\n        .append('text')\n        .attr('class', 'er entityLabel')\n        .attr('id', `${attrPrefix}-key`)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dominant-baseline', 'middle')\n        .attr('text-anchor', 'left')\n        .attr(\n          'style',\n          'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n        )\n        .text(item.attributeKeyType || '');\n\n      attributeNode.kn = keyTypeNode;\n      const keyTypeBBox = keyTypeNode.node().getBBox();\n      maxKeyWidth = Math.max(maxKeyWidth, keyTypeBBox.width);\n      nodeHeight = Math.max(nodeHeight, keyTypeBBox.height);\n    }\n\n    if (hasComment) {\n      const commentNode = groupNode\n        .append('text')\n        .attr('class', 'er entityLabel')\n        .attr('id', `${attrPrefix}-comment`)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dominant-baseline', 'middle')\n        .attr('text-anchor', 'left')\n        .attr(\n          'style',\n          'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n        )\n        .text(item.attributeComment || '');\n\n      attributeNode.cn = commentNode;\n      const commentNodeBBox = commentNode.node().getBBox();\n      maxCommentWidth = Math.max(maxCommentWidth, commentNodeBBox.width);\n      nodeHeight = Math.max(nodeHeight, commentNodeBBox.height);\n    }\n\n    attributeNode.height = nodeHeight;\n    // Keep a reference to the nodes so that we can iterate through them later\n    attributeNodes.push(attributeNode);\n    cumulativeHeight += nodeHeight + heightPadding * 2;\n    attrNum += 1;\n  });\n\n  let widthPaddingFactor = 4;\n  if (hasKeyType) {\n    widthPaddingFactor += 2;\n  }\n  if (hasComment) {\n    widthPaddingFactor += 2;\n  }\n\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeyWidth + maxCommentWidth;\n\n  // Calculate the new bounding box of the overall entity, now that attributes have been added\n  const bBox = {\n    width: Math.max(\n      conf.minEntityWidth,\n      Math.max(\n        labelBBox.width + conf.entityPadding * 2,\n        maxWidth + widthPadding * widthPaddingFactor\n      )\n    ),\n    height:\n      attributes.length > 0\n        ? cumulativeHeight\n        : Math.max(conf.minEntityHeight, labelBBox.height + conf.entityPadding * 2),\n  };\n\n  if (attributes.length > 0) {\n    // There might be some spare width for padding out attributes if the entity name is very long\n    const spareColumnWidth = Math.max(\n      0,\n      (bBox.width - maxWidth - widthPadding * widthPaddingFactor) / (widthPaddingFactor / 2)\n    );\n\n    // Position the entity label near the top of the entity bounding box\n    entityTextNode.attr(\n      'transform',\n      'translate(' + bBox.width / 2 + ',' + (heightPadding + labelBBox.height / 2) + ')'\n    );\n\n    // Add rectangular boxes for the attribute types/names\n    let heightOffset = labelBBox.height + heightPadding * 2; // Start at the bottom of the entity label\n    let attribStyle = 'attributeBoxOdd'; // We will flip the style on alternate rows to achieve a banded effect\n\n    attributeNodes.forEach((attributeNode) => {\n      // Calculate the alignment y co-ordinate for the type/name of the attribute\n      const alignY = heightOffset + heightPadding + attributeNode.height / 2;\n\n      // Position the type attribute\n      attributeNode.tn.attr('transform', 'translate(' + widthPadding + ',' + alignY + ')');\n\n      // TODO Handle spareWidth in attr('width')\n      // Insert a rectangle for the type\n      const typeRect = groupNode\n        .insert('rect', '#' + attributeNode.tn.node().id)\n        .attr('class', `er ${attribStyle}`)\n        .attr('fill', conf.fill)\n        .attr('fill-opacity', '100%')\n        .attr('stroke', conf.stroke)\n        .attr('x', 0)\n        .attr('y', heightOffset)\n        .attr('width', maxTypeWidth + widthPadding * 2 + spareColumnWidth)\n        .attr('height', attributeNode.height + heightPadding * 2);\n\n      const nameXOffset = parseFloat(typeRect.attr('x')) + parseFloat(typeRect.attr('width'));\n\n      // Position the name attribute\n      attributeNode.nn.attr(\n        'transform',\n        'translate(' + (nameXOffset + widthPadding) + ',' + alignY + ')'\n      );\n\n      // Insert a rectangle for the name\n      const nameRect = groupNode\n        .insert('rect', '#' + attributeNode.nn.node().id)\n        .attr('class', `er ${attribStyle}`)\n        .attr('fill', conf.fill)\n        .attr('fill-opacity', '100%')\n        .attr('stroke', conf.stroke)\n        .attr('x', nameXOffset)\n        .attr('y', heightOffset)\n        .attr('width', maxNameWidth + widthPadding * 2 + spareColumnWidth)\n        .attr('height', attributeNode.height + heightPadding * 2);\n\n      let keyTypeAndCommentXOffset =\n        parseFloat(nameRect.attr('x')) + parseFloat(nameRect.attr('width'));\n\n      if (hasKeyType) {\n        // Position the key type attribute\n        attributeNode.kn.attr(\n          'transform',\n          'translate(' + (keyTypeAndCommentXOffset + widthPadding) + ',' + alignY + ')'\n        );\n\n        // Insert a rectangle for the key type\n        const keyTypeRect = groupNode\n          .insert('rect', '#' + attributeNode.kn.node().id)\n          .attr('class', `er ${attribStyle}`)\n          .attr('fill', conf.fill)\n          .attr('fill-opacity', '100%')\n          .attr('stroke', conf.stroke)\n          .attr('x', keyTypeAndCommentXOffset)\n          .attr('y', heightOffset)\n          .attr('width', maxKeyWidth + widthPadding * 2 + spareColumnWidth)\n          .attr('height', attributeNode.height + heightPadding * 2);\n\n        keyTypeAndCommentXOffset =\n          parseFloat(keyTypeRect.attr('x')) + parseFloat(keyTypeRect.attr('width'));\n      }\n\n      if (hasComment) {\n        // Position the comment attribute\n        attributeNode.cn.attr(\n          'transform',\n          'translate(' + (keyTypeAndCommentXOffset + widthPadding) + ',' + alignY + ')'\n        );\n\n        // Insert a rectangle for the comment\n        groupNode\n          .insert('rect', '#' + attributeNode.cn.node().id)\n          .attr('class', `er ${attribStyle}`)\n          .attr('fill', conf.fill)\n          .attr('fill-opacity', '100%')\n          .attr('stroke', conf.stroke)\n          .attr('x', keyTypeAndCommentXOffset)\n          .attr('y', heightOffset)\n          .attr('width', maxCommentWidth + widthPadding * 2 + spareColumnWidth)\n          .attr('height', attributeNode.height + heightPadding * 2);\n      }\n\n      // Increment the height offset to move to the next row\n      heightOffset += attributeNode.height + heightPadding * 2;\n\n      // Flip the attribute style for row banding\n      attribStyle = attribStyle == 'attributeBoxOdd' ? 'attributeBoxEven' : 'attributeBoxOdd';\n    });\n  } else {\n    // Ensure the entity box is a decent size without any attributes\n    bBox.height = Math.max(conf.minEntityHeight, cumulativeHeight);\n\n    // Position the entity label in the middle of the box\n    entityTextNode.attr('transform', 'translate(' + bBox.width / 2 + ',' + bBox.height / 2 + ')');\n  }\n\n  return bBox;\n};\n\n/**\n * Use D3 to construct the svg elements for the entities\n *\n * @param svgNode The svg node that contains the diagram\n * @param entities The entities to be drawn\n * @param graph The graph that contains the vertex and edge definitions post-layout\n * @returns The first entity that was inserted\n */\nconst drawEntities = function (svgNode, entities, graph) {\n  const keys = Object.keys(entities);\n  let firstOne;\n\n  keys.forEach(function (id) {\n    // Create a group for each entity\n    const groupNode = svgNode.append('g').attr('id', id);\n\n    firstOne = firstOne === undefined ? id : firstOne;\n\n    // Label the entity - this is done first so that we can get the bounding box\n    // which then determines the size of the rectangle\n    const textId = 'entity-' + id;\n    const textNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', textId)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'middle')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n      )\n      .text(id);\n\n    const { width: entityWidth, height: entityHeight } = drawAttributes(\n      groupNode,\n      textNode,\n      entities[id].attributes\n    );\n\n    // Draw the rectangle - insert it before the text so that the text is not obscured\n    const rectNode = groupNode\n      .insert('rect', '#' + textId)\n      .attr('class', 'er entityBox')\n      .attr('fill', conf.fill)\n      .attr('fill-opacity', '100%')\n      .attr('stroke', conf.stroke)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', entityWidth)\n      .attr('height', entityHeight);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(id, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: id,\n    });\n  });\n  return firstOne;\n}; // drawEntities\n\nconst adjustEntities = function (svgNode, graph) {\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      svgNode\n        .select('#' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y - graph.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n  return;\n};\n\nconst getEdgeName = function (rel) {\n  return (rel.entityA + rel.roleA + rel.entityB).replace(/\\s/g, '');\n};\n\n/**\n * Add each relationship to the graph\n *\n * @param relationships The relationships to be added\n * @param g The graph\n * @returns {Array} The array of relationships\n */\nconst addRelationships = function (relationships, g) {\n  relationships.forEach(function (r) {\n    g.setEdge(r.entityA, r.entityB, { relationship: r }, getEdgeName(r));\n  });\n  return relationships;\n}; // addRelationships\n\nlet relCnt = 0;\n/**\n * Draw a relationship using edge information from the graph\n *\n * @param svg The svg node\n * @param rel The relationship to draw in the svg\n * @param g The graph containing the edge information\n * @param insert The insertion point in the svg DOM (because relationships have markers that need to\n *   sit 'behind' opaque entity boxes)\n */\nconst drawRelationshipFromLayout = function (svg, rel, g, insert) {\n  relCnt++;\n\n  // Find the edge relating to this relationship\n  const edge = g.edge(rel.entityA, rel.entityB, getEdgeName(rel));\n\n  // Get a function that will generate the line path\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  // Insert the line at the right place\n  const svgPath = svg\n    .insert('path', '#' + insert)\n    .attr('class', 'er relationshipLine')\n    .attr('d', lineFunction(edge.points))\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none');\n\n  // ...and with dashes if necessary\n  if (rel.relSpec.relType === erDb.Identification.NON_IDENTIFYING) {\n    svgPath.attr('stroke-dasharray', '8,8');\n  }\n\n  // TODO: Understand this better\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  // Decide which start and end markers it needs. It may be possible to be more concise here\n  // by reversing a start marker to make an end marker...but this will do for now\n\n  // Note that the 'A' entity's marker is at the end of the relationship and the 'B' entity's marker is at the start\n  switch (rel.relSpec.cardA) {\n    case erDb.Cardinality.ZERO_OR_ONE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_ONE_END + ')');\n      break;\n    case erDb.Cardinality.ZERO_OR_MORE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_MORE_END + ')');\n      break;\n    case erDb.Cardinality.ONE_OR_MORE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ONE_OR_MORE_END + ')');\n      break;\n    case erDb.Cardinality.ONLY_ONE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ONLY_ONE_END + ')');\n      break;\n  }\n\n  switch (rel.relSpec.cardB) {\n    case erDb.Cardinality.ZERO_OR_ONE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_ONE_START + ')'\n      );\n      break;\n    case erDb.Cardinality.ZERO_OR_MORE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_MORE_START + ')'\n      );\n      break;\n    case erDb.Cardinality.ONE_OR_MORE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ONE_OR_MORE_START + ')'\n      );\n      break;\n    case erDb.Cardinality.ONLY_ONE:\n      svgPath.attr('marker-start', 'url(' + url + '#' + erMarkers.ERMarkers.ONLY_ONE_START + ')');\n      break;\n  }\n\n  // Now label the relationship\n\n  // Find the half-way point\n  const len = svgPath.node().getTotalLength();\n  const labelPoint = svgPath.node().getPointAtLength(len * 0.5);\n\n  // Append a text node containing the label\n  const labelId = 'rel' + relCnt;\n\n  const labelNode = svg\n    .append('text')\n    .attr('class', 'er relationshipLabel')\n    .attr('id', labelId)\n    .attr('x', labelPoint.x)\n    .attr('y', labelPoint.y)\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'middle')\n    .attr(\n      'style',\n      'font-family: ' + getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n    )\n    .text(rel.roleA);\n\n  // Figure out how big the opaque 'container' rectangle needs to be\n  const labelBBox = labelNode.node().getBBox();\n\n  // Insert the opaque rectangle before the text label\n  svg\n    .insert('rect', '#' + labelId)\n    .attr('class', 'er relationshipLabelBox')\n    .attr('x', labelPoint.x - labelBBox.width / 2)\n    .attr('y', labelPoint.y - labelBBox.height / 2)\n    .attr('width', labelBBox.width)\n    .attr('height', labelBBox.height)\n    .attr('fill', 'white')\n    .attr('fill-opacity', '85%');\n\n  return;\n};\n\n/**\n * Draw en E-R diagram in the tag with id: id based on the text definition of the diagram\n *\n * @param text The text of the diagram\n * @param id The unique id of the DOM node that contains the diagram\n */\nexport const draw = function (text, id) {\n  log.info('Drawing ER diagram');\n  erDb.clear();\n  const parser = erParser.parser;\n  parser.yy = erDb;\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Parse the text to populate erDb\n  try {\n    parser.parse(text);\n  } catch (err) {\n    log.debug('Parsing failed');\n  }\n\n  // Get a reference to the svg node that contains the text\n  const svg = root.select(`[id='${id}']`);\n\n  // Add cardinality marker definitions to the svg\n  erMarkers.insertMarkers(svg, conf);\n\n  // Now we have to construct the diagram in a specific way:\n  // ---\n  // 1. Create all the entities in the svg node at 0,0, but with the correct dimensions (allowing for text content)\n  // 2. Make sure they are all added to the graph\n  // 3. Add all the edges (relationships) to the graph aswell\n  // 4. Let dagre do its magic to layout the graph.  This assigns:\n  //    - the centre co-ordinates for each node, bearing in mind the dimensions and edge relationships\n  //    - the path co-ordinates for each edge\n  //    But it has no impact on the svg child nodes - the diagram remains with every entity rooted at 0,0\n  // 5. Now assign a transform to each entity in the svg node so that it gets drawn in the correct place, as determined by\n  //    its centre point, which is obtained from the graph, and it's width and height\n  // 6. And finally, create all the edges in the svg node using information from the graph\n  // ---\n\n  // Create the graph\n  let g;\n\n  // TODO: Explore directed vs undirected graphs, and how the layout is affected\n  // An E-R diagram could be said to be undirected, but there is merit in setting\n  // the direction from parent to child in a one-to-many as this influences graphlib to\n  // put the parent above the child (does it?), which is intuitive.  Most relationships\n  // in ER diagrams are one-to-many.\n  g = new graphlib.Graph({\n    multigraph: true,\n    directed: true,\n    compound: false,\n  })\n    .setGraph({\n      rankdir: conf.layoutDirection,\n      marginx: 20,\n      marginy: 20,\n      nodesep: 100,\n      edgesep: 100,\n      ranksep: 100,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  // Draw the entities (at 0,0), returning the first svg node that got\n  // inserted - this represents the insertion point for relationship paths\n  const firstEntity = drawEntities(svg, erDb.getEntities(), g);\n\n  // TODO: externalise the addition of entities to the graph - it's a bit 'buried' in the above\n\n  // Add all the relationships to the graph\n  const relationships = addRelationships(erDb.getRelationships(), g);\n\n  dagre.layout(g); // Node and edge positions will be updated\n\n  // Adjust the positions of the entities so that they adhere to the layout\n  adjustEntities(svg, g);\n\n  // Draw the relationships\n  relationships.forEach(function (rel) {\n    drawRelationshipFromLayout(svg, rel, g, firstEntity);\n  });\n\n  const padding = conf.diagramPadding;\n\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`);\n}; // draw\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .entityBox {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: #ffffff;\n    stroke: ${options.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill: #f2f2f2;\n    stroke: ${options.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${options.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${options.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${options.lineColor};\n    }\n`;\n\nexport default getStyles;\n","import dagreD3 from 'dagre-d3';\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction question(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const s = (w + h) * 0.9;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, s, s, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction hexagon(parent, bbox, node) {\n  const f = 4;\n  const h = bbox.height;\n  const m = h / f;\n  const w = bbox.width + 2 * m;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction rect_left_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: -h / 2, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: -h / 2, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction lean_right(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction lean_left(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (2 * h) / 6, y: 0 },\n    { x: w + h / 6, y: 0 },\n    { x: w - (2 * h) / 6, y: -h },\n    { x: -h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction inv_trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: h / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: (-2 * h) / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction rect_right_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + h / 2, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w + h / 2, y: -h },\n    { x: 0, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction stadium(parent, bbox, node) {\n  const h = bbox.height;\n  const w = bbox.width + h / 4;\n\n  const shapeSvg = parent\n    .insert('rect', ':first-child')\n    .attr('rx', h / 2)\n    .attr('ry', h / 2)\n    .attr('x', -w / 2)\n    .attr('y', -h / 2)\n    .attr('width', w)\n    .attr('height', h);\n\n  node.intersect = function (point) {\n    return dagreD3.intersect.rect(node, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction subroutine(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction cylinder(parent, bbox, node) {\n  const w = bbox.width;\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = bbox.height + ry;\n\n  const shape =\n    'M 0,' +\n    ry +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    -w +\n    ' 0 l 0,' +\n    h +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 l 0,' +\n    -h;\n\n  const shapeSvg = parent\n    .attr('label-offset-y', ry)\n    .insert('path', ':first-child')\n    .attr('d', shape)\n    .attr('transform', 'translate(' + -w / 2 + ',' + -(h / 2 + ry) + ')');\n\n  node.intersect = function (point) {\n    const pos = dagreD3.intersect.rect(node, point);\n    const x = pos.x - node.x;\n\n    if (\n      rx != 0 &&\n      (Math.abs(x) < node.width / 2 ||\n        (Math.abs(x) == node.width / 2 && Math.abs(pos.y - node.y) > node.height / 2 - ry))\n    ) {\n      // ellipsis equation: x*x / a*a + y*y / b*b = 1\n      // solve for y to get adjustion value for pos.y\n      let y = ry * ry * (1 - (x * x) / (rx * rx));\n      if (y != 0) y = Math.sqrt(y);\n      y = ry - y;\n      if (point.y - node.y > 0) y = -y;\n\n      pos.y += y;\n    }\n\n    return pos;\n  };\n\n  return shapeSvg;\n}\n\n/** @param render */\nexport function addToRender(render) {\n  render.shapes().question = question;\n  render.shapes().hexagon = hexagon;\n  render.shapes().stadium = stadium;\n  render.shapes().subroutine = subroutine;\n  render.shapes().cylinder = cylinder;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().rect_left_inv_arrow = rect_left_inv_arrow;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_right = lean_right;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_left = lean_left;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().trapezoid = trapezoid;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().inv_trapezoid = inv_trapezoid;\n\n  // Add custom shape for box with inverted arrow on right side\n  render.shapes().rect_right_inv_arrow = rect_right_inv_arrow;\n}\n\n/** @param addShape */\nexport function addToRenderV2(addShape) {\n  addShape({ question });\n  addShape({ hexagon });\n  addShape({ stadium });\n  addShape({ subroutine });\n  addShape({ cylinder });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ rect_left_inv_arrow });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ lean_right });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ lean_left });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ trapezoid });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ inv_trapezoid });\n\n  // Add custom shape for box with inverted arrow on right side\n  addShape({ rect_right_inv_arrow });\n}\n\n/**\n * @param parent\n * @param w\n * @param h\n * @param points\n */\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent\n    .insert('polygon', ':first-child')\n    .attr(\n      'points',\n      points\n        .map(function (d) {\n          return d.x + ',' + d.y;\n        })\n        .join(' ')\n    )\n    .attr('transform', 'translate(' + -w / 2 + ',' + h / 2 + ')');\n}\n\nexport default {\n  addToRender,\n  addToRenderV2,\n};\n","import { select } from 'd3';\nimport utils from '../../utils';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport mermaidAPI from '../../mermaidAPI';\nimport { log } from '../../logger';\n\nconst MERMAID_DOM_ID_PREFIX = 'flowchart-';\nlet vertexCounter = 0;\nlet config = configApi.getConfig();\nlet vertices = {};\nlet edges = [];\nlet classes = [];\nlet subGraphs = [];\nlet subGraphLookup = {};\nlet tooltips = {};\nlet subCount = 0;\nlet firstGraphFlag = true;\nlet direction;\n\nlet version; // As in graph\n\n// Functions to be run after graph rendering\nlet funs = [];\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\n/**\n * Function to lookup domId from id in the graph definition.\n *\n * @param id\n * @public\n */\nexport const lookUpDomId = function (id) {\n  const veritceKeys = Object.keys(vertices);\n  for (let i = 0; i < veritceKeys.length; i++) {\n    if (vertices[veritceKeys[i]].id === id) {\n      return vertices[veritceKeys[i]].domId;\n    }\n  }\n  return id;\n};\n\n/**\n * Function called by parser when a node definition has been found\n *\n * @param _id\n * @param text\n * @param type\n * @param style\n * @param classes\n * @param dir\n * @param props\n */\nexport const addVertex = function (_id, text, type, style, classes, dir, props = {}) {\n  let txt;\n  let id = _id;\n  if (typeof id === 'undefined') {\n    return;\n  }\n  if (id.trim().length === 0) {\n    return;\n  }\n\n  // if (id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n\n  if (typeof vertices[id] === 'undefined') {\n    vertices[id] = {\n      id: id,\n      domId: MERMAID_DOM_ID_PREFIX + id + '-' + vertexCounter,\n      styles: [],\n      classes: [],\n    };\n  }\n  vertexCounter++;\n  if (typeof text !== 'undefined') {\n    config = configApi.getConfig();\n    txt = common.sanitizeText(text.trim(), config);\n\n    // strip quotes if string starts and ends with a quote\n    if (txt[0] === '\"' && txt[txt.length - 1] === '\"') {\n      txt = txt.substring(1, txt.length - 1);\n    }\n\n    vertices[id].text = txt;\n  } else {\n    if (typeof vertices[id].text === 'undefined') {\n      vertices[id].text = _id;\n    }\n  }\n  if (typeof type !== 'undefined') {\n    vertices[id].type = type;\n  }\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function (s) {\n        vertices[id].styles.push(s);\n      });\n    }\n  }\n  if (typeof classes !== 'undefined') {\n    if (classes !== null) {\n      classes.forEach(function (s) {\n        vertices[id].classes.push(s);\n      });\n    }\n  }\n  if (typeof dir !== 'undefined') {\n    vertices[id].dir = dir;\n  }\n  vertices[id].props = props;\n};\n\n/**\n * Function called by parser when a link/edge definition has been found\n *\n * @param _start\n * @param _end\n * @param type\n * @param linktext\n */\nexport const addSingleLink = function (_start, _end, type, linktext) {\n  let start = _start;\n  let end = _end;\n  // if (start[0].match(/\\d/)) start = MERMAID_DOM_ID_PREFIX + start;\n  // if (end[0].match(/\\d/)) end = MERMAID_DOM_ID_PREFIX + end;\n  // log.info('Got edge...', start, end);\n\n  const edge = { start: start, end: end, type: undefined, text: '' };\n  linktext = type.text;\n\n  if (typeof linktext !== 'undefined') {\n    edge.text = common.sanitizeText(linktext.trim(), config);\n\n    // strip quotes if string starts and exnds with a quote\n    if (edge.text[0] === '\"' && edge.text[edge.text.length - 1] === '\"') {\n      edge.text = edge.text.substring(1, edge.text.length - 1);\n    }\n  }\n\n  if (typeof type !== 'undefined') {\n    edge.type = type.type;\n    edge.stroke = type.stroke;\n    edge.length = type.length;\n  }\n  edges.push(edge);\n};\nexport const addLink = function (_start, _end, type, linktext) {\n  let i, j;\n  for (i = 0; i < _start.length; i++) {\n    for (j = 0; j < _end.length; j++) {\n      addSingleLink(_start[i], _end[j], type, linktext);\n    }\n  }\n};\n\n/**\n * Updates a link's line interpolation algorithm\n *\n * @param positions\n * @param interp\n */\nexport const updateLinkInterpolate = function (positions, interp) {\n  positions.forEach(function (pos) {\n    if (pos === 'default') {\n      edges.defaultInterpolate = interp;\n    } else {\n      edges[pos].interpolate = interp;\n    }\n  });\n};\n\n/**\n * Updates a link with a style\n *\n * @param positions\n * @param style\n */\nexport const updateLink = function (positions, style) {\n  positions.forEach(function (pos) {\n    if (pos === 'default') {\n      edges.defaultStyle = style;\n    } else {\n      if (utils.isSubstringInArray('fill', style) === -1) {\n        style.push('fill:none');\n      }\n      edges[pos].style = style;\n    }\n  });\n};\n\nexport const addClass = function (id, style) {\n  if (typeof classes[id] === 'undefined') {\n    classes[id] = { id: id, styles: [], textStyles: [] };\n  }\n\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function (s) {\n        if (s.match('color')) {\n          const newStyle1 = s.replace('fill', 'bgFill');\n          const newStyle2 = newStyle1.replace('color', 'fill');\n          classes[id].textStyles.push(newStyle2);\n        }\n        classes[id].styles.push(s);\n      });\n    }\n  }\n};\n\n/**\n * Called by parser when a graph definition is found, stores the direction of the chart.\n *\n * @param dir\n */\nexport const setDirection = function (dir) {\n  direction = dir;\n  if (direction.match(/.*</)) {\n    direction = 'RL';\n  }\n  if (direction.match(/.*\\^/)) {\n    direction = 'BT';\n  }\n  if (direction.match(/.*>/)) {\n    direction = 'LR';\n  }\n  if (direction.match(/.*v/)) {\n    direction = 'TB';\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function (ids, className) {\n  ids.split(',').forEach(function (_id) {\n    // let id = version === 'gen-2' ? lookUpDomId(_id) : _id;\n    let id = _id;\n    // if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].classes.push(className);\n    }\n\n    if (typeof subGraphLookup[id] !== 'undefined') {\n      subGraphLookup[id].classes.push(className);\n    }\n  });\n};\n\nconst setTooltip = function (ids, tooltip) {\n  ids.split(',').forEach(function (id) {\n    if (typeof tooltip !== 'undefined') {\n      tooltips[version === 'gen-1' ? lookUpDomId(id) : id] = common.sanitizeText(tooltip, config);\n    }\n  });\n};\n\nconst setClickFun = function (id, functionName, functionArgs) {\n  let domId = lookUpDomId(id);\n  // if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  let argList = [];\n  if (typeof functionArgs === 'string') {\n    /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n    argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n    for (let i = 0; i < argList.length; i++) {\n      let item = argList[i].trim();\n      /* Removes all double quotes at the start and end of an argument */\n      /* This preserves all starting and ending whitespace inside */\n      if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n        item = item.substr(1, item.length - 2);\n      }\n      argList[i] = item;\n    }\n  }\n\n  /* if no arguments passed into callback, default to passing in id */\n  if (argList.length === 0) {\n    argList.push(id);\n  }\n\n  if (typeof vertices[id] !== 'undefined') {\n    vertices[id].haveCallback = true;\n    funs.push(function () {\n      const elem = document.querySelector(`[id=\"${domId}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function () {\n            utils.runFunc(functionName, ...argList);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param target\n */\nexport const setLink = function (ids, linkStr, target) {\n  ids.split(',').forEach(function (id) {\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].link = utils.formatUrl(linkStr, config);\n      vertices[id].linkTarget = target;\n    }\n  });\n  setClass(ids, 'clickable');\n};\nexport const getTooltip = function (id) {\n  return tooltips[id];\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFun(id, functionName, functionArgs);\n  });\n  setClass(ids, 'clickable');\n};\n\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\nexport const getDirection = function () {\n  return direction.trim();\n};\n/**\n * Retrieval function for fetching the found nodes after parsing has completed.\n *\n * @returns {{} | any | vertices}\n */\nexport const getVertices = function () {\n  return vertices;\n};\n\n/**\n * Retrieval function for fetching the found links after parsing has completed.\n *\n * @returns {{} | any | edges}\n */\nexport const getEdges = function () {\n  return edges;\n};\n\n/**\n * Retrieval function for fetching the found class definitions after parsing has completed.\n *\n * @returns {{} | any | classes}\n */\nexport const getClasses = function () {\n  return classes;\n};\n\nconst setupToolTips = function (element) {\n  let tooltipElem = select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = select('body').append('div').attr('class', 'mermaidTooltip').style('opacity', 0);\n  }\n\n  const svg = select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function () {\n      const el = select(this);\n      const title = el.attr('title');\n\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem.transition().duration(200).style('opacity', '.9');\n      tooltipElem\n        .html(el.attr('title'))\n        .style('left', window.scrollX + rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', window.scrollY + rect.top - 14 + document.body.scrollTop + 'px');\n      el.classed('hover', true);\n    })\n    .on('mouseout', function () {\n      tooltipElem.transition().duration(500).style('opacity', 0);\n      const el = select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n *\n * @param ver\n */\nexport const clear = function (ver) {\n  vertices = {};\n  classes = {};\n  edges = [];\n  funs = [];\n  funs.push(setupToolTips);\n  subGraphs = [];\n  subGraphLookup = {};\n  subCount = 0;\n  tooltips = [];\n  firstGraphFlag = true;\n  version = ver || 'gen-1';\n};\nexport const setGen = (ver) => {\n  version = ver || 'gen-1';\n};\n/** @returns {string} */\nexport const defaultStyle = function () {\n  return 'fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;';\n};\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n *\n * @param _id\n * @param list\n * @param _title\n */\nexport const addSubGraph = function (_id, list, _title) {\n  // console.log('addSubGraph', _id, list, _title);\n  let id = _id.trim();\n  let title = _title;\n  if (_id === _title && _title.match(/\\s/)) {\n    id = undefined;\n  }\n  /** @param a */\n  function uniq(a) {\n    const prims = { boolean: {}, number: {}, string: {} };\n    const objs = [];\n\n    let dir; //  = unbdefined; direction.trim();\n    const nodeList = a.filter(function (item) {\n      const type = typeof item;\n      if (item.stmt && item.stmt === 'dir') {\n        dir = item.value;\n        return false;\n      }\n      if (item.trim() === '') {\n        return false;\n      }\n      if (type in prims) {\n        return prims[type].hasOwnProperty(item) ? false : (prims[type][item] = true); // eslint-disable-line\n      } else {\n        return objs.indexOf(item) >= 0 ? false : objs.push(item);\n      }\n    });\n    return { nodeList, dir };\n  }\n\n  let nodeList = [];\n\n  const { nodeList: nl, dir } = uniq(nodeList.concat.apply(nodeList, list));\n  nodeList = nl;\n  if (version === 'gen-1') {\n    log.warn('LOOKING UP');\n    for (let i = 0; i < nodeList.length; i++) {\n      nodeList[i] = lookUpDomId(nodeList[i]);\n    }\n  }\n\n  id = id || 'subGraph' + subCount;\n  // if (id[0].match(/\\d/)) id = lookUpDomId(id);\n  title = title || '';\n  title = common.sanitizeText(title, config);\n  subCount = subCount + 1;\n  const subGraph = { id: id, nodes: nodeList, title: title.trim(), classes: [], dir };\n\n  log.info('Adding', subGraph.id, subGraph.nodes, subGraph.dir);\n\n  /** Deletes an id from all subgraphs */\n  // const del = _id => {\n  //   subGraphs.forEach(sg => {\n  //     const pos = sg.nodes.indexOf(_id);\n  //     if (pos >= 0) {\n  //       sg.nodes.splice(pos, 1);\n  //     }\n  //   });\n  // };\n\n  // // Removes the members of this subgraph from any other subgraphs, a node only belong to one subgraph\n  // subGraph.nodes.forEach(_id => del(_id));\n\n  // Remove the members in the new subgraph if they already belong to another subgraph\n  subGraph.nodes = makeUniq(subGraph, subGraphs).nodes;\n  subGraphs.push(subGraph);\n  subGraphLookup[id] = subGraph;\n  return id;\n};\n\nconst getPosForId = function (id) {\n  for (let i = 0; i < subGraphs.length; i++) {\n    if (subGraphs[i].id === id) {\n      return i;\n    }\n  }\n  return -1;\n};\nlet secCount = -1;\nconst posCrossRef = [];\nconst indexNodes2 = function (id, pos) {\n  const nodes = subGraphs[pos].nodes;\n  secCount = secCount + 1;\n  if (secCount > 2000) {\n    return;\n  }\n  posCrossRef[secCount] = pos;\n  // Check if match\n  if (subGraphs[pos].id === id) {\n    return {\n      result: true,\n      count: 0,\n    };\n  }\n\n  let count = 0;\n  let posCount = 1;\n  while (count < nodes.length) {\n    const childPos = getPosForId(nodes[count]);\n    // Ignore regular nodes (pos will be -1)\n    if (childPos >= 0) {\n      const res = indexNodes2(id, childPos);\n      if (res.result) {\n        return {\n          result: true,\n          count: posCount + res.count,\n        };\n      } else {\n        posCount = posCount + res.count;\n      }\n    }\n    count = count + 1;\n  }\n\n  return {\n    result: false,\n    count: posCount,\n  };\n};\n\nexport const getDepthFirstPos = function (pos) {\n  return posCrossRef[pos];\n};\nexport const indexNodes = function () {\n  secCount = -1;\n  if (subGraphs.length > 0) {\n    indexNodes2('none', subGraphs.length - 1, 0);\n  }\n};\n\nexport const getSubGraphs = function () {\n  return subGraphs;\n};\n\nexport const firstGraph = () => {\n  if (firstGraphFlag) {\n    firstGraphFlag = false;\n    return true;\n  }\n  return false;\n};\n\nconst destructStartLink = (_str) => {\n  let str = _str.trim();\n  let type = 'arrow_open';\n\n  switch (str[0]) {\n    case '<':\n      type = 'arrow_point';\n      str = str.slice(1);\n      break;\n    case 'x':\n      type = 'arrow_cross';\n      str = str.slice(1);\n      break;\n    case 'o':\n      type = 'arrow_circle';\n      str = str.slice(1);\n      break;\n  }\n\n  let stroke = 'normal';\n\n  if (str.indexOf('=') !== -1) {\n    stroke = 'thick';\n  }\n\n  if (str.indexOf('.') !== -1) {\n    stroke = 'dotted';\n  }\n\n  return { type, stroke };\n};\n\nconst countChar = (char, str) => {\n  const length = str.length;\n  let count = 0;\n  for (let i = 0; i < length; ++i) {\n    if (str[i] === char) {\n      ++count;\n    }\n  }\n  return count;\n};\n\nconst destructEndLink = (_str) => {\n  const str = _str.trim();\n  let line = str.slice(0, -1);\n  let type = 'arrow_open';\n\n  switch (str.slice(-1)) {\n    case 'x':\n      type = 'arrow_cross';\n      if (str[0] === 'x') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n    case '>':\n      type = 'arrow_point';\n      if (str[0] === '<') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n    case 'o':\n      type = 'arrow_circle';\n      if (str[0] === 'o') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n  }\n\n  let stroke = 'normal';\n  let length = line.length - 1;\n\n  if (line[0] === '=') {\n    stroke = 'thick';\n  }\n\n  let dots = countChar('.', line);\n\n  if (dots) {\n    stroke = 'dotted';\n    length = dots;\n  }\n\n  return { type, stroke, length };\n};\n\nconst destructLink = (_str, _startStr) => {\n  const info = destructEndLink(_str);\n  let startInfo;\n  if (_startStr) {\n    startInfo = destructStartLink(_startStr);\n\n    if (startInfo.stroke !== info.stroke) {\n      return { type: 'INVALID', stroke: 'INVALID' };\n    }\n\n    if (startInfo.type === 'arrow_open') {\n      // -- xyz -->  - take arrow type from ending\n      startInfo.type = info.type;\n    } else {\n      // x-- xyz -->  - not supported\n      if (startInfo.type !== info.type) return { type: 'INVALID', stroke: 'INVALID' };\n\n      startInfo.type = 'double_' + startInfo.type;\n    }\n\n    if (startInfo.type === 'double_arrow') {\n      startInfo.type = 'double_arrow_point';\n    }\n\n    startInfo.length = info.length;\n    return startInfo;\n  }\n\n  return info;\n};\n\n// Todo optimizer this by caching existing nodes\nconst exists = (allSgs, _id) => {\n  let res = false;\n  allSgs.forEach((sg) => {\n    const pos = sg.nodes.indexOf(_id);\n    if (pos >= 0) {\n      res = true;\n    }\n  });\n  return res;\n};\n/**\n * Deletes an id from all subgraphs\n *\n * @param sg\n * @param allSubgraphs\n */\nconst makeUniq = (sg, allSubgraphs) => {\n  const res = [];\n  sg.nodes.forEach((_id, pos) => {\n    if (!exists(allSubgraphs, _id)) {\n      res.push(sg.nodes[pos]);\n    }\n  });\n  return { nodes: res };\n};\n\nexport default {\n  parseDirective,\n  defaultConfig: () => configApi.defaultConfig.flowchart,\n  addVertex,\n  lookUpDomId,\n  addLink,\n  updateLinkInterpolate,\n  updateLink,\n  addClass,\n  setDirection,\n  setClass,\n  setTooltip,\n  getTooltip,\n  setClickEvent,\n  setLink,\n  bindFunctions,\n  getDirection,\n  getVertices,\n  getEdges,\n  getClasses,\n  clear,\n  setGen,\n  defaultStyle,\n  addSubGraph,\n  getDepthFirstPos,\n  indexNodes,\n  getSubGraphs,\n  destructLink,\n  lex: {\n    firstGraph,\n  },\n  exists,\n  makeUniq,\n};\n","import graphlib from 'graphlib';\nimport { select, curveLinear, selectAll } from 'd3';\n\nimport flowDb from './flowDb';\nimport flow from './parser/flow';\nimport { getConfig } from '../../config';\n\nimport { render } from '../../dagre-wrapper/index.js';\nimport addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { log } from '../../logger';\nimport common, { evaluate } from '../common/common';\nimport { interpolateToCurve, getStylesFromArray, configureSvgSize } from '../../utils';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Function that adds the vertices found during parsing to the graph to be rendered.\n *\n * @param vert Object containing the vertices.\n * @param g The graph that is to be drawn.\n * @param svgId\n * @param root\n * @param doc\n */\nexport const addVertices = function (vert, g, svgId, root, doc) {\n  const svg = root.select(`[id=\"${svgId}\"]`);\n  const keys = Object.keys(vert);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = vert[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let classStr = 'default';\n    if (vertex.classes.length > 0) {\n      classStr = vertex.classes.join(' ');\n    }\n\n    const styles = getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    let vertexNode;\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n      const node = {\n        label: vertexText.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        ),\n      };\n      vertexNode = addHtmlLabel(svg, node).node();\n      vertexNode.parentNode.removeChild(vertexNode);\n    } else {\n      const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n      svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n      const rows = vertexText.split(common.lineBreakRegex);\n\n      for (let j = 0; j < rows.length; j++) {\n        const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n        tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        tspan.setAttribute('dy', '1em');\n        tspan.setAttribute('x', '1');\n        tspan.textContent = rows[j];\n        svgLabel.appendChild(tspan);\n      }\n      vertexNode = svgLabel;\n    }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'round':\n        radious = 5;\n        _shape = 'rect';\n        break;\n      case 'square':\n        _shape = 'rect';\n        break;\n      case 'diamond':\n        _shape = 'question';\n        break;\n      case 'hexagon':\n        _shape = 'hexagon';\n        break;\n      case 'odd':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'lean_right':\n        _shape = 'lean_right';\n        break;\n      case 'lean_left':\n        _shape = 'lean_left';\n        break;\n      case 'trapezoid':\n        _shape = 'trapezoid';\n        break;\n      case 'inv_trapezoid':\n        _shape = 'inv_trapezoid';\n        break;\n      case 'odd_right':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'circle':\n        _shape = 'circle';\n        break;\n      case 'ellipse':\n        _shape = 'ellipse';\n        break;\n      case 'stadium':\n        _shape = 'stadium';\n        break;\n      case 'subroutine':\n        _shape = 'subroutine';\n        break;\n      case 'cylinder':\n        _shape = 'cylinder';\n        break;\n      case 'group':\n        _shape = 'rect';\n        break;\n      default:\n        _shape = 'rect';\n    }\n    // Add the node\n    g.setNode(vertex.id, {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: vertex.id,\n      link: vertex.link,\n      linkTarget: vertex.linkTarget,\n      tooltip: flowDb.getTooltip(vertex.id) || '',\n      domId: flowDb.lookUpDomId(vertex.id),\n      haveCallback: vertex.haveCallback,\n      width: vertex.type === 'group' ? 500 : undefined,\n      dir: vertex.dir,\n      type: vertex.type,\n      props: vertex.props,\n      padding: getConfig().flowchart.padding,\n    });\n\n    log.info('setNode', {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: flowDb.lookUpDomId(vertex.id),\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      dir: vertex.dir,\n      props: vertex.props,\n      padding: getConfig().flowchart.padding,\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph defninition\n *\n * @param {object} edges The edges to add to the graph\n * @param {object} g The graph object\n */\nexport const addEdges = function (edges, g) {\n  log.info('abc78 edges = ', edges);\n  let cnt = 0;\n  let linkIdCnt = {};\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  if (typeof edges.defaultStyle !== 'undefined') {\n    const defaultStyles = getStylesFromArray(edges.defaultStyle);\n    defaultStyle = defaultStyles.style;\n    defaultLabelStyle = defaultStyles.labelStyle;\n  }\n\n  edges.forEach(function (edge) {\n    cnt++;\n\n    // Identify Link\n    var linkIdBase = 'L-' + edge.start + '-' + edge.end;\n    // count the links from+to the same node to give unique id\n    if (typeof linkIdCnt[linkIdBase] === 'undefined') {\n      linkIdCnt[linkIdBase] = 0;\n      log.info('abc78 new entry', linkIdBase, linkIdCnt[linkIdBase]);\n    } else {\n      linkIdCnt[linkIdBase]++;\n      log.info('abc78 new entry', linkIdBase, linkIdCnt[linkIdBase]);\n    }\n    let linkId = linkIdBase + '-' + linkIdCnt[linkIdBase];\n    log.info('abc78 new link id to be used is', linkIdBase, linkId, linkIdCnt[linkIdBase]);\n    var linkNameStart = 'LS-' + edge.start;\n    var linkNameEnd = 'LE-' + edge.end;\n\n    const edgeData = { style: '', labelStyle: '' };\n    edgeData.minlen = edge.length || 1;\n    //edgeData.id = 'id' + cnt;\n\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    // Check of arrow types, placed here in order not to break old rendering\n    edgeData.arrowTypeStart = 'arrow_open';\n    edgeData.arrowTypeEnd = 'arrow_open';\n\n    /* eslint-disable no-fallthrough */\n    switch (edge.type) {\n      case 'double_arrow_cross':\n        edgeData.arrowTypeStart = 'arrow_cross';\n      case 'arrow_cross':\n        edgeData.arrowTypeEnd = 'arrow_cross';\n        break;\n      case 'double_arrow_point':\n        edgeData.arrowTypeStart = 'arrow_point';\n      case 'arrow_point':\n        edgeData.arrowTypeEnd = 'arrow_point';\n        break;\n      case 'double_arrow_circle':\n        edgeData.arrowTypeStart = 'arrow_circle';\n      case 'arrow_circle':\n        edgeData.arrowTypeEnd = 'arrow_circle';\n        break;\n    }\n\n    let style = '';\n    let labelStyle = '';\n\n    switch (edge.stroke) {\n      case 'normal':\n        style = 'fill:none;';\n        if (typeof defaultStyle !== 'undefined') {\n          style = defaultStyle;\n        }\n        if (typeof defaultLabelStyle !== 'undefined') {\n          labelStyle = defaultLabelStyle;\n        }\n        edgeData.thickness = 'normal';\n        edgeData.pattern = 'solid';\n        break;\n      case 'dotted':\n        edgeData.thickness = 'normal';\n        edgeData.pattern = 'dotted';\n        edgeData.style = 'fill:none;stroke-width:2px;stroke-dasharray:3;';\n        break;\n      case 'thick':\n        edgeData.thickness = 'thick';\n        edgeData.pattern = 'solid';\n        edgeData.style = 'stroke-width: 3.5px;fill:none;';\n        break;\n    }\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    }\n\n    edgeData.style = edgeData.style += style;\n    edgeData.labelStyle = edgeData.labelStyle += labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof edges.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edges.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n    }\n    // if (evaluate(getConfig().flowchart.htmlLabels) && false) {\n    //   // eslint-disable-line\n    //   edgeData.labelType = 'html';\n    //   edgeData.label = `<span id=\"L-${linkId}\" class=\"edgeLabel L-${linkNameStart}' L-${linkNameEnd}\">${edge.text}</span>`;\n    // } else {\n    edgeData.labelType = 'text';\n    edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n    if (typeof edge.style === 'undefined') {\n      edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none;';\n    }\n\n    edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n    // }\n\n    edgeData.id = linkId;\n    edgeData.classes = 'flowchart-link ' + linkNameStart + ' ' + linkNameEnd;\n\n    // Add the edge to the graph\n    g.setEdge(edge.start, edge.end, edgeData, cnt);\n  });\n};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param text\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text) {\n  log.info('Extracting classes');\n  flowDb.clear();\n  const parser = flow.parser;\n  parser.yy = flowDb;\n\n  try {\n    // Parse the graph definition\n    parser.parse(text);\n  } catch (e) {\n    return;\n  }\n\n  return flowDb.getClasses();\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param text\n * @param id\n */\n\nexport const draw = function (text, id) {\n  log.info('Drawing flowchart');\n  flowDb.clear();\n  flowDb.setGen('gen-2');\n  const parser = flow.parser;\n  parser.yy = flowDb;\n\n  // Parse the graph definition\n  // try {\n  parser.parse(text);\n  // } catch (err) {\n  // log.debug('Parsing failed');\n  // }\n\n  // Fetch the default direction, use TD if none was found\n  let dir = flowDb.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'TD';\n  }\n\n  const conf = getConfig().flowchart;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: dir,\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let subG;\n  const subGraphs = flowDb.getSubGraphs();\n  log.info('Subgraphs - ', subGraphs);\n  for (let i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n    log.info('Subgraph - ', subG);\n    flowDb.addVertex(subG.id, subG.title, 'group', undefined, subG.classes, subG.dir);\n  }\n\n  // Fetch the verices/nodes and edges/links from the parsed graph definition\n  const vert = flowDb.getVertices();\n\n  const edges = flowDb.getEdges();\n\n  log.info(edges);\n  let i = 0;\n  for (i = subGraphs.length - 1; i >= 0; i--) {\n    // for (let i = 0; i < subGraphs.length; i++) {\n    subG = subGraphs[i];\n\n    selectAll('cluster').append('text');\n\n    for (let j = 0; j < subG.nodes.length; j++) {\n      log.info('Setting up subgraphs', subG.nodes[j], subG.id);\n      g.setParent(subG.nodes[j], subG.id);\n    }\n  }\n  addVertices(vert, g, id, root, doc);\n  addEdges(edges, g);\n\n  // Add custom shapes\n  // flowChartShapes.addToRenderV2(addShape);\n\n  // Set up an SVG group so that we can translate the final graph.\n  const svg = root.select(`[id=\"${id}\"]`);\n  svg.attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(element, g, ['point', 'circle', 'cross'], 'flowchart', id);\n\n  const padding = conf.diagramPadding;\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n  log.debug(\n    `new ViewBox 0 0 ${width} ${height}`,\n    `translate(${padding - g._label.marginx}, ${padding - g._label.marginy})`\n  );\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `0 0 ${width} ${height}`);\n  svg\n    .select('g')\n    .attr('transform', `translate(${padding - g._label.marginx}, ${padding - svgBounds.y})`);\n\n  // Index nodes\n  flowDb.indexNodes('subGraph' + i);\n\n  // Add label rects for non html labels\n  if (!conf.htmlLabels) {\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      // rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  // If node has a link, wrap it in an anchor SVG object.\n  const keys = Object.keys(vert);\n  keys.forEach(function (key) {\n    const vertex = vert[key];\n\n    if (vertex.link) {\n      const node = select('#' + id + ' [id=\"' + key + '\"]');\n      if (node) {\n        const link = doc.createElementNS('http://www.w3.org/2000/svg', 'a');\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n        if (securityLevel === 'sandbox') {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', '_top');\n        } else if (vertex.linkTarget) {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', vertex.linkTarget);\n        }\n\n        const linkNode = node.insert(function () {\n          return link;\n        }, ':first-child');\n\n        const shape = node.select('.label-container');\n        if (shape) {\n          linkNode.append(function () {\n            return shape.node();\n          });\n        }\n\n        const label = node.select('.label');\n        if (label) {\n          linkNode.append(function () {\n            return label.node();\n          });\n        }\n      }\n    }\n  });\n};\n\nexport default {\n  setConf,\n  addVertices,\n  addEdges,\n  getClasses,\n  draw,\n};\n","import graphlib from 'graphlib';\nimport { select, curveLinear, selectAll } from 'd3';\n\nimport flowDb from './flowDb';\nimport flow from './parser/flow';\nimport { getConfig } from '../../config';\n\nimport dagreD3 from 'dagre-d3';\nimport addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { log } from '../../logger';\nimport common, { evaluate } from '../common/common';\nimport { interpolateToCurve, getStylesFromArray, configureSvgSize } from '../../utils';\nimport flowChartShapes from './flowChartShapes';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Function that adds the vertices found in the graph definition to the graph to be rendered.\n *\n * @param vert Object containing the vertices.\n * @param g The graph that is to be drawn.\n * @param svgId\n * @param root\n * @param doc\n * @param _doc\n */\nexport const addVertices = function (vert, g, svgId, root, _doc) {\n  const securityLevel = getConfig().securityLevel;\n\n  const svg = !root ? select(`[id=\"${svgId}\"]`) : root.select(`[id=\"${svgId}\"]`);\n  const doc = !_doc ? document : _doc;\n  const keys = Object.keys(vert);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = vert[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let classStr = 'default';\n    if (vertex.classes.length > 0) {\n      classStr = vertex.classes.join(' ');\n    }\n\n    const styles = getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    let vertexNode;\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n      const node = {\n        label: vertexText.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        ),\n      };\n      vertexNode = addHtmlLabel(svg, node).node();\n      vertexNode.parentNode.removeChild(vertexNode);\n    } else {\n      const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n      svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n      const rows = vertexText.split(common.lineBreakRegex);\n\n      for (let j = 0; j < rows.length; j++) {\n        const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n        tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        tspan.setAttribute('dy', '1em');\n        tspan.setAttribute('x', '1');\n        tspan.textContent = rows[j];\n        svgLabel.appendChild(tspan);\n      }\n      vertexNode = svgLabel;\n    }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'round':\n        radious = 5;\n        _shape = 'rect';\n        break;\n      case 'square':\n        _shape = 'rect';\n        break;\n      case 'diamond':\n        _shape = 'question';\n        break;\n      case 'hexagon':\n        _shape = 'hexagon';\n        break;\n      case 'odd':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'lean_right':\n        _shape = 'lean_right';\n        break;\n      case 'lean_left':\n        _shape = 'lean_left';\n        break;\n      case 'trapezoid':\n        _shape = 'trapezoid';\n        break;\n      case 'inv_trapezoid':\n        _shape = 'inv_trapezoid';\n        break;\n      case 'odd_right':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'circle':\n        _shape = 'circle';\n        break;\n      case 'ellipse':\n        _shape = 'ellipse';\n        break;\n      case 'stadium':\n        _shape = 'stadium';\n        break;\n      case 'subroutine':\n        _shape = 'subroutine';\n        break;\n      case 'cylinder':\n        _shape = 'cylinder';\n        break;\n      case 'group':\n        _shape = 'rect';\n        break;\n      default:\n        _shape = 'rect';\n    }\n    // Add the node\n    log.warn('Adding node', vertex.id, vertex.domId);\n    g.setNode(flowDb.lookUpDomId(vertex.id), {\n      labelType: 'svg',\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      label: vertexNode,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: flowDb.lookUpDomId(vertex.id),\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph defninition\n *\n * @param {object} edges The edges to add to the graph\n * @param {object} g The graph object\n */\nexport const addEdges = function (edges, g) {\n  let cnt = 0;\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  if (typeof edges.defaultStyle !== 'undefined') {\n    const defaultStyles = getStylesFromArray(edges.defaultStyle);\n    defaultStyle = defaultStyles.style;\n    defaultLabelStyle = defaultStyles.labelStyle;\n  }\n\n  edges.forEach(function (edge) {\n    cnt++;\n\n    // Identify Link\n    var linkId = 'L-' + edge.start + '-' + edge.end;\n    var linkNameStart = 'LS-' + edge.start;\n    var linkNameEnd = 'LE-' + edge.end;\n\n    const edgeData = {};\n\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    let style = '';\n    let labelStyle = '';\n\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    } else {\n      switch (edge.stroke) {\n        case 'normal':\n          style = 'fill:none';\n          if (typeof defaultStyle !== 'undefined') {\n            style = defaultStyle;\n          }\n          if (typeof defaultLabelStyle !== 'undefined') {\n            labelStyle = defaultLabelStyle;\n          }\n          break;\n        case 'dotted':\n          style = 'fill:none;stroke-width:2px;stroke-dasharray:3;';\n          break;\n        case 'thick':\n          style = ' stroke-width: 3.5px;fill:none';\n          break;\n      }\n    }\n\n    edgeData.style = style;\n    edgeData.labelStyle = labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof edges.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edges.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n\n      if (evaluate(getConfig().flowchart.htmlLabels)) {\n        edgeData.labelType = 'html';\n        edgeData.label = `<span id=\"L-${linkId}\" class=\"edgeLabel L-${linkNameStart}' L-${linkNameEnd}\">${edge.text.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        )}</span>`;\n      } else {\n        edgeData.labelType = 'text';\n        edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n        if (typeof edge.style === 'undefined') {\n          edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none';\n        }\n\n        edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n      }\n    }\n\n    edgeData.id = linkId;\n    edgeData.class = linkNameStart + ' ' + linkNameEnd;\n    edgeData.minlen = edge.length || 1;\n\n    // Add the edge to the graph\n    g.setEdge(flowDb.lookUpDomId(edge.start), flowDb.lookUpDomId(edge.end), edgeData, cnt);\n  });\n};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param text\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text) {\n  log.info('Extracting classes');\n  flowDb.clear();\n  try {\n    const parser = flow.parser;\n    parser.yy = flowDb;\n\n    // Parse the graph definition\n    parser.parse(text);\n    return flowDb.getClasses();\n  } catch (e) {\n    return;\n  }\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param text\n * @param id\n */\nexport const draw = function (text, id) {\n  log.info('Drawing flowchart');\n  flowDb.clear();\n  flowDb.setGen('gen-1');\n  const parser = flow.parser;\n  parser.yy = flowDb;\n\n  const securityLevel = getConfig().securityLevel;\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Parse the graph definition\n  // try {\n  parser.parse(text);\n  // } catch (err) {\n  // log.debug('Parsing failed');\n  // }\n\n  // Fetch the default direction, use TD if none was found\n  let dir = flowDb.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'TD';\n  }\n\n  const conf = getConfig().flowchart;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: dir,\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let subG;\n  const subGraphs = flowDb.getSubGraphs();\n  for (let i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n    flowDb.addVertex(subG.id, subG.title, 'group', undefined, subG.classes);\n  }\n\n  // Fetch the verices/nodes and edges/links from the parsed graph definition\n  const vert = flowDb.getVertices();\n  log.warn('Get vertices', vert);\n\n  const edges = flowDb.getEdges();\n\n  let i = 0;\n  for (i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n\n    selectAll('cluster').append('text');\n\n    for (let j = 0; j < subG.nodes.length; j++) {\n      log.warn(\n        'Setting subgraph',\n        subG.nodes[j],\n        flowDb.lookUpDomId(subG.nodes[j]),\n        flowDb.lookUpDomId(subG.id)\n      );\n      g.setParent(flowDb.lookUpDomId(subG.nodes[j]), flowDb.lookUpDomId(subG.id));\n    }\n  }\n  addVertices(vert, g, id, root, doc);\n  addEdges(edges, g);\n\n  // Create the renderer\n  const Render = dagreD3.render;\n  const render = new Render();\n\n  // Add custom shapes\n  flowChartShapes.addToRender(render);\n\n  // Add our custom arrow - an empty arrowhead\n  render.arrows().none = function normal(parent, id, edge, type) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    const path = marker.append('path').attr('d', 'M 0 0 L 0 0 L 0 0 z');\n    dagreD3.util.applyStyle(path, edge[type + 'Style']);\n  };\n\n  // Override normal arrowhead defined in d3. Remove style & add class to allow css styling.\n  render.arrows().normal = function normal(parent, id) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    marker\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('class', 'arrowheadPath')\n      .style('stroke-width', 1)\n      .style('stroke-dasharray', '1,0');\n  };\n\n  // Set up an SVG group so that we can translate the final graph.\n  const svg = root.select(`[id=\"${id}\"]`);\n  svg.attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n  log.warn(g);\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(element, g);\n\n  element.selectAll('g.node').attr('title', function () {\n    return flowDb.getTooltip(this.id);\n  });\n\n  const padding = conf.diagramPadding;\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  svg.attr('viewBox', vBox);\n\n  // Index nodes\n  flowDb.indexNodes('subGraph' + i);\n\n  // reposition labels\n  for (i = 0; i < subGraphs.length; i++) {\n    subG = subGraphs[i];\n    if (subG.title !== 'undefined') {\n      const clusterRects = doc.querySelectorAll(\n        '#' + id + ' [id=\"' + flowDb.lookUpDomId(subG.id) + '\"] rect'\n      );\n      const clusterEl = doc.querySelectorAll(\n        '#' + id + ' [id=\"' + flowDb.lookUpDomId(subG.id) + '\"]'\n      );\n\n      const xPos = clusterRects[0].x.baseVal.value;\n      const yPos = clusterRects[0].y.baseVal.value;\n      const width = clusterRects[0].width.baseVal.value;\n      const cluster = select(clusterEl[0]);\n      const te = cluster.select('.label');\n      te.attr('transform', `translate(${xPos + width / 2}, ${yPos + 14})`);\n      te.attr('id', id + 'Text');\n\n      for (let j = 0; j < subG.classes.length; j++) {\n        clusterEl[0].classList.add(subG.classes[j]);\n      }\n    }\n  }\n\n  // Add label rects for non html labels\n  if (!evaluate(conf.htmlLabels) || true) { // eslint-disable-line\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      // rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  // If node has a link, wrap it in an anchor SVG object.\n  const keys = Object.keys(vert);\n  keys.forEach(function (key) {\n    const vertex = vert[key];\n\n    if (vertex.link) {\n      const node = root.select('#' + id + ' [id=\"' + flowDb.lookUpDomId(key) + '\"]');\n      if (node) {\n        const link = doc.createElementNS('http://www.w3.org/2000/svg', 'a');\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n        if (securityLevel === 'sandbox') {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', '_top');\n        } else if (vertex.linkTarget) {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', vertex.linkTarget);\n        }\n\n        const linkNode = node.insert(function () {\n          return link;\n        }, ':first-child');\n\n        const shape = node.select('.label-container');\n        if (shape) {\n          linkNode.append(function () {\n            return shape.node();\n          });\n        }\n\n        const label = node.select('.label');\n        if (label) {\n          linkNode.append(function () {\n            return label.node();\n          });\n        }\n      }\n    }\n  });\n};\n\nexport default {\n  setConf,\n  addVertices,\n  addEdges,\n  getClasses,\n  draw,\n};\n","/**\n * Returns the styles given options\n *\n * @param {{\n *   fontFamily: string;\n *   nodeTextColor: string;\n *   textColor: string;\n *   titleColor: string;\n *   mainBkg: string;\n *   nodeBorder: string;\n *   arrowheadColor: string;\n *   lineColor: string;\n *   edgeLabelBackground: string;\n *   clusterBkg: string;\n *   clusterBorder: string;\n *   tertiaryColor: string;\n *   border2: string;\n * }} options\n *   The options for the styles\n * @returns {string} The resulting styles\n */\nconst getStyles = (options) =>\n  `.label {\n    font-family: ${options.fontFamily};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n  .cluster-label text {\n    fill: ${options.titleColor};\n  }\n  .cluster-label span {\n    color: ${options.titleColor};\n  }\n\n  .label text,span {\n    fill: ${options.nodeTextColor || options.textColor};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${options.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${options.edgeLabelBackground};\n      fill: ${options.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n    fill: ${options.clusterBkg};\n    stroke: ${options.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${options.titleColor};\n  }\n\n  .cluster span {\n    color: ${options.titleColor};\n  }\n  /* .cluster div {\n    color: ${options.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options.fontFamily};\n    font-size: 12px;\n    background: ${options.tertiaryColor};\n    border: 1px solid ${options.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n`;\n\nexport default getStyles;\n","import moment from 'moment-mini';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport { log } from '../../logger';\nimport * as configApi from '../../config';\nimport utils from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\n\nlet dateFormat = '';\nlet axisFormat = '';\nlet todayMarker = '';\nlet includes = [];\nlet excludes = [];\nlet links = {};\nlet title = '';\nlet sections = [];\nlet tasks = [];\nlet currentSection = '';\nconst tags = ['active', 'done', 'crit', 'milestone'];\nlet funs = [];\nlet inclusiveEndDates = false;\nlet topAxis = false;\n\n// The serial order of the task in the script\nlet lastOrder = 0;\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const clear = function () {\n  sections = [];\n  tasks = [];\n  currentSection = '';\n  funs = [];\n  title = '';\n  taskCnt = 0;\n  lastTask = undefined;\n  lastTaskID = undefined;\n  rawTasks = [];\n  dateFormat = '';\n  axisFormat = '';\n  todayMarker = '';\n  includes = [];\n  excludes = [];\n  inclusiveEndDates = false;\n  topAxis = false;\n  lastOrder = 0;\n  links = {};\n};\n\nexport const setAxisFormat = function (txt) {\n  axisFormat = txt;\n};\n\nexport const getAxisFormat = function () {\n  return axisFormat;\n};\n\nexport const setTodayMarker = function (txt) {\n  todayMarker = txt;\n};\n\nexport const getTodayMarker = function () {\n  return todayMarker;\n};\n\nexport const setDateFormat = function (txt) {\n  dateFormat = txt;\n};\n\nexport const enableInclusiveEndDates = function () {\n  inclusiveEndDates = true;\n};\n\nexport const endDatesAreInclusive = function () {\n  return inclusiveEndDates;\n};\n\nexport const enableTopAxis = function () {\n  topAxis = true;\n};\n\nexport const topAxisEnabled = function () {\n  return topAxis;\n};\n\nexport const getDateFormat = function () {\n  return dateFormat;\n};\n\nexport const setIncludes = function (txt) {\n  includes = txt.toLowerCase().split(/[\\s,]+/);\n};\n\nexport const getIncludes = function () {\n  return includes;\n};\nexport const setExcludes = function (txt) {\n  excludes = txt.toLowerCase().split(/[\\s,]+/);\n};\n\nexport const getExcludes = function () {\n  return excludes;\n};\n\nexport const getLinks = function () {\n  return links;\n};\n\nexport const setTitle = function (txt) {\n  title = txt;\n};\n\nexport const getTitle = function () {\n  return title;\n};\n\nexport const addSection = function (txt) {\n  currentSection = txt;\n  sections.push(txt);\n};\n\nexport const getSections = function () {\n  return sections;\n};\n\nexport const getTasks = function () {\n  let allItemsPricessed = compileTasks();\n  const maxDepth = 10;\n  let iterationCount = 0;\n  while (!allItemsPricessed && iterationCount < maxDepth) {\n    allItemsPricessed = compileTasks();\n    iterationCount++;\n  }\n\n  tasks = rawTasks;\n\n  return tasks;\n};\n\nexport const isInvalidDate = function (date, dateFormat, excludes, includes) {\n  if (includes.indexOf(date.format(dateFormat.trim())) >= 0) {\n    return false;\n  }\n  if (date.isoWeekday() >= 6 && excludes.indexOf('weekends') >= 0) {\n    return true;\n  }\n  if (excludes.indexOf(date.format('dddd').toLowerCase()) >= 0) {\n    return true;\n  }\n  return excludes.indexOf(date.format(dateFormat.trim())) >= 0;\n};\n\nconst checkTaskDates = function (task, dateFormat, excludes, includes) {\n  if (!excludes.length || task.manualEndTime) return;\n  let startTime = moment(task.startTime, dateFormat, true);\n  startTime.add(1, 'd');\n  let endTime = moment(task.endTime, dateFormat, true);\n  let renderEndTime = fixTaskDates(startTime, endTime, dateFormat, excludes, includes);\n  task.endTime = endTime.toDate();\n  task.renderEndTime = renderEndTime;\n};\n\nconst fixTaskDates = function (startTime, endTime, dateFormat, excludes, includes) {\n  let invalid = false;\n  let renderEndTime = null;\n  while (startTime <= endTime) {\n    if (!invalid) {\n      renderEndTime = endTime.toDate();\n    }\n    invalid = isInvalidDate(startTime, dateFormat, excludes, includes);\n    if (invalid) {\n      endTime.add(1, 'd');\n    }\n    startTime.add(1, 'd');\n  }\n  return renderEndTime;\n};\n\nconst getStartDate = function (prevTime, dateFormat, str) {\n  str = str.trim();\n\n  // Test for after\n  const re = /^after\\s+([\\d\\w- ]+)/;\n  const afterStatement = re.exec(str.trim());\n\n  if (afterStatement !== null) {\n    // check all after ids and take the latest\n    let latestEndingTask = null;\n    afterStatement[1].split(' ').forEach(function (id) {\n      let task = findTaskById(id);\n      if (typeof task !== 'undefined') {\n        if (!latestEndingTask) {\n          latestEndingTask = task;\n        } else {\n          if (task.endTime > latestEndingTask.endTime) {\n            latestEndingTask = task;\n          }\n        }\n      }\n    });\n\n    if (!latestEndingTask) {\n      const dt = new Date();\n      dt.setHours(0, 0, 0, 0);\n      return dt;\n    } else {\n      return latestEndingTask.endTime;\n    }\n  }\n\n  // Check for actual date set\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    return mDate.toDate();\n  } else {\n    log.debug('Invalid date:' + str);\n    log.debug('With date format:' + dateFormat.trim());\n  }\n\n  // Default date - now\n  return new Date();\n};\n\nconst durationToDate = function (durationStatement, relativeTime) {\n  if (durationStatement !== null) {\n    switch (durationStatement[2]) {\n      case 's':\n        relativeTime.add(durationStatement[1], 'seconds');\n        break;\n      case 'm':\n        relativeTime.add(durationStatement[1], 'minutes');\n        break;\n      case 'h':\n        relativeTime.add(durationStatement[1], 'hours');\n        break;\n      case 'd':\n        relativeTime.add(durationStatement[1], 'days');\n        break;\n      case 'w':\n        relativeTime.add(durationStatement[1], 'weeks');\n        break;\n    }\n  }\n  // Default date - now\n  return relativeTime.toDate();\n};\n\nconst getEndDate = function (prevTime, dateFormat, str, inclusive) {\n  inclusive = inclusive || false;\n  str = str.trim();\n\n  // Check for actual date\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    if (inclusive) {\n      mDate.add(1, 'd');\n    }\n    return mDate.toDate();\n  }\n\n  return durationToDate(/^([\\d]+)([wdhms])/.exec(str.trim()), moment(prevTime));\n};\n\nlet taskCnt = 0;\nconst parseId = function (idStr) {\n  if (typeof idStr === 'undefined') {\n    taskCnt = taskCnt + 1;\n    return 'task' + taskCnt;\n  }\n  return idStr;\n};\n// id, startDate, endDate\n// id, startDate, length\n// id, after x, endDate\n// id, after x, length\n// startDate, endDate\n// startDate, length\n// after x, endDate\n// after x, length\n// endDate\n// length\n\nconst compileData = function (prevTask, dataStr) {\n  let ds;\n\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  let endTimeData = '';\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = prevTask.endTime;\n      endTimeData = data[0];\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = getStartDate(undefined, dateFormat, data[0]);\n      endTimeData = data[1];\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = getStartDate(undefined, dateFormat, data[1]);\n      endTimeData = data[2];\n      break;\n    default:\n  }\n\n  if (endTimeData) {\n    task.endTime = getEndDate(task.startTime, dateFormat, endTimeData, inclusiveEndDates);\n    task.manualEndTime = moment(endTimeData, 'YYYY-MM-DD', true).isValid();\n    checkTaskDates(task, dateFormat, excludes, includes);\n  }\n\n  return task;\n};\n\nconst parseData = function (prevTaskId, dataStr) {\n  let ds;\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = {\n        type: 'prevTaskEnd',\n        id: prevTaskId,\n      };\n      task.endTime = {\n        data: data[0],\n      };\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[0],\n      };\n      task.endTime = {\n        data: data[1],\n      };\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[1],\n      };\n      task.endTime = {\n        data: data[2],\n      };\n      break;\n    default:\n  }\n\n  return task;\n};\n\nlet lastTask;\nlet lastTaskID;\nlet rawTasks = [];\nconst taskDb = {};\nexport const addTask = function (descr, data) {\n  const rawTask = {\n    section: currentSection,\n    type: currentSection,\n    processed: false,\n    manualEndTime: false,\n    renderEndTime: null,\n    raw: { data: data },\n    task: descr,\n    classes: [],\n  };\n  const taskInfo = parseData(lastTaskID, data);\n  rawTask.raw.startTime = taskInfo.startTime;\n  rawTask.raw.endTime = taskInfo.endTime;\n  rawTask.id = taskInfo.id;\n  rawTask.prevTaskId = lastTaskID;\n  rawTask.active = taskInfo.active;\n  rawTask.done = taskInfo.done;\n  rawTask.crit = taskInfo.crit;\n  rawTask.milestone = taskInfo.milestone;\n  rawTask.order = lastOrder;\n\n  lastOrder++;\n\n  const pos = rawTasks.push(rawTask);\n\n  lastTaskID = rawTask.id;\n  // Store cross ref\n  taskDb[rawTask.id] = pos - 1;\n};\n\nexport const findTaskById = function (id) {\n  const pos = taskDb[id];\n  return rawTasks[pos];\n};\n\nexport const addTaskOrg = function (descr, data) {\n  const newTask = {\n    section: currentSection,\n    type: currentSection,\n    description: descr,\n    task: descr,\n    classes: [],\n  };\n  const taskInfo = compileData(lastTask, data);\n  newTask.startTime = taskInfo.startTime;\n  newTask.endTime = taskInfo.endTime;\n  newTask.id = taskInfo.id;\n  newTask.active = taskInfo.active;\n  newTask.done = taskInfo.done;\n  newTask.crit = taskInfo.crit;\n  newTask.milestone = taskInfo.milestone;\n  lastTask = newTask;\n  tasks.push(newTask);\n};\n\nconst compileTasks = function () {\n  const compileTask = function (pos) {\n    const task = rawTasks[pos];\n    let startTime = '';\n    switch (rawTasks[pos].raw.startTime.type) {\n      case 'prevTaskEnd': {\n        const prevTask = findTaskById(task.prevTaskId);\n        task.startTime = prevTask.endTime;\n        break;\n      }\n      case 'getStartDate':\n        startTime = getStartDate(undefined, dateFormat, rawTasks[pos].raw.startTime.startData);\n        if (startTime) {\n          rawTasks[pos].startTime = startTime;\n        }\n        break;\n    }\n\n    if (rawTasks[pos].startTime) {\n      rawTasks[pos].endTime = getEndDate(\n        rawTasks[pos].startTime,\n        dateFormat,\n        rawTasks[pos].raw.endTime.data,\n        inclusiveEndDates\n      );\n      if (rawTasks[pos].endTime) {\n        rawTasks[pos].processed = true;\n        rawTasks[pos].manualEndTime = moment(\n          rawTasks[pos].raw.endTime.data,\n          'YYYY-MM-DD',\n          true\n        ).isValid();\n        checkTaskDates(rawTasks[pos], dateFormat, excludes, includes);\n      }\n    }\n\n    return rawTasks[pos].processed;\n  };\n\n  let allProcessed = true;\n  for (let i = 0; i < rawTasks.length; i++) {\n    compileTask(i);\n\n    allProcessed = allProcessed && rawTasks[i].processed;\n  }\n  return allProcessed;\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param _linkStr URL to create a link for\n */\nexport const setLink = function (ids, _linkStr) {\n  let linkStr = _linkStr;\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    linkStr = sanitizeUrl(_linkStr);\n  }\n  ids.split(',').forEach(function (id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      pushFun(id, () => {\n        window.open(linkStr, '_self');\n      });\n      links[id] = linkStr;\n    }\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function (ids, className) {\n  ids.split(',').forEach(function (id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      rawTask.classes.push(className);\n    }\n  });\n};\n\nconst setClickFun = function (id, functionName, functionArgs) {\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n\n  let argList = [];\n  if (typeof functionArgs === 'string') {\n    /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n    argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n    for (let i = 0; i < argList.length; i++) {\n      let item = argList[i].trim();\n      /* Removes all double quotes at the start and end of an argument */\n      /* This preserves all starting and ending whitespace inside */\n      if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n        item = item.substr(1, item.length - 2);\n      }\n      argList[i] = item;\n    }\n  }\n\n  /* if no arguments passed into callback, default to passing in id */\n  if (argList.length === 0) {\n    argList.push(id);\n  }\n\n  let rawTask = findTaskById(id);\n  if (typeof rawTask !== 'undefined') {\n    pushFun(id, () => {\n      utils.runFunc(functionName, ...argList);\n    });\n  }\n};\n\n/**\n * The callbackFunction is executed in a click event bound to the task with the specified id or the\n * task's assigned text\n *\n * @param id The task's id\n * @param callbackFunction A function to be executed when clicked on the task or the task's text\n */\nconst pushFun = function (id, callbackFunction) {\n  funs.push(function () {\n    // const elem = d3.select(element).select(`[id=\"${id}\"]`)\n    const elem = document.querySelector(`[id=\"${id}\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function () {\n        callbackFunction();\n      });\n    }\n  });\n  funs.push(function () {\n    // const elem = d3.select(element).select(`[id=\"${id}-text\"]`)\n    const elem = document.querySelector(`[id=\"${id}-text\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function () {\n        callbackFunction();\n      });\n    }\n  });\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs Function args the function should be called with\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFun(id, functionName, functionArgs);\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Binds all functions previously added to fun (specified through click) to the element\n *\n * @param element\n */\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().gantt,\n  clear,\n  setDateFormat,\n  getDateFormat,\n  enableInclusiveEndDates,\n  endDatesAreInclusive,\n  enableTopAxis,\n  topAxisEnabled,\n  setAxisFormat,\n  getAxisFormat,\n  setTodayMarker,\n  getTodayMarker,\n  setTitle,\n  getTitle,\n  addSection,\n  getSections,\n  getTasks,\n  addTask,\n  findTaskById,\n  addTaskOrg,\n  setIncludes,\n  getIncludes,\n  setExcludes,\n  getExcludes,\n  setClickEvent,\n  setLink,\n  getLinks,\n  bindFunctions,\n  durationToDate,\n  isInvalidDate,\n};\n\n/**\n * @param data\n * @param task\n * @param tags\n */\nfunction getTaskTags(data, task, tags) {\n  let matchFound = true;\n  while (matchFound) {\n    matchFound = false;\n    tags.forEach(function (t) {\n      const pattern = '^\\\\s*' + t + '\\\\s*$';\n      const regex = new RegExp(pattern);\n      if (data[0].match(regex)) {\n        task[t] = true;\n        data.shift(1);\n        matchFound = true;\n      }\n    });\n  }\n}\n","import moment from 'moment-mini';\nimport {\n  select,\n  scaleTime,\n  min,\n  max,\n  scaleLinear,\n  interpolateHcl,\n  axisBottom,\n  axisTop,\n  timeFormat,\n} from 'd3';\nimport { parser } from './parser/gantt';\nimport common from '../common/common';\nimport ganttDb from './ganttDb';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\n\nparser.yy = ganttDb;\nexport const setConf = function () {\n  // const keys = Object.keys(cnf);\n  // keys.forEach(function(key) {\n  //   conf[key] = cnf[key];\n  // });\n};\nlet w;\nexport const draw = function (text, id) {\n  const conf = getConfig().gantt;\n  parser.yy.clear();\n  parser.parse(text);\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  const elem = doc.getElementById(id);\n  w = elem.parentElement.offsetWidth;\n\n  if (typeof w === 'undefined') {\n    w = 1200;\n  }\n\n  if (typeof conf.useWidth !== 'undefined') {\n    w = conf.useWidth;\n  }\n\n  const taskArray = parser.yy.getTasks();\n\n  // Set height based on number of tasks\n  const h = taskArray.length * (conf.barHeight + conf.barGap) + 2 * conf.topPadding;\n\n  // Set viewBox\n  elem.setAttribute('viewBox', '0 0 ' + w + ' ' + h);\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Set timescale\n  const timeScale = scaleTime()\n    .domain([\n      min(taskArray, function (d) {\n        return d.startTime;\n      }),\n      max(taskArray, function (d) {\n        return d.endTime;\n      }),\n    ])\n    .rangeRound([0, w - conf.leftPadding - conf.rightPadding]);\n\n  let categories = [];\n\n  for (let i = 0; i < taskArray.length; i++) {\n    categories.push(taskArray[i].type);\n  }\n\n  const catsUnfiltered = categories; // for vert labels\n\n  categories = checkUnique(categories);\n\n  /**\n   * @param a\n   * @param b\n   */\n  function taskCompare(a, b) {\n    const taskA = a.startTime;\n    const taskB = b.startTime;\n    let result = 0;\n    if (taskA > taskB) {\n      result = 1;\n    } else if (taskA < taskB) {\n      result = -1;\n    }\n    return result;\n  }\n\n  // Sort the task array using the above taskCompare() so that\n  // tasks are created based on their order of startTime\n  taskArray.sort(taskCompare);\n\n  makeGant(taskArray, w, h);\n\n  configureSvgSize(svg, h, w, conf.useMaxWidth);\n\n  svg\n    .append('text')\n    .text(parser.yy.getTitle())\n    .attr('x', w / 2)\n    .attr('y', conf.titleTopMargin)\n    .attr('class', 'titleText');\n\n  /**\n   * @param tasks\n   * @param pageWidth\n   * @param pageHeight\n   */\n  function makeGant(tasks, pageWidth, pageHeight) {\n    const barHeight = conf.barHeight;\n    const gap = barHeight + conf.barGap;\n    const topPadding = conf.topPadding;\n    const leftPadding = conf.leftPadding;\n\n    const colorScale = scaleLinear()\n      .domain([0, categories.length])\n      .range(['#00B9FA', '#F95002'])\n      .interpolate(interpolateHcl);\n\n    drawExcludeDays(\n      gap,\n      topPadding,\n      leftPadding,\n      pageWidth,\n      pageHeight,\n      tasks,\n      parser.yy.getExcludes(),\n      parser.yy.getIncludes()\n    );\n    makeGrid(leftPadding, topPadding, pageWidth, pageHeight);\n    drawRects(tasks, gap, topPadding, leftPadding, barHeight, colorScale, pageWidth, pageHeight);\n    vertLabels(gap, topPadding, leftPadding, barHeight, colorScale);\n    drawToday(leftPadding, topPadding, pageWidth, pageHeight);\n  }\n\n  /**\n   * @param theArray\n   * @param theGap\n   * @param theTopPad\n   * @param theSidePad\n   * @param theBarHeight\n   * @param theColorScale\n   * @param w\n   */\n  function drawRects(theArray, theGap, theTopPad, theSidePad, theBarHeight, theColorScale, w) {\n    // Draw background rects covering the entire width of the graph, these form the section rows.\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(theArray)\n      .enter()\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + theTopPad - 2;\n      })\n      .attr('width', function () {\n        return w - conf.rightPadding / 2;\n      })\n      .attr('height', theGap)\n      .attr('class', function (d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            return 'section section' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'section section0';\n      });\n\n    // Draw the rects representing the tasks\n    const rectangles = svg.append('g').selectAll('rect').data(theArray).enter();\n\n    const links = ganttDb.getLinks();\n\n    // Render the tasks with links\n    // Render the other tasks\n    rectangles\n      .append('rect')\n      .attr('id', function (d) {\n        return d.id;\n      })\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .attr('x', function (d) {\n        if (d.milestone) {\n          return (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) -\n            0.5 * theBarHeight\n          );\n        }\n        return timeScale(d.startTime) + theSidePad;\n      })\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + theTopPad;\n      })\n      .attr('width', function (d) {\n        if (d.milestone) {\n          return theBarHeight;\n        }\n        return timeScale(d.renderEndTime || d.endTime) - timeScale(d.startTime);\n      })\n      .attr('height', theBarHeight)\n      .attr('transform-origin', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n\n        return (\n          (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime))\n          ).toString() +\n          'px ' +\n          (i * theGap + theTopPad + 0.5 * theBarHeight).toString() +\n          'px'\n        );\n      })\n      .attr('class', function (d) {\n        const res = 'task';\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskClass = '';\n        if (d.active) {\n          if (d.crit) {\n            taskClass += ' activeCrit';\n          } else {\n            taskClass = ' active';\n          }\n        } else if (d.done) {\n          if (d.crit) {\n            taskClass = ' doneCrit';\n          } else {\n            taskClass = ' done';\n          }\n        } else {\n          if (d.crit) {\n            taskClass += ' crit';\n          }\n        }\n\n        if (taskClass.length === 0) {\n          taskClass = ' task';\n        }\n\n        if (d.milestone) {\n          taskClass = ' milestone ' + taskClass;\n        }\n\n        taskClass += secNum;\n\n        taskClass += ' ' + classStr;\n\n        return res + taskClass;\n      });\n\n    // Append task labels\n    rectangles\n      .append('text')\n      .attr('id', function (d) {\n        return d.id + '-text';\n      })\n      .text(function (d) {\n        return d.task;\n      })\n      .attr('font-size', conf.fontSize)\n      .attr('x', function (d) {\n        let startX = timeScale(d.startTime);\n        let endX = timeScale(d.renderEndTime || d.endTime);\n        if (d.milestone) {\n          startX += 0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) - 0.5 * theBarHeight;\n        }\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return startX + theSidePad - 5;\n          } else {\n            return endX + theSidePad + 5;\n          }\n        } else {\n          return (endX - startX) / 2 + startX + theSidePad;\n        }\n      })\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + conf.barHeight / 2 + (conf.fontSize / 2 - 2) + theTopPad;\n      })\n      .attr('text-height', theBarHeight)\n      .attr('class', function (d) {\n        const startX = timeScale(d.startTime);\n        let endX = timeScale(d.endTime);\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskType = '';\n        if (d.active) {\n          if (d.crit) {\n            taskType = 'activeCritText' + secNum;\n          } else {\n            taskType = 'activeText' + secNum;\n          }\n        }\n\n        if (d.done) {\n          if (d.crit) {\n            taskType = taskType + ' doneCritText' + secNum;\n          } else {\n            taskType = taskType + ' doneText' + secNum;\n          }\n        } else {\n          if (d.crit) {\n            taskType = taskType + ' critText' + secNum;\n          }\n        }\n\n        if (d.milestone) {\n          taskType += ' milestoneText';\n        }\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return classStr + ' taskTextOutsideLeft taskTextOutside' + secNum + ' ' + taskType;\n          } else {\n            return (\n              classStr +\n              ' taskTextOutsideRight taskTextOutside' +\n              secNum +\n              ' ' +\n              taskType +\n              ' width-' +\n              textWidth\n            );\n          }\n        } else {\n          return classStr + ' taskText taskText' + secNum + ' ' + taskType + ' width-' + textWidth;\n        }\n      });\n\n    const securityLevel = getConfig().securityLevel;\n\n    // Wrap the tasks in an a tag for working links without javascript\n    if (securityLevel === 'sandbox') {\n      let sandboxElement;\n      sandboxElement = select('#i' + id);\n      const root = select(sandboxElement.nodes()[0].contentDocument.body);\n      const doc = sandboxElement.nodes()[0].contentDocument;\n\n      rectangles\n        .filter(function (d) {\n          return typeof links[d.id] !== 'undefined';\n        })\n        .each(function (o) {\n          var taskRect = doc.querySelector('#' + o.id);\n          var taskText = doc.querySelector('#' + o.id + '-text');\n          const oldParent = taskRect.parentNode;\n          var Link = doc.createElement('a');\n          Link.setAttribute('xlink:href', links[o.id]);\n          Link.setAttribute('target', '_top');\n          oldParent.appendChild(Link);\n          Link.appendChild(taskRect);\n          Link.appendChild(taskText);\n        });\n    }\n  }\n  /**\n   * @param theGap\n   * @param theTopPad\n   * @param theSidePad\n   * @param w\n   * @param h\n   * @param tasks\n   * @param excludes\n   * @param includes\n   */\n  function drawExcludeDays(theGap, theTopPad, theSidePad, w, h, tasks, excludes, includes) {\n    const minTime = tasks.reduce(\n      (min, { startTime }) => (min ? Math.min(min, startTime) : startTime),\n      0\n    );\n    const maxTime = tasks.reduce((max, { endTime }) => (max ? Math.max(max, endTime) : endTime), 0);\n    const dateFormat = parser.yy.getDateFormat();\n    if (!minTime || !maxTime) return;\n\n    const excludeRanges = [];\n    let range = null;\n    let d = moment(minTime);\n    while (d.valueOf() <= maxTime) {\n      if (parser.yy.isInvalidDate(d, dateFormat, excludes, includes)) {\n        if (!range) {\n          range = {\n            start: d.clone(),\n            end: d.clone(),\n          };\n        } else {\n          range.end = d.clone();\n        }\n      } else {\n        if (range) {\n          excludeRanges.push(range);\n          range = null;\n        }\n      }\n      d.add(1, 'd');\n    }\n\n    const rectangles = svg.append('g').selectAll('rect').data(excludeRanges).enter();\n\n    rectangles\n      .append('rect')\n      .attr('id', function (d) {\n        return 'exclude-' + d.start.format('YYYY-MM-DD');\n      })\n      .attr('x', function (d) {\n        return timeScale(d.start) + theSidePad;\n      })\n      .attr('y', conf.gridLineStartPadding)\n      .attr('width', function (d) {\n        const renderEnd = d.end.clone().add(1, 'day');\n        return timeScale(renderEnd) - timeScale(d.start);\n      })\n      .attr('height', h - theTopPad - conf.gridLineStartPadding)\n      .attr('transform-origin', function (d, i) {\n        return (\n          (\n            timeScale(d.start) +\n            theSidePad +\n            0.5 * (timeScale(d.end) - timeScale(d.start))\n          ).toString() +\n          'px ' +\n          (i * theGap + 0.5 * h).toString() +\n          'px'\n        );\n      })\n      .attr('class', 'exclude-range');\n  }\n\n  /**\n   * @param theSidePad\n   * @param theTopPad\n   * @param w\n   * @param h\n   */\n  function makeGrid(theSidePad, theTopPad, w, h) {\n    let bottomXAxis = axisBottom(timeScale)\n      .tickSize(-h + theTopPad + conf.gridLineStartPadding)\n      .tickFormat(timeFormat(parser.yy.getAxisFormat() || conf.axisFormat || '%Y-%m-%d'));\n\n    svg\n      .append('g')\n      .attr('class', 'grid')\n      .attr('transform', 'translate(' + theSidePad + ', ' + (h - 50) + ')')\n      .call(bottomXAxis)\n      .selectAll('text')\n      .style('text-anchor', 'middle')\n      .attr('fill', '#000')\n      .attr('stroke', 'none')\n      .attr('font-size', 10)\n      .attr('dy', '1em');\n\n    if (ganttDb.topAxisEnabled() || conf.topAxis) {\n      let topXAxis = axisTop(timeScale)\n        .tickSize(-h + theTopPad + conf.gridLineStartPadding)\n        .tickFormat(timeFormat(parser.yy.getAxisFormat() || conf.axisFormat || '%Y-%m-%d'));\n\n      svg\n        .append('g')\n        .attr('class', 'grid')\n        .attr('transform', 'translate(' + theSidePad + ', ' + theTopPad + ')')\n        .call(topXAxis)\n        .selectAll('text')\n        .style('text-anchor', 'middle')\n        .attr('fill', '#000')\n        .attr('stroke', 'none')\n        .attr('font-size', 10);\n      // .attr('dy', '1em');\n    }\n  }\n\n  /**\n   * @param theGap\n   * @param theTopPad\n   */\n  function vertLabels(theGap, theTopPad) {\n    const numOccurances = [];\n    let prevGap = 0;\n\n    for (let i = 0; i < categories.length; i++) {\n      numOccurances[i] = [categories[i], getCount(categories[i], catsUnfiltered)];\n    }\n\n    svg\n      .append('g') // without doing this, impossible to put grid lines behind text\n      .selectAll('text')\n      .data(numOccurances)\n      .enter()\n      .append(function (d) {\n        const rows = d[0].split(common.lineBreakRegex);\n        const dy = -(rows.length - 1) / 2;\n\n        const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n        svgLabel.setAttribute('dy', dy + 'em');\n\n        for (let j = 0; j < rows.length; j++) {\n          const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n          tspan.setAttribute('alignment-baseline', 'central');\n          tspan.setAttribute('x', '10');\n          if (j > 0) tspan.setAttribute('dy', '1em');\n          tspan.textContent = rows[j];\n          svgLabel.appendChild(tspan);\n        }\n        return svgLabel;\n      })\n      .attr('x', 10)\n      .attr('y', function (d, i) {\n        if (i > 0) {\n          for (let j = 0; j < i; j++) {\n            prevGap += numOccurances[i - 1][1];\n            return (d[1] * theGap) / 2 + prevGap * theGap + theTopPad;\n          }\n        } else {\n          return (d[1] * theGap) / 2 + theTopPad;\n        }\n      })\n      .attr('font-size', conf.sectionFontSize)\n      .attr('font-size', conf.sectionFontSize)\n      .attr('class', function (d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d[0] === categories[i]) {\n            return 'sectionTitle sectionTitle' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'sectionTitle';\n      });\n  }\n\n  /**\n   * @param theSidePad\n   * @param theTopPad\n   * @param w\n   * @param h\n   */\n  function drawToday(theSidePad, theTopPad, w, h) {\n    const todayMarker = ganttDb.getTodayMarker();\n    if (todayMarker === 'off') {\n      return;\n    }\n\n    const todayG = svg.append('g').attr('class', 'today');\n    const today = new Date();\n    const todayLine = todayG.append('line');\n\n    todayLine\n      .attr('x1', timeScale(today) + theSidePad)\n      .attr('x2', timeScale(today) + theSidePad)\n      .attr('y1', conf.titleTopMargin)\n      .attr('y2', h - conf.titleTopMargin)\n      .attr('class', 'today');\n\n    if (todayMarker !== '') {\n      todayLine.attr('style', todayMarker.replace(/,/g, ';'));\n    }\n  }\n\n  /**\n   * From this stackexchange question:\n   * http://stackoverflow.com/questions/1890203/unique-for-arrays-in-javascript\n   *\n   * @param arr\n   */\n  function checkUnique(arr) {\n    const hash = {};\n    const result = [];\n    for (let i = 0, l = arr.length; i < l; ++i) {\n      if (!Object.prototype.hasOwnProperty.call(hash, arr[i])) {\n        // eslint-disable-line\n        // it works with objects! in FF, at least\n        hash[arr[i]] = true;\n        result.push(arr[i]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * From this stackexchange question:\n   * http://stackoverflow.com/questions/14227981/count-how-many-strings-in-an-array-have-duplicates-in-the-same-array\n   *\n   * @param arr\n   */\n  function getCounts(arr) {\n    let i = arr.length; // const to loop over\n    const obj = {}; // obj to store results\n    while (i) {\n      obj[arr[--i]] = (obj[arr[i]] || 0) + 1; // count occurrences\n    }\n    return obj;\n  }\n\n  /**\n   * Get specific from everything\n   *\n   * @param word\n   * @param arr\n   */\n  function getCount(word, arr) {\n    return getCounts(arr)[word] || 0;\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .mermaid-main-font {\n    font-family: \"trebuchet ms\", verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  .exclude-range {\n    fill: ${options.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${options.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${options.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${options.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    // font-size: ${options.ganttFontSize};\n    // text-height: 14px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${options.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n    text {\n      font-family: ${options.fontFamily};\n      fill: ${options.textColor};\n    }\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${options.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n\n  // .taskText:not([font-size]) {\n  //   font-size: ${options.ganttFontSize};\n  // }\n\n  .taskTextOutsideRight {\n    fill: ${options.taskTextDarkColor};\n    text-anchor: start;\n    // font-size: ${options.ganttFontSize};\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${options.taskTextDarkColor};\n    text-anchor: end;\n    // font-size: ${options.ganttFontSize};\n  }\n\n  /* Special case clickable */\n  .task.clickable {\n    cursor: pointer;\n  }\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${options.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${options.taskBkgColor};\n    stroke: ${options.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${options.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${options.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${options.activeTaskBkgColor};\n    stroke: ${options.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${options.doneTaskBorderColor};\n    fill: ${options.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor}    ;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n`;\n\nexport default getStyles;\n","import { log } from '../../logger';\nimport { random } from '../../utils';\nlet commits = {};\nlet head = null;\nlet branches = { master: head };\nlet curBranch = 'master';\nlet direction = 'LR';\nlet seq = 0;\n\nfunction getId() {\n  return random({ length: 7 });\n}\n\n/**\n * @param currentCommit\n * @param otherCommit\n */\nfunction isfastforwardable(currentCommit, otherCommit) {\n  log.debug('Entering isfastforwardable:', currentCommit.id, otherCommit.id);\n  let cnt = 0;\n  while (currentCommit.seq <= otherCommit.seq && currentCommit !== otherCommit && cnt < 1000) {\n    cnt++;\n    // only if other branch has more commits\n    if (otherCommit.parent == null) break;\n    if (Array.isArray(otherCommit.parent)) {\n      log.debug('In merge commit:', otherCommit.parent);\n      return (\n        isfastforwardable(currentCommit, commits[otherCommit.parent[0]]) ||\n        isfastforwardable(currentCommit, commits[otherCommit.parent[1]])\n      );\n    } else {\n      otherCommit = commits[otherCommit.parent];\n    }\n  }\n  log.debug(currentCommit.id, otherCommit.id);\n  return currentCommit.id === otherCommit.id;\n}\n\n/**\n * @param currentCommit\n * @param otherCommit\n */\nfunction isReachableFrom(currentCommit, otherCommit) {\n  const currentSeq = currentCommit.seq;\n  const otherSeq = otherCommit.seq;\n  if (currentSeq > otherSeq) return isfastforwardable(otherCommit, currentCommit);\n  return false;\n}\n\n/**\n * @param list\n * @param fn\n */\nfunction uniqBy(list, fn) {\n  const recordMap = Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n\nexport const setDirection = function (dir) {\n  direction = dir;\n};\nlet options = {};\nexport const setOptions = function (rawOptString) {\n  log.debug('options str', rawOptString);\n  rawOptString = rawOptString && rawOptString.trim();\n  rawOptString = rawOptString || '{}';\n  try {\n    options = JSON.parse(rawOptString);\n  } catch (e) {\n    log.error('error while parsing gitGraph options', e.message);\n  }\n};\n\nexport const getOptions = function () {\n  return options;\n};\n\nexport const commit = function (msg) {\n  const commit = {\n    id: getId(),\n    message: msg,\n    seq: seq++,\n    parent: head == null ? null : head.id,\n  };\n  head = commit;\n  commits[commit.id] = commit;\n  branches[curBranch] = commit.id;\n  log.debug('in pushCommit ' + commit.id);\n};\n\nexport const branch = function (name) {\n  branches[name] = head != null ? head.id : null;\n  log.debug('in createBranch');\n};\n\nexport const merge = function (otherBranch) {\n  const currentCommit = commits[branches[curBranch]];\n  const otherCommit = commits[branches[otherBranch]];\n  if (isReachableFrom(currentCommit, otherCommit)) {\n    log.debug('Already merged');\n    return;\n  }\n  if (isfastforwardable(currentCommit, otherCommit)) {\n    branches[curBranch] = branches[otherBranch];\n    head = commits[branches[curBranch]];\n  } else {\n    // create merge commit\n    const commit = {\n      id: getId(),\n      message: 'merged branch ' + otherBranch + ' into ' + curBranch,\n      seq: seq++,\n      parent: [head == null ? null : head.id, branches[otherBranch]],\n    };\n    head = commit;\n    commits[commit.id] = commit;\n    branches[curBranch] = commit.id;\n  }\n  log.debug(branches);\n  log.debug('in mergeBranch');\n};\n\nexport const checkout = function (branch) {\n  log.debug('in checkout');\n  curBranch = branch;\n  const id = branches[curBranch];\n  head = commits[id];\n};\n\nexport const reset = function (commitRef) {\n  log.debug('in reset', commitRef);\n  const ref = commitRef.split(':')[0];\n  let parentCount = parseInt(commitRef.split(':')[1]);\n  let commit = ref === 'HEAD' ? head : commits[branches[ref]];\n  log.debug(commit, parentCount);\n  while (parentCount > 0) {\n    commit = commits[commit.parent];\n    parentCount--;\n    if (!commit) {\n      const err = 'Critical error - unique parent commit not found during reset';\n      log.error(err);\n      throw err;\n    }\n  }\n  head = commit;\n  branches[curBranch] = commit.id;\n};\n\n/**\n * @param arr\n * @param key\n * @param newval\n */\nfunction upsert(arr, key, newval) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newval);\n  } else {\n    arr.splice(index, 1, newval);\n  }\n}\n\n/** @param commitArr */\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit = commitArr.reduce((out, commit) => {\n    if (out.seq > commit.seq) return out;\n    return commit;\n  }, commitArr[0]);\n  let line = '';\n  commitArr.forEach(function (c) {\n    if (c === commit) {\n      line += '\\t*';\n    } else {\n      line += '\\t|';\n    }\n  });\n  const label = [line, commit.id, commit.seq];\n  for (let branch in branches) {\n    if (branches[branch] === commit.id) label.push(branch);\n  }\n  log.debug(label.join(' '));\n  if (Array.isArray(commit.parent)) {\n    const newCommit = commits[commit.parent[0]];\n    upsert(commitArr, commit, newCommit);\n    commitArr.push(commits[commit.parent[1]]);\n  } else if (commit.parent == null) {\n    return;\n  } else {\n    const nextCommit = commits[commit.parent];\n    upsert(commitArr, commit, nextCommit);\n  }\n  commitArr = uniqBy(commitArr, (c) => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n\nexport const prettyPrint = function () {\n  log.debug(commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n};\n\nexport const clear = function () {\n  commits = {};\n  head = null;\n  branches = { master: head };\n  curBranch = 'master';\n  seq = 0;\n};\n\nexport const getBranchesAsObjArray = function () {\n  const branchArr = [];\n  for (let branch in branches) {\n    branchArr.push({ name: branch, commit: commits[branches[branch]] });\n  }\n  return branchArr;\n};\n\nexport const getBranches = function () {\n  return branches;\n};\nexport const getCommits = function () {\n  return commits;\n};\nexport const getCommitsArray = function () {\n  const commitArr = Object.keys(commits).map(function (key) {\n    return commits[key];\n  });\n  commitArr.forEach(function (o) {\n    log.debug(o.id);\n  });\n  commitArr.sort((a, b) => b.seq - a.seq);\n  return commitArr;\n};\nexport const getCurrentBranch = function () {\n  return curBranch;\n};\nexport const getDirection = function () {\n  return direction;\n};\nexport const getHead = function () {\n  return head;\n};\n\nexport default {\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  checkout,\n  reset,\n  prettyPrint,\n  clear,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n};\n","import { curveBasis, line, select } from 'd3';\n\nimport db from './gitGraphAst';\nimport gitGraphParser from './parser/gitGraph';\nimport { log } from '../../logger';\nimport { interpolateToCurve } from '../../utils';\nimport { getConfig } from '../../config';\n\nlet allCommitsDict = {};\nlet branchNum;\nlet config = {\n  nodeSpacing: 150,\n  nodeFillColor: 'yellow',\n  nodeStrokeWidth: 2,\n  nodeStrokeColor: 'grey',\n  lineStrokeWidth: 4,\n  branchOffset: 50,\n  lineColor: 'grey',\n  leftMargin: 50,\n  branchColors: ['#442f74', '#983351', '#609732', '#AA9A39'],\n  nodeRadius: 10,\n  nodeLabel: {\n    width: 75,\n    height: 100,\n    x: -25,\n    y: 0,\n  },\n};\nlet apiConfig = {};\nexport const setConf = function (c) {\n  apiConfig = c;\n};\n\n/** @param svg */\nfunction svgCreateDefs(svg) {\n  svg\n    .append('defs')\n    .append('g')\n    .attr('id', 'def-commit')\n    .append('circle')\n    .attr('r', config.nodeRadius)\n    .attr('cx', 0)\n    .attr('cy', 0);\n  svg\n    .select('#def-commit')\n    .append('foreignObject')\n    .attr('width', config.nodeLabel.width)\n    .attr('height', config.nodeLabel.height)\n    .attr('x', config.nodeLabel.x)\n    .attr('y', config.nodeLabel.y)\n    .attr('class', 'node-label')\n    .attr('requiredFeatures', 'http://www.w3.org/TR/SVG11/feature#Extensibility')\n    .append('p')\n    .html('');\n}\n\n/**\n * @param svg\n * @param points\n * @param colorIdx\n * @param interpolate\n */\nfunction svgDrawLine(svg, points, colorIdx, interpolate) {\n  const curve = interpolateToCurve(interpolate, curveBasis);\n  const color = config.branchColors[colorIdx % config.branchColors.length];\n  const lineGen = line()\n    .x(function (d) {\n      return Math.round(d.x);\n    })\n    .y(function (d) {\n      return Math.round(d.y);\n    })\n    .curve(curve);\n\n  svg\n    .append('svg:path')\n    .attr('d', lineGen(points))\n    .style('stroke', color)\n    .style('stroke-width', config.lineStrokeWidth)\n    .style('fill', 'none');\n}\n\n/**\n * Pass in the element and its pre-transform coords\n *\n * @param element\n * @param coords\n */\nfunction getElementCoords(element, coords) {\n  coords = coords || element.node().getBBox();\n  const ctm = element.node().getCTM();\n  const xn = ctm.e + coords.x * ctm.a;\n  const yn = ctm.f + coords.y * ctm.d;\n  return {\n    left: xn,\n    top: yn,\n    width: coords.width,\n    height: coords.height,\n  };\n}\n\n/**\n * @param svg\n * @param fromId\n * @param toId\n * @param direction\n * @param color\n */\nfunction svgDrawLineForCommits(svg, fromId, toId, direction, color) {\n  log.debug('svgDrawLineForCommits: ', fromId, toId);\n  const fromBbox = getElementCoords(svg.select('#node-' + fromId + ' circle'));\n  const toBbox = getElementCoords(svg.select('#node-' + toId + ' circle'));\n  switch (direction) {\n    case 'LR':\n      // (toBbox)\n      //  +--------\n      //          + (fromBbox)\n      if (fromBbox.left - toBbox.left > config.nodeSpacing) {\n        const lineStart = {\n          x: fromBbox.left - config.nodeSpacing,\n          y: toBbox.top + toBbox.height / 2,\n        };\n        const lineEnd = { x: toBbox.left + toBbox.width, y: toBbox.top + toBbox.height / 2 };\n        svgDrawLine(svg, [lineStart, lineEnd], color, 'linear');\n        svgDrawLine(\n          svg,\n          [\n            { x: fromBbox.left, y: fromBbox.top + fromBbox.height / 2 },\n            { x: fromBbox.left - config.nodeSpacing / 2, y: fromBbox.top + fromBbox.height / 2 },\n            { x: fromBbox.left - config.nodeSpacing / 2, y: lineStart.y },\n            lineStart,\n          ],\n          color\n        );\n      } else {\n        svgDrawLine(\n          svg,\n          [\n            {\n              x: fromBbox.left,\n              y: fromBbox.top + fromBbox.height / 2,\n            },\n            {\n              x: fromBbox.left - config.nodeSpacing / 2,\n              y: fromBbox.top + fromBbox.height / 2,\n            },\n            {\n              x: fromBbox.left - config.nodeSpacing / 2,\n              y: toBbox.top + toBbox.height / 2,\n            },\n            {\n              x: toBbox.left + toBbox.width,\n              y: toBbox.top + toBbox.height / 2,\n            },\n          ],\n          color\n        );\n      }\n      break;\n    case 'BT':\n      //      +           (fromBbox)\n      //      |\n      //      |\n      //              +   (toBbox)\n      if (toBbox.top - fromBbox.top > config.nodeSpacing) {\n        const lineStart = {\n          x: toBbox.left + toBbox.width / 2,\n          y: fromBbox.top + fromBbox.height + config.nodeSpacing,\n        };\n        const lineEnd = { x: toBbox.left + toBbox.width / 2, y: toBbox.top };\n        svgDrawLine(svg, [lineStart, lineEnd], color, 'linear');\n        svgDrawLine(\n          svg,\n          [\n            { x: fromBbox.left + fromBbox.width / 2, y: fromBbox.top + fromBbox.height },\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + fromBbox.height + config.nodeSpacing / 2,\n            },\n            { x: toBbox.left + toBbox.width / 2, y: lineStart.y - config.nodeSpacing / 2 },\n            lineStart,\n          ],\n          color\n        );\n      } else {\n        svgDrawLine(\n          svg,\n          [\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + fromBbox.height,\n            },\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + config.nodeSpacing / 2,\n            },\n            {\n              x: toBbox.left + toBbox.width / 2,\n              y: toBbox.top - config.nodeSpacing / 2,\n            },\n            {\n              x: toBbox.left + toBbox.width / 2,\n              y: toBbox.top,\n            },\n          ],\n          color\n        );\n      }\n      break;\n  }\n}\n\n/**\n * @param svg\n * @param selector\n */\nfunction cloneNode(svg, selector) {\n  return svg.select(selector).node().cloneNode(true);\n}\n\n/**\n * @param svg\n * @param commitid\n * @param branches\n * @param direction\n */\nfunction renderCommitHistory(svg, commitid, branches, direction) {\n  let commit;\n  const numCommits = Object.keys(allCommitsDict).length;\n  if (typeof commitid === 'string') {\n    let cnt = 0;\n    do {\n      cnt++;\n      commit = allCommitsDict[commitid];\n      log.debug('in renderCommitHistory', commit.id, commit.seq);\n      if (svg.select('#node-' + commitid).size() > 0) {\n        return;\n      }\n      svg\n        .append(function () {\n          return cloneNode(svg, '#def-commit');\n        })\n        .attr('class', 'commit')\n        .attr('id', function () {\n          return 'node-' + commit.id;\n        })\n        .attr('transform', function () {\n          switch (direction) {\n            case 'LR':\n              return (\n                'translate(' +\n                (commit.seq * config.nodeSpacing + config.leftMargin) +\n                ', ' +\n                branchNum * config.branchOffset +\n                ')'\n              );\n            case 'BT':\n              return (\n                'translate(' +\n                (branchNum * config.branchOffset + config.leftMargin) +\n                ', ' +\n                (numCommits - commit.seq) * config.nodeSpacing +\n                ')'\n              );\n          }\n        })\n        .attr('fill', config.nodeFillColor)\n        .attr('stroke', config.nodeStrokeColor)\n        .attr('stroke-width', config.nodeStrokeWidth);\n\n      let branch;\n      for (let branchName in branches) {\n        if (branches[branchName].commit === commit) {\n          branch = branches[branchName];\n          break;\n        }\n      }\n      if (branch) {\n        log.debug('found branch ', branch.name);\n        svg\n          .select('#node-' + commit.id + ' p')\n          .append('xhtml:span')\n          .attr('class', 'branch-label')\n          .text(branch.name + ', ');\n      }\n      svg\n        .select('#node-' + commit.id + ' p')\n        .append('xhtml:span')\n        .attr('class', 'commit-id')\n        .text(commit.id);\n      if (commit.message !== '' && direction === 'BT') {\n        svg\n          .select('#node-' + commit.id + ' p')\n          .append('xhtml:span')\n          .attr('class', 'commit-msg')\n          .text(', ' + commit.message);\n      }\n      commitid = commit.parent;\n    } while (commitid && allCommitsDict[commitid] && cnt < 1000);\n  }\n\n  if (Array.isArray(commitid)) {\n    log.debug('found merge commmit', commitid);\n    renderCommitHistory(svg, commitid[0], branches, direction);\n    branchNum++;\n    renderCommitHistory(svg, commitid[1], branches, direction);\n    branchNum--;\n  }\n}\n\n/**\n * @param svg\n * @param commit\n * @param direction\n * @param branchColor\n */\nfunction renderLines(svg, commit, direction, branchColor) {\n  branchColor = branchColor || 0;\n  let cnt = 0;\n  while (commit.seq > 0 && !commit.lineDrawn && cnt < 1000) {\n    cnt++;\n    if (typeof commit.parent === 'string') {\n      svgDrawLineForCommits(svg, commit.id, commit.parent, direction, branchColor);\n      commit.lineDrawn = true;\n      commit = allCommitsDict[commit.parent];\n    } else if (Array.isArray(commit.parent)) {\n      svgDrawLineForCommits(svg, commit.id, commit.parent[0], direction, branchColor);\n      svgDrawLineForCommits(svg, commit.id, commit.parent[1], direction, branchColor + 1);\n      renderLines(svg, allCommitsDict[commit.parent[1]], direction, branchColor + 1);\n      commit.lineDrawn = true;\n      commit = allCommitsDict[commit.parent[0]];\n    }\n  }\n}\n\nexport const draw = function (txt, id, ver) {\n  try {\n    const parser = gitGraphParser.parser;\n    parser.yy = db;\n    parser.yy.clear();\n\n    const securityLevel = getConfig().securityLevel;\n    // Handle root and ocument for when rendering in sanbox mode\n    let sandboxElement;\n    if (securityLevel === 'sandbox') {\n      sandboxElement = select('#i' + id);\n    }\n    const root =\n      securityLevel === 'sandbox'\n        ? select(sandboxElement.nodes()[0].contentDocument.body)\n        : select('body');\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n    log.debug('in gitgraph renderer', txt + '\\n', 'id:', id, ver);\n    // Parse the graph definition\n    parser.parse(txt + '\\n');\n\n    config = Object.assign(config, apiConfig, db.getOptions());\n    log.debug('effective options', config);\n    const direction = db.getDirection();\n    allCommitsDict = db.getCommits();\n    const branches = db.getBranchesAsObjArray();\n    if (direction === 'BT') {\n      config.nodeLabel.x = branches.length * config.branchOffset;\n      config.nodeLabel.width = '100%';\n      config.nodeLabel.y = -1 * 2 * config.nodeRadius;\n    }\n    const svg = root.select(`[id=\"${id}\"]`);\n    svgCreateDefs(svg);\n    branchNum = 1;\n    for (let branch in branches) {\n      const v = branches[branch];\n      renderCommitHistory(svg, v.commit.id, branches, direction);\n      renderLines(svg, v.commit, direction);\n      branchNum++;\n    }\n    svg.attr('height', function () {\n      if (direction === 'BT') return Object.keys(allCommitsDict).length * config.nodeSpacing;\n      return (branches.length + 1) * config.branchOffset;\n    });\n  } catch (e) {\n    log.error('Error while rendering gitgraph');\n    log.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = () =>\r\n  `\r\n  .commit-id,\r\n  .commit-msg,\r\n  .branch-label {\r\n    fill: lightgrey;\r\n    color: lightgrey;\r\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\r\n    font-family: var(--mermaid-font-family);\r\n  }\r\n`;\r\n\r\nexport default getStyles;\r\n","/** Created by knut on 15-01-14. */\nimport { log } from '../../logger';\n\nvar message = '';\nvar info = false;\n\nexport const setMessage = (txt) => {\n  log.debug('Setting message to: ' + txt);\n  message = txt;\n};\n\nexport const getMessage = () => {\n  return message;\n};\n\nexport const setInfo = (inf) => {\n  info = inf;\n};\n\nexport const getInfo = () => {\n  return info;\n};\n\n// export const parseError = (err, hash) => {\n//   global.mermaidAPI.parseError(err, hash)\n// }\n\nexport default {\n  setMessage,\n  getMessage,\n  setInfo,\n  getInfo,\n  // parseError\n};\n","/** Created by knut on 14-12-11. */\nimport { select } from 'd3';\nimport db from './infoDb';\nimport infoParser from './parser/info';\nimport { log } from '../../logger';\nimport { getConfig } from '../../config';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a an info picture in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n * @param {any} version\n */\nexport const draw = (text, id, version) => {\n  try {\n    const parser = infoParser.parser;\n    parser.yy = db;\n    log.debug('Renering info diagram\\n' + text);\n\n    const securityLevel = getConfig().securityLevel;\n    // Handle root and ocument for when rendering in sanbox mode\n    let sandboxElement;\n    if (securityLevel === 'sandbox') {\n      sandboxElement = select('#i' + id);\n    }\n    const root =\n      securityLevel === 'sandbox'\n        ? select(sandboxElement.nodes()[0].contentDocument.body)\n        : select('body');\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n    // Parse the graph definition\n    parser.parse(text);\n    log.debug('Parsed info diagram');\n    // Fetch the default direction, use TD if none was found\n    const svg = root.select('#' + id);\n\n    const g = svg.append('g');\n\n    g.append('text') // text label for the x axis\n      .attr('x', 100)\n      .attr('y', 40)\n      .attr('class', 'version')\n      .attr('font-size', '32px')\n      .style('text-anchor', 'middle')\n      .text('v ' + version);\n\n    svg.attr('height', 100);\n    svg.attr('width', 400);\n    // svg.attr('viewBox', '0 0 300 150');\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = () => ``;\r\n\r\nexport default getStyles;\r\n","import { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\n\nlet sections = {};\nlet title = '';\nlet showData = false;\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addSection = function (id, value) {\n  if (typeof sections[id] === 'undefined') {\n    sections[id] = value;\n    log.debug('Added new section :', id);\n  }\n};\nconst getSections = () => sections;\n\nconst setTitle = function (txt) {\n  title = txt;\n};\n\nconst setShowData = function (toggle) {\n  showData = toggle;\n};\n\nconst getShowData = function () {\n  return showData;\n};\n\nconst getTitle = function () {\n  return title;\n};\nconst cleanupValue = function (value) {\n  if (value.substring(0, 1) === ':') {\n    value = value.substring(1).trim();\n    return Number(value.trim());\n  } else {\n    return Number(value.trim());\n  }\n};\n\nconst clear = function () {\n  sections = {};\n  title = '';\n  showData = false;\n};\n// export const parseError = (err, hash) => {\n//   global.mermaidAPI.parseError(err, hash)\n// }\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().pie,\n  addSection,\n  getSections,\n  cleanupValue,\n  clear,\n  setTitle,\n  getTitle,\n  setShowData,\n  getShowData,\n  // parseError\n};\n","/** Created by AshishJ on 11-09-2019. */\nimport { select, scaleOrdinal, pie as d3pie, arc } from 'd3';\nimport pieData from './pieDb';\nimport pieParser from './parser/pie';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport * as configApi from '../../config';\n\nlet conf = configApi.getConfig();\n\n/**\n * Draws a Pie Chart with the data given in text.\n *\n * @param text\n * @param id\n */\nlet width;\nconst height = 450;\nexport const draw = (txt, id) => {\n  try {\n    conf = configApi.getConfig();\n    const parser = pieParser.parser;\n    parser.yy = pieData;\n    log.debug('Rendering info diagram\\n' + txt);\n\n    const securityLevel = configApi.getConfig().securityLevel;\n    // Handle root and ocument for when rendering in sanbox mode\n    let sandboxElement;\n    if (securityLevel === 'sandbox') {\n      sandboxElement = select('#i' + id);\n    }\n    const root =\n      securityLevel === 'sandbox'\n        ? select(sandboxElement.nodes()[0].contentDocument.body)\n        : select('body');\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n    // Parse the Pie Chart definition\n    parser.yy.clear();\n    parser.parse(txt);\n    log.debug('Parsed info diagram');\n    const elem = doc.getElementById(id);\n    width = elem.parentElement.offsetWidth;\n\n    if (typeof width === 'undefined') {\n      width = 1200;\n    }\n\n    if (typeof conf.useWidth !== 'undefined') {\n      width = conf.useWidth;\n    }\n    if (typeof conf.pie.useWidth !== 'undefined') {\n      width = conf.pie.useWidth;\n    }\n\n    const diagram = root.select('#' + id);\n    configureSvgSize(diagram, height, width, conf.pie.useMaxWidth);\n\n    // Set viewBox\n    elem.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n\n    // Fetch the default direction, use TD if none was found\n    var margin = 40;\n    var legendRectSize = 18;\n    var legendSpacing = 4;\n\n    var radius = Math.min(width, height) / 2 - margin;\n\n    var svg = diagram\n      .append('g')\n      .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n    var data = pieData.getSections();\n    var sum = 0;\n    Object.keys(data).forEach(function (key) {\n      sum += data[key];\n    });\n\n    const themeVariables = conf.themeVariables;\n    var myGeneratedColors = [\n      themeVariables.pie1,\n      themeVariables.pie2,\n      themeVariables.pie3,\n      themeVariables.pie4,\n      themeVariables.pie5,\n      themeVariables.pie6,\n      themeVariables.pie7,\n      themeVariables.pie8,\n      themeVariables.pie9,\n      themeVariables.pie10,\n      themeVariables.pie11,\n      themeVariables.pie12,\n    ];\n\n    // Set the color scale\n    var color = scaleOrdinal().range(myGeneratedColors);\n\n    // Compute the position of each group on the pie:\n    var pie = d3pie().value(function (d) {\n      return d[1];\n    });\n    var dataReady = pie(Object.entries(data));\n\n    // Shape helper to build arcs:\n    var arcGenerator = arc().innerRadius(0).outerRadius(radius);\n\n    // Build the pie chart: each part of the pie is a path that we build using the arc function.\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('path')\n      .attr('d', arcGenerator)\n      .attr('fill', function (d) {\n        return color(d.data[0]);\n      })\n      .attr('class', 'pieCircle');\n\n    // Now add the percentage.\n    // Use the centroid method to get the best coordinates.\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('text')\n      .text(function (d) {\n        return ((d.data[1] / sum) * 100).toFixed(0) + '%';\n      })\n      .attr('transform', function (d) {\n        return 'translate(' + arcGenerator.centroid(d) + ')';\n      })\n      .style('text-anchor', 'middle')\n      .attr('class', 'slice');\n\n    svg\n      .append('text')\n      .text(parser.yy.getTitle())\n      .attr('x', 0)\n      .attr('y', -(height - 50) / 2)\n      .attr('class', 'pieTitleText');\n\n    // Add the legends/annotations for each section\n    var legend = svg\n      .selectAll('.legend')\n      .data(color.domain())\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', function (d, i) {\n        var height = legendRectSize + legendSpacing;\n        var offset = (height * color.domain().length) / 2;\n        var horz = 12 * legendRectSize;\n        var vert = i * height - offset;\n        return 'translate(' + horz + ',' + vert + ')';\n      });\n\n    legend\n      .append('rect')\n      .attr('width', legendRectSize)\n      .attr('height', legendRectSize)\n      .style('fill', color)\n      .style('stroke', color);\n\n    legend\n      .data(dataReady)\n      .append('text')\n      .attr('x', legendRectSize + legendSpacing)\n      .attr('y', legendRectSize - legendSpacing)\n      .text(function (d) {\n        if (parser.yy.getShowData() || conf.showData || conf.pie.showData) {\n          return d.data[0] + ' [' + d.data[1] + ']';\n        } else {\n          return d.data[0];\n        }\n      });\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e);\n  }\n};\n\nexport default {\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .pieCircle{\n    stroke: ${options.pieStrokeColor};\n    stroke-width : ${options.pieStrokeWidth};\n    opacity : ${options.pieOpacity};\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${options.pieTitleTextSize};\n    fill: ${options.pieTitleTextColor};\n    font-family: ${options.fontFamily};\n  }\n  .slice {\n    font-family: ${options.fontFamily};\n    fill: ${options.pieSectionTextColor};\n    font-size:${options.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${options.pieLegendTextColor};\n    font-family: ${options.fontFamily};\n    font-size: ${options.pieLegendTextSize};\n  }\n`;\n\nexport default getStyles;\n","import * as configApi from '../../config';\nimport { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\n\nlet relations = [];\nlet latestRequirement = {};\nlet requirements = {};\nlet latestElement = {};\nlet elements = {};\n\nconst RequirementType = {\n  REQUIREMENT: 'Requirement',\n  FUNCTIONAL_REQUIREMENT: 'Functional Requirement',\n  INTERFACE_REQUIREMENT: 'Interface Requirement',\n  PERFORMANCE_REQUIREMENT: 'Performance Requirement',\n  PHYSICAL_REQUIREMENT: 'Physical Requirement',\n  DESIGN_CONSTRAINT: 'Design Constraint',\n};\n\nconst RiskLevel = {\n  LOW_RISK: 'Low',\n  MED_RISK: 'Medium',\n  HIGH_RISK: 'High',\n};\n\nconst VerifyType = {\n  VERIFY_ANALYSIS: 'Analysis',\n  VERIFY_DEMONSTRATION: 'Demonstration',\n  VERIFY_INSPECTION: 'Inspection',\n  VERIFY_TEST: 'Test',\n};\n\nconst Relationships = {\n  CONTAINS: 'contains',\n  COPIES: 'copies',\n  DERIVES: 'derives',\n  SATISFIES: 'satisfies',\n  VERIFIES: 'verifies',\n  REFINES: 'refines',\n  TRACES: 'traces',\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addRequirement = (name, type) => {\n  if (typeof requirements[name] === 'undefined') {\n    requirements[name] = {\n      name,\n      type,\n\n      id: latestRequirement.id,\n      text: latestRequirement.text,\n      risk: latestRequirement.risk,\n      verifyMethod: latestRequirement.verifyMethod,\n    };\n  }\n  latestRequirement = {};\n\n  return requirements[name];\n};\n\nconst getRequirements = () => requirements;\n\nconst setNewReqId = (id) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.id = id;\n  }\n};\n\nconst setNewReqText = (text) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.text = text;\n  }\n};\n\nconst setNewReqRisk = (risk) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.risk = risk;\n  }\n};\n\nconst setNewReqVerifyMethod = (verifyMethod) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.verifyMethod = verifyMethod;\n  }\n};\n\nconst addElement = (name) => {\n  if (typeof elements[name] === 'undefined') {\n    elements[name] = {\n      name,\n\n      type: latestElement.type,\n      docRef: latestElement.docRef,\n    };\n    log.info('Added new requirement: ', name);\n  }\n  latestElement = {};\n\n  return elements[name];\n};\n\nconst getElements = () => elements;\n\nconst setNewElementType = (type) => {\n  if (typeof latestElement != 'undefined') {\n    latestElement.type = type;\n  }\n};\n\nconst setNewElementDocRef = (docRef) => {\n  if (typeof latestElement != 'undefined') {\n    latestElement.docRef = docRef;\n  }\n};\n\nconst addRelationship = (type, src, dst) => {\n  relations.push({\n    type,\n    src,\n    dst,\n  });\n};\n\nconst getRelationships = () => relations;\n\nconst clear = () => {\n  relations = [];\n  latestRequirement = {};\n  requirements = {};\n  latestElement = {};\n  elements = {};\n};\n\nexport default {\n  RequirementType,\n  RiskLevel,\n  VerifyType,\n  Relationships,\n\n  parseDirective,\n  getConfig: () => configApi.getConfig().req,\n\n  addRequirement,\n  getRequirements,\n  setNewReqId,\n  setNewReqText,\n  setNewReqRisk,\n  setNewReqVerifyMethod,\n\n  addElement,\n  getElements,\n  setNewElementType,\n  setNewElementDocRef,\n\n  addRelationship,\n  getRelationships,\n\n  clear,\n};\n","const ReqMarkers = {\n  CONTAINS: 'contains',\n  ARROW: 'arrow',\n};\n\nconst insertLineEndings = (parentNode, conf) => {\n  let containsNode = parentNode\n    .append('defs')\n    .append('marker')\n    .attr('id', ReqMarkers.CONTAINS + '_line_ending')\n    .attr('refX', 0)\n    .attr('refY', conf.line_height / 2)\n    .attr('markerWidth', conf.line_height)\n    .attr('markerHeight', conf.line_height)\n    .attr('orient', 'auto')\n    .append('g');\n\n  containsNode\n    .append('circle')\n    .attr('cx', conf.line_height / 2)\n    .attr('cy', conf.line_height / 2)\n    .attr('r', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    // .attr('stroke-width', 1)\n    .attr('fill', 'none');\n\n  containsNode\n    .append('line')\n    .attr('x1', 0)\n    .attr('x2', conf.line_height)\n    .attr('y1', conf.line_height / 2)\n    .attr('y2', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    .attr('stroke-width', 1);\n\n  containsNode\n    .append('line')\n    .attr('y1', 0)\n    .attr('y2', conf.line_height)\n    .attr('x1', conf.line_height / 2)\n    .attr('x2', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    .attr('stroke-width', 1);\n\n  parentNode\n    .append('defs')\n    .append('marker')\n    .attr('id', ReqMarkers.ARROW + '_line_ending')\n    .attr('refX', conf.line_height)\n    .attr('refY', 0.5 * conf.line_height)\n    .attr('markerWidth', conf.line_height)\n    .attr('markerHeight', conf.line_height)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr(\n      'd',\n      `M0,0\n      L${conf.line_height},${conf.line_height / 2}\n      M${conf.line_height},${conf.line_height / 2}\n      L0,${conf.line_height}`\n    )\n    .attr('stroke-width', 1);\n  // .attr('stroke', conf.rect_border_color);\n};\n\nexport default {\n  ReqMarkers,\n  insertLineEndings,\n};\n","import { line, select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\n// import * as configApi from '../../config';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport common from '../common/common';\nimport { parser } from './parser/requirementDiagram';\nimport requirementDb from './requirementDb';\nimport markers from './requirementMarkers';\nimport { getConfig } from '../../config';\n\nconst conf = {};\nlet relCnt = 0;\n\nexport const setConf = function (cnf) {\n  if (typeof cnf === 'undefined') {\n    return;\n  }\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\nconst newRectNode = (parentNode, id) => {\n  return parentNode\n    .insert('rect', '#' + id)\n    .attr('class', 'req reqBox')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', conf.rect_min_width + 'px')\n    .attr('height', conf.rect_min_height + 'px');\n};\n\nconst newTitleNode = (parentNode, id, txts) => {\n  let x = conf.rect_min_width / 2;\n\n  let title = parentNode\n    .append('text')\n    .attr('class', 'req reqLabel reqTitle')\n    .attr('id', id)\n    .attr('x', x)\n    .attr('y', conf.rect_padding)\n    .attr('dominant-baseline', 'hanging');\n  // .attr(\n  //   'style',\n  //   'font-family: ' + configApi.getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n  // )\n  let i = 0;\n  txts.forEach((textStr) => {\n    if (i == 0) {\n      title\n        .append('tspan')\n        .attr('text-anchor', 'middle')\n        .attr('x', conf.rect_min_width / 2)\n        .attr('dy', 0)\n        .text(textStr);\n    } else {\n      title\n        .append('tspan')\n        .attr('text-anchor', 'middle')\n        .attr('x', conf.rect_min_width / 2)\n        .attr('dy', conf.line_height * 0.75)\n        .text(textStr);\n    }\n    i++;\n  });\n\n  let yPadding = 1.5 * conf.rect_padding;\n  let linePadding = i * conf.line_height * 0.75;\n  let totalY = yPadding + linePadding;\n\n  parentNode\n    .append('line')\n    .attr('class', 'req-title-line')\n    .attr('x1', '0')\n    .attr('x2', conf.rect_min_width)\n    .attr('y1', totalY)\n    .attr('y2', totalY);\n\n  return {\n    titleNode: title,\n    y: totalY,\n  };\n};\n\nconst newBodyNode = (parentNode, id, txts, yStart) => {\n  let body = parentNode\n    .append('text')\n    .attr('class', 'req reqLabel')\n    .attr('id', id)\n    .attr('x', conf.rect_padding)\n    .attr('y', yStart)\n    .attr('dominant-baseline', 'hanging');\n  // .attr(\n  //   'style',\n  //   'font-family: ' + configApi.getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n  // );\n\n  let currentRow = 0;\n  const charLimit = 30;\n  let wrappedTxts = [];\n  txts.forEach((textStr) => {\n    let currentTextLen = textStr.length;\n    while (currentTextLen > charLimit && currentRow < 3) {\n      let firstPart = textStr.substring(0, charLimit);\n      textStr = textStr.substring(charLimit, textStr.length);\n      currentTextLen = textStr.length;\n      wrappedTxts[wrappedTxts.length] = firstPart;\n      currentRow++;\n    }\n    if (currentRow == 3) {\n      let lastStr = wrappedTxts[wrappedTxts.length - 1];\n      wrappedTxts[wrappedTxts.length - 1] = lastStr.substring(0, lastStr.length - 4) + '...';\n    } else {\n      wrappedTxts[wrappedTxts.length] = textStr;\n    }\n    currentRow = 0;\n  });\n\n  wrappedTxts.forEach((textStr) => {\n    body.append('tspan').attr('x', conf.rect_padding).attr('dy', conf.line_height).text(textStr);\n  });\n\n  return body;\n};\n\nconst addEdgeLabel = (parentNode, svgPath, conf, txt) => {\n  // Find the half-way point\n  const len = svgPath.node().getTotalLength();\n  const labelPoint = svgPath.node().getPointAtLength(len * 0.5);\n\n  // Append a text node containing the label\n  const labelId = 'rel' + relCnt;\n  relCnt++;\n\n  const labelNode = parentNode\n    .append('text')\n    .attr('class', 'req relationshipLabel')\n    .attr('id', labelId)\n    .attr('x', labelPoint.x)\n    .attr('y', labelPoint.y)\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'middle')\n    // .attr('style', 'font-family: ' + conf.fontFamily + '; font-size: ' + conf.fontSize + 'px')\n    .text(txt);\n\n  // Figure out how big the opaque 'container' rectangle needs to be\n  const labelBBox = labelNode.node().getBBox();\n\n  // Insert the opaque rectangle before the text label\n  parentNode\n    .insert('rect', '#' + labelId)\n    .attr('class', 'req reqLabelBox')\n    .attr('x', labelPoint.x - labelBBox.width / 2)\n    .attr('y', labelPoint.y - labelBBox.height / 2)\n    .attr('width', labelBBox.width)\n    .attr('height', labelBBox.height)\n    .attr('fill', 'white')\n    .attr('fill-opacity', '85%');\n};\n\nconst drawRelationshipFromLayout = function (svg, rel, g, insert) {\n  // Find the edge relating to this relationship\n  const edge = g.edge(elementString(rel.src), elementString(rel.dst));\n\n  // Get a function that will generate the line path\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    });\n\n  // Insert the line at the right place\n  const svgPath = svg\n    .insert('path', '#' + insert)\n    .attr('class', 'er relationshipLine')\n    .attr('d', lineFunction(edge.points))\n    .attr('fill', 'none');\n\n  if (rel.type == requirementDb.Relationships.CONTAINS) {\n    svgPath.attr(\n      'marker-start',\n      'url(' + common.getUrl(conf.arrowMarkerAbsolute) + '#' + rel.type + '_line_ending' + ')'\n    );\n  } else {\n    svgPath.attr('stroke-dasharray', '10,7');\n    svgPath.attr(\n      'marker-end',\n      'url(' +\n        common.getUrl(conf.arrowMarkerAbsolute) +\n        '#' +\n        markers.ReqMarkers.ARROW +\n        '_line_ending' +\n        ')'\n    );\n  }\n\n  addEdgeLabel(svg, svgPath, conf, `<<${rel.type}>>`);\n\n  return;\n};\n\nexport const drawReqs = (reqs, graph, svgNode) => {\n  Object.keys(reqs).forEach((reqName) => {\n    let req = reqs[reqName];\n    reqName = elementString(reqName);\n    log.info('Added new requirement: ', reqName);\n\n    const groupNode = svgNode.append('g').attr('id', reqName);\n    const textId = 'req-' + reqName;\n    const rectNode = newRectNode(groupNode, textId);\n\n    let nodes = [];\n\n    let titleNodeInfo = newTitleNode(groupNode, reqName + '_title', [\n      `<<${req.type}>>`,\n      `${req.name}`,\n    ]);\n\n    nodes.push(titleNodeInfo.titleNode);\n\n    let bodyNode = newBodyNode(\n      groupNode,\n      reqName + '_body',\n      [\n        `Id: ${req.id}`,\n        `Text: ${req.text}`,\n        `Risk: ${req.risk}`,\n        `Verification: ${req.verifyMethod}`,\n      ],\n      titleNodeInfo.y\n    );\n\n    nodes.push(bodyNode);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(reqName, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: reqName,\n    });\n  });\n};\n\nexport const drawElements = (els, graph, svgNode) => {\n  Object.keys(els).forEach((elName) => {\n    let el = els[elName];\n    const id = elementString(elName);\n\n    const groupNode = svgNode.append('g').attr('id', id);\n    const textId = 'element-' + id;\n    const rectNode = newRectNode(groupNode, textId);\n\n    let nodes = [];\n\n    let titleNodeInfo = newTitleNode(groupNode, textId + '_title', [`<<Element>>`, `${elName}`]);\n\n    nodes.push(titleNodeInfo.titleNode);\n\n    let bodyNode = newBodyNode(\n      groupNode,\n      textId + '_body',\n      [`Type: ${el.type || 'Not Specified'}`, `Doc Ref: ${el.docRef || 'None'}`],\n      titleNodeInfo.y\n    );\n\n    nodes.push(bodyNode);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(id, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: id,\n    });\n  });\n};\n\nconst addRelationships = (relationships, g) => {\n  relationships.forEach(function (r) {\n    let src = elementString(r.src);\n    let dst = elementString(r.dst);\n    g.setEdge(src, dst, { relationship: r });\n  });\n  return relationships;\n};\n\nconst adjustEntities = function (svgNode, graph) {\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      svgNode.select('#' + v);\n      svgNode\n        .select('#' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y - graph.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n  return;\n};\n\nconst elementString = (str) => {\n  return str.replace(/\\s/g, '').replace(/\\./g, '_');\n};\n\nexport const draw = (text, id) => {\n  parser.yy = requirementDb;\n  parser.yy.clear();\n  parser.parse(text);\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  const svg = root.select(`[id='${id}']`);\n  markers.insertLineEndings(svg, conf);\n\n  const g = new graphlib.Graph({\n    multigraph: false,\n    compound: false,\n    directed: true,\n  })\n    .setGraph({\n      rankdir: conf.layoutDirection,\n      marginx: 20,\n      marginy: 20,\n      nodesep: 100,\n      edgesep: 100,\n      ranksep: 100,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let requirements = requirementDb.getRequirements();\n  let elements = requirementDb.getElements();\n  let relationships = requirementDb.getRelationships();\n\n  drawReqs(requirements, g, svg);\n  drawElements(elements, g, svg);\n  addRelationships(relationships, g);\n  dagre.layout(g);\n  adjustEntities(svg, g);\n\n  relationships.forEach(function (rel) {\n    drawRelationshipFromLayout(svg, rel, g, id);\n  });\n\n  // svg.attr('height', '500px');\n  const padding = conf.rect_padding;\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`);\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) => `\n\n  marker {\n    fill: ${options.relationColor};\n    stroke: ${options.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${options.lineColor};\n  }\n\n  svg {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n  }\n\n  .reqBox {\n    fill: ${options.requirementBackground};\n    fill-opacity: 100%;\n    stroke: ${options.requirementBorderColor};\n    stroke-width: ${options.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${options.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${options.relationLabelBackground};\n    fill-opacity: 100%;\n  }\n\n  .req-title-line {\n    stroke: ${options.requirementBorderColor};\n    stroke-width: ${options.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${options.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${options.relationLabelColor};\n  }\n\n`;\n// fill', conf.rect_fill)\nexport default getStyles;\n","import mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport { log } from '../../logger';\nimport { sanitizeText } from '../common/common';\n\nlet prevActor = undefined;\nlet actors = {};\nlet messages = [];\nconst notes = [];\nlet title = '';\nlet titleWrapped = false;\nlet sequenceNumbersEnabled = false;\nlet wrapEnabled = false;\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const addActor = function (id, name, description, type) {\n  // Don't allow description nulling\n  const old = actors[id];\n  if (old && name === old.name && description == null) return;\n\n  // Don't allow null descriptions, either\n  if (description == null || description.text == null) {\n    description = { text: name, wrap: null, type };\n  }\n  if (type == null || description.text == null) {\n    description = { text: name, wrap: null, type };\n  }\n\n  actors[id] = {\n    name: name,\n    description: description.text,\n    wrap: (description.wrap === undefined && autoWrap()) || !!description.wrap,\n    prevActor: prevActor,\n    links: {},\n    properties: {},\n    actorCnt: null,\n    rectData: null,\n    type: type || 'participant',\n  };\n  if (prevActor && actors[prevActor]) {\n    actors[prevActor].nextActor = id;\n  }\n\n  prevActor = id;\n};\n\nconst activationCount = (part) => {\n  let i;\n  let count = 0;\n  for (i = 0; i < messages.length; i++) {\n    if (messages[i].type === LINETYPE.ACTIVE_START) {\n      if (messages[i].from.actor === part) {\n        count++;\n      }\n    }\n    if (messages[i].type === LINETYPE.ACTIVE_END) {\n      if (messages[i].from.actor === part) {\n        count--;\n      }\n    }\n  }\n  return count;\n};\n\nexport const addMessage = function (idFrom, idTo, message, answer) {\n  messages.push({\n    from: idFrom,\n    to: idTo,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    answer: answer,\n  });\n};\n\nexport const addSignal = function (\n  idFrom,\n  idTo,\n  message = { text: undefined, wrap: undefined },\n  messageType\n) {\n  if (messageType === LINETYPE.ACTIVE_END) {\n    const cnt = activationCount(idFrom.actor);\n    if (cnt < 1) {\n      // Bail out as there is an activation signal from an inactive participant\n      let error = new Error('Trying to inactivate an inactive participant (' + idFrom.actor + ')');\n      error.hash = {\n        text: '->>-',\n        token: '->>-',\n        line: '1',\n        loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n        expected: [\"'ACTIVE_PARTICIPANT'\"],\n      };\n      throw error;\n    }\n  }\n  messages.push({\n    from: idFrom,\n    to: idTo,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    type: messageType,\n  });\n  return true;\n};\n\nexport const getMessages = function () {\n  return messages;\n};\n\nexport const getActors = function () {\n  return actors;\n};\nexport const getActor = function (id) {\n  return actors[id];\n};\nexport const getActorKeys = function () {\n  return Object.keys(actors);\n};\nexport const getTitle = function () {\n  return title;\n};\nexport const getTitleWrapped = function () {\n  return titleWrapped;\n};\nexport const enableSequenceNumbers = function () {\n  sequenceNumbersEnabled = true;\n};\nexport const showSequenceNumbers = () => sequenceNumbersEnabled;\n\nexport const setWrap = function (wrapSetting) {\n  wrapEnabled = wrapSetting;\n};\n\nexport const autoWrap = () => wrapEnabled;\n\nexport const clear = function () {\n  actors = {};\n  messages = [];\n};\n\nexport const parseMessage = function (str) {\n  const _str = str.trim();\n  const message = {\n    text: _str.replace(/^[:]?(?:no)?wrap:/, '').trim(),\n    wrap:\n      _str.match(/^[:]?wrap:/) !== null\n        ? true\n        : _str.match(/^[:]?nowrap:/) !== null\n        ? false\n        : undefined,\n  };\n  log.debug('parseMessage:', message);\n  return message;\n};\n\nexport const LINETYPE = {\n  SOLID: 0,\n  DOTTED: 1,\n  NOTE: 2,\n  SOLID_CROSS: 3,\n  DOTTED_CROSS: 4,\n  SOLID_OPEN: 5,\n  DOTTED_OPEN: 6,\n  LOOP_START: 10,\n  LOOP_END: 11,\n  ALT_START: 12,\n  ALT_ELSE: 13,\n  ALT_END: 14,\n  OPT_START: 15,\n  OPT_END: 16,\n  ACTIVE_START: 17,\n  ACTIVE_END: 18,\n  PAR_START: 19,\n  PAR_AND: 20,\n  PAR_END: 21,\n  RECT_START: 22,\n  RECT_END: 23,\n  SOLID_POINT: 24,\n  DOTTED_POINT: 25,\n};\n\nexport const ARROWTYPE = {\n  FILLED: 0,\n  OPEN: 1,\n};\n\nexport const PLACEMENT = {\n  LEFTOF: 0,\n  RIGHTOF: 1,\n  OVER: 2,\n};\n\nexport const addNote = function (actor, placement, message) {\n  const note = {\n    actor: actor,\n    placement: placement,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n  };\n\n  // Coerce actor into a [to, from, ...] array\n  const actors = [].concat(actor, actor);\n\n  notes.push(note);\n  messages.push({\n    from: actors[0],\n    to: actors[1],\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    type: LINETYPE.NOTE,\n    placement: placement,\n  });\n};\n\nexport const addLinks = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  // JSON.parse the text\n  try {\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    sanitizedText = sanitizedText.replace(/&amp;/g, '&');\n    sanitizedText = sanitizedText.replace(/&equals;/g, '=');\n    const links = JSON.parse(sanitizedText);\n    // add the deserialized text to the actor's links field.\n    insertLinks(actor, links);\n  } catch (e) {\n    log.error('error while parsing actor link text', e);\n  }\n};\n\nexport const addALink = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  try {\n    const links = {};\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    var sep = sanitizedText.indexOf('@');\n    sanitizedText = sanitizedText.replace(/&amp;/g, '&');\n    sanitizedText = sanitizedText.replace(/&equals;/g, '=');\n    var label = sanitizedText.slice(0, sep - 1).trim();\n    var link = sanitizedText.slice(sep + 1).trim();\n\n    links[label] = link;\n    // add the deserialized text to the actor's links field.\n    insertLinks(actor, links);\n  } catch (e) {\n    log.error('error while parsing actor link text', e);\n  }\n};\n\n/**\n * @param {any} actor\n * @param {any} links\n */\nfunction insertLinks(actor, links) {\n  if (actor.links == null) {\n    actor.links = links;\n  } else {\n    for (let key in links) {\n      actor.links[key] = links[key];\n    }\n  }\n}\n\nexport const addProperties = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  // JSON.parse the text\n  try {\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    const properties = JSON.parse(sanitizedText);\n    // add the deserialized text to the actor's property field.\n    insertProperties(actor, properties);\n  } catch (e) {\n    log.error('error while parsing actor properties text', e);\n  }\n};\n\n/**\n * @param {any} actor\n * @param {any} properties\n */\nfunction insertProperties(actor, properties) {\n  if (actor.properties == null) {\n    actor.properties = properties;\n  } else {\n    for (let key in properties) {\n      actor.properties[key] = properties[key];\n    }\n  }\n}\n\nexport const addDetails = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  const elem = document.getElementById(text.text);\n\n  // JSON.parse the text\n  try {\n    const text = elem.innerHTML;\n    const details = JSON.parse(text);\n    // add the deserialized text to the actor's property field.\n    if (details['properties']) {\n      insertProperties(actor, details['properties']);\n    }\n\n    if (details['links']) {\n      insertLinks(actor, details['links']);\n    }\n  } catch (e) {\n    log.error('error while parsing actor details text', e);\n  }\n};\n\nexport const getActorProperty = function (actor, key) {\n  if (typeof actor !== 'undefined' && typeof actor.properties !== 'undefined') {\n    return actor.properties[key];\n  }\n\n  return undefined;\n};\n\nexport const setTitle = function (titleWrap) {\n  title = titleWrap.text;\n  titleWrapped = (titleWrap.wrap === undefined && autoWrap()) || !!titleWrap.wrap;\n};\n\nexport const apply = function (param) {\n  if (param instanceof Array) {\n    param.forEach(function (item) {\n      apply(item);\n    });\n  } else {\n    switch (param.type) {\n      case 'addParticipant':\n        addActor(param.actor, param.actor, param.description, 'participant');\n        break;\n      case 'addActor':\n        addActor(param.actor, param.actor, param.description, 'actor');\n        break;\n      case 'activeStart':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'activeEnd':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'addNote':\n        addNote(param.actor, param.placement, param.text);\n        break;\n      case 'addLinks':\n        addLinks(param.actor, param.text);\n        break;\n      case 'addALink':\n        addALink(param.actor, param.text);\n        break;\n      case 'addProperties':\n        addProperties(param.actor, param.text);\n        break;\n      case 'addDetails':\n        addDetails(param.actor, param.text);\n        break;\n      case 'addMessage':\n        addSignal(param.from, param.to, param.msg, param.signalType);\n        break;\n      case 'loopStart':\n        addSignal(undefined, undefined, param.loopText, param.signalType);\n        break;\n      case 'loopEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'rectStart':\n        addSignal(undefined, undefined, param.color, param.signalType);\n        break;\n      case 'rectEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'optStart':\n        addSignal(undefined, undefined, param.optText, param.signalType);\n        break;\n      case 'optEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'altStart':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'else':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'altEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'setTitle':\n        setTitle(param.text);\n        break;\n      case 'parStart':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'and':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'parEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n    }\n  }\n};\n\nexport default {\n  addActor,\n  addMessage,\n  addSignal,\n  addLinks,\n  addDetails,\n  addProperties,\n  autoWrap,\n  setWrap,\n  enableSequenceNumbers,\n  showSequenceNumbers,\n  getMessages,\n  getActors,\n  getActor,\n  getActorKeys,\n  getActorProperty,\n  getTitle,\n  parseDirective,\n  getConfig: () => configApi.getConfig().sequence,\n  getTitleWrapped,\n  clear,\n  parseMessage,\n  LINETYPE,\n  ARROWTYPE,\n  PLACEMENT,\n  addNote,\n  setTitle,\n  apply,\n};\n","import { select, selectAll } from 'd3';\nimport svgDraw, { drawText, fixLifeLineHeights } from './svgDraw';\nimport { log } from '../../logger';\nimport { parser } from './parser/sequenceDiagram';\nimport common from '../common/common';\nimport sequenceDb from './sequenceDb';\nimport * as configApi from '../../config';\nimport utils, { assignWithDepth, configureSvgSize } from '../../utils';\n\nparser.yy = sequenceDb;\n\nlet conf = {};\n\nexport const bounds = {\n  data: {\n    startx: undefined,\n    stopx: undefined,\n    starty: undefined,\n    stopy: undefined,\n  },\n  verticalPos: 0,\n  sequenceItems: [],\n  activations: [],\n  models: {\n    getHeight: function () {\n      return (\n        Math.max.apply(\n          null,\n          this.actors.length === 0 ? [0] : this.actors.map((actor) => actor.height || 0)\n        ) +\n        (this.loops.length === 0\n          ? 0\n          : this.loops.map((it) => it.height || 0).reduce((acc, h) => acc + h)) +\n        (this.messages.length === 0\n          ? 0\n          : this.messages.map((it) => it.height || 0).reduce((acc, h) => acc + h)) +\n        (this.notes.length === 0\n          ? 0\n          : this.notes.map((it) => it.height || 0).reduce((acc, h) => acc + h))\n      );\n    },\n    clear: function () {\n      this.actors = [];\n      this.loops = [];\n      this.messages = [];\n      this.notes = [];\n    },\n    addActor: function (actorModel) {\n      this.actors.push(actorModel);\n    },\n    addLoop: function (loopModel) {\n      this.loops.push(loopModel);\n    },\n    addMessage: function (msgModel) {\n      this.messages.push(msgModel);\n    },\n    addNote: function (noteModel) {\n      this.notes.push(noteModel);\n    },\n    lastActor: function () {\n      return this.actors[this.actors.length - 1];\n    },\n    lastLoop: function () {\n      return this.loops[this.loops.length - 1];\n    },\n    lastMessage: function () {\n      return this.messages[this.messages.length - 1];\n    },\n    lastNote: function () {\n      return this.notes[this.notes.length - 1];\n    },\n    actors: [],\n    loops: [],\n    messages: [],\n    notes: [],\n  },\n  init: function () {\n    this.sequenceItems = [];\n    this.activations = [];\n    this.models.clear();\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n    };\n    this.verticalPos = 0;\n    setConf(parser.yy.getConfig());\n  },\n  updateVal: function (obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  },\n  updateBounds: function (startx, starty, stopx, stopy) {\n    const _self = this;\n    let cnt = 0;\n    /** @param {any} type */\n    function updateFn(type) {\n      return function updateItemBounds(item) {\n        cnt++;\n        // The loop sequenceItems is a stack so the biggest margins in the beginning of the sequenceItems\n        const n = _self.sequenceItems.length - cnt + 1;\n\n        _self.updateVal(item, 'starty', starty - n * conf.boxMargin, Math.min);\n        _self.updateVal(item, 'stopy', stopy + n * conf.boxMargin, Math.max);\n\n        _self.updateVal(bounds.data, 'startx', startx - n * conf.boxMargin, Math.min);\n        _self.updateVal(bounds.data, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n        if (!(type === 'activation')) {\n          _self.updateVal(item, 'startx', startx - n * conf.boxMargin, Math.min);\n          _self.updateVal(item, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n          _self.updateVal(bounds.data, 'starty', starty - n * conf.boxMargin, Math.min);\n          _self.updateVal(bounds.data, 'stopy', stopy + n * conf.boxMargin, Math.max);\n        }\n      };\n    }\n\n    this.sequenceItems.forEach(updateFn());\n    this.activations.forEach(updateFn('activation'));\n  },\n  insert: function (startx, starty, stopx, stopy) {\n    const _startx = Math.min(startx, stopx);\n    const _stopx = Math.max(startx, stopx);\n    const _starty = Math.min(starty, stopy);\n    const _stopy = Math.max(starty, stopy);\n\n    this.updateVal(bounds.data, 'startx', _startx, Math.min);\n    this.updateVal(bounds.data, 'starty', _starty, Math.min);\n    this.updateVal(bounds.data, 'stopx', _stopx, Math.max);\n    this.updateVal(bounds.data, 'stopy', _stopy, Math.max);\n\n    this.updateBounds(_startx, _starty, _stopx, _stopy);\n  },\n  newActivation: function (message, diagram, actors) {\n    const actorRect = actors[message.from.actor];\n    const stackedSize = actorActivations(message.from.actor).length || 0;\n    const x = actorRect.x + actorRect.width / 2 + ((stackedSize - 1) * conf.activationWidth) / 2;\n    this.activations.push({\n      startx: x,\n      starty: this.verticalPos + 2,\n      stopx: x + conf.activationWidth,\n      stopy: undefined,\n      actor: message.from.actor,\n      anchored: svgDraw.anchorElement(diagram),\n    });\n  },\n  endActivation: function (message) {\n    // find most recent activation for given actor\n    const lastActorActivationIdx = this.activations\n      .map(function (activation) {\n        return activation.actor;\n      })\n      .lastIndexOf(message.from.actor);\n    return this.activations.splice(lastActorActivationIdx, 1)[0];\n  },\n  createLoop: function (title = { message: undefined, wrap: false, width: undefined }, fill) {\n    return {\n      startx: undefined,\n      starty: this.verticalPos,\n      stopx: undefined,\n      stopy: undefined,\n      title: title.message,\n      wrap: title.wrap,\n      width: title.width,\n      height: 0,\n      fill: fill,\n    };\n  },\n  newLoop: function (title = { message: undefined, wrap: false, width: undefined }, fill) {\n    this.sequenceItems.push(this.createLoop(title, fill));\n  },\n  endLoop: function () {\n    return this.sequenceItems.pop();\n  },\n  addSectionToLoop: function (message) {\n    const loop = this.sequenceItems.pop();\n    loop.sections = loop.sections || [];\n    loop.sectionTitles = loop.sectionTitles || [];\n    loop.sections.push({ y: bounds.getVerticalPos(), height: 0 });\n    loop.sectionTitles.push(message);\n    this.sequenceItems.push(loop);\n  },\n  bumpVerticalPos: function (bump) {\n    this.verticalPos = this.verticalPos + bump;\n    this.data.stopy = this.verticalPos;\n  },\n  getVerticalPos: function () {\n    return this.verticalPos;\n  },\n  getBounds: function () {\n    return { bounds: this.data, models: this.models };\n  },\n};\n\n/**\n * Draws an note in the diagram with the attached line\n *\n * @param {any} elem - The diagram to draw to.\n * @param {{ x: number; y: number; message: string; width: number }} noteModel - Startx: x axis\n *   start position, verticalPos: y axis position, messsage: the message to be shown, width: Set\n *   this with a custom width to override the default configured width.\n */\nconst drawNote = function (elem, noteModel) {\n  bounds.bumpVerticalPos(conf.boxMargin);\n  noteModel.height = conf.boxMargin;\n  noteModel.starty = bounds.getVerticalPos();\n  const rect = svgDraw.getNoteRect();\n  rect.x = noteModel.startx;\n  rect.y = noteModel.starty;\n  rect.width = noteModel.width || conf.width;\n  rect.class = 'note';\n\n  let g = elem.append('g');\n  const rectElem = svgDraw.drawRect(g, rect);\n  const textObj = svgDraw.getTextObj();\n  textObj.x = noteModel.startx;\n  textObj.y = noteModel.starty;\n  textObj.width = rect.width;\n  textObj.dy = '1em';\n  textObj.text = noteModel.message;\n  textObj.class = 'noteText';\n  textObj.fontFamily = conf.noteFontFamily;\n  textObj.fontSize = conf.noteFontSize;\n  textObj.fontWeight = conf.noteFontWeight;\n  textObj.anchor = conf.noteAlign;\n  textObj.textMargin = conf.noteMargin;\n  textObj.valign = conf.noteAlign;\n\n  let textElem = drawText(g, textObj);\n\n  let textHeight = Math.round(\n    textElem\n      .map((te) => (te._groups || te)[0][0].getBBox().height)\n      .reduce((acc, curr) => acc + curr)\n  );\n\n  rectElem.attr('height', textHeight + 2 * conf.noteMargin);\n  noteModel.height += textHeight + 2 * conf.noteMargin;\n  bounds.bumpVerticalPos(textHeight + 2 * conf.noteMargin);\n  noteModel.stopy = noteModel.starty + textHeight + 2 * conf.noteMargin;\n  noteModel.stopx = noteModel.startx + rect.width;\n  bounds.insert(noteModel.startx, noteModel.starty, noteModel.stopx, noteModel.stopy);\n  bounds.models.addNote(noteModel);\n};\n\nconst messageFont = (cnf) => {\n  return {\n    fontFamily: cnf.messageFontFamily,\n    fontSize: cnf.messageFontSize,\n    fontWeight: cnf.messageFontWeight,\n  };\n};\nconst noteFont = (cnf) => {\n  return {\n    fontFamily: cnf.noteFontFamily,\n    fontSize: cnf.noteFontSize,\n    fontWeight: cnf.noteFontWeight,\n  };\n};\nconst actorFont = (cnf) => {\n  return {\n    fontFamily: cnf.actorFontFamily,\n    fontSize: cnf.actorFontSize,\n    fontWeight: cnf.actorFontWeight,\n  };\n};\n\n/**\n * Draws a message\n *\n * @param {any} g - The parent of the message element\n * @param {any} msgModel - The model containing fields describing a message\n */\nconst drawMessage = function (g, msgModel) {\n  bounds.bumpVerticalPos(10);\n  const { startx, stopx, starty, message, type, sequenceIndex } = msgModel;\n  const lines = common.splitBreaks(message).length;\n  let textDims = utils.calculateTextDimensions(message, messageFont(conf));\n  const lineHeight = textDims.height / lines;\n  msgModel.height += lineHeight;\n\n  bounds.bumpVerticalPos(lineHeight);\n  const textObj = svgDraw.getTextObj();\n  textObj.x = startx;\n  textObj.y = starty + 10;\n  textObj.width = stopx - startx;\n  textObj.class = 'messageText';\n  textObj.dy = '1em';\n  textObj.text = message;\n  textObj.fontFamily = conf.messageFontFamily;\n  textObj.fontSize = conf.messageFontSize;\n  textObj.fontWeight = conf.messageFontWeight;\n  textObj.anchor = conf.messageAlign;\n  textObj.valign = conf.messageAlign;\n  textObj.textMargin = conf.wrapPadding;\n  textObj.tspan = false;\n\n  drawText(g, textObj);\n\n  let totalOffset = textDims.height - 10;\n\n  let textWidth = textDims.width;\n\n  let line, lineStarty;\n  if (startx === stopx) {\n    lineStarty = bounds.getVerticalPos() + totalOffset;\n    if (conf.rightAngles) {\n      line = g\n        .append('path')\n        .attr(\n          'd',\n          `M  ${startx},${lineStarty} H ${startx + Math.max(conf.width / 2, textWidth / 2)} V ${\n            lineStarty + 25\n          } H ${startx}`\n        );\n    } else {\n      totalOffset += conf.boxMargin;\n\n      lineStarty = bounds.getVerticalPos() + totalOffset;\n      line = g\n        .append('path')\n        .attr(\n          'd',\n          'M ' +\n            startx +\n            ',' +\n            lineStarty +\n            ' C ' +\n            (startx + 60) +\n            ',' +\n            (lineStarty - 10) +\n            ' ' +\n            (startx + 60) +\n            ',' +\n            (lineStarty + 30) +\n            ' ' +\n            startx +\n            ',' +\n            (lineStarty + 20)\n        );\n    }\n\n    totalOffset += 30;\n    const dx = Math.max(textWidth / 2, conf.width / 2);\n    bounds.insert(\n      startx - dx,\n      bounds.getVerticalPos() - 10 + totalOffset,\n      stopx + dx,\n      bounds.getVerticalPos() + 30 + totalOffset\n    );\n  } else {\n    totalOffset += conf.boxMargin;\n    lineStarty = bounds.getVerticalPos() + totalOffset;\n    line = g.append('line');\n    line.attr('x1', startx);\n    line.attr('y1', lineStarty);\n    line.attr('x2', stopx);\n    line.attr('y2', lineStarty);\n    bounds.insert(startx, lineStarty - 10, stopx, lineStarty);\n  }\n  // Make an SVG Container\n  // Draw the line\n  if (\n    type === parser.yy.LINETYPE.DOTTED ||\n    type === parser.yy.LINETYPE.DOTTED_CROSS ||\n    type === parser.yy.LINETYPE.DOTTED_POINT ||\n    type === parser.yy.LINETYPE.DOTTED_OPEN\n  ) {\n    line.style('stroke-dasharray', '3, 3');\n    line.attr('class', 'messageLine1');\n  } else {\n    line.attr('class', 'messageLine0');\n  }\n\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  line.attr('stroke-width', 2);\n  line.attr('stroke', 'none'); // handled by theme/css anyway\n  line.style('fill', 'none'); // remove any fill colour\n  if (type === parser.yy.LINETYPE.SOLID || type === parser.yy.LINETYPE.DOTTED) {\n    line.attr('marker-end', 'url(' + url + '#arrowhead)');\n  }\n  if (type === parser.yy.LINETYPE.SOLID_POINT || type === parser.yy.LINETYPE.DOTTED_POINT) {\n    line.attr('marker-end', 'url(' + url + '#filled-head)');\n  }\n\n  if (type === parser.yy.LINETYPE.SOLID_CROSS || type === parser.yy.LINETYPE.DOTTED_CROSS) {\n    line.attr('marker-end', 'url(' + url + '#crosshead)');\n  }\n\n  // add node number\n  if (sequenceDb.showSequenceNumbers() || conf.showSequenceNumbers) {\n    line.attr('marker-start', 'url(' + url + '#sequencenumber)');\n    g.append('text')\n      .attr('x', startx)\n      .attr('y', lineStarty + 4)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '12px')\n      .attr('text-anchor', 'middle')\n      .attr('textLength', '16px')\n      .attr('class', 'sequenceNumber')\n      .text(sequenceIndex);\n  }\n  bounds.bumpVerticalPos(totalOffset);\n  msgModel.height += totalOffset;\n  msgModel.stopy = msgModel.starty + msgModel.height;\n  bounds.insert(msgModel.fromBounds, msgModel.starty, msgModel.toBounds, msgModel.stopy);\n};\n\nexport const drawActors = function (diagram, actors, actorKeys, verticalPos) {\n  // Draw the actors\n  let prevWidth = 0;\n  let prevMargin = 0;\n  let maxHeight = 0;\n  for (let i = 0; i < actorKeys.length; i++) {\n    const actor = actors[actorKeys[i]];\n\n    // Add some rendering data to the object\n    actor.width = actor.width || conf.width;\n    actor.height = Math.max(actor.height || conf.height, conf.height);\n    actor.margin = actor.margin || conf.actorMargin;\n\n    actor.x = prevWidth + prevMargin;\n    actor.y = verticalPos;\n\n    // Draw the box with the attached line\n    const height = svgDraw.drawActor(diagram, actor, conf);\n    maxHeight = Math.max(maxHeight, height);\n    bounds.insert(actor.x, verticalPos, actor.x + actor.width, actor.height);\n\n    prevWidth += actor.width;\n    prevMargin += actor.margin;\n    bounds.models.addActor(actor);\n  }\n\n  // Add a margin between the actor boxes and the first arrow\n  bounds.bumpVerticalPos(maxHeight);\n};\n\nexport const drawActorsPopup = function (diagram, actors, actorKeys, doc) {\n  var maxHeight = 0;\n  var maxWidth = 0;\n  for (let i = 0; i < actorKeys.length; i++) {\n    const actor = actors[actorKeys[i]];\n    const minMenuWidth = getRequiredPopupWidth(actor);\n    var menuDimensions = svgDraw.drawPopup(\n      diagram,\n      actor,\n      minMenuWidth,\n      conf,\n      conf.forceMenus,\n      doc\n    );\n    if (menuDimensions.height > maxHeight) {\n      maxHeight = menuDimensions.height;\n    }\n    if (menuDimensions.width + actor.x > maxWidth) {\n      maxWidth = menuDimensions.width + actor.x;\n    }\n  }\n\n  return { maxHeight: maxHeight, maxWidth: maxWidth };\n};\n\nexport const setConf = function (cnf) {\n  assignWithDepth(conf, cnf);\n\n  if (cnf.fontFamily) {\n    conf.actorFontFamily = conf.noteFontFamily = conf.messageFontFamily = cnf.fontFamily;\n  }\n  if (cnf.fontSize) {\n    conf.actorFontSize = conf.noteFontSize = conf.messageFontSize = cnf.fontSize;\n  }\n  if (cnf.fontWeight) {\n    conf.actorFontWeight = conf.noteFontWeight = conf.messageFontWeight = cnf.fontWeight;\n  }\n};\n\nconst actorActivations = function (actor) {\n  return bounds.activations.filter(function (activation) {\n    return activation.actor === actor;\n  });\n};\n\nconst activationBounds = function (actor, actors) {\n  // handle multiple stacked activations for same actor\n  const actorObj = actors[actor];\n  const activations = actorActivations(actor);\n\n  const left = activations.reduce(function (acc, activation) {\n    return Math.min(acc, activation.startx);\n  }, actorObj.x + actorObj.width / 2);\n  const right = activations.reduce(function (acc, activation) {\n    return Math.max(acc, activation.stopx);\n  }, actorObj.x + actorObj.width / 2);\n  return [left, right];\n};\n\n/**\n * @param {any} loopWidths\n * @param {any} msg\n * @param {any} preMargin\n * @param {any} postMargin\n * @param {any} addLoopFn\n */\nfunction adjustLoopHeightForWrap(loopWidths, msg, preMargin, postMargin, addLoopFn) {\n  bounds.bumpVerticalPos(preMargin);\n  let heightAdjust = postMargin;\n  if (msg.id && msg.message && loopWidths[msg.id]) {\n    let loopWidth = loopWidths[msg.id].width;\n    let textConf = messageFont(conf);\n    msg.message = utils.wrapLabel(`[${msg.message}]`, loopWidth - 2 * conf.wrapPadding, textConf);\n    msg.width = loopWidth;\n    msg.wrap = true;\n\n    // const lines = common.splitBreaks(msg.message).length;\n    const textDims = utils.calculateTextDimensions(msg.message, textConf);\n    const totalOffset = Math.max(textDims.height, conf.labelBoxHeight);\n    heightAdjust = postMargin + totalOffset;\n    log.debug(`${totalOffset} - ${msg.message}`);\n  }\n  addLoopFn(msg);\n  bounds.bumpVerticalPos(heightAdjust);\n}\n\n/**\n * Draws a sequenceDiagram in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n */\nexport const draw = function (text, id) {\n  conf = configApi.getConfig().sequence;\n  const securityLevel = configApi.getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  parser.yy.clear();\n  parser.yy.setWrap(conf.wrap);\n  parser.parse(text + '\\n');\n  bounds.init();\n  log.debug(`C:${JSON.stringify(conf, null, 2)}`);\n\n  const diagram =\n    securityLevel === 'sandbox' ? root.select(`[id=\"${id}\"]`) : select(`[id=\"${id}\"]`);\n\n  // Fetch data from the parsing\n  const actors = parser.yy.getActors();\n  const actorKeys = parser.yy.getActorKeys();\n  const messages = parser.yy.getMessages();\n  const title = parser.yy.getTitle();\n\n  const maxMessageWidthPerActor = getMaxMessageWidthPerActor(actors, messages);\n  conf.height = calculateActorMargins(actors, maxMessageWidthPerActor);\n\n  svgDraw.insertComputerIcon(diagram);\n  svgDraw.insertDatabaseIcon(diagram);\n  svgDraw.insertClockIcon(diagram);\n\n  drawActors(diagram, actors, actorKeys, 0);\n  const loopWidths = calculateLoopBounds(messages, actors, maxMessageWidthPerActor);\n\n  // The arrow head definition is attached to the svg once\n  svgDraw.insertArrowHead(diagram);\n  svgDraw.insertArrowCrossHead(diagram);\n  svgDraw.insertArrowFilledHead(diagram);\n  svgDraw.insertSequenceNumber(diagram);\n\n  /**\n   * @param {any} msg\n   * @param {any} verticalPos\n   */\n  function activeEnd(msg, verticalPos) {\n    const activationData = bounds.endActivation(msg);\n    if (activationData.starty + 18 > verticalPos) {\n      activationData.starty = verticalPos - 6;\n      verticalPos += 12;\n    }\n    svgDraw.drawActivation(\n      diagram,\n      activationData,\n      verticalPos,\n      conf,\n      actorActivations(msg.from.actor).length\n    );\n\n    bounds.insert(activationData.startx, verticalPos - 10, activationData.stopx, verticalPos);\n  }\n\n  // Draw the messages/signals\n  let sequenceIndex = 1;\n  messages.forEach(function (msg) {\n    let loopModel, noteModel, msgModel;\n\n    switch (msg.type) {\n      case parser.yy.LINETYPE.NOTE:\n        noteModel = msg.noteModel;\n        drawNote(diagram, noteModel);\n        break;\n      case parser.yy.LINETYPE.ACTIVE_START:\n        bounds.newActivation(msg, diagram, actors);\n        break;\n      case parser.yy.LINETYPE.ACTIVE_END:\n        activeEnd(msg, bounds.getVerticalPos());\n        break;\n      case parser.yy.LINETYPE.LOOP_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.LOOP_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'loop', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case parser.yy.LINETYPE.RECT_START:\n        adjustLoopHeightForWrap(loopWidths, msg, conf.boxMargin, conf.boxMargin, (message) =>\n          bounds.newLoop(undefined, message.message)\n        );\n        break;\n      case parser.yy.LINETYPE.RECT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawBackgroundRect(diagram, loopModel);\n        bounds.models.addLoop(loopModel);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        break;\n      case parser.yy.LINETYPE.OPT_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.OPT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'opt', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case parser.yy.LINETYPE.ALT_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.ALT_ELSE:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin + conf.boxTextMargin,\n          conf.boxMargin,\n          (message) => bounds.addSectionToLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.ALT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'alt', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case parser.yy.LINETYPE.PAR_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.PAR_AND:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin + conf.boxTextMargin,\n          conf.boxMargin,\n          (message) => bounds.addSectionToLoop(message)\n        );\n        break;\n      case parser.yy.LINETYPE.PAR_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'par', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      default:\n        try {\n          // lastMsg = msg\n          msgModel = msg.msgModel;\n          msgModel.starty = bounds.getVerticalPos();\n          msgModel.sequenceIndex = sequenceIndex;\n          drawMessage(diagram, msgModel);\n          bounds.models.addMessage(msgModel);\n        } catch (e) {\n          log.error('error while drawing message', e);\n        }\n    }\n    // Increment sequence counter if msg.type is a line (and not another event like activation or note, etc)\n    if (\n      [\n        parser.yy.LINETYPE.SOLID_OPEN,\n        parser.yy.LINETYPE.DOTTED_OPEN,\n        parser.yy.LINETYPE.SOLID,\n        parser.yy.LINETYPE.DOTTED,\n        parser.yy.LINETYPE.SOLID_CROSS,\n        parser.yy.LINETYPE.DOTTED_CROSS,\n        parser.yy.LINETYPE.SOLID_POINT,\n        parser.yy.LINETYPE.DOTTED_POINT,\n      ].includes(msg.type)\n    ) {\n      sequenceIndex++;\n    }\n  });\n\n  if (conf.mirrorActors) {\n    // Draw actors below diagram\n    bounds.bumpVerticalPos(conf.boxMargin * 2);\n    drawActors(diagram, actors, actorKeys, bounds.getVerticalPos());\n    bounds.bumpVerticalPos(conf.boxMargin);\n    fixLifeLineHeights(diagram, bounds.getVerticalPos());\n  }\n\n  // only draw popups for the top row of actors.\n  var requiredBoxSize = drawActorsPopup(diagram, actors, actorKeys, doc);\n\n  const { bounds: box } = bounds.getBounds();\n\n  // Adjust line height of actor lines now that the height of the diagram is known\n  log.debug('For line height fix Querying: #' + id + ' .actor-line');\n  const actorLines = selectAll('#' + id + ' .actor-line');\n  actorLines.attr('y2', box.stopy);\n\n  // Make sure the height of the diagram supports long menus.\n  let boxHeight = box.stopy - box.starty;\n  if (boxHeight < requiredBoxSize.maxHeight) {\n    boxHeight = requiredBoxSize.maxHeight;\n  }\n\n  let height = boxHeight + 2 * conf.diagramMarginY;\n  if (conf.mirrorActors) {\n    height = height - conf.boxMargin + conf.bottomMarginAdj;\n  }\n\n  // Make sure the width of the diagram supports wide menus.\n  let boxWidth = box.stopx - box.startx;\n  if (boxWidth < requiredBoxSize.maxWidth) {\n    boxWidth = requiredBoxSize.maxWidth;\n  }\n  const width = boxWidth + 2 * conf.diagramMarginX;\n\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', (box.stopx - box.startx) / 2 - 2 * conf.diagramMarginX)\n      .attr('y', -25);\n  }\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  const extraVertForTitle = title ? 40 : 0;\n  diagram.attr(\n    'viewBox',\n    box.startx -\n      conf.diagramMarginX +\n      ' -' +\n      (conf.diagramMarginY + extraVertForTitle) +\n      ' ' +\n      width +\n      ' ' +\n      (height + extraVertForTitle)\n  );\n  log.debug(`models:`, bounds.models);\n};\n\n/**\n * Retrieves the max message width of each actor, supports signals (messages, loops) and notes.\n *\n * It will enumerate each given message, and will determine its text width, in relation to the actor\n * it originates from, and destined to.\n *\n * @param {any} actors - The actors map\n * @param {Array} messages - A list of message objects to iterate\n * @returns {any}\n */\nconst getMaxMessageWidthPerActor = function (actors, messages) {\n  const maxMessageWidthPerActor = {};\n\n  messages.forEach(function (msg) {\n    if (actors[msg.to] && actors[msg.from]) {\n      const actor = actors[msg.to];\n\n      // If this is the first actor, and the message is left of it, no need to calculate the margin\n      if (msg.placement === parser.yy.PLACEMENT.LEFTOF && !actor.prevActor) {\n        return;\n      }\n\n      // If this is the last actor, and the message is right of it, no need to calculate the margin\n      if (msg.placement === parser.yy.PLACEMENT.RIGHTOF && !actor.nextActor) {\n        return;\n      }\n\n      const isNote = msg.placement !== undefined;\n      const isMessage = !isNote;\n\n      const textFont = isNote ? noteFont(conf) : messageFont(conf);\n      let wrappedMessage = msg.wrap\n        ? utils.wrapLabel(msg.message, conf.width - 2 * conf.wrapPadding, textFont)\n        : msg.message;\n      const messageDimensions = utils.calculateTextDimensions(wrappedMessage, textFont);\n      const messageWidth = messageDimensions.width + 2 * conf.wrapPadding;\n\n      /*\n       * The following scenarios should be supported:\n       *\n       * - There's a message (non-note) between fromActor and toActor\n       *   - If fromActor is on the right and toActor is on the left, we should\n       *     define the toActor's margin\n       *   - If fromActor is on the left and toActor is on the right, we should\n       *     define the fromActor's margin\n       * - There's a note, in which case fromActor == toActor\n       *   - If the note is to the left of the actor, we should define the previous actor\n       *     margin\n       *   - If the note is on the actor, we should define both the previous and next actor\n       *     margins, each being the half of the note size\n       *   - If the note is on the right of the actor, we should define the current actor\n       *     margin\n       */\n      if (isMessage && msg.from === actor.nextActor) {\n        maxMessageWidthPerActor[msg.to] = Math.max(\n          maxMessageWidthPerActor[msg.to] || 0,\n          messageWidth\n        );\n      } else if (isMessage && msg.from === actor.prevActor) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth\n        );\n      } else if (isMessage && msg.from === msg.to) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth / 2\n        );\n\n        maxMessageWidthPerActor[msg.to] = Math.max(\n          maxMessageWidthPerActor[msg.to] || 0,\n          messageWidth / 2\n        );\n      } else if (msg.placement === parser.yy.PLACEMENT.RIGHTOF) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth\n        );\n      } else if (msg.placement === parser.yy.PLACEMENT.LEFTOF) {\n        maxMessageWidthPerActor[actor.prevActor] = Math.max(\n          maxMessageWidthPerActor[actor.prevActor] || 0,\n          messageWidth\n        );\n      } else if (msg.placement === parser.yy.PLACEMENT.OVER) {\n        if (actor.prevActor) {\n          maxMessageWidthPerActor[actor.prevActor] = Math.max(\n            maxMessageWidthPerActor[actor.prevActor] || 0,\n            messageWidth / 2\n          );\n        }\n\n        if (actor.nextActor) {\n          maxMessageWidthPerActor[msg.from] = Math.max(\n            maxMessageWidthPerActor[msg.from] || 0,\n            messageWidth / 2\n          );\n        }\n      }\n    }\n  });\n\n  log.debug('maxMessageWidthPerActor:', maxMessageWidthPerActor);\n  return maxMessageWidthPerActor;\n};\n\nconst getRequiredPopupWidth = function (actor) {\n  let requiredPopupWidth = 0;\n  const textFont = actorFont(conf);\n  for (let key in actor.links) {\n    let labelDimensions = utils.calculateTextDimensions(key, textFont);\n    let labelWidth = labelDimensions.width + 2 * conf.wrapPadding + 2 * conf.boxMargin;\n    if (requiredPopupWidth < labelWidth) {\n      requiredPopupWidth = labelWidth;\n    }\n  }\n\n  return requiredPopupWidth;\n};\n\n/**\n * This will calculate the optimal margin for each given actor, for a given actor->messageWidth map.\n *\n * An actor's margin is determined by the width of the actor, the width of the largest message that\n * originates from it, and the configured conf.actorMargin.\n *\n * @param {any} actors - The actors map to calculate margins for\n * @param {any} actorToMessageWidth - A map of actor key -> max message width it holds\n */\nconst calculateActorMargins = function (actors, actorToMessageWidth) {\n  let maxHeight = 0;\n  Object.keys(actors).forEach((prop) => {\n    const actor = actors[prop];\n    if (actor.wrap) {\n      actor.description = utils.wrapLabel(\n        actor.description,\n        conf.width - 2 * conf.wrapPadding,\n        actorFont(conf)\n      );\n    }\n    const actDims = utils.calculateTextDimensions(actor.description, actorFont(conf));\n    actor.width = actor.wrap\n      ? conf.width\n      : Math.max(conf.width, actDims.width + 2 * conf.wrapPadding);\n\n    actor.height = actor.wrap ? Math.max(actDims.height, conf.height) : conf.height;\n    maxHeight = Math.max(maxHeight, actor.height);\n  });\n\n  for (let actorKey in actorToMessageWidth) {\n    const actor = actors[actorKey];\n\n    if (!actor) {\n      continue;\n    }\n\n    const nextActor = actors[actor.nextActor];\n\n    // No need to space out an actor that doesn't have a next link\n    if (!nextActor) {\n      continue;\n    }\n\n    const messageWidth = actorToMessageWidth[actorKey];\n    const actorWidth = messageWidth + conf.actorMargin - actor.width / 2 - nextActor.width / 2;\n\n    actor.margin = Math.max(actorWidth, conf.actorMargin);\n  }\n\n  return Math.max(maxHeight, conf.height);\n};\n\nconst buildNoteModel = function (msg, actors) {\n  let startx = actors[msg.from].x;\n  let stopx = actors[msg.to].x;\n  let shouldWrap = msg.wrap && msg.message;\n\n  let textDimensions = utils.calculateTextDimensions(\n    shouldWrap ? utils.wrapLabel(msg.message, conf.width, noteFont(conf)) : msg.message,\n    noteFont(conf)\n  );\n  let noteModel = {\n    width: shouldWrap\n      ? conf.width\n      : Math.max(conf.width, textDimensions.width + 2 * conf.noteMargin),\n    height: 0,\n    startx: actors[msg.from].x,\n    stopx: 0,\n    starty: 0,\n    stopy: 0,\n    message: msg.message,\n  };\n  if (msg.placement === parser.yy.PLACEMENT.RIGHTOF) {\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, textDimensions.width)\n      : Math.max(\n          actors[msg.from].width / 2 + actors[msg.to].width / 2,\n          textDimensions.width + 2 * conf.noteMargin\n        );\n    noteModel.startx = startx + (actors[msg.from].width + conf.actorMargin) / 2;\n  } else if (msg.placement === parser.yy.PLACEMENT.LEFTOF) {\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, textDimensions.width + 2 * conf.noteMargin)\n      : Math.max(\n          actors[msg.from].width / 2 + actors[msg.to].width / 2,\n          textDimensions.width + 2 * conf.noteMargin\n        );\n    noteModel.startx = startx - noteModel.width + (actors[msg.from].width - conf.actorMargin) / 2;\n  } else if (msg.to === msg.from) {\n    textDimensions = utils.calculateTextDimensions(\n      shouldWrap\n        ? utils.wrapLabel(msg.message, Math.max(conf.width, actors[msg.from].width), noteFont(conf))\n        : msg.message,\n      noteFont(conf)\n    );\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, actors[msg.from].width)\n      : Math.max(actors[msg.from].width, conf.width, textDimensions.width + 2 * conf.noteMargin);\n    noteModel.startx = startx + (actors[msg.from].width - noteModel.width) / 2;\n  } else {\n    noteModel.width =\n      Math.abs(startx + actors[msg.from].width / 2 - (stopx + actors[msg.to].width / 2)) +\n      conf.actorMargin;\n    noteModel.startx =\n      startx < stopx\n        ? startx + actors[msg.from].width / 2 - conf.actorMargin / 2\n        : stopx + actors[msg.to].width / 2 - conf.actorMargin / 2;\n  }\n  if (shouldWrap) {\n    noteModel.message = utils.wrapLabel(\n      msg.message,\n      noteModel.width - 2 * conf.wrapPadding,\n      noteFont(conf)\n    );\n  }\n  log.debug(\n    `NM:[${noteModel.startx},${noteModel.stopx},${noteModel.starty},${noteModel.stopy}:${noteModel.width},${noteModel.height}=${msg.message}]`\n  );\n  return noteModel;\n};\n\nconst buildMessageModel = function (msg, actors) {\n  let process = false;\n  if (\n    [\n      parser.yy.LINETYPE.SOLID_OPEN,\n      parser.yy.LINETYPE.DOTTED_OPEN,\n      parser.yy.LINETYPE.SOLID,\n      parser.yy.LINETYPE.DOTTED,\n      parser.yy.LINETYPE.SOLID_CROSS,\n      parser.yy.LINETYPE.DOTTED_CROSS,\n      parser.yy.LINETYPE.SOLID_POINT,\n      parser.yy.LINETYPE.DOTTED_POINT,\n    ].includes(msg.type)\n  ) {\n    process = true;\n  }\n  if (!process) {\n    return {};\n  }\n  const fromBounds = activationBounds(msg.from, actors);\n  const toBounds = activationBounds(msg.to, actors);\n  const fromIdx = fromBounds[0] <= toBounds[0] ? 1 : 0;\n  const toIdx = fromBounds[0] < toBounds[0] ? 0 : 1;\n  const allBounds = fromBounds.concat(toBounds);\n  const boundedWidth = Math.abs(toBounds[toIdx] - fromBounds[fromIdx]);\n  if (msg.wrap && msg.message) {\n    msg.message = utils.wrapLabel(\n      msg.message,\n      Math.max(boundedWidth + 2 * conf.wrapPadding, conf.width),\n      messageFont(conf)\n    );\n  }\n  const msgDims = utils.calculateTextDimensions(msg.message, messageFont(conf));\n\n  return {\n    width: Math.max(\n      msg.wrap ? 0 : msgDims.width + 2 * conf.wrapPadding,\n      boundedWidth + 2 * conf.wrapPadding,\n      conf.width\n    ),\n    height: 0,\n    startx: fromBounds[fromIdx],\n    stopx: toBounds[toIdx],\n    starty: 0,\n    stopy: 0,\n    message: msg.message,\n    type: msg.type,\n    wrap: msg.wrap,\n    fromBounds: Math.min.apply(null, allBounds),\n    toBounds: Math.max.apply(null, allBounds),\n  };\n};\n\nconst calculateLoopBounds = function (messages, actors) {\n  const loops = {};\n  const stack = [];\n  let current, noteModel, msgModel;\n\n  messages.forEach(function (msg) {\n    msg.id = utils.random({ length: 10 });\n    switch (msg.type) {\n      case parser.yy.LINETYPE.LOOP_START:\n      case parser.yy.LINETYPE.ALT_START:\n      case parser.yy.LINETYPE.OPT_START:\n      case parser.yy.LINETYPE.PAR_START:\n        stack.push({\n          id: msg.id,\n          msg: msg.message,\n          from: Number.MAX_SAFE_INTEGER,\n          to: Number.MIN_SAFE_INTEGER,\n          width: 0,\n        });\n        break;\n      case parser.yy.LINETYPE.ALT_ELSE:\n      case parser.yy.LINETYPE.PAR_AND:\n        if (msg.message) {\n          current = stack.pop();\n          loops[current.id] = current;\n          loops[msg.id] = current;\n          stack.push(current);\n        }\n        break;\n      case parser.yy.LINETYPE.LOOP_END:\n      case parser.yy.LINETYPE.ALT_END:\n      case parser.yy.LINETYPE.OPT_END:\n      case parser.yy.LINETYPE.PAR_END:\n        current = stack.pop();\n        loops[current.id] = current;\n        break;\n      case parser.yy.LINETYPE.ACTIVE_START:\n        {\n          const actorRect = actors[msg.from ? msg.from.actor : msg.to.actor];\n          const stackedSize = actorActivations(msg.from ? msg.from.actor : msg.to.actor).length;\n          const x =\n            actorRect.x + actorRect.width / 2 + ((stackedSize - 1) * conf.activationWidth) / 2;\n          const toAdd = {\n            startx: x,\n            stopx: x + conf.activationWidth,\n            actor: msg.from.actor,\n            enabled: true,\n          };\n          bounds.activations.push(toAdd);\n        }\n        break;\n      case parser.yy.LINETYPE.ACTIVE_END:\n        {\n          const lastActorActivationIdx = bounds.activations\n            .map((a) => a.actor)\n            .lastIndexOf(msg.from.actor);\n          delete bounds.activations.splice(lastActorActivationIdx, 1)[0];\n        }\n        break;\n    }\n    const isNote = msg.placement !== undefined;\n    if (isNote) {\n      noteModel = buildNoteModel(msg, actors);\n      msg.noteModel = noteModel;\n      stack.forEach((stk) => {\n        current = stk;\n        current.from = Math.min(current.from, noteModel.startx);\n        current.to = Math.max(current.to, noteModel.startx + noteModel.width);\n        current.width =\n          Math.max(current.width, Math.abs(current.from - current.to)) - conf.labelBoxWidth;\n      });\n    } else {\n      msgModel = buildMessageModel(msg, actors);\n      msg.msgModel = msgModel;\n      if (msgModel.startx && msgModel.stopx && stack.length > 0) {\n        stack.forEach((stk) => {\n          current = stk;\n          if (msgModel.startx === msgModel.stopx) {\n            let from = actors[msg.from];\n            let to = actors[msg.to];\n            current.from = Math.min(\n              from.x - msgModel.width / 2,\n              from.x - from.width / 2,\n              current.from\n            );\n            current.to = Math.max(to.x + msgModel.width / 2, to.x + from.width / 2, current.to);\n            current.width =\n              Math.max(current.width, Math.abs(current.to - current.from)) - conf.labelBoxWidth;\n          } else {\n            current.from = Math.min(msgModel.startx, current.from);\n            current.to = Math.max(msgModel.stopx, current.to);\n            current.width = Math.max(current.width, msgModel.width) - conf.labelBoxWidth;\n          }\n        });\n      }\n    }\n  });\n  bounds.activations = [];\n  log.debug('Loop type widths:', loops);\n  return loops;\n};\n\nexport default {\n  bounds,\n  drawActors,\n  drawActorsPopup,\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `.actor {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${options.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${options.actorLineColor};\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${options.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${options.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${options.signalColor};\n    stroke: ${options.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${options.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${options.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${options.signalColor};\n    stroke: ${options.signalColor};\n  }\n\n  .messageText {\n    fill: ${options.signalTextColor};\n    stroke: ${options.signalTextColor};\n  }\n\n  .labelBox {\n    stroke: ${options.labelBoxBorderColor};\n    fill: ${options.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${options.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${options.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${options.labelBoxBorderColor};\n    fill: ${options.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${options.noteBorderColor};\n    fill: ${options.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${options.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${options.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n    stroke-width: 2px;\n  }\n`;\n\nexport default getStyles;\n","import common from '../common/common';\nimport { addFunction } from '../../interactionDb';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\nexport const drawRect = function (elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (typeof rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\n// const sanitizeUrl = function (s) {\n//   return s\n//     .replace(/&/g, '&amp;')\n//     .replace(/</g, '&lt;')\n//     .replace(/javascript:/g, '');\n// };\n\nconst addPopupInteraction = (id, actorCnt) => {\n  addFunction(() => {\n    const arr = document.querySelectorAll(id);\n    // This will be the case when running in sandboxed mode\n    if (arr.length === 0) return;\n    arr[0].addEventListener('mouseover', function () {\n      popupMenuUpFunc('actor' + actorCnt + '_popup');\n    });\n    arr[0].addEventListener('mouseout', function () {\n      popupMenuDownFunc('actor' + actorCnt + '_popup');\n    });\n  });\n};\nexport const drawPopup = function (elem, actor, minMenuWidth, textAttrs, forceMenus) {\n  if (actor.links === undefined || actor.links === null || Object.keys(actor.links).length === 0) {\n    return { height: 0, width: 0 };\n  }\n\n  const links = actor.links;\n  const actorCnt = actor.actorCnt;\n  const rectData = actor.rectData;\n\n  var displayValue = 'none';\n  if (forceMenus) {\n    displayValue = 'block !important';\n  }\n\n  const g = elem.append('g');\n  g.attr('id', 'actor' + actorCnt + '_popup');\n  g.attr('class', 'actorPopupMenu');\n  g.attr('display', displayValue);\n  addPopupInteraction('#actor' + actorCnt + '_popup', actorCnt);\n  var actorClass = '';\n  if (typeof rectData.class !== 'undefined') {\n    actorClass = ' ' + rectData.class;\n  }\n\n  let menuWidth = rectData.width > minMenuWidth ? rectData.width : minMenuWidth;\n\n  const rectElem = g.append('rect');\n  rectElem.attr('class', 'actorPopupMenuPanel' + actorClass);\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.height);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', menuWidth);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n  if (links != null) {\n    var linkY = 20;\n    for (let key in links) {\n      var linkElem = g.append('a');\n      var sanitizedLink = sanitizeUrl(links[key]);\n      linkElem.attr('xlink:href', sanitizedLink);\n      linkElem.attr('target', '_blank');\n\n      _drawMenuItemTextCandidateFunc(textAttrs)(\n        key,\n        linkElem,\n        rectData.x + 10,\n        rectData.height + linkY,\n        menuWidth,\n        20,\n        { class: 'actor' },\n        textAttrs\n      );\n\n      linkY += 30;\n    }\n  }\n\n  rectElem.attr('height', linkY);\n\n  return { height: rectData.height + linkY, width: menuWidth };\n};\n\nexport const drawImage = function (elem, x, y, link) {\n  const imageElem = elem.append('image');\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  var sanitizedLink = sanitizeUrl(link);\n  imageElem.attr('xlink:href', sanitizedLink);\n};\n\nexport const drawEmbeddedImage = function (elem, x, y, link) {\n  const imageElem = elem.append('use');\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  var sanitizedLink = sanitizeUrl(link);\n  imageElem.attr('xlink:href', '#' + sanitizedLink);\n};\n\nexport const popupMenu = function (popid) {\n  return (\n    \"var pu = document.getElementById('\" +\n    popid +\n    \"'); if (pu != null) { pu.style.display = 'block'; }\"\n  );\n};\n\nexport const popdownMenu = function (popid) {\n  return (\n    \"var pu = document.getElementById('\" +\n    popid +\n    \"'); if (pu != null) { pu.style.display = 'none'; }\"\n  );\n};\n\nconst popupMenuUpFunc = function (popupId) {\n  var pu = document.getElementById(popupId);\n  if (pu != null) {\n    pu.style.display = 'block';\n  }\n};\n\nconst popupMenuDownFunc = function (popupId) {\n  var pu = document.getElementById(popupId);\n  if (pu != null) {\n    pu.style.display = 'none';\n  }\n};\nexport const drawText = function (elem, textData) {\n  let prevTextHeight = 0,\n    textHeight = 0;\n  const lines = textData.text.split(common.lineBreakRegex);\n\n  let textElems = [];\n  let dy = 0;\n  let yfunc = () => textData.y;\n  if (\n    typeof textData.valign !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    textData.textMargin > 0\n  ) {\n    switch (textData.valign) {\n      case 'top':\n      case 'start':\n        yfunc = () => Math.round(textData.y + textData.textMargin);\n        break;\n      case 'middle':\n      case 'center':\n        yfunc = () =>\n          Math.round(textData.y + (prevTextHeight + textHeight + textData.textMargin) / 2);\n        break;\n      case 'bottom':\n      case 'end':\n        yfunc = () =>\n          Math.round(\n            textData.y +\n              (prevTextHeight + textHeight + 2 * textData.textMargin) -\n              textData.textMargin\n          );\n        break;\n    }\n  }\n  if (\n    typeof textData.anchor !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    typeof textData.width !== 'undefined'\n  ) {\n    switch (textData.anchor) {\n      case 'left':\n      case 'start':\n        textData.x = Math.round(textData.x + textData.textMargin);\n        textData.anchor = 'start';\n        textData.dominantBaseline = 'text-after-edge';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'middle':\n      case 'center':\n        textData.x = Math.round(textData.x + textData.width / 2);\n        textData.anchor = 'middle';\n        textData.dominantBaseline = 'middle';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'right':\n      case 'end':\n        textData.x = Math.round(textData.x + textData.width - textData.textMargin);\n        textData.anchor = 'end';\n        textData.dominantBaseline = 'text-before-edge';\n        textData.alignmentBaseline = 'middle';\n        break;\n    }\n  }\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i];\n    if (\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin === 0 &&\n      typeof textData.fontSize !== 'undefined'\n    ) {\n      dy = i * textData.fontSize;\n    }\n\n    const textElem = elem.append('text');\n    textElem.attr('x', textData.x);\n    textElem.attr('y', yfunc());\n    if (typeof textData.anchor !== 'undefined') {\n      textElem\n        .attr('text-anchor', textData.anchor)\n        .attr('dominant-baseline', textData.dominantBaseline)\n        .attr('alignment-baseline', textData.alignmentBaseline);\n    }\n    if (typeof textData.fontFamily !== 'undefined') {\n      textElem.style('font-family', textData.fontFamily);\n    }\n    if (typeof textData.fontSize !== 'undefined') {\n      textElem.style('font-size', textData.fontSize);\n    }\n    if (typeof textData.fontWeight !== 'undefined') {\n      textElem.style('font-weight', textData.fontWeight);\n    }\n    if (typeof textData.fill !== 'undefined') {\n      textElem.attr('fill', textData.fill);\n    }\n    if (typeof textData.class !== 'undefined') {\n      textElem.attr('class', textData.class);\n    }\n    if (typeof textData.dy !== 'undefined') {\n      textElem.attr('dy', textData.dy);\n    } else if (dy !== 0) {\n      textElem.attr('dy', dy);\n    }\n\n    if (textData.tspan) {\n      const span = textElem.append('tspan');\n      span.attr('x', textData.x);\n      if (typeof textData.fill !== 'undefined') {\n        span.attr('fill', textData.fill);\n      }\n      span.text(line);\n    } else {\n      textElem.text(line);\n    }\n    if (\n      typeof textData.valign !== 'undefined' &&\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin > 0\n    ) {\n      textHeight += (textElem._groups || textElem)[0][0].getBBox().height;\n      prevTextHeight = textHeight;\n    }\n\n    textElems.push(textElem);\n  }\n\n  return textElems;\n};\n\nexport const drawLabel = function (elem, txtObject) {\n  /**\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} cut\n   * @returns {any}\n   */\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, txtObject.width, txtObject.height, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.height / 2;\n\n  drawText(elem, txtObject);\n  return polygon;\n};\n\nlet actorCnt = -1;\n\nexport const fixLifeLineHeights = (diagram, bounds) => {\n  if (!diagram.selectAll) return;\n  diagram\n    .selectAll('.actor-line')\n    .attr('class', '200')\n    .attr('y2', bounds - 55);\n};\n\n/**\n * Draws an actor in the diagram with the attached line\n *\n * @param {any} elem - The diagram we'll draw to.\n * @param {any} actor - The actor to draw.\n * @param {any} conf - DrawText implementation discriminator object\n */\nconst drawActorTypeParticipant = function (elem, actor, conf) {\n  const center = actor.x + actor.width / 2;\n\n  const boxpluslineGroup = elem.append('g');\n  var g = boxpluslineGroup;\n\n  if (actor.y === 0) {\n    actorCnt++;\n    g.append('line')\n      .attr('id', 'actor' + actorCnt)\n      .attr('x1', center)\n      .attr('y1', 5)\n      .attr('x2', center)\n      .attr('y2', 2000)\n      .attr('class', 'actor-line')\n      .attr('stroke-width', '0.5px')\n      .attr('stroke', '#999');\n\n    g = boxpluslineGroup.append('g');\n    actor.actorCnt = actorCnt;\n\n    if (actor.links != null) {\n      g.attr('id', 'root-' + actorCnt);\n      addPopupInteraction('#root-' + actorCnt, actorCnt);\n    }\n  }\n\n  const rect = getNoteRect();\n  var cssclass = 'actor';\n  if (actor.properties != null && actor.properties['class']) {\n    cssclass = actor.properties['class'];\n  } else {\n    rect.fill = '#eaeaea';\n  }\n  rect.x = actor.x;\n  rect.y = actor.y;\n  rect.width = actor.width;\n  rect.height = actor.height;\n  rect.class = cssclass;\n  rect.rx = 3;\n  rect.ry = 3;\n  const rectElem = drawRect(g, rect);\n  actor.rectData = rect;\n\n  if (actor.properties != null && actor.properties['icon']) {\n    const iconSrc = actor.properties['icon'].trim();\n    if (iconSrc.charAt(0) === '@') {\n      drawEmbeddedImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc.substr(1));\n    } else {\n      drawImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc);\n    }\n  }\n\n  _drawTextCandidateFunc(conf)(\n    actor.description,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'actor' },\n    conf\n  );\n\n  let height = actor.height;\n  if (rectElem.node) {\n    const bounds = rectElem.node().getBBox();\n    actor.height = bounds.height;\n    height = bounds.height;\n  }\n\n  return height;\n};\n\nconst drawActorTypeActor = function (elem, actor, conf) {\n  const center = actor.x + actor.width / 2;\n\n  if (actor.y === 0) {\n    actorCnt++;\n    elem\n      .append('line')\n      .attr('id', 'actor' + actorCnt)\n      .attr('x1', center)\n      .attr('y1', 80)\n      .attr('x2', center)\n      .attr('y2', 2000)\n      .attr('class', 'actor-line')\n      .attr('stroke-width', '0.5px')\n      .attr('stroke', '#999');\n  }\n  const actElem = elem.append('g');\n  actElem.attr('class', 'actor-man');\n\n  const rect = getNoteRect();\n  rect.x = actor.x;\n  rect.y = actor.y;\n  rect.fill = '#eaeaea';\n  rect.width = actor.width;\n  rect.height = actor.height;\n  rect.class = 'actor';\n  rect.rx = 3;\n  rect.ry = 3;\n  // drawRect(actElem, rect);\n\n  actElem\n    .append('line')\n    .attr('id', 'actor-man-torso' + actorCnt)\n    .attr('x1', center)\n    .attr('y1', actor.y + 25)\n    .attr('x2', center)\n    .attr('y2', actor.y + 45);\n\n  actElem\n    .append('line')\n    .attr('id', 'actor-man-arms' + actorCnt)\n    .attr('x1', center - 18)\n    .attr('y1', actor.y + 33)\n    .attr('x2', center + 18)\n    .attr('y2', actor.y + 33);\n  actElem\n    .append('line')\n    .attr('x1', center - 18)\n    .attr('y1', actor.y + 60)\n    .attr('x2', center)\n    .attr('y2', actor.y + 45);\n  actElem\n    .append('line')\n    .attr('x1', center)\n    .attr('y1', actor.y + 45)\n    .attr('x2', center + 16)\n    .attr('y2', actor.y + 60);\n\n  const circle = actElem.append('circle');\n  circle.attr('cx', actor.x + actor.width / 2);\n  circle.attr('cy', actor.y + 10);\n  circle.attr('r', 15);\n  circle.attr('width', actor.width);\n  circle.attr('height', actor.height);\n\n  const bounds = actElem.node().getBBox();\n  actor.height = bounds.height;\n\n  _drawTextCandidateFunc(conf)(\n    actor.description,\n    actElem,\n    rect.x,\n    rect.y + 35,\n    rect.width,\n    rect.height,\n    { class: 'actor' },\n    conf\n  );\n\n  return actor.height;\n};\n\nexport const drawActor = function (elem, actor, conf) {\n  switch (actor.type) {\n    case 'actor':\n      return drawActorTypeActor(elem, actor, conf);\n    case 'participant':\n      return drawActorTypeParticipant(elem, actor, conf);\n  }\n};\n\nexport const anchorElement = function (elem) {\n  return elem.append('g');\n};\n/**\n * Draws an activation in the diagram\n *\n * @param {any} elem - Element to append activation rect.\n * @param {any} bounds - Activation box bounds.\n * @param {any} verticalPos - Precise y cooridnate of bottom activation box edge.\n * @param {any} conf - Sequence diagram config object.\n * @param {any} actorActivations - Number of activations on the actor.\n */\nexport const drawActivation = function (elem, bounds, verticalPos, conf, actorActivations) {\n  const rect = getNoteRect();\n  const g = bounds.anchored;\n  rect.x = bounds.startx;\n  rect.y = bounds.starty;\n  rect.class = 'activation' + (actorActivations % 3); // Will evaluate to 0, 1 or 2\n  rect.width = bounds.stopx - bounds.startx;\n  rect.height = verticalPos - bounds.starty;\n  drawRect(g, rect);\n};\n\n/**\n * Draws a loop in the diagram\n *\n * @param {any} elem - Elemenet to append the loop to.\n * @param {any} loopModel - LoopModel of the given loop.\n * @param {any} labelText - Text within the loop.\n * @param {any} conf - Diagrom configuration\n * @returns {any}\n */\nexport const drawLoop = function (elem, loopModel, labelText, conf) {\n  const {\n    boxMargin,\n    boxTextMargin,\n    labelBoxHeight,\n    labelBoxWidth,\n    messageFontFamily: fontFamily,\n    messageFontSize: fontSize,\n    messageFontWeight: fontWeight,\n  } = conf;\n  const g = elem.append('g');\n  const drawLoopLine = function (startx, starty, stopx, stopy) {\n    return g\n      .append('line')\n      .attr('x1', startx)\n      .attr('y1', starty)\n      .attr('x2', stopx)\n      .attr('y2', stopy)\n      .attr('class', 'loopLine');\n  };\n  drawLoopLine(loopModel.startx, loopModel.starty, loopModel.stopx, loopModel.starty);\n  drawLoopLine(loopModel.stopx, loopModel.starty, loopModel.stopx, loopModel.stopy);\n  drawLoopLine(loopModel.startx, loopModel.stopy, loopModel.stopx, loopModel.stopy);\n  drawLoopLine(loopModel.startx, loopModel.starty, loopModel.startx, loopModel.stopy);\n  if (typeof loopModel.sections !== 'undefined') {\n    loopModel.sections.forEach(function (item) {\n      drawLoopLine(loopModel.startx, item.y, loopModel.stopx, item.y).style(\n        'stroke-dasharray',\n        '3, 3'\n      );\n    });\n  }\n\n  let txt = getTextObj();\n  txt.text = labelText;\n  txt.x = loopModel.startx;\n  txt.y = loopModel.starty;\n  txt.fontFamily = fontFamily;\n  txt.fontSize = fontSize;\n  txt.fontWeight = fontWeight;\n  txt.anchor = 'middle';\n  txt.valign = 'middle';\n  txt.tspan = false;\n  txt.width = labelBoxWidth || 50;\n  txt.height = labelBoxHeight || 20;\n  txt.textMargin = boxTextMargin;\n  txt.class = 'labelText';\n\n  drawLabel(g, txt);\n  txt = getTextObj();\n  txt.text = loopModel.title;\n  txt.x = loopModel.startx + labelBoxWidth / 2 + (loopModel.stopx - loopModel.startx) / 2;\n  txt.y = loopModel.starty + boxMargin + boxTextMargin;\n  txt.anchor = 'middle';\n  txt.valign = 'middle';\n  txt.textMargin = boxTextMargin;\n  txt.class = 'loopText';\n  txt.fontFamily = fontFamily;\n  txt.fontSize = fontSize;\n  txt.fontWeight = fontWeight;\n  txt.wrap = true;\n\n  let textElem = drawText(g, txt);\n\n  if (typeof loopModel.sectionTitles !== 'undefined') {\n    loopModel.sectionTitles.forEach(function (item, idx) {\n      if (item.message) {\n        txt.text = item.message;\n        txt.x = loopModel.startx + (loopModel.stopx - loopModel.startx) / 2;\n        txt.y = loopModel.sections[idx].y + boxMargin + boxTextMargin;\n        txt.class = 'loopText';\n        txt.anchor = 'middle';\n        txt.valign = 'middle';\n        txt.tspan = false;\n        txt.fontFamily = fontFamily;\n        txt.fontSize = fontSize;\n        txt.fontWeight = fontWeight;\n        txt.wrap = loopModel.wrap;\n        textElem = drawText(g, txt);\n        let sectionHeight = Math.round(\n          textElem\n            .map((te) => (te._groups || te)[0][0].getBBox().height)\n            .reduce((acc, curr) => acc + curr)\n        );\n        loopModel.sections[idx].height += sectionHeight - (boxMargin + boxTextMargin);\n      }\n    });\n  }\n\n  loopModel.height = Math.round(loopModel.stopy - loopModel.starty);\n  return g;\n};\n\n/**\n * Draws a background rectangle\n *\n * @param {any} elem Diagram (reference for bounds)\n * @param {any} bounds Shape of the rectangle\n */\nexport const drawBackgroundRect = function (elem, bounds) {\n  const rectElem = drawRect(elem, {\n    x: bounds.startx,\n    y: bounds.starty,\n    width: bounds.stopx - bounds.startx,\n    height: bounds.stopy - bounds.starty,\n    fill: bounds.fill,\n    class: 'rect',\n  });\n  rectElem.lower();\n};\n\nexport const insertDatabaseIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'database')\n    .attr('fill-rule', 'evenodd')\n    .attr('clip-rule', 'evenodd')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z'\n    );\n};\n\nexport const insertComputerIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'computer')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z'\n    );\n};\n\nexport const insertClockIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'clock')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z'\n    );\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param elem\n */\nexport const insertArrowHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z'); // this is actual shape for arrowhead\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowFilledHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'filled-head')\n    .attr('refX', 18)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n/**\n * Setup node number. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertSequenceNumber = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'sequencenumber')\n    .attr('refX', 15)\n    .attr('refY', 15)\n    .attr('markerWidth', 60)\n    .attr('markerHeight', 40)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', 15)\n    .attr('cy', 15)\n    .attr('r', 6);\n  // .style(\"fill\", '#f00');\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowCrossHead = function (elem) {\n  const defs = elem.append('defs');\n  const marker = defs\n    .append('marker')\n    .attr('id', 'crosshead')\n    .attr('markerWidth', 15)\n    .attr('markerHeight', 8)\n    .attr('orient', 'auto')\n    .attr('refX', 16)\n    .attr('refY', 4);\n\n  // The arrow\n  marker\n    .append('path')\n    .attr('fill', 'black')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 9,2 V 6 L16,4 Z');\n\n  // The cross\n  marker\n    .append('path')\n    .attr('fill', 'none')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 0,1 L 6,7 M 6,1 L 0,7');\n  // this is actual shape for arrowhead\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    anchor: undefined,\n    style: '#666',\n    width: undefined,\n    height: undefined,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    tspan: true,\n    valign: undefined,\n  };\n};\n\nexport const getNoteRect = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: '#EDF2AE',\n    stroke: '#666',\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nconst _drawTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   */\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { actorFontSize, actorFontFamily, actorFontWeight } = conf;\n\n    const lines = content.split(common.lineBreakRegex);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * actorFontSize - (actorFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .style('text-anchor', 'middle')\n        .style('font-size', actorFontSize)\n        .style('font-weight', actorFontWeight)\n        .style('font-family', actorFontFamily);\n      text\n        .append('tspan')\n        .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) { // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nconst _drawMenuItemTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   */\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x)\n      .attr('y', y)\n      .style('text-anchor', 'start')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { actorFontSize, actorFontFamily, actorFontWeight } = conf;\n\n    const lines = content.split(common.lineBreakRegex);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * actorFontSize - (actorFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x)\n        .attr('y', y)\n        .style('text-anchor', 'start')\n        .style('font-size', actorFontSize)\n        .style('font-weight', actorFontWeight)\n        .style('font-family', actorFontFamily);\n      text.append('tspan').attr('x', x).attr('dy', dy).text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) { // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nexport default {\n  drawRect,\n  drawText,\n  drawLabel,\n  drawActor,\n  drawPopup,\n  drawImage,\n  drawEmbeddedImage,\n  anchorElement,\n  drawActivation,\n  drawLoop,\n  drawBackgroundRect,\n  insertArrowHead,\n  insertArrowFilledHead,\n  insertSequenceNumber,\n  insertArrowCrossHead,\n  insertDatabaseIcon,\n  insertComputerIcon,\n  insertClockIcon,\n  getTextObj,\n  getNoteRect,\n  popupMenu,\n  popdownMenu,\n  fixLifeLineHeights,\n  sanitizeUrl,\n};\n","const idCache = {};\n\nexport const set = (key, val) => {\n  idCache[key] = val;\n};\n\nexport const get = (k) => idCache[k];\nexport const keys = () => Object.keys(idCache);\nexport const size = () => keys().length;\n\nexport default {\n  get,\n  set,\n  keys,\n  size,\n};\n","import { line, curveBasis } from 'd3';\nimport idCache from './id-cache.js';\nimport stateDb from './stateDb';\nimport utils from '../../utils';\nimport common from '../common/common';\nimport { getConfig } from '../../config';\nimport { log } from '../../logger';\n\n/**\n * Draws a start state as a black circle\n *\n * @param {any} g\n */\nexport const drawStartState = (g) =>\n  g\n    .append('circle')\n    // .style('stroke', 'black')\n    // .style('fill', 'black')\n    .attr('class', 'start-state')\n    .attr('r', getConfig().state.sizeUnit)\n    .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit)\n    .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit);\n\n/**\n * Draws a start state as a black circle\n *\n * @param {any} g\n */\nexport const drawDivider = (g) =>\n  g\n    .append('line')\n    .style('stroke', 'grey')\n    .style('stroke-dasharray', '3')\n    .attr('x1', getConfig().state.textHeight)\n    .attr('class', 'divider')\n    .attr('x2', getConfig().state.textHeight * 2)\n    .attr('y1', 0)\n    .attr('y2', 0);\n\n/**\n * Draws a an end state as a black circle\n *\n * @param {any} g\n * @param {any} stateDef\n */\nexport const drawSimpleState = (g, stateDef) => {\n  const state = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 2 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const classBox = state.node().getBBox();\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', classBox.width + 2 * getConfig().state.padding)\n    .attr('height', classBox.height + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return state;\n};\n\n/**\n * Draws a state with descriptions\n *\n * @param {any} g\n * @param {any} stateDef\n * @returns\n */\nexport const drawDescrState = (g, stateDef) => {\n  const addTspan = function (textEl, txt, isFirst) {\n    const tSpan = textEl\n      .append('tspan')\n      .attr('x', 2 * getConfig().state.padding)\n      .text(txt);\n    if (!isFirst) {\n      tSpan.attr('dy', getConfig().state.textHeight);\n    }\n  };\n  const title = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 1.3 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.descriptions[0]);\n\n  const titleBox = title.node().getBBox();\n  const titleHeight = titleBox.height;\n\n  const description = g\n    .append('text') // text label for the x axis\n    .attr('x', getConfig().state.padding)\n    .attr(\n      'y',\n      titleHeight +\n        getConfig().state.padding * 0.4 +\n        getConfig().state.dividerMargin +\n        getConfig().state.textHeight\n    )\n    .attr('class', 'state-description');\n\n  let isFirst = true;\n  let isSecond = true;\n  stateDef.descriptions.forEach(function (descr) {\n    if (!isFirst) {\n      addTspan(description, descr, isSecond);\n      isSecond = false;\n    }\n    isFirst = false;\n  });\n\n  const descrLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', getConfig().state.padding)\n    .attr('y1', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('y2', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('class', 'descr-divider');\n  const descrBox = description.node().getBBox();\n  const width = Math.max(descrBox.width, titleBox.width);\n\n  descrLine.attr('x2', width + 3 * getConfig().state.padding);\n  // const classBox = title.node().getBBox();\n\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', width + 2 * getConfig().state.padding)\n    .attr('height', descrBox.height + titleHeight + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\n/** Adds the creates a box around the existing content and adds a panel for the id on top of the content. */\n/**\n * Function that creates an title row and a frame around a substate for a composit state diagram.\n * The function returns a new d3 svg object with updated width and height properties;\n *\n * @param {any} g The d3 svg object for the substate to framed\n * @param {any} stateDef The info about the\n * @param {any} altBkg\n */\nexport const addTitleAndBox = (g, stateDef, altBkg) => {\n  const pad = getConfig().state.padding;\n  const dblPad = 2 * getConfig().state.padding;\n  const orgBox = g.node().getBBox();\n  const orgWidth = orgBox.width;\n  const orgX = orgBox.x;\n\n  const title = g\n    .append('text')\n    .attr('x', 0)\n    .attr('y', getConfig().state.titleShift)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const titleBox = title.node().getBBox();\n  const titleWidth = titleBox.width + dblPad;\n  let width = Math.max(titleWidth, orgWidth); // + dblPad;\n  if (width === orgWidth) {\n    width = width + dblPad;\n  }\n  let startX;\n  // const lineY = 1 - getConfig().state.textHeight;\n  // const descrLine = g\n  //   .append('line') // text label for the x axis\n  //   .attr('x1', 0)\n  //   .attr('y1', lineY)\n  //   .attr('y2', lineY)\n  //   .attr('class', 'descr-divider');\n\n  const graphBox = g.node().getBBox();\n  // descrLine.attr('x2', graphBox.width + getConfig().state.padding);\n\n  if (stateDef.doc) {\n    // cnsole.warn(\n    //   stateDef.id,\n    //   'orgX: ',\n    //   orgX,\n    //   'width: ',\n    //   width,\n    //   'titleWidth: ',\n    //   titleWidth,\n    //   'orgWidth: ',\n    //   orgWidth,\n    //   'width',\n    //   width\n    // );\n  }\n\n  startX = orgX - pad;\n  if (titleWidth > orgWidth) {\n    startX = (orgWidth - width) / 2 + pad;\n  }\n  if (Math.abs(orgX - graphBox.x) < pad) {\n    if (titleWidth > orgWidth) {\n      startX = orgX - (titleWidth - orgWidth) / 2;\n    }\n  }\n\n  const lineY = 1 - getConfig().state.textHeight;\n  // White color\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr('y', lineY)\n    .attr('class', altBkg ? 'alt-composit' : 'composit')\n    .attr('width', width)\n    .attr(\n      'height',\n      graphBox.height + getConfig().state.textHeight + getConfig().state.titleShift + 1\n    )\n    .attr('rx', '0');\n\n  title.attr('x', startX + pad);\n  if (titleWidth <= orgWidth) title.attr('x', orgX + (width - dblPad) / 2 - titleWidth / 2 + pad);\n\n  // Title background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    // Just needs to be higher then the descr line, will be clipped by the white color box\n    .attr('height', getConfig().state.textHeight * 3)\n    .attr('rx', getConfig().state.radius);\n\n  // Full background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    .attr('height', graphBox.height + 3 + 2 * getConfig().state.textHeight)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\nconst drawEndState = (g) => {\n  g.append('circle')\n    // .style('stroke', 'black')\n    // .style('fill', 'white')\n    .attr('class', 'end-state-outer')\n    .attr('r', getConfig().state.sizeUnit + getConfig().state.miniPadding)\n    .attr(\n      'cx',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    )\n    .attr(\n      'cy',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    );\n\n  return (\n    g\n      .append('circle')\n      // .style('stroke', 'black')\n      // .style('fill', 'black')\n      .attr('class', 'end-state-inner')\n      .attr('r', getConfig().state.sizeUnit)\n      .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit + 2)\n      .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit + 2)\n  );\n};\nconst drawForkJoinState = (g, stateDef) => {\n  let width = getConfig().state.forkWidth;\n  let height = getConfig().state.forkHeight;\n\n  if (stateDef.parentId) {\n    let tmp = width;\n    width = height;\n    height = tmp;\n  }\n  return g\n    .append('rect')\n    .style('stroke', 'black')\n    .style('fill', 'black')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding);\n};\n\nexport const drawText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(common.lineBreakRegex, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nconst _drawLongText = (_text, x, y, g) => {\n  let textHeight = 0;\n\n  const textElem = g.append('text');\n  textElem.style('text-anchor', 'start');\n  textElem.attr('class', 'noteText');\n\n  let text = _text.replace(/\\r\\n/g, '<br/>');\n  text = text.replace(/\\n/g, '<br/>');\n  const lines = text.split(common.lineBreakRegex);\n\n  let tHeight = 1.25 * getConfig().state.noteMargin;\n  for (const line of lines) {\n    const txt = line.trim();\n\n    if (txt.length > 0) {\n      const span = textElem.append('tspan');\n      span.text(txt);\n      if (tHeight === 0) {\n        const textBounds = span.node().getBBox();\n        tHeight += textBounds.height;\n      }\n      textHeight += tHeight;\n      span.attr('x', x + getConfig().state.noteMargin);\n      span.attr('y', y + textHeight + 1.25 * getConfig().state.noteMargin);\n    }\n  }\n  return { textWidth: textElem.node().getBBox().width, textHeight };\n};\n\n/**\n * Draws a note to the diagram\n *\n * @param text - The text of the given note.\n * @param g - The element the note is attached to.\n */\n\nexport const drawNote = (text, g) => {\n  g.attr('class', 'state-note');\n  const note = g.append('rect').attr('x', 0).attr('y', getConfig().state.padding);\n  const rectElem = g.append('g');\n\n  const { textWidth, textHeight } = _drawLongText(text, 0, 0, rectElem);\n  note.attr('height', textHeight + 2 * getConfig().state.noteMargin);\n  note.attr('width', textWidth + getConfig().state.noteMargin * 2);\n\n  return note;\n};\n\n/**\n * Starting point for drawing a state. The function finds out the specifics about the state and\n * renders with approprtiate function.\n *\n * @param {any} elem\n * @param {any} stateDef\n */\n\nexport const drawState = function (elem, stateDef) {\n  const id = stateDef.id;\n  const stateInfo = {\n    id: id,\n    label: stateDef.id,\n    width: 0,\n    height: 0,\n  };\n\n  const g = elem.append('g').attr('id', id).attr('class', 'stateGroup');\n\n  if (stateDef.type === 'start') drawStartState(g);\n  if (stateDef.type === 'end') drawEndState(g);\n  if (stateDef.type === 'fork' || stateDef.type === 'join') drawForkJoinState(g, stateDef);\n  if (stateDef.type === 'note') drawNote(stateDef.note.text, g);\n  if (stateDef.type === 'divider') drawDivider(g);\n  if (stateDef.type === 'default' && stateDef.descriptions.length === 0)\n    drawSimpleState(g, stateDef);\n  if (stateDef.type === 'default' && stateDef.descriptions.length > 0) drawDescrState(g, stateDef);\n\n  const stateBox = g.node().getBBox();\n  stateInfo.width = stateBox.width + 2 * getConfig().state.padding;\n  stateInfo.height = stateBox.height + 2 * getConfig().state.padding;\n\n  idCache.set(id, stateInfo);\n  // stateCnt++;\n  return stateInfo;\n};\n\nlet edgeCount = 0;\nexport const drawEdge = function (elem, path, relation) {\n  const getRelationType = function (type) {\n    switch (type) {\n      case stateDb.relationType.AGGREGATION:\n        return 'aggregation';\n      case stateDb.relationType.EXTENSION:\n        return 'extension';\n      case stateDb.relationType.COMPOSITION:\n        return 'composition';\n      case stateDb.relationType.DEPENDENCY:\n        return 'dependency';\n    }\n  };\n\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'transition');\n  let url = '';\n  if (getConfig().state.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  svgPath.attr(\n    'marker-end',\n    'url(' + url + '#' + getRelationType(stateDb.relationType.DEPENDENCY) + 'End' + ')'\n  );\n\n  if (typeof relation.title !== 'undefined') {\n    const label = elem.append('g').attr('class', 'stateLabel');\n\n    const { x, y } = utils.calcLabelPosition(path.points);\n\n    const rows = common.getRows(relation.title);\n\n    let titleHeight = 0;\n    const titleRows = [];\n    let maxWidth = 0;\n    let minX = 0;\n\n    for (let i = 0; i <= rows.length; i++) {\n      const title = label\n        .append('text')\n        .attr('text-anchor', 'middle')\n        .text(rows[i])\n        .attr('x', x)\n        .attr('y', y + titleHeight);\n\n      const boundstmp = title.node().getBBox();\n      maxWidth = Math.max(maxWidth, boundstmp.width);\n      minX = Math.min(minX, boundstmp.x);\n\n      log.info(boundstmp.x, x, y + titleHeight);\n\n      if (titleHeight === 0) {\n        const titleBox = title.node().getBBox();\n        titleHeight = titleBox.height;\n        log.info('Title height', titleHeight, y);\n      }\n      titleRows.push(title);\n    }\n\n    let boxHeight = titleHeight * rows.length;\n    if (rows.length > 1) {\n      const heightAdj = (rows.length - 1) * titleHeight * 0.5;\n\n      titleRows.forEach((title, i) => title.attr('y', y + i * titleHeight - heightAdj));\n      boxHeight = titleHeight * rows.length;\n    }\n\n    const bounds = label.node().getBBox();\n\n    label\n      .insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', x - maxWidth / 2 - getConfig().state.padding / 2)\n      .attr('y', y - boxHeight / 2 - getConfig().state.padding / 2 - 3.5)\n      .attr('width', maxWidth + getConfig().state.padding)\n      .attr('height', boxHeight + getConfig().state.padding);\n\n    log.info(bounds);\n\n    //label.attr('transform', '0 -' + (bounds.y / 2));\n\n    // Debug points\n    // path.points.forEach(point => {\n    //   g.append('circle')\n    //     .style('stroke', 'red')\n    //     .style('fill', 'red')\n    //     .attr('r', 1)\n    //     .attr('cx', point.x)\n    //     .attr('cy', point.y);\n    // });\n    // g.append('circle')\n    //   .style('stroke', 'blue')\n    //   .style('fill', 'blue')\n    //   .attr('r', 1)\n    //   .attr('cx', x)\n    //   .attr('cy', y);\n  }\n\n  edgeCount++;\n};\n","import { log } from '../../logger';\nimport { generateId } from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\nimport common from '../common/common';\nimport * as configApi from '../../config';\n\nconst clone = (o) => JSON.parse(JSON.stringify(o));\nlet rootDoc = [];\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst setRootDoc = (o) => {\n  log.info('Setting root doc', o);\n  // rootDoc = { id: 'root', doc: o };\n  rootDoc = o;\n};\n\nconst getRootDoc = () => rootDoc;\n\nconst docTranslator = (parent, node, first) => {\n  if (node.stmt === 'relation') {\n    docTranslator(parent, node.state1, true);\n    docTranslator(parent, node.state2, false);\n  } else {\n    if (node.stmt === 'state') {\n      if (node.id === '[*]') {\n        node.id = first ? parent.id + '_start' : parent.id + '_end';\n        node.start = first;\n      }\n    }\n\n    if (node.doc) {\n      const doc = [];\n      // Check for concurrency\n      let i = 0;\n      let currentDoc = [];\n      for (i = 0; i < node.doc.length; i++) {\n        if (node.doc[i].type === 'divider') {\n          // debugger;\n          const newNode = clone(node.doc[i]);\n          newNode.doc = clone(currentDoc);\n          doc.push(newNode);\n          currentDoc = [];\n        } else {\n          currentDoc.push(node.doc[i]);\n        }\n      }\n\n      // If any divider was encountered\n      if (doc.length > 0 && currentDoc.length > 0) {\n        const newNode = {\n          stmt: 'state',\n          id: generateId(),\n          type: 'divider',\n          doc: clone(currentDoc),\n        };\n        doc.push(clone(newNode));\n        node.doc = doc;\n      }\n\n      node.doc.forEach((docNode) => docTranslator(node, docNode, true));\n    }\n  }\n};\nconst getRootDocV2 = () => {\n  docTranslator({ id: 'root' }, { id: 'root', doc: rootDoc }, true);\n  return { id: 'root', doc: rootDoc };\n  // Here\n};\n\nconst extract = (_doc) => {\n  // const res = { states: [], relations: [] };\n  let doc;\n  if (_doc.doc) {\n    doc = _doc.doc;\n  } else {\n    doc = _doc;\n  }\n  // let doc = root.doc;\n  // if (!doc) {\n  //   doc = root;\n  // }\n  log.info(doc);\n  clear();\n\n  log.info('Extract', doc);\n\n  doc.forEach((item) => {\n    if (item.stmt === 'state') {\n      addState(item.id, item.type, item.doc, item.description, item.note);\n    }\n    if (item.stmt === 'relation') {\n      addRelation(item.state1.id, item.state2.id, item.description);\n    }\n  });\n};\n\nconst newDoc = () => {\n  return {\n    relations: [],\n    states: {},\n    documents: {},\n  };\n};\n\nlet documents = {\n  root: newDoc(),\n};\n\nlet currentDocument = documents.root;\n\nlet startCnt = 0;\nlet endCnt = 0; // eslint-disable-line\n// let stateCnt = 0;\n\n/**\n * Function called by parser when a node definition has been found.\n *\n * @param {any} id\n * @param {any} type\n * @param {any} doc\n * @param {any} descr\n * @param {any} note\n */\nexport const addState = function (id, type, doc, descr, note) {\n  if (typeof currentDocument.states[id] === 'undefined') {\n    currentDocument.states[id] = {\n      id: id,\n      descriptions: [],\n      type,\n      doc,\n      note,\n    };\n  } else {\n    if (!currentDocument.states[id].doc) {\n      currentDocument.states[id].doc = doc;\n    }\n    if (!currentDocument.states[id].type) {\n      currentDocument.states[id].type = type;\n    }\n  }\n  if (descr) {\n    log.info('Adding state ', id, descr);\n    if (typeof descr === 'string') addDescription(id, descr.trim());\n\n    if (typeof descr === 'object') {\n      descr.forEach((des) => addDescription(id, des.trim()));\n    }\n  }\n\n  if (note) {\n    currentDocument.states[id].note = note;\n    currentDocument.states[id].note.text = common.sanitizeText(\n      currentDocument.states[id].note.text,\n      configApi.getConfig()\n    );\n  }\n};\n\nexport const clear = function () {\n  documents = {\n    root: newDoc(),\n  };\n  currentDocument = documents.root;\n\n  currentDocument = documents.root;\n\n  startCnt = 0;\n  endCnt = 0; // eslint-disable-line\n  classes = [];\n};\n\nexport const getState = function (id) {\n  return currentDocument.states[id];\n};\n\nexport const getStates = function () {\n  return currentDocument.states;\n};\nexport const logDocuments = function () {\n  log.info('Documents = ', documents);\n};\nexport const getRelations = function () {\n  return currentDocument.relations;\n};\n\nexport const addRelation = function (_id1, _id2, title) {\n  let id1 = _id1;\n  let id2 = _id2;\n  let type1 = 'default';\n  let type2 = 'default';\n  if (_id1 === '[*]') {\n    startCnt++;\n    id1 = 'start' + startCnt;\n    type1 = 'start';\n  }\n  if (_id2 === '[*]') {\n    endCnt++;\n    id2 = 'end' + startCnt;\n    type2 = 'end';\n  }\n  addState(id1, type1);\n  addState(id2, type2);\n  currentDocument.relations.push({\n    id1,\n    id2,\n    title: common.sanitizeText(title, configApi.getConfig()),\n  });\n};\n\nconst addDescription = function (id, _descr) {\n  const theState = currentDocument.states[id];\n  let descr = _descr;\n  if (descr[0] === ':') {\n    descr = descr.substr(1).trim();\n  }\n  theState.descriptions.push(common.sanitizeText(descr, configApi.getConfig()));\n};\n\nexport const cleanupLabel = function (label) {\n  if (label.substring(0, 1) === ':') {\n    return label.substr(2).trim();\n  } else {\n    return label.trim();\n  }\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1,\n};\n\nlet dividerCnt = 0;\nconst getDividerId = () => {\n  dividerCnt++;\n  return 'divider-id-' + dividerCnt;\n};\n\nlet classes = [];\n\nconst getClasses = () => classes;\n\nlet direction = 'TB';\nconst getDirection = () => direction;\nconst setDirection = (dir) => {\n  direction = dir;\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3,\n};\n\nconst trimColon = (str) => (str && str[0] === ':' ? str.substr(1).trim() : str.trim());\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().state,\n  addState,\n  clear,\n  getState,\n  getStates,\n  getRelations,\n  getClasses,\n  getDirection,\n  addRelation,\n  getDividerId,\n  setDirection,\n  // addDescription,\n  cleanupLabel,\n  lineType,\n  relationType,\n  logDocuments,\n  getRootDoc,\n  setRootDoc,\n  getRootDocV2,\n  extract,\n  trimColon,\n};\n","import graphlib from 'graphlib';\nimport { select } from 'd3';\nimport stateDb from './stateDb';\nimport state from './parser/stateDiagram';\nimport { getConfig } from '../../config';\nimport { render } from '../../dagre-wrapper/index.js';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport common from '../common/common';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\nlet nodeDb = {};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param {any} text\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text) {\n  log.trace('Extracting classes');\n  stateDb.clear();\n  const parser = state.parser;\n  parser.yy = stateDb;\n\n  // Parse the graph definition\n  parser.parse(text);\n  return stateDb.getClasses();\n};\n\nconst setupNode = (g, parent, node, altFlag) => {\n  // Add the node\n  if (node.id !== 'root') {\n    let shape = 'rect';\n    if (node.start === true) {\n      shape = 'start';\n    }\n    if (node.start === false) {\n      shape = 'end';\n    }\n    if (node.type !== 'default') {\n      shape = node.type;\n    }\n\n    if (!nodeDb[node.id]) {\n      nodeDb[node.id] = {\n        id: node.id,\n        shape,\n        description: common.sanitizeText(node.id, getConfig()),\n        classes: 'statediagram-state',\n      };\n    }\n\n    // Build of the array of description strings accordinging\n    if (node.description) {\n      if (Array.isArray(nodeDb[node.id].description)) {\n        // There already is an array of strings,add to it\n        nodeDb[node.id].shape = 'rectWithTitle';\n        nodeDb[node.id].description.push(node.description);\n      } else {\n        if (nodeDb[node.id].description.length > 0) {\n          // if there is a description already transformit to an array\n          nodeDb[node.id].shape = 'rectWithTitle';\n          if (nodeDb[node.id].description === node.id) {\n            // If the previous description was the is, remove it\n            nodeDb[node.id].description = [node.description];\n          } else {\n            nodeDb[node.id].description = [nodeDb[node.id].description, node.description];\n          }\n        } else {\n          nodeDb[node.id].shape = 'rect';\n          nodeDb[node.id].description = node.description;\n        }\n      }\n      nodeDb[node.id].description = common.sanitizeTextOrArray(\n        nodeDb[node.id].description,\n        getConfig()\n      );\n    }\n\n    //\n    if (nodeDb[node.id].description.length === 1 && nodeDb[node.id].shape === 'rectWithTitle') {\n      nodeDb[node.id].shape = 'rect';\n    }\n\n    // Save data for description and group so that for instance a statement without description overwrites\n    // one with description\n\n    // group\n    if (!nodeDb[node.id].type && node.doc) {\n      log.info('Setting cluster for ', node.id, getDir(node));\n      nodeDb[node.id].type = 'group';\n      nodeDb[node.id].dir = getDir(node);\n      nodeDb[node.id].shape = node.type === 'divider' ? 'divider' : 'roundedWithTitle';\n      nodeDb[node.id].classes =\n        nodeDb[node.id].classes +\n        ' ' +\n        (altFlag ? 'statediagram-cluster statediagram-cluster-alt' : 'statediagram-cluster');\n    }\n\n    const nodeData = {\n      labelStyle: '',\n      shape: nodeDb[node.id].shape,\n      labelText: nodeDb[node.id].description,\n      // typeof nodeDb[node.id].description === 'object'\n      //   ? nodeDb[node.id].description[0]\n      //   : nodeDb[node.id].description,\n      classes: nodeDb[node.id].classes, //classStr,\n      style: '', //styles.style,\n      id: node.id,\n      dir: nodeDb[node.id].dir,\n      domId: 'state-' + node.id + '-' + cnt,\n      type: nodeDb[node.id].type,\n      padding: 15, //getConfig().flowchart.padding\n    };\n\n    if (node.note) {\n      // Todo: set random id\n      const noteData = {\n        labelStyle: '',\n        shape: 'note',\n        labelText: node.note.text,\n        classes: 'statediagram-note', //classStr,\n        style: '', //styles.style,\n        id: node.id + '----note-' + cnt,\n        domId: 'state-' + node.id + '----note-' + cnt,\n        type: nodeDb[node.id].type,\n        padding: 15, //getConfig().flowchart.padding\n      };\n      const groupData = {\n        labelStyle: '',\n        shape: 'noteGroup',\n        labelText: node.note.text,\n        classes: nodeDb[node.id].classes, //classStr,\n        style: '', //styles.style,\n        id: node.id + '----parent',\n        domId: 'state-' + node.id + '----parent-' + cnt,\n        type: 'group',\n        padding: 0, //getConfig().flowchart.padding\n      };\n      cnt++;\n\n      g.setNode(node.id + '----parent', groupData);\n\n      g.setNode(noteData.id, noteData);\n      g.setNode(node.id, nodeData);\n\n      g.setParent(node.id, node.id + '----parent');\n      g.setParent(noteData.id, node.id + '----parent');\n\n      let from = node.id;\n      let to = noteData.id;\n\n      if (node.note.position === 'left of') {\n        from = noteData.id;\n        to = node.id;\n      }\n      g.setEdge(from, to, {\n        arrowhead: 'none',\n        arrowType: '',\n        style: 'fill:none',\n        labelStyle: '',\n        classes: 'transition note-edge',\n        arrowheadStyle: 'fill: #333',\n        labelpos: 'c',\n        labelType: 'text',\n        thickness: 'normal',\n      });\n    } else {\n      g.setNode(node.id, nodeData);\n    }\n  }\n\n  if (parent) {\n    if (parent.id !== 'root') {\n      log.trace('Setting node ', node.id, ' to be child of its parent ', parent.id);\n      g.setParent(node.id, parent.id);\n    }\n  }\n  if (node.doc) {\n    log.trace('Adding nodes children ');\n    setupDoc(g, node, node.doc, !altFlag);\n  }\n};\nlet cnt = 0;\nconst setupDoc = (g, parent, doc, altFlag) => {\n  // cnt = 0;\n  log.trace('items', doc);\n  doc.forEach((item) => {\n    if (item.stmt === 'state' || item.stmt === 'default') {\n      setupNode(g, parent, item, altFlag);\n    } else if (item.stmt === 'relation') {\n      setupNode(g, parent, item.state1, altFlag);\n      setupNode(g, parent, item.state2, altFlag);\n      const edgeData = {\n        id: 'edge' + cnt,\n        arrowhead: 'normal',\n        arrowTypeEnd: 'arrow_barb',\n        style: 'fill:none',\n        labelStyle: '',\n        label: common.sanitizeText(item.description, getConfig()),\n        arrowheadStyle: 'fill: #333',\n        labelpos: 'c',\n        labelType: 'text',\n        thickness: 'normal',\n        classes: 'transition',\n      };\n      let startId = item.state1.id;\n      let endId = item.state2.id;\n\n      g.setEdge(startId, endId, edgeData, cnt);\n      cnt++;\n    }\n  });\n};\nconst getDir = (nodes, defaultDir) => {\n  let dir = defaultDir || 'TB';\n  if (nodes.doc) {\n    for (let i = 0; i < nodes.doc.length; i++) {\n      const node = nodes.doc[i];\n      if (node.stmt === 'dir') {\n        dir = node.value;\n      }\n    }\n  }\n  return dir;\n};\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n */\nexport const draw = function (text, id) {\n  log.info('Drawing state diagram (v2)', id);\n  stateDb.clear();\n  nodeDb = {};\n  const parser = state.parser;\n  parser.yy = stateDb;\n\n  // Parse the graph definition\n  parser.parse(text);\n\n  // Fetch the default direction, use TD if none was found\n  let dir = stateDb.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'LR';\n  }\n\n  const conf = getConfig().state;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  const securityLevel = getConfig().securityLevel;\n\n  log.info(stateDb.getRootDocV2());\n  stateDb.extract(stateDb.getRootDocV2());\n  log.info(stateDb.getRootDocV2());\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: getDir(stateDb.getRootDocV2()),\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  setupNode(g, undefined, stateDb.getRootDocV2(), true);\n\n  // Set up an SVG group so that we can translate the final graph.\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Run the renderer. This is what draws the final graph.\n\n  const element = root.select('#' + id + ' g');\n  render(element, g, ['barb'], 'statediagram', id);\n\n  const padding = 8;\n\n  const bounds = svg.node().getBBox();\n\n  const width = bounds.width + padding * 2;\n  const height = bounds.height + padding * 2;\n\n  // Zoom in a bit\n  svg.attr('class', 'statediagram');\n\n  const svgBounds = svg.node().getBBox();\n\n  configureSvgSize(svg, height, width * 1.75, conf.useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  svg.attr('viewBox', vBox);\n\n  // Add label rects for non html labels\n  // if (!evaluate(conf.htmlLabels) || true) {\n  const labels = document.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n  for (let k = 0; k < labels.length; k++) {\n    const label = labels[k];\n\n    // Get dimensions of label\n    const dim = label.getBBox();\n\n    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rect.setAttribute('rx', 0);\n    rect.setAttribute('ry', 0);\n    rect.setAttribute('width', dim.width);\n    rect.setAttribute('height', dim.height);\n\n    label.insertBefore(rect, label.firstChild);\n    // }\n  }\n};\n\nexport default {\n  setConf,\n  getClasses,\n  draw,\n};\n","import { select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport stateDb from './stateDb';\nimport common from '../common/common';\nimport { parser } from './parser/stateDiagram';\n// import idCache from './id-cache';\nimport { drawState, addTitleAndBox, drawEdge } from './shapes';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\n\nparser.yy = stateDb;\n\n// TODO Move conf object to main conf in mermaidAPI\nlet conf;\n\nconst transformationLog = {};\n\nexport const setConf = function () {};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nconst insertMarkers = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 19,7 L9,13 L14,7 L9,1 Z');\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n */\nexport const draw = function (text, id) {\n  conf = getConfig().state;\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  parser.yy.clear();\n  parser.parse(text);\n  log.debug('Rendering diagram ' + text);\n\n  // Fetch the default direction, use TD if none was found\n  const diagram = root.select(`[id='${id}']`);\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n    // acyclicer: 'greedy',\n    rankdir: 'RL',\n    // ranksep: '20'\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  const rootDoc = stateDb.getRootDoc();\n  renderDoc(rootDoc, diagram, undefined, false, root, doc);\n\n  const padding = conf.padding;\n  const bounds = diagram.node().getBBox();\n\n  const width = bounds.width + padding * 2;\n  const height = bounds.height + padding * 2;\n\n  // zoom in a bit\n  const svgWidth = width * 1.75;\n  configureSvgSize(diagram, height, svgWidth, conf.useMaxWidth);\n\n  diagram.attr(\n    'viewBox',\n    `${bounds.x - conf.padding}  ${bounds.y - conf.padding} ` + width + ' ' + height\n  );\n};\nconst getLabelWidth = (text) => {\n  return text ? text.length * conf.fontSizeFactor : 1;\n};\n\nconst renderDoc = (doc, diagram, parentId, altBkg, root, domDocument) => {\n  // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    compound: true,\n    multigraph: true,\n  });\n\n  let i;\n  let edgeFreeDoc = true;\n  for (i = 0; i < doc.length; i++) {\n    if (doc[i].stmt === 'relation') {\n      edgeFreeDoc = false;\n      break;\n    }\n  }\n\n  // Set an object for the graph label\n  if (parentId)\n    graph.setGraph({\n      rankdir: 'LR',\n      multigraph: true,\n      compound: true,\n      // acyclicer: 'greedy',\n      ranker: 'tight-tree',\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50,\n      isMultiGraph: true,\n      // ranksep: 5,\n      // nodesep: 1\n    });\n  else {\n    graph.setGraph({\n      rankdir: 'TB',\n      multigraph: true,\n      compound: true,\n      // isCompound: true,\n      // acyclicer: 'greedy',\n      // ranker: 'longest-path'\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50,\n      ranker: 'tight-tree',\n      // ranker: 'network-simplex'\n      isMultiGraph: true,\n    });\n  }\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  stateDb.extract(doc);\n  const states = stateDb.getStates();\n  const relations = stateDb.getRelations();\n\n  const keys = Object.keys(states);\n\n  let first = true;\n\n  for (let i = 0; i < keys.length; i++) {\n    const stateDef = states[keys[i]];\n\n    if (parentId) {\n      stateDef.parentId = parentId;\n    }\n\n    let node;\n    if (stateDef.doc) {\n      let sub = diagram.append('g').attr('id', stateDef.id).attr('class', 'stateGroup');\n      node = renderDoc(stateDef.doc, sub, stateDef.id, !altBkg, root, domDocument);\n\n      if (first) {\n        // first = false;\n        sub = addTitleAndBox(sub, stateDef, altBkg);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height + conf.padding / 2;\n        transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      } else {\n        // sub = addIdAndBox(sub, stateDef);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height;\n        // transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      }\n    } else {\n      node = drawState(diagram, stateDef, graph);\n    }\n\n    if (stateDef.note) {\n      // Draw note note\n      const noteDef = {\n        descriptions: [],\n        id: stateDef.id + '-note',\n        note: stateDef.note,\n        type: 'note',\n      };\n      const note = drawState(diagram, noteDef, graph);\n\n      // graph.setNode(node.id, node);\n      if (stateDef.note.position === 'left of') {\n        graph.setNode(node.id + '-note', note);\n        graph.setNode(node.id, node);\n      } else {\n        graph.setNode(node.id, node);\n        graph.setNode(node.id + '-note', note);\n      }\n      // graph.setNode(node.id);\n      graph.setParent(node.id, node.id + '-group');\n      graph.setParent(node.id + '-note', node.id + '-group');\n    } else {\n      // Add nodes to the graph. The first argument is the node id. The second is\n      // metadata about the node. In this case we're going to add labels to each of\n      // our nodes.\n      graph.setNode(node.id, node);\n    }\n  }\n\n  log.debug('Count=', graph.nodeCount(), graph);\n  let cnt = 0;\n  relations.forEach(function (relation) {\n    cnt++;\n    log.debug('Setting edge', relation);\n    graph.setEdge(\n      relation.id1,\n      relation.id2,\n      {\n        relation: relation,\n        width: getLabelWidth(relation.title),\n        height: conf.labelHeight * common.getRows(relation.title).length,\n        labelpos: 'c',\n      },\n      'id' + cnt\n    );\n  });\n\n  dagre.layout(graph);\n\n  log.debug('Graph after layout', graph.nodes());\n  const svgElem = diagram.node();\n\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      log.warn('Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n      root\n        .select('#' + svgElem.id + ' #' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y +\n              (transformationLog[v] ? transformationLog[v].y : 0) -\n              graph.node(v).height / 2) +\n            ' )'\n        );\n      root\n        .select('#' + svgElem.id + ' #' + v)\n        .attr('data-x-shift', graph.node(v).x - graph.node(v).width / 2);\n      const dividers = domDocument.querySelectorAll('#' + svgElem.id + ' #' + v + ' .divider');\n      dividers.forEach((divider) => {\n        const parent = divider.parentElement;\n        let pWidth = 0;\n        let pShift = 0;\n        if (parent) {\n          if (parent.parentElement) pWidth = parent.parentElement.getBBox().width;\n          pShift = parseInt(parent.getAttribute('data-x-shift'), 10);\n          if (Number.isNaN(pShift)) {\n            pShift = 0;\n          }\n        }\n        divider.setAttribute('x1', 0 - pShift + 8);\n        divider.setAttribute('x2', pWidth - pShift - 8);\n      });\n    } else {\n      log.debug('No Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n    }\n  });\n\n  let stateBox = svgElem.getBBox();\n\n  graph.edges().forEach(function (e) {\n    if (typeof e !== 'undefined' && typeof graph.edge(e) !== 'undefined') {\n      log.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(graph.edge(e)));\n      drawEdge(diagram, graph.edge(e), graph.edge(e).relation);\n    }\n  });\n\n  stateBox = svgElem.getBBox();\n\n  const stateInfo = {\n    id: parentId ? parentId : 'root',\n    label: parentId ? parentId : 'root',\n    width: 0,\n    height: 0,\n  };\n\n  stateInfo.width = stateBox.width + 2 * conf.padding;\n  stateInfo.height = stateBox.height + 2 * conf.padding;\n\n  log.debug('Doc rendered', stateInfo, graph);\n  return stateInfo;\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\ndefs #statediagram-barbEnd {\n    fill: ${options.transitionColor};\n    stroke: ${options.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${options.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${options.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${options.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${options.mainBkg};\n  stroke: ${options.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${options.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${options.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${options.noteBorderColor};\n  fill: ${options.noteBkgColor};\n\n  text {\n    fill: ${options.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${options.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel .label text {\n  fill: ${options.transitionLabelColor || options.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${options.transitionLabelColor || options.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${options.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${options.specialStateColor};\n  stroke: ${options.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${options.specialStateColor};\n  stroke: ${options.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${options.innerEndBackground};\n  stroke: ${options.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${options.compositeBackground || options.background};\n  // stroke: ${options.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${options.stateBkg || options.mainBkg};\n  stroke: ${options.stateBorder || options.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${options.mainBkg};\n  stroke: ${options.stateBorder || options.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${options.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${options.compositeTitleBackground};\n  stroke: ${options.stateBorder || options.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${options.stateLabelColor};\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${options.stateBorder || options.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${options.compositeBackground || options.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${options.altBackground ? options.altBackground : '#efefef'};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${options.altBackground ? options.altBackground : '#efefef'};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${options.noteBkgColor};\n  stroke: ${options.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${options.noteBkgColor};\n  stroke: ${options.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${options.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${options.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${options.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${options.lineColor};\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n}\n`;\n\nexport default getStyles;\n","import mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\n\nlet title = '';\nlet currentSection = '';\n\nconst sections = [];\nconst tasks = [];\nconst rawTasks = [];\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const clear = function () {\n  sections.length = 0;\n  tasks.length = 0;\n  currentSection = '';\n  title = '';\n  rawTasks.length = 0;\n};\n\nexport const setTitle = function (txt) {\n  title = txt;\n};\n\nexport const getTitle = function () {\n  return title;\n};\n\nexport const addSection = function (txt) {\n  currentSection = txt;\n  sections.push(txt);\n};\n\nexport const getSections = function () {\n  return sections;\n};\n\nexport const getTasks = function () {\n  let allItemsProcessed = compileTasks();\n  const maxDepth = 100;\n  let iterationCount = 0;\n  while (!allItemsProcessed && iterationCount < maxDepth) {\n    allItemsProcessed = compileTasks();\n    iterationCount++;\n  }\n\n  tasks.push(...rawTasks);\n\n  return tasks;\n};\n\nconst updateActors = function () {\n  const tempActors = [];\n  tasks.forEach((task) => {\n    if (task.people) {\n      tempActors.push(...task.people);\n    }\n  });\n\n  const unique = new Set(tempActors);\n  return [...unique].sort();\n};\n\nexport const addTask = function (descr, taskData) {\n  const pieces = taskData.substr(1).split(':');\n\n  let score = 0;\n  let peeps = [];\n  if (pieces.length === 1) {\n    score = Number(pieces[0]);\n    peeps = [];\n  } else {\n    score = Number(pieces[0]);\n    peeps = pieces[1].split(',');\n  }\n  const peopleList = peeps.map((s) => s.trim());\n\n  const rawTask = {\n    section: currentSection,\n    type: currentSection,\n    people: peopleList,\n    task: descr,\n    score,\n  };\n\n  rawTasks.push(rawTask);\n};\n\nexport const addTaskOrg = function (descr) {\n  const newTask = {\n    section: currentSection,\n    type: currentSection,\n    description: descr,\n    task: descr,\n    classes: [],\n  };\n  tasks.push(newTask);\n};\n\nconst compileTasks = function () {\n  const compileTask = function (pos) {\n    return rawTasks[pos].processed;\n  };\n\n  let allProcessed = true;\n  for (let i = 0; i < rawTasks.length; i++) {\n    compileTask(i);\n\n    allProcessed = allProcessed && rawTasks[i].processed;\n  }\n  return allProcessed;\n};\n\nconst getActors = function () {\n  return updateActors();\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().journey,\n  clear,\n  setTitle,\n  getTitle,\n  addSection,\n  getSections,\n  getTasks,\n  addTask,\n  addTaskOrg,\n  getActors,\n};\n","import { select } from 'd3';\nimport { parser } from './parser/journey';\nimport journeyDb from './journeyDb';\nimport svgDraw from './svgDraw';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\n\nparser.yy = journeyDb;\n\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\nconst actors = {};\n\n/** @param {any} diagram */\nfunction drawActorLegend(diagram) {\n  const conf = getConfig().journey;\n  // Draw the actors\n  let yPos = 60;\n  Object.keys(actors).forEach((person) => {\n    const colour = actors[person].color;\n\n    const circleData = {\n      cx: 20,\n      cy: yPos,\n      r: 7,\n      fill: colour,\n      stroke: '#000',\n      pos: actors[person].position,\n    };\n    svgDraw.drawCircle(diagram, circleData);\n\n    const labelData = {\n      x: 40,\n      y: yPos + 7,\n      fill: '#666',\n      text: person,\n      textMargin: conf.boxTextMargin | 5,\n    };\n    svgDraw.drawText(diagram, labelData);\n\n    yPos += 20;\n  });\n}\nconst conf = getConfig().journey;\nconst LEFT_MARGIN = getConfig().journey.leftMargin;\nexport const draw = function (text, id) {\n  const conf = getConfig().journey;\n  parser.yy.clear();\n  parser.parse(text + '\\n');\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and ocument for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  bounds.init();\n  const diagram = root.select('#' + id);\n  diagram.attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n  svgDraw.initGraphics(diagram);\n\n  const tasks = parser.yy.getTasks();\n  const title = parser.yy.getTitle();\n\n  const actorNames = parser.yy.getActors();\n  for (let member in actors) delete actors[member];\n  let actorPos = 0;\n  actorNames.forEach((actorName) => {\n    actors[actorName] = {\n      color: conf.actorColours[actorPos % conf.actorColours.length],\n      position: actorPos,\n    };\n    actorPos++;\n  });\n\n  drawActorLegend(diagram);\n  bounds.insert(0, 0, LEFT_MARGIN, Object.keys(actors).length * 50);\n  drawTasks(diagram, tasks, 0);\n\n  const box = bounds.getBounds();\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', LEFT_MARGIN)\n      .attr('font-size', '4ex')\n      .attr('font-weight', 'bold')\n      .attr('y', 25);\n  }\n  const height = box.stopy - box.starty + 2 * conf.diagramMarginY;\n  const width = LEFT_MARGIN + box.stopx + 2 * conf.diagramMarginX;\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  // Draw activity line\n  diagram\n    .append('line')\n    .attr('x1', LEFT_MARGIN)\n    .attr('y1', conf.height * 4) // One section head + one task + margins\n    .attr('x2', width - LEFT_MARGIN - 4) // Subtract stroke width so arrow point is retained\n    .attr('y2', conf.height * 4)\n    .attr('stroke-width', 4)\n    .attr('stroke', 'black')\n    .attr('marker-end', 'url(#arrowhead)');\n\n  const extraVertForTitle = title ? 70 : 0;\n  diagram.attr('viewBox', `${box.startx} -25 ${width} ${height + extraVertForTitle}`);\n  diagram.attr('preserveAspectRatio', 'xMinYMin meet');\n  diagram.attr('height', height + extraVertForTitle + 25);\n};\n\nexport const bounds = {\n  data: {\n    startx: undefined,\n    stopx: undefined,\n    starty: undefined,\n    stopy: undefined,\n  },\n  verticalPos: 0,\n\n  sequenceItems: [],\n  init: function () {\n    this.sequenceItems = [];\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n    };\n    this.verticalPos = 0;\n  },\n  updateVal: function (obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  },\n  updateBounds: function (startx, starty, stopx, stopy) {\n    const conf = getConfig().journey;\n    const _self = this;\n    let cnt = 0;\n    /** @param {any} type */\n    function updateFn(type) {\n      return function updateItemBounds(item) {\n        cnt++;\n        // The loop sequenceItems is a stack so the biggest margins in the beginning of the sequenceItems\n        const n = _self.sequenceItems.length - cnt + 1;\n        _self.updateVal(item, 'starty', starty - n * conf.boxMargin, Math.min);\n        _self.updateVal(item, 'stopy', stopy + n * conf.boxMargin, Math.max);\n\n        _self.updateVal(bounds.data, 'startx', startx - n * conf.boxMargin, Math.min);\n        _self.updateVal(bounds.data, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n        if (!(type === 'activation')) {\n          _self.updateVal(item, 'startx', startx - n * conf.boxMargin, Math.min);\n          _self.updateVal(item, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n          _self.updateVal(bounds.data, 'starty', starty - n * conf.boxMargin, Math.min);\n          _self.updateVal(bounds.data, 'stopy', stopy + n * conf.boxMargin, Math.max);\n        }\n      };\n    }\n\n    this.sequenceItems.forEach(updateFn());\n  },\n  insert: function (startx, starty, stopx, stopy) {\n    const _startx = Math.min(startx, stopx);\n    const _stopx = Math.max(startx, stopx);\n    const _starty = Math.min(starty, stopy);\n    const _stopy = Math.max(starty, stopy);\n\n    this.updateVal(bounds.data, 'startx', _startx, Math.min);\n    this.updateVal(bounds.data, 'starty', _starty, Math.min);\n    this.updateVal(bounds.data, 'stopx', _stopx, Math.max);\n    this.updateVal(bounds.data, 'stopy', _stopy, Math.max);\n\n    this.updateBounds(_startx, _starty, _stopx, _stopy);\n  },\n  bumpVerticalPos: function (bump) {\n    this.verticalPos = this.verticalPos + bump;\n    this.data.stopy = this.verticalPos;\n  },\n  getVerticalPos: function () {\n    return this.verticalPos;\n  },\n  getBounds: function () {\n    return this.data;\n  },\n};\n\nconst fills = conf.sectionFills;\nconst textColours = conf.sectionColours;\n\nexport const drawTasks = function (diagram, tasks, verticalPos) {\n  const conf = getConfig().journey;\n  let lastSection = '';\n  const sectionVHeight = conf.height * 2 + conf.diagramMarginY;\n  const taskPos = verticalPos + sectionVHeight;\n\n  let sectionNumber = 0;\n  let fill = '#CCC';\n  let colour = 'black';\n  let num = 0;\n\n  // Draw the tasks\n  for (let i = 0; i < tasks.length; i++) {\n    let task = tasks[i];\n    if (lastSection !== task.section) {\n      fill = fills[sectionNumber % fills.length];\n      num = sectionNumber % fills.length;\n      colour = textColours[sectionNumber % textColours.length];\n\n      const section = {\n        x: i * conf.taskMargin + i * conf.width + LEFT_MARGIN,\n        y: 50,\n        text: task.section,\n        fill,\n        num,\n        colour,\n      };\n\n      svgDraw.drawSection(diagram, section, conf);\n      lastSection = task.section;\n      sectionNumber++;\n    }\n\n    // Collect the actors involved in the task\n    const taskActors = task.people.reduce((acc, actorName) => {\n      if (actors[actorName]) {\n        acc[actorName] = actors[actorName];\n      }\n\n      return acc;\n    }, {});\n\n    // Add some rendering data to the object\n    task.x = i * conf.taskMargin + i * conf.width + LEFT_MARGIN;\n    task.y = taskPos;\n    task.width = conf.diagramMarginX;\n    task.height = conf.diagramMarginY;\n    task.colour = colour;\n    task.fill = fill;\n    task.num = num;\n    task.actors = taskActors;\n\n    // Draw the box with the attached line\n    svgDraw.drawTask(diagram, task, conf);\n    bounds.insert(task.x, task.y, task.x + task.width + conf.taskMargin, 300 + 5 * 30); // stopy is the length of the descenders.\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `.label {\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    color: ${options.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${options.textColor}\n  }\n\n  .legend {\n    fill: ${options.textColor};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${options.textColor}\n  }\n\n  .face {\n    ${options.faceColor ? `fill: ${options.faceColor}` : 'fill: #FFF8DC'};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${options.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${options.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    font-size: 12px;\n    background: ${options.tertiaryColor};\n    border: 1px solid ${options.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${options.fillType0 ? `fill: ${options.fillType0}` : ''};\n  }\n  .task-type-1, .section-type-1  {\n    ${options.fillType0 ? `fill: ${options.fillType1}` : ''};\n  }\n  .task-type-2, .section-type-2  {\n    ${options.fillType0 ? `fill: ${options.fillType2}` : ''};\n  }\n  .task-type-3, .section-type-3  {\n    ${options.fillType0 ? `fill: ${options.fillType3}` : ''};\n  }\n  .task-type-4, .section-type-4  {\n    ${options.fillType0 ? `fill: ${options.fillType4}` : ''};\n  }\n  .task-type-5, .section-type-5  {\n    ${options.fillType0 ? `fill: ${options.fillType5}` : ''};\n  }\n  .task-type-6, .section-type-6  {\n    ${options.fillType0 ? `fill: ${options.fillType6}` : ''};\n  }\n  .task-type-7, .section-type-7  {\n    ${options.fillType0 ? `fill: ${options.fillType7}` : ''};\n  }\n\n  .actor-0 {\n    ${options.actor0 ? `fill: ${options.actor0}` : ''};\n  }\n  .actor-1 {\n    ${options.actor1 ? `fill: ${options.actor1}` : ''};\n  }\n  .actor-2 {\n    ${options.actor2 ? `fill: ${options.actor2}` : ''};\n  }\n  .actor-3 {\n    ${options.actor3 ? `fill: ${options.actor3}` : ''};\n  }\n  .actor-4 {\n    ${options.actor4 ? `fill: ${options.actor4}` : ''};\n  }\n  .actor-5 {\n    ${options.actor5 ? `fill: ${options.actor5}` : ''};\n  }\n\n  }\n`;\n\nexport default getStyles;\n","import { arc as d3arc } from 'd3';\n\nexport const drawRect = function (elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (typeof rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\nexport const drawFace = function (element, faceData) {\n  const radius = 15;\n  const circleElement = element\n    .append('circle')\n    .attr('cx', faceData.cx)\n    .attr('cy', faceData.cy)\n    .attr('class', 'face')\n    .attr('r', radius)\n    .attr('stroke-width', 2)\n    .attr('overflow', 'visible');\n\n  const face = element.append('g');\n\n  //left eye\n  face\n    .append('circle')\n    .attr('cx', faceData.cx - radius / 3)\n    .attr('cy', faceData.cy - radius / 3)\n    .attr('r', 1.5)\n    .attr('stroke-width', 2)\n    .attr('fill', '#666')\n    .attr('stroke', '#666');\n\n  //right eye\n  face\n    .append('circle')\n    .attr('cx', faceData.cx + radius / 3)\n    .attr('cy', faceData.cy - radius / 3)\n    .attr('r', 1.5)\n    .attr('stroke-width', 2)\n    .attr('fill', '#666')\n    .attr('stroke', '#666');\n\n  /** @param {any} face */\n  function smile(face) {\n    const arc = d3arc()\n      .startAngle(Math.PI / 2)\n      .endAngle(3 * (Math.PI / 2))\n      .innerRadius(radius / 2)\n      .outerRadius(radius / 2.2);\n    //mouth\n    face\n      .append('path')\n      .attr('class', 'mouth')\n      .attr('d', arc)\n      .attr('transform', 'translate(' + faceData.cx + ',' + (faceData.cy + 2) + ')');\n  }\n\n  /** @param {any} face */\n  function sad(face) {\n    const arc = d3arc()\n      .startAngle((3 * Math.PI) / 2)\n      .endAngle(5 * (Math.PI / 2))\n      .innerRadius(radius / 2)\n      .outerRadius(radius / 2.2);\n    //mouth\n    face\n      .append('path')\n      .attr('class', 'mouth')\n      .attr('d', arc)\n      .attr('transform', 'translate(' + faceData.cx + ',' + (faceData.cy + 7) + ')');\n  }\n\n  /** @param {any} face */\n  function ambivalent(face) {\n    face\n      .append('line')\n      .attr('class', 'mouth')\n      .attr('stroke', 2)\n      .attr('x1', faceData.cx - 5)\n      .attr('y1', faceData.cy + 7)\n      .attr('x2', faceData.cx + 5)\n      .attr('y2', faceData.cy + 7)\n      .attr('class', 'mouth')\n      .attr('stroke-width', '1px')\n      .attr('stroke', '#666');\n  }\n\n  if (faceData.score > 3) {\n    smile(face);\n  } else if (faceData.score < 3) {\n    sad(face);\n  } else {\n    ambivalent(face);\n  }\n\n  return circleElement;\n};\n\nexport const drawCircle = function (element, circleData) {\n  const circleElement = element.append('circle');\n  circleElement.attr('cx', circleData.cx);\n  circleElement.attr('cy', circleData.cy);\n  circleElement.attr('class', 'actor-' + circleData.pos);\n  circleElement.attr('fill', circleData.fill);\n  circleElement.attr('stroke', circleData.stroke);\n  circleElement.attr('r', circleData.r);\n\n  if (typeof circleElement.class !== 'undefined') {\n    circleElement.attr('class', circleElement.class);\n  }\n\n  if (typeof circleData.title !== 'undefined') {\n    circleElement.append('title').text(circleData.title);\n  }\n\n  return circleElement;\n};\n\nexport const drawText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(/<br\\s*\\/?>/gi, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.attr('class', 'legend');\n\n  textElem.style('text-anchor', textData.anchor);\n\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.text(nText);\n\n  return textElem;\n};\n\nexport const drawLabel = function (elem, txtObject) {\n  /**\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} cut\n   */\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, 50, 20, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.labelMargin;\n  txtObject.x = txtObject.x + 0.5 * txtObject.labelMargin;\n  drawText(elem, txtObject);\n};\n\nexport const drawSection = function (elem, section, conf) {\n  const g = elem.append('g');\n\n  const rect = getNoteRect();\n  rect.x = section.x;\n  rect.y = section.y;\n  rect.fill = section.fill;\n  rect.width = conf.width;\n  rect.height = conf.height;\n  rect.class = 'journey-section section-type-' + section.num;\n  rect.rx = 3;\n  rect.ry = 3;\n  drawRect(g, rect);\n\n  _drawTextCandidateFunc(conf)(\n    section.text,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'journey-section section-type-' + section.num },\n    conf,\n    section.colour\n  );\n};\n\nlet taskCount = -1;\n/**\n * Draws an actor in the diagram with the attaced line\n *\n * @param {any} elem The HTML element\n * @param {any} task The task to render\n * @param {any} conf The global configuration\n */\nexport const drawTask = function (elem, task, conf) {\n  const center = task.x + conf.width / 2;\n  const g = elem.append('g');\n  taskCount++;\n  const maxHeight = 300 + 5 * 30;\n  g.append('line')\n    .attr('id', 'task' + taskCount)\n    .attr('x1', center)\n    .attr('y1', task.y)\n    .attr('x2', center)\n    .attr('y2', maxHeight)\n    .attr('class', 'task-line')\n    .attr('stroke-width', '1px')\n    .attr('stroke-dasharray', '4 2')\n    .attr('stroke', '#666');\n\n  drawFace(g, {\n    cx: center,\n    cy: 300 + (5 - task.score) * 30,\n    score: task.score,\n  });\n\n  const rect = getNoteRect();\n  rect.x = task.x;\n  rect.y = task.y;\n  rect.fill = task.fill;\n  rect.width = conf.width;\n  rect.height = conf.height;\n  rect.class = 'task task-type-' + task.num;\n  rect.rx = 3;\n  rect.ry = 3;\n  drawRect(g, rect);\n\n  let xPos = task.x + 14;\n  task.people.forEach((person) => {\n    const colour = task.actors[person].color;\n\n    const circle = {\n      cx: xPos,\n      cy: task.y,\n      r: 7,\n      fill: colour,\n      stroke: '#000',\n      title: person,\n      pos: task.actors[person].position,\n    };\n\n    drawCircle(g, circle);\n    xPos += 10;\n  });\n\n  _drawTextCandidateFunc(conf)(\n    task.task,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'task' },\n    conf,\n    task.colour\n  );\n};\n\n/**\n * Draws a background rectangle\n *\n * @param {any} elem The html element\n * @param {any} bounds The bounds of the drawing\n */\nexport const drawBackgroundRect = function (elem, bounds) {\n  const rectElem = drawRect(elem, {\n    x: bounds.startx,\n    y: bounds.starty,\n    width: bounds.stopx - bounds.startx,\n    height: bounds.stopy - bounds.starty,\n    fill: bounds.fill,\n    class: 'rect',\n  });\n  rectElem.lower();\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    'text-anchor': 'start',\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nexport const getNoteRect = function () {\n  return {\n    x: 0,\n    y: 0,\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nconst _drawTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} colour\n   */\n  function byText(content, g, x, y, width, height, textAttrs, colour) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('font-color', colour)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   * @param {any} colour\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf, colour) {\n    const { taskFontSize, taskFontFamily } = conf;\n\n    const lines = content.split(/<br\\s*\\/?>/gi);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * taskFontSize - (taskFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .attr('fill', colour)\n        .style('text-anchor', 'middle')\n        .style('font-size', taskFontSize)\n        .style('font-family', taskFontFamily);\n      text\n        .append('tspan')\n        .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const body = g.append('switch');\n    const f = body\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('position', 'fixed');\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .attr('class', 'label')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, body, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (key in fromTextAttrsDict) {\n        // eslint-disable-line\n        // noinspection JSUnfilteredForInLoop\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nconst initGraphics = function (graphics) {\n  graphics\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 5)\n    .attr('refY', 2)\n    .attr('markerWidth', 6)\n    .attr('markerHeight', 4)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0,0 V 4 L6,2 Z'); // this is actual shape for arrowhead\n};\n\nexport default {\n  drawRect,\n  drawCircle,\n  drawSection,\n  drawText,\n  drawLabel,\n  drawTask,\n  drawBackgroundRect,\n  getTextObj,\n  getNoteRect,\n  initGraphics,\n};\n","/** Created by knut on 14-12-11. */\nimport { select } from 'd3';\nimport { log } from './logger';\n\nconst conf = {};\n\n/**\n * Merges the value of `conf` with the passed `cnf`\n *\n * @param {object} cnf Config to merge\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a an info picture in the tag with id: id based on the graph definition in text.\n *\n * @param {string} id The text for the error\n * @param {string} ver The version\n */\nexport const draw = (id, ver) => {\n  try {\n    log.debug('Renering svg for syntax error\\n');\n\n    const svg = select('#' + id);\n\n    const g = svg.append('g');\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z'\n      );\n\n    g.append('text') // text label for the x axis\n      .attr('class', 'error-text')\n      .attr('x', 1240)\n      .attr('y', 250)\n      .attr('font-size', '150px')\n      .style('text-anchor', 'middle')\n      .text('Syntax error in graph');\n    g.append('text') // text label for the x axis\n      .attr('class', 'error-text')\n      .attr('x', 1050)\n      .attr('y', 400)\n      .attr('font-size', '100px')\n      .style('text-anchor', 'middle')\n      .text('mermaid version ' + ver);\n\n    svg.attr('height', 100);\n    svg.attr('width', 400);\n    svg.attr('viewBox', '768 0 512 512');\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","let interactionFunctions = [];\nexport const addFunction = (func) => {\n  interactionFunctions.push(func);\n};\nexport const attachFunctions = () => {\n  interactionFunctions.forEach((f) => {\n    f();\n  });\n  interactionFunctions = [];\n};\n","import moment from 'moment-mini';\n\n/** @typedef {'debug' | 'info' | 'warn' | 'error' | 'fatal'} LogLevel A log level */\n\n/** @type {object<LogLevel, number>} */\nexport const LEVELS = {\n  debug: 1,\n  info: 2,\n  warn: 3,\n  error: 4,\n  fatal: 5,\n};\n\nexport const log = {\n  debug: () => {},\n  info: () => {},\n  warn: () => {},\n  error: () => {},\n  fatal: () => {},\n};\n\n/**\n * Sets a log level\n *\n * @param {LogLevel} [level=\"fatal\"] The level to set the logging to. Default is `\"fatal\"`\n */\nexport const setLogLevel = function (level = 'fatal') {\n  if (isNaN(level)) {\n    level = level.toLowerCase();\n    if (LEVELS[level] !== undefined) {\n      level = LEVELS[level];\n    }\n  }\n  log.trace = () => {};\n  log.debug = () => {};\n  log.info = () => {};\n  log.warn = () => {};\n  log.error = () => {};\n  log.fatal = () => {};\n  if (level <= LEVELS.fatal) {\n    log.fatal = console.error\n      ? console.error.bind(console, format('FATAL'), 'color: orange')\n      : console.log.bind(console, '\\x1b[35m', format('FATAL'));\n  }\n  if (level <= LEVELS.error) {\n    log.error = console.error\n      ? console.error.bind(console, format('ERROR'), 'color: orange')\n      : console.log.bind(console, '\\x1b[31m', format('ERROR'));\n  }\n  if (level <= LEVELS.warn) {\n    log.warn = console.warn\n      ? console.warn.bind(console, format('WARN'), 'color: orange')\n      : console.log.bind(console, `\\x1b[33m`, format('WARN'));\n  }\n  if (level <= LEVELS.info) {\n    log.info = console.info // ? console.info.bind(console, '\\x1b[34m', format('INFO'), 'color: blue')\n      ? console.info.bind(console, format('INFO'), 'color: lightblue')\n      : console.log.bind(console, '\\x1b[34m', format('INFO'));\n  }\n  if (level <= LEVELS.debug) {\n    log.debug = console.debug\n      ? console.debug.bind(console, format('DEBUG'), 'color: lightgreen')\n      : console.log.bind(console, '\\x1b[32m', format('DEBUG'));\n  }\n};\n\n/**\n * Returns a format with the timestamp and the log level\n *\n * @param {LogLevel} level The level for the log format\n * @returns {string} The format with the timestamp and log level\n */\nconst format = (level) => {\n  const time = moment().format('ss.SSS');\n  return `%c${time} : ${level} : `;\n};\n","/**\n * Web page integration module for the mermaid framework. It uses the mermaidAPI for mermaid\n * functionality and to render the diagrams to svg code.\n */\nimport { log } from './logger';\nimport mermaidAPI from './mermaidAPI';\nimport utils from './utils';\n\n/**\n * ## init\n *\n * Function that goes through the document to find the chart definitions in there and render them.\n *\n * The function tags the processed attributes with the attribute data-processed and ignores found\n * elements with the attribute already set. This way the init function can be triggered several times.\n *\n * Optionally, `init` can accept in the second argument one of the following:\n *\n * - A DOM Node\n * - An array of DOM nodes (as would come from a jQuery selector)\n * - A W3C selector, a la `.mermaid`\n *\n * ```mermaid\n * graph LR;\n *  a(Find elements)-->b{Processed}\n *  b-->|Yes|c(Leave element)\n *  b-->|No |d(Transform)\n * ```\n *\n * Renders the mermaid diagrams\n */\nconst init = function () {\n  const conf = mermaidAPI.getConfig();\n  // console.log('Starting rendering diagrams (init) - mermaid.init', conf);\n  let nodes;\n  if (arguments.length >= 2) {\n    /*! sequence config was passed as #1 */\n    if (typeof arguments[0] !== 'undefined') {\n      mermaid.sequenceConfig = arguments[0];\n    }\n\n    nodes = arguments[1];\n  } else {\n    nodes = arguments[0];\n  }\n\n  // if last argument is a function this is the callback function\n  let callback;\n  if (typeof arguments[arguments.length - 1] === 'function') {\n    callback = arguments[arguments.length - 1];\n    log.debug('Callback function found');\n  } else {\n    if (typeof conf.mermaid !== 'undefined') {\n      if (typeof conf.mermaid.callback === 'function') {\n        callback = conf.mermaid.callback;\n        log.debug('Callback function found');\n      } else {\n        log.debug('No Callback function found');\n      }\n    }\n  }\n  nodes =\n    nodes === undefined\n      ? document.querySelectorAll('.mermaid')\n      : typeof nodes === 'string'\n      ? document.querySelectorAll(nodes)\n      : nodes instanceof window.Node\n      ? [nodes]\n      : nodes; // Last case  - sequence config was passed pick next\n\n  log.debug('Start On Load before: ' + mermaid.startOnLoad);\n  if (typeof mermaid.startOnLoad !== 'undefined') {\n    log.debug('Start On Load inner: ' + mermaid.startOnLoad);\n    mermaidAPI.updateSiteConfig({ startOnLoad: mermaid.startOnLoad });\n  }\n\n  if (typeof mermaid.ganttConfig !== 'undefined') {\n    mermaidAPI.updateSiteConfig({ gantt: mermaid.ganttConfig });\n  }\n\n  const idGeneratior = new utils.initIdGeneratior(conf.deterministicIds, conf.deterministicIDSeed);\n\n  let txt;\n\n  for (let i = 0; i < nodes.length; i++) {\n    // element is the current div with mermaid class\n    const element = nodes[i];\n\n    /*! Check if previously processed */\n    if (!element.getAttribute('data-processed')) {\n      element.setAttribute('data-processed', true);\n    } else {\n      continue;\n    }\n\n    const id = `mermaid-${idGeneratior.next()}`;\n\n    // Fetch the graph definition including tags\n    txt = element.innerHTML;\n\n    // transforms the html to pure text\n    txt = utils\n      .entityDecode(txt)\n      .trim()\n      .replace(/<br\\s*\\/?>/gi, '<br/>');\n\n    const init = utils.detectInit(txt);\n    if (init) {\n      log.debug('Detected early reinit: ', init);\n    }\n\n    try {\n      mermaidAPI.render(\n        id,\n        txt,\n        (svgCode, bindFunctions) => {\n          element.innerHTML = svgCode;\n          if (typeof callback !== 'undefined') {\n            callback(id);\n          }\n          if (bindFunctions) bindFunctions(element);\n        },\n        element\n      );\n    } catch (e) {\n      log.warn('Syntax Error rendering');\n      log.warn(e);\n      if (this.parseError) {\n        this.parseError(e);\n      }\n    }\n  }\n};\n\nconst initialize = function (config) {\n  // mermaidAPI.reset();\n  if (typeof config.mermaid !== 'undefined') {\n    if (typeof config.mermaid.startOnLoad !== 'undefined') {\n      mermaid.startOnLoad = config.mermaid.startOnLoad;\n    }\n    if (typeof config.mermaid.htmlLabels !== 'undefined') {\n      mermaid.htmlLabels =\n        config.mermaid.htmlLabels === 'false' || config.mermaid.htmlLabels === false ? false : true;\n    }\n  }\n  mermaidAPI.initialize(config);\n  // mermaidAPI.reset();\n};\n\n/**\n * ##contentLoaded Callback function that is called when page is loaded. This functions fetches\n * configuration for mermaid rendering and calls init for rendering the mermaid diagrams on the page.\n */\nconst contentLoaded = function () {\n  let config;\n\n  if (mermaid.startOnLoad) {\n    // No config found, do check API config\n    config = mermaidAPI.getConfig();\n    if (config.startOnLoad) {\n      mermaid.init();\n    }\n  } else {\n    if (typeof mermaid.startOnLoad === 'undefined') {\n      log.debug('In start, no config');\n      config = mermaidAPI.getConfig();\n      if (config.startOnLoad) {\n        mermaid.init();\n      }\n    }\n  }\n};\n\nif (typeof document !== 'undefined') {\n  /*!\n   * Wait for document loaded before starting the execution\n   */\n  window.addEventListener(\n    'load',\n    function () {\n      contentLoaded();\n    },\n    false\n  );\n}\n\nconst mermaid = {\n  startOnLoad: true,\n  htmlLabels: true,\n\n  mermaidAPI,\n  parse: mermaidAPI.parse,\n  render: mermaidAPI.render,\n\n  init,\n  initialize,\n\n  contentLoaded,\n};\n\nexport default mermaid;\n","/**\n * Edit this\n * Page[[N|Solid](img/GitHub-Mark-32px.png)](https://github.com/mermaid-js/mermaid/blob/develop/src/mermaidAPI.js)\n *\n * This is the API to be used when optionally handling the integration with the web page, instead of\n * using the default integration provided by mermaid.js.\n *\n * The core of this api is the [**render**](Setup.md?id=render) function which, given a graph\n * definition as text, renders the graph/diagram and returns an svg element for the graph.\n *\n * It is is then up to the user of the API to make use of the svg, either insert it somewhere in the\n * page or do something completely different.\n *\n * In addition to the render function, a number of behavioral configuration options are available.\n *\n * @name mermaidAPI\n */\nimport { select } from 'd3';\nimport { compile, serialize, stringify } from 'stylis';\nimport pkg from '../package.json';\nimport * as configApi from './config';\nimport classDb from './diagrams/class/classDb';\nimport classRenderer from './diagrams/class/classRenderer';\nimport classRendererV2 from './diagrams/class/classRenderer-v2';\nimport classParser from './diagrams/class/parser/classDiagram';\nimport erDb from './diagrams/er/erDb';\nimport erRenderer from './diagrams/er/erRenderer';\nimport erParser from './diagrams/er/parser/erDiagram';\nimport flowDb from './diagrams/flowchart/flowDb';\nimport flowRenderer from './diagrams/flowchart/flowRenderer';\nimport flowRendererV2 from './diagrams/flowchart/flowRenderer-v2';\nimport flowParser from './diagrams/flowchart/parser/flow';\nimport ganttDb from './diagrams/gantt/ganttDb';\nimport ganttRenderer from './diagrams/gantt/ganttRenderer';\nimport ganttParser from './diagrams/gantt/parser/gantt';\nimport gitGraphAst from './diagrams/git/gitGraphAst';\nimport gitGraphRenderer from './diagrams/git/gitGraphRenderer';\nimport gitGraphParser from './diagrams/git/parser/gitGraph';\nimport infoDb from './diagrams/info/infoDb';\nimport infoRenderer from './diagrams/info/infoRenderer';\nimport infoParser from './diagrams/info/parser/info';\nimport pieParser from './diagrams/pie/parser/pie';\nimport pieDb from './diagrams/pie/pieDb';\nimport pieRenderer from './diagrams/pie/pieRenderer';\nimport requirementParser from './diagrams/requirement/parser/requirementDiagram';\nimport requirementDb from './diagrams/requirement/requirementDb';\nimport requirementRenderer from './diagrams/requirement/requirementRenderer';\nimport sequenceParser from './diagrams/sequence/parser/sequenceDiagram';\nimport sequenceDb from './diagrams/sequence/sequenceDb';\nimport sequenceRenderer from './diagrams/sequence/sequenceRenderer';\nimport stateParser from './diagrams/state/parser/stateDiagram';\nimport stateDb from './diagrams/state/stateDb';\nimport stateRenderer from './diagrams/state/stateRenderer';\nimport stateRendererV2 from './diagrams/state/stateRenderer-v2';\nimport journeyDb from './diagrams/user-journey/journeyDb';\nimport journeyRenderer from './diagrams/user-journey/journeyRenderer';\nimport journeyParser from './diagrams/user-journey/parser/journey';\nimport errorRenderer from './errorRenderer';\nimport { attachFunctions } from './interactionDb';\nimport { log, setLogLevel } from './logger';\nimport getStyles from './styles';\nimport theme from './themes';\nimport utils, { directiveSanitizer, assignWithDepth, sanitizeCss } from './utils';\n\n/**\n * @param text\n * @returns {any}\n */\nfunction parse(text) {\n  const cnf = configApi.getConfig();\n  const graphInit = utils.detectInit(text, cnf);\n  if (graphInit) {\n    reinitialize(graphInit);\n    log.debug('reinit ', graphInit);\n  }\n  const graphType = utils.detectType(text, cnf);\n  let parser;\n\n  log.debug('Type ' + graphType);\n  switch (graphType) {\n    case 'git':\n      parser = gitGraphParser;\n      parser.parser.yy = gitGraphAst;\n      break;\n    case 'flowchart':\n      flowDb.clear();\n      parser = flowParser;\n      parser.parser.yy = flowDb;\n      break;\n    case 'flowchart-v2':\n      flowDb.clear();\n      parser = flowParser;\n      parser.parser.yy = flowDb;\n      break;\n    case 'sequence':\n      parser = sequenceParser;\n      parser.parser.yy = sequenceDb;\n      break;\n    case 'gantt':\n      parser = ganttParser;\n      parser.parser.yy = ganttDb;\n      break;\n    case 'class':\n      parser = classParser;\n      parser.parser.yy = classDb;\n      break;\n    case 'classDiagram':\n      parser = classParser;\n      parser.parser.yy = classDb;\n      break;\n    case 'state':\n      parser = stateParser;\n      parser.parser.yy = stateDb;\n      break;\n    case 'stateDiagram':\n      parser = stateParser;\n      parser.parser.yy = stateDb;\n      break;\n    case 'info':\n      log.debug('info info info');\n      parser = infoParser;\n      parser.parser.yy = infoDb;\n      break;\n    case 'pie':\n      log.debug('pie');\n      parser = pieParser;\n      parser.parser.yy = pieDb;\n      break;\n    case 'er':\n      log.debug('er');\n      parser = erParser;\n      parser.parser.yy = erDb;\n      break;\n    case 'journey':\n      log.debug('Journey');\n      parser = journeyParser;\n      parser.parser.yy = journeyDb;\n      break;\n    case 'requirement':\n    case 'requirementDiagram':\n      log.debug('RequirementDiagram');\n      parser = requirementParser;\n      parser.parser.yy = requirementDb;\n      break;\n  }\n  parser.parser.yy.graphType = graphType;\n  parser.parser.yy.parseError = (str, hash) => {\n    const error = { str, hash };\n    throw error;\n  };\n\n  parser.parse(text);\n  return parser;\n}\n\nexport const encodeEntities = function (text) {\n  let txt = text;\n\n  txt = txt.replace(/style.*:\\S*#.*;/g, function (s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n  txt = txt.replace(/classDef.*:\\S*#.*;/g, function (s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n\n  txt = txt.replace(/#\\w+;/g, function (s) {\n    const innerTxt = s.substring(1, s.length - 1);\n\n    const isInt = /^\\+?\\d+$/.test(innerTxt);\n    if (isInt) {\n      return 'ﬂ°°' + innerTxt + '¶ß';\n    } else {\n      return 'ﬂ°' + innerTxt + '¶ß';\n    }\n  });\n\n  return txt;\n};\n\nexport const decodeEntities = function (text) {\n  let txt = text;\n\n  txt = txt.replace(/ﬂ°°/g, function () {\n    return '&#';\n  });\n  txt = txt.replace(/ﬂ°/g, function () {\n    return '&';\n  });\n  txt = txt.replace(/¶ß/g, function () {\n    return ';';\n  });\n\n  return txt;\n};\n/**\n * Function that renders an svg with a graph from a chart definition. Usage example below.\n *\n * ```javascript\n * mermaidAPI.initialize({\n *   startOnLoad: true,\n * });\n * $(function () {\n *   const graphDefinition = 'graph TB\\na-->b';\n *   const cb = function (svgGraph) {\n *     console.log(svgGraph);\n *   };\n *   mermaidAPI.render('id1', graphDefinition, cb);\n * });\n * ```\n *\n * @param {any} id The id of the element to be rendered\n * @param {any} _txt The graph definition\n * @param {any} cb Callback which is called after rendering is finished with the svg code as inparam.\n * @param {any} container Selector to element in which a div with the graph temporarily will be\n *   inserted. In one is provided a hidden div will be inserted in the body of the page instead. The\n *   element will be removed when rendering is completed.\n * @returns {any}\n */\nconst render = function (id, _txt, cb, container) {\n  configApi.reset();\n  let txt = _txt;\n  const graphInit = utils.detectInit(txt);\n  if (graphInit) {\n    directiveSanitizer(graphInit);\n    configApi.addDirective(graphInit);\n  }\n  let cnf = configApi.getConfig();\n  // Check the maximum allowed text size\n  if (_txt.length > cnf.maxTextSize) {\n    txt = 'graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa';\n  }\n\n  // let d3Iframe;\n  let root = select('body');\n\n  // In regular execurtion the container will be the div with a mermaid class\n  if (typeof container !== 'undefined') {\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select('body')\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n      // const iframeBody = ;\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    }\n\n    // A container was provided by the caller\n    container.innerHTML = '';\n\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select(container)\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n      // const iframeBody = ;\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    } else {\n      root = select(container);\n    }\n\n    root\n      .append('div')\n      .attr('id', 'd' + id)\n      .attr('style', 'font-family: ' + cnf.fontFamily)\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .append('g');\n  } else {\n    // No container was provided\n    // If there is an existsing element with the id, we remove it\n    // this likley a previously rendered diagram\n    const existingSvg = document.getElementById(id);\n    if (existingSvg) {\n      existingSvg.remove();\n    }\n\n    // Remove previous tpm element if it exists\n    let element;\n    if (cnf.securityLevel !== 'sandbox') {\n      element = document.querySelector('#' + 'd' + id);\n    } else {\n      element = document.querySelector('#' + 'i' + id);\n    }\n    if (element) {\n      element.remove();\n    }\n\n    // if (cnf.securityLevel === 'sandbox') {\n    //   const iframe = select('body')\n    //     .append('iframe')\n    //     .attr('id', 'i' + id)\n    //     .attr('sandbox', '');\n    //   // const iframeBody = ;\n    //   root = select(iframe.nodes()[0].contentDocument.body);\n    // }\n\n    // Add the tmp div used for rendering with the id `d${id}`\n    // d+id it will contain a svg with the id \"id\"\n\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select('body')\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n      // const iframeBody = ;\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    } else {\n      root = select('body');\n    }\n\n    // This is the temporary div\n    root\n      .append('div')\n      .attr('id', 'd' + id)\n      // this is the seed of the svg to be rendered\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .append('g');\n  }\n\n  txt = encodeEntities(txt);\n\n  // Get the tmp element containing the the svg\n  const element = root.select('#d' + id).node();\n  const graphType = utils.detectType(txt, cnf);\n\n  // insert inline style into svg\n  const svg = element.firstChild;\n  const firstChild = svg.firstChild;\n\n  let userStyles = '';\n  // user provided theme CSS\n  if (cnf.themeCSS !== undefined) {\n    userStyles += `\\n${cnf.themeCSS}`;\n  }\n  // user provided theme CSS\n  if (cnf.fontFamily !== undefined) {\n    userStyles += `\\n:root { --mermaid-font-family: ${cnf.fontFamily}}`;\n  }\n  // user provided theme CSS\n  if (cnf.altFontFamily !== undefined) {\n    userStyles += `\\n:root { --mermaid-alt-font-family: ${cnf.altFontFamily}}`;\n  }\n\n  // classDef\n  if (graphType === 'flowchart' || graphType === 'flowchart-v2' || graphType === 'graph') {\n    const classes = flowRenderer.getClasses(txt);\n    const htmlLabels = cnf.htmlLabels || cnf.flowchart.htmlLabels;\n    for (const className in classes) {\n      if (htmlLabels) {\n        userStyles += `\\n.${className} > * { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} span { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n      } else {\n        userStyles += `\\n.${className} path { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} rect { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} polygon { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} ellipse { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} circle { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        if (classes[className].textStyles) {\n          userStyles += `\\n.${className} tspan { ${classes[className].textStyles.join(\n            ' !important; '\n          )} !important; }`;\n        }\n      }\n    }\n  }\n\n  // log.warn(cnf.themeVariables);\n\n  const stylis = (selector, styles) => serialize(compile(`${selector}{${styles}}`), stringify);\n  const rules = stylis(`#${id}`, getStyles(graphType, userStyles, cnf.themeVariables));\n\n  const style1 = document.createElement('style');\n  style1.innerHTML = `#${id} ` + rules;\n  svg.insertBefore(style1, firstChild);\n\n  // Verify that the generated svgs are ok before removing this\n\n  // const style2 = document.createElement('style');\n  // const cs = window.getComputedStyle(svg);\n  // style2.innerHTML = `#d${id} * {\n  //   color: ${cs.color};\n  //   // font: ${cs.font};\n  //   // font-family: Arial;\n  //   // font-size: 24px;\n  // }`;\n  // svg.insertBefore(style2, firstChild);\n\n  try {\n    switch (graphType) {\n      case 'git':\n        cnf.flowchart.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        gitGraphRenderer.setConf(cnf.git);\n        gitGraphRenderer.draw(txt, id, false);\n        break;\n      case 'flowchart':\n        cnf.flowchart.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        flowRenderer.setConf(cnf.flowchart);\n        flowRenderer.draw(txt, id, false);\n        break;\n      case 'flowchart-v2':\n        cnf.flowchart.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        flowRendererV2.setConf(cnf.flowchart);\n        flowRendererV2.draw(txt, id, false);\n        break;\n      case 'sequence':\n        cnf.sequence.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        if (cnf.sequenceDiagram) {\n          // backwards compatibility\n          sequenceRenderer.setConf(Object.assign(cnf.sequence, cnf.sequenceDiagram));\n          console.error(\n            '`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.'\n          );\n        } else {\n          sequenceRenderer.setConf(cnf.sequence);\n        }\n        sequenceRenderer.draw(txt, id);\n        break;\n      case 'gantt':\n        cnf.gantt.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        ganttRenderer.setConf(cnf.gantt);\n        ganttRenderer.draw(txt, id);\n        break;\n      case 'class':\n        cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        classRenderer.setConf(cnf.class);\n        classRenderer.draw(txt, id);\n        break;\n      case 'classDiagram':\n        cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        classRendererV2.setConf(cnf.class);\n        classRendererV2.draw(txt, id);\n        break;\n      case 'state':\n        cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        stateRenderer.setConf(cnf.state);\n        stateRenderer.draw(txt, id);\n        break;\n      case 'stateDiagram':\n        cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        stateRendererV2.setConf(cnf.state);\n        stateRendererV2.draw(txt, id);\n        break;\n      case 'info':\n        cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        infoRenderer.setConf(cnf.class);\n        infoRenderer.draw(txt, id, pkg.version);\n        break;\n      case 'pie':\n        //cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n        //pieRenderer.setConf(cnf.pie);\n        pieRenderer.draw(txt, id, pkg.version);\n        break;\n      case 'er':\n        erRenderer.setConf(cnf.er);\n        erRenderer.draw(txt, id, pkg.version);\n        break;\n      case 'journey':\n        journeyRenderer.setConf(cnf.journey);\n        journeyRenderer.draw(txt, id, pkg.version);\n        break;\n      case 'requirement':\n        requirementRenderer.setConf(cnf.requirement);\n        requirementRenderer.draw(txt, id, pkg.version);\n        break;\n    }\n  } catch (e) {\n    // errorRenderer.setConf(cnf.class);\n    errorRenderer.draw(id, pkg.version);\n    throw e;\n  }\n\n  root\n    .select(`[id=\"${id}\"]`)\n    .selectAll('foreignobject > *')\n    .attr('xmlns', 'http://www.w3.org/1999/xhtml');\n\n  // Fix for when the base tag is used\n  let svgCode = root.select('#d' + id).node().innerHTML;\n\n  log.debug('cnf.arrowMarkerAbsolute', cnf.arrowMarkerAbsolute);\n  if (\n    (!cnf.arrowMarkerAbsolute || cnf.arrowMarkerAbsolute === 'false') &&\n    cnf.arrowMarkerAbsolute !== 'sandbox'\n  ) {\n    svgCode = svgCode.replace(/marker-end=\"url\\(.*?#/g, 'marker-end=\"url(#', 'g');\n  }\n\n  svgCode = decodeEntities(svgCode);\n\n  // Fix for when the br tag is used\n  svgCode = svgCode.replace(/<br>/g, '<br/>');\n\n  if (cnf.securityLevel === 'sandbox') {\n    let svgEl = root.select('#d' + id + ' svg').node();\n    let width = '100%';\n    let height = '100%';\n    if (svgEl) {\n      // width = svgEl.viewBox.baseVal.width + 'px';\n      height = svgEl.viewBox.baseVal.height + 'px';\n    }\n    svgCode = `<iframe style=\"width:${width};height:${height};border:0;margin:0;\" src=\"data:text/html;base64,${btoa(\n      '<body style=\"margin:0\">' + svgCode + '</body>'\n    )}\" sandbox=\"allow-top-navigation-by-user-activation allow-popups\">\n  The “iframe” tag is not supported by your browser.\n</iframe>`;\n  }\n\n  if (typeof cb !== 'undefined') {\n    switch (graphType) {\n      case 'flowchart':\n      case 'flowchart-v2':\n        cb(svgCode, flowDb.bindFunctions);\n        break;\n      case 'gantt':\n        cb(svgCode, ganttDb.bindFunctions);\n        break;\n      case 'class':\n      case 'classDiagram':\n        cb(svgCode, classDb.bindFunctions);\n        break;\n      default:\n        cb(svgCode);\n    }\n  } else {\n    log.debug('CB = undefined!');\n  }\n  attachFunctions();\n\n  const tmpElementSelector = cnf.securityLevel === 'sandbox' ? '#i' + id : '#d' + id;\n  const node = select(tmpElementSelector).node();\n  if (node !== null && typeof node.remove === 'function') {\n    select(tmpElementSelector).node().remove();\n  }\n\n  return svgCode;\n};\n\nlet currentDirective = {};\n\nconst parseDirective = function (p, statement, context, type) {\n  try {\n    if (statement !== undefined) {\n      statement = statement.trim();\n      switch (context) {\n        case 'open_directive':\n          currentDirective = {};\n          break;\n        case 'type_directive':\n          currentDirective.type = statement.toLowerCase();\n          break;\n        case 'arg_directive':\n          currentDirective.args = JSON.parse(statement);\n          break;\n        case 'close_directive':\n          handleDirective(p, currentDirective, type);\n          currentDirective = null;\n          break;\n      }\n    }\n  } catch (error) {\n    log.error(\n      `Error while rendering sequenceDiagram directive: ${statement} jison context: ${context}`\n    );\n    log.error(error.message);\n  }\n};\n\nconst handleDirective = function (p, directive, type) {\n  log.debug(`Directive type=${directive.type} with args:`, directive.args);\n  switch (directive.type) {\n    case 'init':\n    case 'initialize': {\n      ['config'].forEach((prop) => {\n        if (typeof directive.args[prop] !== 'undefined') {\n          if (type === 'flowchart-v2') {\n            type = 'flowchart';\n          }\n          directive.args[type] = directive.args[prop];\n          delete directive.args[prop];\n        }\n      });\n      log.debug('sanitize in handleDirective', directive.args);\n      directiveSanitizer(directive.args);\n      log.debug('sanitize in handleDirective (done)', directive.args);\n      reinitialize(directive.args);\n      configApi.addDirective(directive.args);\n      break;\n    }\n    case 'wrap':\n    case 'nowrap':\n      if (p && p['setWrap']) {\n        p.setWrap(directive.type === 'wrap');\n      }\n      break;\n    case 'themeCss':\n      log.warn('themeCss encountered');\n      break;\n    default:\n      log.warn(\n        `Unhandled directive: source: '%%{${directive.type}: ${JSON.stringify(\n          directive.args ? directive.args : {}\n        )}}%%`,\n        directive\n      );\n      break;\n  }\n};\n\n/** @param {any} conf */\nfunction updateRendererConfigs(conf) {\n  // Todo remove, all diagrams should get config on demoand from the config object, no need for this\n  gitGraphRenderer.setConf(conf.git);\n  flowRenderer.setConf(conf.flowchart);\n  flowRendererV2.setConf(conf.flowchart);\n  if (typeof conf['sequenceDiagram'] !== 'undefined') {\n    sequenceRenderer.setConf(assignWithDepth(conf.sequence, conf['sequenceDiagram']));\n  }\n  sequenceRenderer.setConf(conf.sequence);\n  ganttRenderer.setConf(conf.gantt);\n  classRenderer.setConf(conf.class);\n  stateRenderer.setConf(conf.state);\n  stateRendererV2.setConf(conf.state);\n  infoRenderer.setConf(conf.class);\n  // pieRenderer.setConf(conf.class);\n  erRenderer.setConf(conf.er);\n  journeyRenderer.setConf(conf.journey);\n  requirementRenderer.setConf(conf.requirement);\n  errorRenderer.setConf(conf.class);\n}\n\n/** To be removed */\nfunction reinitialize() {\n  // `mermaidAPI.reinitialize: v${pkg.version}`,\n  //   JSON.stringify(options),\n  //   options.themeVariables.primaryColor;\n  // // if (options.theme && theme[options.theme]) {\n  // //   options.themeVariables = theme[options.theme].getThemeVariables(options.themeVariables);\n  // // }\n  // // Set default options\n  // const config =\n  //   typeof options === 'object' ? configApi.setConfig(options) : configApi.getSiteConfig();\n  // updateRendererConfigs(config);\n  // setLogLevel(config.logLevel);\n  // log.debug('mermaidAPI.reinitialize: ', config);\n}\n\n/** @param {any} options */\nfunction initialize(options) {\n  // console.warn(`mermaidAPI.initialize: v${pkg.version} `, options);\n\n  // Handle legacy location of font-family configuration\n  if (options && options.fontFamily) {\n    if (!options.themeVariables) {\n      options.themeVariables = { fontFamily: options.fontFamily };\n    } else {\n      if (!options.themeVariables.fontFamily) {\n        options.themeVariables = { fontFamily: options.fontFamily };\n      }\n    }\n  }\n  // Set default options\n  configApi.saveConfigFromInitilize(options);\n\n  if (options && options.theme && theme[options.theme]) {\n    // Todo merge with user options\n    options.themeVariables = theme[options.theme].getThemeVariables(options.themeVariables);\n  } else {\n    if (options) options.themeVariables = theme.default.getThemeVariables(options.themeVariables);\n  }\n\n  const config =\n    typeof options === 'object' ? configApi.setSiteConfig(options) : configApi.getSiteConfig();\n\n  updateRendererConfigs(config);\n  setLogLevel(config.logLevel);\n  // log.debug('mermaidAPI.initialize: ', config);\n}\n\nconst mermaidAPI = Object.freeze({\n  render,\n  parse,\n  parseDirective,\n  initialize,\n  reinitialize,\n  getConfig: configApi.getConfig,\n  setConfig: configApi.setConfig,\n  getSiteConfig: configApi.getSiteConfig,\n  updateSiteConfig: configApi.updateSiteConfig,\n  reset: () => {\n    // console.warn('reset');\n    configApi.reset();\n    // const siteConfig = configApi.getSiteConfig();\n    // updateRendererConfigs(siteConfig);\n  },\n  globalReset: () => {\n    configApi.reset(configApi.defaultConfig);\n    updateRendererConfigs(configApi.getConfig());\n  },\n  defaultConfig: configApi.defaultConfig,\n});\n\nsetLogLevel(configApi.getConfig().logLevel);\nconfigApi.reset(configApi.getConfig());\n\nexport default mermaidAPI;\n/**\n * ## mermaidAPI configuration defaults\n *\n * ```html\n * <script>\n *   var config = {\n *     theme: 'default',\n *     logLevel: 'fatal',\n *     securityLevel: 'strict',\n *     startOnLoad: true,\n *     arrowMarkerAbsolute: false,\n *\n *     er: {\n *       diagramPadding: 20,\n *       layoutDirection: 'TB',\n *       minEntityWidth: 100,\n *       minEntityHeight: 75,\n *       entityPadding: 15,\n *       stroke: 'gray',\n *       fill: 'honeydew',\n *       fontSize: 12,\n *       useMaxWidth: true,\n *     },\n *     flowchart: {\n *       diagramPadding: 8,\n *       htmlLabels: true,\n *       curve: 'basis',\n *     },\n *     sequence: {\n *       diagramMarginX: 50,\n *       diagramMarginY: 10,\n *       actorMargin: 50,\n *       width: 150,\n *       height: 65,\n *       boxMargin: 10,\n *       boxTextMargin: 5,\n *       noteMargin: 10,\n *       messageMargin: 35,\n *       messageAlign: 'center',\n *       mirrorActors: true,\n *       bottomMarginAdj: 1,\n *       useMaxWidth: true,\n *       rightAngles: false,\n *       showSequenceNumbers: false,\n *     },\n *     gantt: {\n *       titleTopMargin: 25,\n *       barHeight: 20,\n *       barGap: 4,\n *       topPadding: 50,\n *       leftPadding: 75,\n *       gridLineStartPadding: 35,\n *       fontSize: 11,\n *       fontFamily: '\"Open-Sans\", \"sans-serif\"',\n *       numberSectionStyles: 4,\n *       axisFormat: '%Y-%m-%d',\n *       topAxis: false,\n *     },\n *   };\n *   mermaid.initialize(config);\n * </script>\n * ```\n */\n","import classDiagram from './diagrams/class/styles';\nimport er from './diagrams/er/styles';\nimport flowchart from './diagrams/flowchart/styles';\nimport gantt from './diagrams/gantt/styles';\nimport git from './diagrams/git/styles';\nimport info from './diagrams/info/styles';\nimport pie from './diagrams/pie/styles';\nimport requirement from './diagrams/requirement/styles';\nimport sequence from './diagrams/sequence/styles';\nimport stateDiagram from './diagrams/state/styles';\nimport journey from './diagrams/user-journey/styles';\n\nconst themes = {\n  flowchart,\n  'flowchart-v2': flowchart,\n  sequence,\n  gantt,\n  classDiagram,\n  'classDiagram-v2': classDiagram,\n  class: classDiagram,\n  stateDiagram,\n  state: stateDiagram,\n  git,\n  info,\n  pie,\n  er,\n  journey,\n  requirement,\n};\n\nexport const calcThemeVariables = (theme, userOverRides) => theme.calcColors(userOverRides);\n\nconst getStyles = (type, userStyles, options) => {\n  //console.warn('options in styles: ', options);\n  return ` {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n    fill: ${options.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  .error-icon {\n    fill: ${options.errorBkgColor};\n  }\n  .error-text {\n    fill: ${options.errorTextColor};\n    stroke: ${options.errorTextColor};\n  }\n\n  .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  .marker {\n    fill: ${options.lineColor};\n    stroke: ${options.lineColor};\n  }\n  .marker.cross {\n    stroke: ${options.lineColor};\n  }\n\n  svg {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n  }\n\n  ${themes[type](options)}\n\n  ${userStyles}\n`;\n};\n\nexport default getStyles;\n","import { getThemeVariables as baseThemeVariables } from './theme-base';\nimport { getThemeVariables as darkThemeVariables } from './theme-dark';\nimport { getThemeVariables as defaultThemeVariables } from './theme-default';\nimport { getThemeVariables as forestThemeVariables } from './theme-forest';\nimport { getThemeVariables as neutralThemeVariables } from './theme-neutral';\n\nexport default {\n  base: {\n    getThemeVariables: baseThemeVariables,\n  },\n  dark: {\n    getThemeVariables: darkThemeVariables,\n  },\n  default: {\n    getThemeVariables: defaultThemeVariables,\n  },\n  forest: {\n    getThemeVariables: forestThemeVariables,\n  },\n  neutral: {\n    getThemeVariables: neutralThemeVariables,\n  },\n};\n","import { darken, lighten, adjust, invert } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    /** # Base variables */\n    /**\n     * - Background - used to know what the background color is of the diagram. This is used for\n     *   deducing colors for istance line color. Defaulr value is #f4f4f4.\n     */\n    this.background = '#f4f4f4';\n    this.darkMode = false;\n\n    // this.background = '#0c0c0c';\n    // this.darkMode = true;\n    this.primaryColor = '#fff4dd';\n    // this.background = '#0c0c0c';\n    // this.primaryColor = '#1f1f00';\n\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = '#333';\n\n    // dark\n\n    // this.primaryColor = '#034694';\n    // this.primaryColor = '#f2ee7e';\n    // this.primaryColor = '#9f33be';\n    // this.primaryColor = '#f0fff0';\n    // this.primaryColor = '#fa255e';\n    // this.primaryColor = '#ECECFF';\n\n    // this.secondaryColor = '#c39ea0';\n    // this.tertiaryColor = '#f8e5e5';\n\n    // this.secondaryColor = '#dfdfde';\n    // this.tertiaryColor = '#CCCCFF';\n\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n    // this.updateColors();\n  }\n  updateColors() {\n    // The || is to make sure that if the variable has been defiend by a user override that value is to be used\n\n    /* Main */\n    this.primaryTextColor = this.primaryTextColor || (this.darkMode ? '#ddd' : '#333'); // invert(this.primaryColor);\n    this.secondaryColor = this.secondaryColor || adjust(this.primaryColor, { h: -120 });\n    this.tertiaryColor = this.tertiaryColor || adjust(this.primaryColor, { h: 180, l: 5 });\n\n    this.primaryBorderColor = this.primaryBorderColor || mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor =\n      this.secondaryBorderColor || mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor =\n      this.tertiaryBorderColor || mkBorder(this.tertiaryColor, this.darkMode);\n    this.noteBorderColor = this.noteBorderColor || mkBorder(this.noteBkgColor, this.darkMode);\n    this.noteBkgColor = this.noteBkgColor || '#fff5ad';\n    this.noteTextColor = this.noteTextColor || '#333';\n\n    this.secondaryTextColor = this.secondaryTextColor || invert(this.secondaryColor);\n    this.tertiaryTextColor = this.tertiaryTextColor || invert(this.tertiaryColor);\n    this.lineColor = this.lineColor || invert(this.background);\n    this.textColor = this.textColor || this.primaryTextColor;\n\n    /* Flowchart variables */\n    this.nodeBkg = this.nodeBkg || this.primaryColor;\n    this.mainBkg = this.mainBkg || this.primaryColor;\n    this.nodeBorder = this.nodeBorder || this.primaryBorderColor;\n    this.clusterBkg = this.clusterBkg || this.tertiaryColor;\n    this.clusterBorder = this.clusterBorder || this.tertiaryBorderColor;\n    this.defaultLinkColor = this.defaultLinkColor || this.lineColor;\n    this.titleColor = this.titleColor || this.tertiaryTextColor;\n    this.edgeLabelBackground =\n      this.edgeLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.nodeTextColor = this.nodeTextColor || this.primaryTextColor;\n    /* Sequence Diagram variables */\n\n    // this.actorBorder = lighten(this.border1, 0.5);\n    this.actorBorder = this.actorBorder || this.primaryBorderColor;\n    this.actorBkg = this.actorBkg || this.mainBkg;\n    this.actorTextColor = this.actorTextColor || this.primaryTextColor;\n    this.actorLineColor = this.actorLineColor || 'grey';\n    this.labelBoxBkgColor = this.labelBoxBkgColor || this.actorBkg;\n    this.signalColor = this.signalColor || this.textColor;\n    this.signalTextColor = this.signalTextColor || this.textColor;\n    this.labelBoxBorderColor = this.labelBoxBorderColor || this.actorBorder;\n    this.labelTextColor = this.labelTextColor || this.actorTextColor;\n    this.loopTextColor = this.loopTextColor || this.actorTextColor;\n    this.activationBorderColor = this.activationBorderColor || darken(this.secondaryColor, 10);\n    this.activationBkgColor = this.activationBkgColor || this.secondaryColor;\n    this.sequenceNumberColor = this.sequenceNumberColor || invert(this.lineColor);\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = this.sectionBkgColor || this.tertiaryColor;\n    this.altSectionBkgColor = this.altSectionBkgColor || 'white';\n    this.sectionBkgColor = this.sectionBkgColor || this.secondaryColor;\n    this.sectionBkgColor2 = this.sectionBkgColor2 || this.primaryColor;\n    this.excludeBkgColor = this.excludeBkgColor || '#eeeeee';\n    this.taskBorderColor = this.taskBorderColor || this.primaryBorderColor;\n    this.taskBkgColor = this.taskBkgColor || this.primaryColor;\n    this.activeTaskBorderColor = this.activeTaskBorderColor || this.primaryColor;\n    this.activeTaskBkgColor = this.activeTaskBkgColor || lighten(this.primaryColor, 23);\n    this.gridColor = this.gridColor || 'lightgrey';\n    this.doneTaskBkgColor = this.doneTaskBkgColor || 'lightgrey';\n    this.doneTaskBorderColor = this.doneTaskBorderColor || 'grey';\n    this.critBorderColor = this.critBorderColor || '#ff8888';\n    this.critBkgColor = this.critBkgColor || 'red';\n    this.todayLineColor = this.todayLineColor || 'red';\n    this.taskTextColor = this.taskTextColor || this.textColor;\n    this.taskTextOutsideColor = this.taskTextOutsideColor || this.textColor;\n    this.taskTextLightColor = this.taskTextLightColor || this.textColor;\n    this.taskTextColor = this.taskTextColor || this.primaryTextColor;\n    this.taskTextDarkColor = this.taskTextDarkColor || this.textColor;\n    this.taskTextClickableColor = this.taskTextClickableColor || '#003163';\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    /* The color of the text tables of the tstates*/\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || this.tertiaryColor;\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.nodeBorder;\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.specialStateColor = this.lineColor;\n\n    /* class */\n    this.classText = this.classText || this.textColor;\n\n    /* user-journey */\n    this.fillType0 = this.fillType0 || this.primaryColor;\n    this.fillType1 = this.fillType1 || this.secondaryColor;\n    this.fillType2 = this.fillType2 || adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = this.fillType3 || adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = this.fillType4 || adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = this.fillType5 || adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = this.fillType6 || adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = this.fillType7 || adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || this.tertiaryColor;\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -10 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -10 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -10 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -20 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -20 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -10 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground =\n      this.relationLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { invert, lighten, darken, rgba, adjust } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    this.background = '#333';\n    this.primaryColor = '#1f2020';\n    this.secondaryColor = lighten(this.primaryColor, 16);\n\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    this.mainBkg = '#1f2020';\n    this.secondBkg = 'calculated';\n    this.mainContrastColor = 'lightgrey';\n    this.darkTextColor = lighten(invert('#323D47'), 10);\n    this.lineColor = 'calculated';\n    this.border1 = '#81B1DB';\n    this.border2 = rgba(255, 255, 255, 0.25);\n    this.arrowheadColor = 'calculated';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n    this.labelBackground = '#181818';\n    this.textColor = '#ccc';\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = '#F9FFFE';\n    this.edgeLabelBackground = 'calculated';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'calculated';\n    this.actorLineColor = 'calculated';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = 'calculated';\n    this.activationBkgColor = 'calculated';\n    this.sequenceNumberColor = 'black';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = darken('#EAE8D9', 30);\n    this.altSectionBkgColor = 'calculated';\n    this.sectionBkgColor2 = '#EAE8D9';\n    this.taskBorderColor = rgba(255, 255, 255, 70);\n    this.taskBkgColor = 'calculated';\n    this.taskTextColor = 'calculated';\n    this.taskTextLightColor = 'calculated';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = rgba(255, 255, 255, 50);\n    this.activeTaskBkgColor = '#81B1DB';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#E83737';\n    this.critBkgColor = '#E83737';\n    this.taskTextDarkColor = 'calculated';\n    this.todayLineColor = '#DB5757';\n\n    /* state colors */\n    this.labelColor = 'calculated';\n\n    this.errorBkgColor = '#a44141';\n    this.errorTextColor = '#ddd';\n  }\n  updateColors() {\n    this.secondBkg = lighten(this.mainBkg, 16);\n    this.lineColor = this.mainContrastColor;\n    this.arrowheadColor = this.mainContrastColor;\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.edgeLabelBackground = lighten(this.labelBackground, 25);\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = this.border1;\n    this.actorBkg = this.mainBkg;\n    this.actorTextColor = this.mainContrastColor;\n    this.actorLineColor = this.mainContrastColor;\n    this.signalColor = this.mainContrastColor;\n    this.signalTextColor = this.mainContrastColor;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.mainContrastColor;\n    this.loopTextColor = this.mainContrastColor;\n    this.noteBorderColor = this.secondaryBorderColor;\n    this.noteBkgColor = this.secondBkg;\n    this.noteTextColor = this.secondaryTextColor;\n    this.activationBorderColor = this.border1;\n    this.activationBkgColor = this.secondBkg;\n\n    /* Gantt chart variables */\n\n    this.altSectionBkgColor = this.background;\n    this.taskBkgColor = lighten(this.mainBkg, 23);\n    this.taskTextColor = this.darkTextColor;\n    this.taskTextLightColor = this.mainContrastColor;\n    this.taskTextOutsideColor = this.taskTextLightColor;\n    this.gridColor = this.mainContrastColor;\n    this.doneTaskBkgColor = this.mainContrastColor;\n    this.taskTextDarkColor = this.darkTextColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#555';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = '#f4f4f4'; // this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || '#0b0000';\n    this.pie2 = this.pie2 || '#4d1037';\n    this.pie3 = this.pie3 || '#3f5258';\n    this.pie4 = this.pie4 || '#4f2f1b';\n    this.pie5 = this.pie5 || '#6e0a0a';\n    this.pie6 = this.pie6 || '#3b0048';\n    this.pie7 = this.pie7 || '#995a01';\n    this.pie8 = this.pie8 || '#154706';\n    this.pie9 = this.pie9 || '#161722';\n    this.pie10 = this.pie10 || '#00296f';\n    this.pie11 = this.pie11 || '#01629c';\n    this.pie12 = this.pie12 || '#010029';\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* class */\n    this.classText = this.primaryTextColor;\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground =\n      this.relationLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { invert, lighten, rgba, adjust } from 'khroma';\nimport { mkBorder } from './theme-helpers';\n\nclass Theme {\n  constructor() {\n    /* Base variables */\n    this.background = '#f4f4f4';\n    this.primaryColor = '#ECECFF';\n\n    this.secondaryColor = adjust(this.primaryColor, { h: 120 });\n    this.secondaryColor = '#ffffde';\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    // this.noteBorderColor = mkBorder(this.noteBkgColor, this.darkMode);\n\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    this.background = 'white';\n    this.mainBkg = '#ECECFF';\n    this.secondBkg = '#ffffde';\n    this.lineColor = '#333333';\n    this.border1 = '#9370DB';\n    this.border2 = '#aaaa33';\n    this.arrowheadColor = '#333333';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n    this.labelBackground = '#e8e8e8';\n    this.textColor = '#333';\n\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = 'calculated';\n    this.edgeLabelBackground = 'calculated';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'black';\n    this.actorLineColor = 'grey';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = 'calculated';\n    this.altSectionBkgColor = 'calculated';\n    this.sectionBkgColor2 = 'calculated';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = 'calculated';\n    this.taskTextLightColor = 'calculated';\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextDarkColor = 'calculated';\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.taskTextClickableColor = 'calculated';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'calculated';\n    this.critBorderColor = 'calculated';\n    this.critBkgColor = 'calculated';\n    this.todayLineColor = 'calculated';\n\n    this.sectionBkgColor = rgba(102, 102, 255, 0.49);\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = '#fff400';\n    this.taskBorderColor = '#534fbc';\n    this.taskBkgColor = '#8a90dd';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'black';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = '#534fbc';\n    this.activeTaskBkgColor = '#bfc7ff';\n    this.gridColor = 'lightgrey';\n    this.doneTaskBkgColor = 'lightgrey';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#ff8888';\n    this.critBkgColor = 'red';\n    this.todayLineColor = 'red';\n\n    /* state colors */\n    this.labelColor = 'black';\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n    this.updateColors();\n  }\n  updateColors() {\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1; // border 1\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.titleColor = this.textColor;\n    this.edgeLabelBackground = this.labelBackground;\n\n    /* Sequence Diagram variables */\n\n    // this.actorBorder = lighten(this.border1, 0.5);\n    this.actorBorder = lighten(this.border1, 23);\n    this.actorBkg = this.mainBkg;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.signalColor = this.textColor;\n    this.signalTextColor = this.textColor;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.actorTextColor;\n    this.loopTextColor = this.actorTextColor;\n    this.noteBorderColor = this.border2;\n    this.noteTextColor = this.actorTextColor;\n\n    /* Gantt chart variables */\n\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f0f0f0';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.nodeBorder;\n    this.specialStateColor = this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || adjust(this.tertiaryColor, { l: -40 });\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -10 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -30 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -20 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -20 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -40 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: -40 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -40 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -90, l: -40 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -30 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.labelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { darken, lighten, adjust, invert } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    /* Base vales */\n    this.background = '#f4f4f4';\n    this.primaryColor = '#cde498';\n    this.secondaryColor = '#cdffb2';\n    this.background = 'white';\n    this.mainBkg = '#cde498';\n    this.secondBkg = '#cdffb2';\n    this.lineColor = 'green';\n    this.border1 = '#13540c';\n    this.border2 = '#6eaa49';\n    this.arrowheadColor = 'green';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n\n    this.tertiaryColor = lighten('#cde498', 10);\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.primaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    /* Flowchart variables */\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = '#333';\n    this.edgeLabelBackground = '#e8e8e8';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'black';\n    this.actorLineColor = 'grey';\n    this.signalColor = '#333';\n    this.signalTextColor = '#333';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = '#326932';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = '#6eaa49';\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = '#6eaa49';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = '#487e3a';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'black';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'lightgrey';\n    this.doneTaskBkgColor = 'lightgrey';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#ff8888';\n    this.critBkgColor = 'red';\n    this.todayLineColor = 'red';\n\n    /* state colors */\n    this.labelColor = 'black';\n\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n  }\n  updateColors() {\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = darken(this.mainBkg, 20);\n    this.actorBkg = this.mainBkg;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelTextColor = this.actorTextColor;\n    this.loopTextColor = this.actorTextColor;\n    this.noteBorderColor = this.border2;\n    this.noteTextColor = this.actorTextColor;\n\n    /* Gantt chart variables */\n\n    this.taskBorderColor = this.border1;\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.activeTaskBorderColor = this.taskBorderColor;\n    this.activeTaskBkgColor = this.mainBkg;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f0f0f0';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || this.tertiaryColor;\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -30 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -30 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { h: +40, l: -40 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -50 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -50 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -50 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.edgeLabelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { adjust } from 'khroma';\r\n\r\nexport const mkBorder = (col, darkMode) =>\r\n  darkMode ? adjust(col, { s: -40, l: 10 }) : adjust(col, { s: -40, l: -10 });\r\n","import { invert, darken, lighten, adjust } from 'khroma';\nimport { mkBorder } from './theme-helpers';\n\n// const Color = require ( 'khroma/dist/color' ).default\n// Color.format.hex.stringify(Color.parse('hsl(210, 66.6666666667%, 95%)')); // => \"#EAF2FB\"\n\nclass Theme {\n  constructor() {\n    this.primaryColor = '#eee';\n    this.contrast = '#707070';\n    this.secondaryColor = lighten(this.contrast, 55);\n    this.background = '#ffffff';\n\n    // this.secondaryColor = adjust(this.primaryColor, { h: 120 });\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    // this.noteBorderColor = mkBorder(this.noteBkgColor, this.darkMode);\n\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    // this.altBackground = lighten(this.contrast, 55);\n    this.mainBkg = '#eee';\n    this.secondBkg = 'calculated';\n    this.lineColor = '#666';\n    this.border1 = '#999';\n    this.border2 = 'calculated';\n    this.note = '#ffa';\n    this.text = '#333';\n    this.critical = '#d42';\n    this.done = '#bbb';\n    this.arrowheadColor = '#333333';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = 'calculated';\n    this.edgeLabelBackground = 'white';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'calculated';\n    this.actorLineColor = 'calculated';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = 'calculated';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = 'calculated';\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = 'calculated';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = 'calculated';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'calculated';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'calculated';\n    this.critBkgColor = 'calculated';\n    this.critBorderColor = 'calculated';\n    this.todayLineColor = 'calculated';\n\n    /* state colors */\n    this.labelColor = 'black';\n\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n  }\n  updateColors() {\n    this.secondBkg = lighten(this.contrast, 55);\n    this.border2 = this.contrast;\n\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.titleColor = this.text;\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = lighten(this.border1, 23);\n    this.actorBkg = this.mainBkg;\n    this.actorTextColor = this.text;\n    this.actorLineColor = this.lineColor;\n    this.signalColor = this.text;\n    this.signalTextColor = this.text;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.text;\n    this.loopTextColor = this.text;\n    this.noteBorderColor = '#999';\n    this.noteBkgColor = '#666';\n    this.noteTextColor = '#fff';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = lighten(this.contrast, 30);\n    this.sectionBkgColor2 = lighten(this.contrast, 30);\n\n    this.taskBorderColor = darken(this.contrast, 10);\n\n    this.taskBkgColor = this.contrast;\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextDarkColor = this.text;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.activeTaskBorderColor = this.taskBorderColor;\n    this.activeTaskBkgColor = this.mainBkg;\n    this.gridColor = lighten(this.border1, 30);\n\n    this.doneTaskBkgColor = this.done;\n    this.doneTaskBorderColor = this.lineColor;\n    this.critBkgColor = this.critical;\n    this.critBorderColor = darken(this.critBkgColor, 10);\n\n    this.todayLineColor = this.critBkgColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || '#000';\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f4f4f4';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.stateBorder = this.stateBorder || '#000';\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = '#222';\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    // /* pie */\n    this.pie1 = this.pie1 || '#F4F4F4';\n    this.pie2 = this.pie2 || '#555';\n    this.pie3 = this.pie3 || '#BBB';\n    this.pie4 = this.pie4 || '#777';\n    this.pie5 = this.pie5 || '#999';\n    this.pie6 = this.pie6 || '#DDD';\n    this.pie7 = this.pie7 || '#FFF';\n    this.pie8 = this.pie8 || '#DDD';\n    this.pie9 = this.pie9 || '#BBB';\n    this.pie10 = this.pie10 || '#999';\n    this.pie11 = this.pie11 || '#777';\n    this.pie12 = this.pie12 || '#555';\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    // this.pie1 = this.pie1 || '#212529';\n    // this.pie2 = this.pie2 || '#343A40';\n    // this.pie3 = this.pie3 || '#495057';\n    // this.pie4 = this.pie4 || '#6C757D';\n    // this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -10 });\n    // this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -10 });\n    // this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    // this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    // this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    // this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -20 });\n    // this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -20 });\n    // this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -10 });\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.edgeLabelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { sanitizeUrl } from '@braintree/sanitize-url';\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  select,\n} from 'd3';\nimport common from './diagrams/common/common';\nimport { configKeys } from './defaultConfig';\nimport { log } from './logger';\n\n// Effectively an enum of the supported curve types, accessible by name\nconst d3CurveTypes = {\n  curveBasis: curveBasis,\n  curveBasisClosed: curveBasisClosed,\n  curveBasisOpen: curveBasisOpen,\n  curveLinear: curveLinear,\n  curveLinearClosed: curveLinearClosed,\n  curveMonotoneX: curveMonotoneX,\n  curveMonotoneY: curveMonotoneY,\n  curveNatural: curveNatural,\n  curveStep: curveStep,\n  curveStepAfter: curveStepAfter,\n  curveStepBefore: curveStepBefore,\n};\nconst directive =\n  /[%]{2}[{]\\s*(?:(?:(\\w+)\\s*:|(\\w+))\\s*(?:(?:(\\w+))|((?:(?![}][%]{2}).|\\r?\\n)*))?\\s*)(?:[}][%]{2})?/gi;\nconst directiveWithoutOpen =\n  /\\s*(?:(?:(\\w+)(?=:):|(\\w+))\\s*(?:(?:(\\w+))|((?:(?![}][%]{2}).|\\r?\\n)*))?\\s*)(?:[}][%]{2})?/gi;\nconst anyComment = /\\s*%%.*\\n/gm;\n\n/**\n * @function detectInit Detects the init config object from the text\n *\n *   ```mermaid\n *   %%{init: {\"theme\": \"debug\", \"logLevel\": 1 }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n *\n *   Or\n *\n *   ```mermaid\n *   %%{initialize: {\"theme\": \"dark\", logLevel: \"debug\" }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {any} cnf\n * @returns {object} The json object representing the init passed to mermaid.initialize()\n */\nexport const detectInit = function (text, cnf) {\n  let inits = detectDirective(text, /(?:init\\b)|(?:initialize\\b)/);\n  let results = {};\n\n  if (Array.isArray(inits)) {\n    let args = inits.map((init) => init.args);\n    directiveSanitizer(args);\n\n    results = assignWithDepth(results, [...args]);\n  } else {\n    results = inits.args;\n  }\n  if (results) {\n    let type = detectType(text, cnf);\n    ['config'].forEach((prop) => {\n      if (typeof results[prop] !== 'undefined') {\n        if (type === 'flowchart-v2') {\n          type = 'flowchart';\n        }\n        results[type] = results[prop];\n        delete results[prop];\n      }\n    });\n  }\n\n  // Todo: refactor this, these results are never used\n  return results;\n};\n\n/**\n * @function detectDirective Detects the directive from the text. Text can be single line or\n *   multiline. If type is null or omitted the first directive encountered in text will be returned\n *\n *   ```mermaid\n *   graph LR\n *    %%{somedirective}%%\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {string | RegExp} type The directive to return (default: null)\n * @returns {object | Array} An object or Array representing the directive(s): { type: string, args:\n *   object|null } matched by the input type if a single directive was found, that directive object\n *   will be returned.\n */\nexport const detectDirective = function (text, type = null) {\n  try {\n    const commentWithoutDirectives = new RegExp(\n      `[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*\\n`,\n      'ig'\n    );\n    text = text.trim().replace(commentWithoutDirectives, '').replace(/'/gm, '\"');\n    log.debug(\n      `Detecting diagram directive${type !== null ? ' type:' + type : ''} based on the text:${text}`\n    );\n    let match,\n      result = [];\n    while ((match = directive.exec(text)) !== null) {\n      // This is necessary to avoid infinite loops with zero-width matches\n      if (match.index === directive.lastIndex) {\n        directive.lastIndex++;\n      }\n      if (\n        (match && !type) ||\n        (type && match[1] && match[1].match(type)) ||\n        (type && match[2] && match[2].match(type))\n      ) {\n        let type = match[1] ? match[1] : match[2];\n        let args = match[3] ? match[3].trim() : match[4] ? JSON.parse(match[4].trim()) : null;\n        result.push({ type, args });\n      }\n    }\n    if (result.length === 0) {\n      result.push({ type: text, args: null });\n    }\n\n    return result.length === 1 ? result[0] : result;\n  } catch (error) {\n    log.error(\n      `ERROR: ${error.message} - Unable to parse directive\n      ${type !== null ? ' type:' + type : ''} based on the text:${text}`\n    );\n    return { type: null, args: null };\n  }\n};\n\n/**\n * @function detectType Detects the type of the graph text. Takes into consideration the possible\n *   existence of an %%init directive\n *\n *   ```mermaid\n *   %%{initialize: {\"startOnLoad\": true, logLevel: \"fatal\" }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {{\n *   class: { defaultRenderer: string } | undefined;\n *   state: { defaultRenderer: string } | undefined;\n *   flowchart: { defaultRenderer: string } | undefined;\n * }} [cnf]\n * @returns {string} A graph definition key\n */\nexport const detectType = function (text, cnf) {\n  text = text.replace(directive, '').replace(anyComment, '\\n');\n  if (text.match(/^\\s*sequenceDiagram/)) {\n    return 'sequence';\n  }\n\n  if (text.match(/^\\s*gantt/)) {\n    return 'gantt';\n  }\n  if (text.match(/^\\s*classDiagram-v2/)) {\n    return 'classDiagram';\n  }\n  if (text.match(/^\\s*classDiagram/)) {\n    if (cnf && cnf.class && cnf.class.defaultRenderer === 'dagre-wrapper') return 'classDiagram';\n    return 'class';\n  }\n\n  if (text.match(/^\\s*stateDiagram-v2/)) {\n    return 'stateDiagram';\n  }\n\n  if (text.match(/^\\s*stateDiagram/)) {\n    if (cnf && cnf.class && cnf.state.defaultRenderer === 'dagre-wrapper') return 'stateDiagram';\n    return 'state';\n  }\n\n  if (text.match(/^\\s*gitGraph/)) {\n    return 'git';\n  }\n  if (text.match(/^\\s*flowchart/)) {\n    return 'flowchart-v2';\n  }\n\n  if (text.match(/^\\s*info/)) {\n    return 'info';\n  }\n  if (text.match(/^\\s*pie/)) {\n    return 'pie';\n  }\n\n  if (text.match(/^\\s*erDiagram/)) {\n    return 'er';\n  }\n\n  if (text.match(/^\\s*journey/)) {\n    return 'journey';\n  }\n\n  if (text.match(/^\\s*requirement/) || text.match(/^\\s*requirementDiagram/)) {\n    return 'requirement';\n  }\n  if (cnf && cnf.flowchart && cnf.flowchart.defaultRenderer === 'dagre-wrapper')\n    return 'flowchart-v2';\n\n  return 'flowchart';\n};\n\n/**\n * Caches results of functions based on input\n *\n * @param {Function} fn Function to run\n * @param {Function} resolver Function that resolves to an ID given arguments the `fn` takes\n * @returns {Function} An optimized caching function\n */\nconst memoize = (fn, resolver) => {\n  let cache = {};\n  return (...args) => {\n    let n = resolver ? resolver.apply(this, args) : args[0];\n    if (n in cache) {\n      return cache[n];\n    } else {\n      let result = fn(...args);\n      cache[n] = result;\n      return result;\n    }\n  };\n};\n\n/**\n * @function isSubstringInArray Detects whether a substring in present in a given array\n * @param {string} str The substring to detect\n * @param {Array} arr The array to search\n * @returns {number} The array index containing the substring or -1 if not present\n */\nexport const isSubstringInArray = function (str, arr) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i].match(str)) return i;\n  }\n  return -1;\n};\n\n/**\n * Returns a d3 curve given a curve name\n *\n * @param {string | undefined} interpolate The interpolation name\n * @param {any} defaultCurve The default curve to return\n * @returns {import('d3-shape').CurveFactory} The curve factory to use\n */\nexport const interpolateToCurve = (interpolate, defaultCurve) => {\n  if (!interpolate) {\n    return defaultCurve;\n  }\n  const curveName = `curve${interpolate.charAt(0).toUpperCase() + interpolate.slice(1)}`;\n  return d3CurveTypes[curveName] || defaultCurve;\n};\n\n/**\n * Formats a URL string\n *\n * @param {string} linkStr String of the URL\n * @param {{ securityLevel: string }} config Configuration passed to MermaidJS\n * @returns {string | undefined} The formatted URL\n */\nexport const formatUrl = (linkStr, config) => {\n  let url = linkStr.trim();\n\n  if (url) {\n    if (config.securityLevel !== 'loose') {\n      return sanitizeUrl(url);\n    }\n\n    return url;\n  }\n};\n\n/**\n * Runs a function\n *\n * @param {string} functionName A dot seperated path to the function relative to the `window`\n * @param {...any} params Parameters to pass to the function\n */\nexport const runFunc = (functionName, ...params) => {\n  const arrPaths = functionName.split('.');\n\n  const len = arrPaths.length - 1;\n  const fnName = arrPaths[len];\n\n  let obj = window;\n  for (let i = 0; i < len; i++) {\n    obj = obj[arrPaths[i]];\n    if (!obj) return;\n  }\n\n  obj[fnName](...params);\n};\n\n/**\n * @typedef {object} Point A (x, y) point\n * @property {number} x The x value\n * @property {number} y The y value\n */\n\n/**\n * Finds the distance between two points using the Distance Formula\n *\n * @param {Point} p1 The first point\n * @param {Point} p2 The second point\n * @returns {number} The distance\n */\nconst distance = (p1, p2) =>\n  p1 && p2 ? Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)) : 0;\n\n/**\n * @param {Point[]} points List of points\n * @returns {Point}\n * @todo Give this a description\n */\nconst traverseEdge = (points) => {\n  let prevPoint;\n  let totalDistance = 0;\n\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse half of total distance along points\n  let remainingDistance = totalDistance / 2;\n  let center = undefined;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  return center;\n};\n\n/**\n * Alias for `traverseEdge`\n *\n * @param {Point[]} points List of points\n * @returns {Point} Return result of `transverseEdge`\n */\nconst calcLabelPosition = (points) => {\n  return traverseEdge(points);\n};\n\nconst calcCardinalityPosition = (isRelationTypePresent, points, initialPosition) => {\n  let prevPoint;\n  let totalDistance = 0; // eslint-disable-line\n  log.info('our points', points);\n  if (points[0] !== initialPosition) {\n    points = points.reverse();\n  }\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse only 25 total distance along points to find cardinality point\n  const distanceToCardinalityPoint = 25;\n\n  let remainingDistance = distanceToCardinalityPoint;\n  let center;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  // if relation is present (Arrows will be added), change cardinality point off-set distance (d)\n  let d = isRelationTypePresent ? 10 : 5;\n  //Calculate Angle for x and y axis\n  let angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  let cardinalityPosition = { x: 0, y: 0 };\n  //Calculation cardinality position using angle, center point on the line/curve but pendicular and with offset-distance\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  return cardinalityPosition;\n};\n\n/**\n * Position ['start_left', 'start_right', 'end_left', 'end_right']\n *\n * @param {any} terminalMarkerSize\n * @param {any} position\n * @param {any} _points\n * @returns {any}\n */\nconst calcTerminalLabelPosition = (terminalMarkerSize, position, _points) => {\n  // Todo looking to faster cloning method\n  let points = JSON.parse(JSON.stringify(_points));\n  let prevPoint;\n  let totalDistance = 0; // eslint-disable-line\n  log.info('our points', points);\n  if (position !== 'start_left' && position !== 'start_right') {\n    points = points.reverse();\n  }\n\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse only 25 total distance along points to find cardinality point\n  const distanceToCardinalityPoint = 25 + terminalMarkerSize;\n\n  let remainingDistance = distanceToCardinalityPoint;\n  let center;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  // if relation is present (Arrows will be added), change cardinality point off-set distance (d)\n  let d = 10 + terminalMarkerSize * 0.5;\n  //Calculate Angle for x and y axis\n  let angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n\n  let cardinalityPosition = { x: 0, y: 0 };\n\n  //Calculation cardinality position using angle, center point on the line/curve but pendicular and with offset-distance\n\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  if (position === 'start_left') {\n    cardinalityPosition.x = Math.sin(angle + Math.PI) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle + Math.PI) * d + (points[0].y + center.y) / 2;\n  }\n  if (position === 'end_right') {\n    cardinalityPosition.x = Math.sin(angle - Math.PI) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle - Math.PI) * d + (points[0].y + center.y) / 2 - 5;\n  }\n  if (position === 'end_left') {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2 - 5;\n  }\n  return cardinalityPosition;\n};\n\n/**\n * Gets styles from an array of declarations\n *\n * @param {string[]} arr Declarations\n * @returns {{ style: string; labelStyle: string }} The styles grouped as strings\n */\nexport const getStylesFromArray = (arr) => {\n  let style = '';\n  let labelStyle = '';\n\n  for (let i = 0; i < arr.length; i++) {\n    if (typeof arr[i] !== 'undefined') {\n      // add text properties to label style definition\n      if (arr[i].startsWith('color:') || arr[i].startsWith('text-align:')) {\n        labelStyle = labelStyle + arr[i] + ';';\n      } else {\n        style = style + arr[i] + ';';\n      }\n    }\n  }\n\n  return { style: style, labelStyle: labelStyle };\n};\n\nlet cnt = 0;\nexport const generateId = () => {\n  cnt++;\n  return 'id-' + Math.random().toString(36).substr(2, 12) + '-' + cnt;\n};\n\n/**\n * @param {any} length\n * @returns {any}\n */\nfunction makeid(length) {\n  var result = '';\n  var characters = '0123456789abcdef';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nexport const random = (options) => {\n  return makeid(options.length);\n};\n\n/**\n * @function assignWithDepth Extends the functionality of {@link ObjectConstructor.assign} with the\n *   ability to merge arbitrary-depth objects For each key in src with path `k` (recursively)\n *   performs an Object.assign(dst[`k`], src[`k`]) with a slight change from the typical handling of\n *   undefined for dst[`k`]: instead of raising an error, dst[`k`] is auto-initialized to {} and\n *   effectively merged with src[`k`]<p> Additionally, dissimilar types will not clobber unless the\n *   config.clobber parameter === true. Example:\n *\n *   ```js\n *   let config_0 = { foo: { bar: 'bar' }, bar: 'foo' };\n *   let config_1 = { foo: 'foo', bar: 'bar' };\n *   let result = assignWithDepth(config_0, config_1);\n *   console.log(result);\n *   //-> result: { foo: { bar: 'bar' }, bar: 'bar' }\n *   ```\n *\n *   Traditional Object.assign would have clobbered foo in config_0 with foo in config_1. If src is a\n *   destructured array of objects and dst is not an array, assignWithDepth will apply each element\n *   of src to dst in order.\n * @param dst\n * @param src\n * @param config\n * @param dst\n * @param src\n * @param config\n * @param dst\n * @param src\n * @param config\n * @param {any} dst - The destination of the merge\n * @param {any} src - The source object(s) to merge into destination\n * @param {{ depth: number; clobber: boolean }} [config={ depth: 2, clobber: false }] - Depth: depth\n *   to traverse within src and dst for merging - clobber: should dissimilar types clobber (default:\n *   { depth: 2, clobber: false }). Default is `{ depth: 2, clobber: false }`\n * @returns {any}\n */\nexport const assignWithDepth = function (dst, src, config) {\n  const { depth, clobber } = Object.assign({ depth: 2, clobber: false }, config);\n  if (Array.isArray(src) && !Array.isArray(dst)) {\n    src.forEach((s) => assignWithDepth(dst, s, config));\n    return dst;\n  } else if (Array.isArray(src) && Array.isArray(dst)) {\n    src.forEach((s) => {\n      if (dst.indexOf(s) === -1) {\n        dst.push(s);\n      }\n    });\n    return dst;\n  }\n  if (typeof dst === 'undefined' || depth <= 0) {\n    if (dst !== undefined && dst !== null && typeof dst === 'object' && typeof src === 'object') {\n      return Object.assign(dst, src);\n    } else {\n      return src;\n    }\n  }\n  if (typeof src !== 'undefined' && typeof dst === 'object' && typeof src === 'object') {\n    Object.keys(src).forEach((key) => {\n      if (\n        typeof src[key] === 'object' &&\n        (dst[key] === undefined || typeof dst[key] === 'object')\n      ) {\n        if (dst[key] === undefined) {\n          dst[key] = Array.isArray(src[key]) ? [] : {};\n        }\n        dst[key] = assignWithDepth(dst[key], src[key], { depth: depth - 1, clobber });\n      } else if (clobber || (typeof dst[key] !== 'object' && typeof src[key] !== 'object')) {\n        dst[key] = src[key];\n      }\n    });\n  }\n  return dst;\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    anchor: 'start',\n    style: '#666',\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    valign: undefined,\n  };\n};\n\n/**\n * Adds text to an element\n *\n * @param {SVGElement} elem Element to add text to\n * @param {{\n *   text: string;\n *   x: number;\n *   y: number;\n *   anchor: 'start' | 'middle' | 'end';\n *   fontFamily: string;\n *   fontSize: string | number;\n *   fontWeight: string | number;\n *   fill: string;\n *   class: string | undefined;\n *   textMargin: number;\n * }} textData\n * @returns {SVGTextElement} Text element with given styling and content\n */\nexport const drawSimpleText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(common.lineBreakRegex, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.style('font-family', textData.fontFamily);\n  textElem.style('font-size', textData.fontSize);\n  textElem.style('font-weight', textData.fontWeight);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nexport const wrapLabel = memoize(\n  (label, maxWidth, config) => {\n    if (!label) {\n      return label;\n    }\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', joinWith: '<br/>' },\n      config\n    );\n    if (common.lineBreakRegex.test(label)) {\n      return label;\n    }\n    const words = label.split(' ');\n    const completedLines = [];\n    let nextLine = '';\n    words.forEach((word, index) => {\n      const wordLength = calculateTextWidth(`${word} `, config);\n      const nextLineLength = calculateTextWidth(nextLine, config);\n      if (wordLength > maxWidth) {\n        const { hyphenatedStrings, remainingWord } = breakString(word, maxWidth, '-', config);\n        completedLines.push(nextLine, ...hyphenatedStrings);\n        nextLine = remainingWord;\n      } else if (nextLineLength + wordLength >= maxWidth) {\n        completedLines.push(nextLine);\n        nextLine = word;\n      } else {\n        nextLine = [nextLine, word].filter(Boolean).join(' ');\n      }\n      const currentWord = index + 1;\n      const isLastWord = currentWord === words.length;\n      if (isLastWord) {\n        completedLines.push(nextLine);\n      }\n    });\n    return completedLines.filter((line) => line !== '').join(config.joinWith);\n  },\n  (label, maxWidth, config) =>\n    `${label}-${maxWidth}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}-${config.joinWith}`\n);\n\nconst breakString = memoize(\n  (word, maxWidth, hyphenCharacter = '-', config) => {\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', margin: 0 },\n      config\n    );\n    const characters = word.split('');\n    const lines = [];\n    let currentLine = '';\n    characters.forEach((character, index) => {\n      const nextLine = `${currentLine}${character}`;\n      const lineWidth = calculateTextWidth(nextLine, config);\n      if (lineWidth >= maxWidth) {\n        const currentCharacter = index + 1;\n        const isLastLine = characters.length === currentCharacter;\n        const hyphenatedNextLine = `${nextLine}${hyphenCharacter}`;\n        lines.push(isLastLine ? nextLine : hyphenatedNextLine);\n        currentLine = '';\n      } else {\n        currentLine = nextLine;\n      }\n    });\n    return { hyphenatedStrings: lines, remainingWord: currentLine };\n  },\n  (word, maxWidth, hyphenCharacter = '-', config) =>\n    `${word}-${maxWidth}-${hyphenCharacter}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}`\n);\n\n/**\n * This calculates the text's height, taking into account the wrap breaks and both the statically\n * configured height, width, and the length of the text (in pixels).\n *\n * If the wrapped text text has greater height, we extend the height, so it's value won't overflow.\n *\n * @param {any} text The text to measure\n * @param {any} config - The config for fontSize, fontFamily, and fontWeight all impacting the resulting size\n * @returns {any} - The height for the given text\n */\nexport const calculateTextHeight = function (text, config) {\n  config = Object.assign(\n    { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', margin: 15 },\n    config\n  );\n  return calculateTextDimensions(text, config).height;\n};\n\n/**\n * This calculates the width of the given text, font size and family.\n *\n * @param {any} text - The text to calculate the width of\n * @param {any} config - The config for fontSize, fontFamily, and fontWeight all impacting the resulting size\n * @returns {any} - The width for the given text\n */\nexport const calculateTextWidth = function (text, config) {\n  config = Object.assign({ fontSize: 12, fontWeight: 400, fontFamily: 'Arial' }, config);\n  return calculateTextDimensions(text, config).width;\n};\n\n/**\n * This calculates the dimensions of the given text, font size, font family, font weight, and margins.\n *\n * @param {any} text - The text to calculate the width of\n * @param {any} config - The config for fontSize, fontFamily, fontWeight, and margin all impacting\n *   the resulting size\n * @returns - The width for the given text\n */\nexport const calculateTextDimensions = memoize(\n  function (text, config) {\n    config = Object.assign({ fontSize: 12, fontWeight: 400, fontFamily: 'Arial' }, config);\n    const { fontSize, fontFamily, fontWeight } = config;\n    if (!text) {\n      return { width: 0, height: 0 };\n    }\n\n    // We can't really know if the user supplied font family will render on the user agent;\n    // thus, we'll take the max width between the user supplied font family, and a default\n    // of sans-serif.\n    const fontFamilies = ['sans-serif', fontFamily];\n    const lines = text.split(common.lineBreakRegex);\n    let dims = [];\n\n    const body = select('body');\n    // We don't want to leak DOM elements - if a removal operation isn't available\n    // for any reason, do not continue.\n    if (!body.remove) {\n      return { width: 0, height: 0, lineHeight: 0 };\n    }\n\n    const g = body.append('svg');\n\n    for (let fontFamily of fontFamilies) {\n      let cheight = 0;\n      let dim = { width: 0, height: 0, lineHeight: 0 };\n      for (let line of lines) {\n        const textObj = getTextObj();\n        textObj.text = line;\n        const textElem = drawSimpleText(g, textObj)\n          .style('font-size', fontSize)\n          .style('font-weight', fontWeight)\n          .style('font-family', fontFamily);\n\n        let bBox = (textElem._groups || textElem)[0][0].getBBox();\n        dim.width = Math.round(Math.max(dim.width, bBox.width));\n        cheight = Math.round(bBox.height);\n        dim.height += cheight;\n        dim.lineHeight = Math.round(Math.max(dim.lineHeight, cheight));\n      }\n      dims.push(dim);\n    }\n\n    g.remove();\n\n    let index =\n      isNaN(dims[1].height) ||\n      isNaN(dims[1].width) ||\n      isNaN(dims[1].lineHeight) ||\n      (dims[0].height > dims[1].height &&\n        dims[0].width > dims[1].width &&\n        dims[0].lineHeight > dims[1].lineHeight)\n        ? 0\n        : 1;\n    return dims[index];\n  },\n  (text, config) => `${text}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}`\n);\n\n/**\n * Applys d3 attributes\n *\n * @param {any} d3Elem D3 Element to apply the attributes onto\n * @param {[string, string][]} attrs Object.keys equivalent format of key to value mapping of attributes\n */\nconst d3Attrs = function (d3Elem, attrs) {\n  for (let attr of attrs) {\n    d3Elem.attr(attr[0], attr[1]);\n  }\n};\n\n/**\n * Gives attributes for an SVG's size given arguments\n *\n * @param {number} height The height of the SVG\n * @param {number} width The width of the SVG\n * @param {boolean} useMaxWidth Whether or not to use max-width and set width to 100%\n * @returns {Map<'height' | 'width' | 'style', string>} Attributes for the SVG\n */\nexport const calculateSvgSizeAttrs = function (height, width, useMaxWidth) {\n  let attrs = new Map();\n  attrs.set('height', height);\n  if (useMaxWidth) {\n    attrs.set('width', '100%');\n    attrs.set('style', `max-width: ${width}px;`);\n  } else {\n    attrs.set('width', width);\n  }\n  return attrs;\n};\n\n/**\n * Applies attributes from `calculateSvgSizeAttrs`\n *\n * @param {SVGSVGElement} svgElem The SVG Element to configure\n * @param {number} height The height of the SVG\n * @param {number} width The width of the SVG\n * @param {boolean} useMaxWidth Whether or not to use max-width and set width to 100%\n */\nexport const configureSvgSize = function (svgElem, height, width, useMaxWidth) {\n  const attrs = calculateSvgSizeAttrs(height, width, useMaxWidth);\n  d3Attrs(svgElem, attrs);\n};\n\nexport const initIdGeneratior = class iterator {\n  constructor(deterministic, seed) {\n    this.deterministic = deterministic;\n    this.seed = seed;\n\n    this.count = seed ? seed.length : 0;\n  }\n\n  next() {\n    if (!this.deterministic) return Date.now();\n\n    return this.count++;\n  }\n};\n\nlet decoder;\n\n/**\n * Decodes HTML, source: {@link https://github.com/shrpne/entity-decode/blob/v2.0.1/browser.js}\n *\n * @param {string} html HTML as a string\n * @returns Unescaped HTML\n */\nexport const entityDecode = function (html) {\n  decoder = decoder || document.createElement('div');\n  // Escape HTML before decoding for HTML Entities\n  html = escape(html).replace(/%26/g, '&').replace(/%23/g, '#').replace(/%3B/g, ';');\n  // decoding\n  decoder.innerHTML = html;\n  return unescape(decoder.textContent);\n};\n\n/**\n * Sanitizes directive objects\n *\n * @param {object} args Directive's JSON\n */\nexport const directiveSanitizer = (args) => {\n  log.debug('directiveSanitizer called with', args);\n  if (typeof args === 'object') {\n    // check for array\n    if (args.length) {\n      args.forEach((arg) => directiveSanitizer(arg));\n    } else {\n      // This is an object\n      Object.keys(args).forEach((key) => {\n        log.debug('Checking key', key);\n        if (key.indexOf('__') === 0) {\n          log.debug('sanitize deleting __ option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('proto') >= 0) {\n          log.debug('sanitize deleting proto option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('constr') >= 0) {\n          log.debug('sanitize deleting constr option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('themeCSS') >= 0) {\n          log.debug('sanitizing themeCss option');\n          args[key] = sanitizeCss(args[key]);\n        }\n        if (configKeys.indexOf(key) < 0) {\n          log.debug('sanitize deleting option', key);\n          delete args[key];\n        } else {\n          if (typeof args[key] === 'object') {\n            log.debug('sanitize deleting object', key);\n            directiveSanitizer(args[key]);\n          }\n        }\n      });\n    }\n  }\n};\nexport const sanitizeCss = (str) => {\n  const stringsearch = 'o';\n  const startCnt = (str.match(/\\{/g) || []).length;\n  const endCnt = (str.match(/\\}/g) || []).length;\n  if (startCnt !== endCnt) {\n    return '{ /* ERROR: Unbalanced CSS */ }';\n  }\n  // Todo add more checks here\n  return str;\n};\n\nexport default {\n  assignWithDepth,\n  wrapLabel,\n  calculateTextHeight,\n  calculateTextWidth,\n  calculateTextDimensions,\n  calculateSvgSizeAttrs,\n  configureSvgSize,\n  detectInit,\n  detectDirective,\n  detectType,\n  isSubstringInArray,\n  interpolateToCurve,\n  calcLabelPosition,\n  calcCardinalityPosition,\n  calcTerminalLabelPosition,\n  formatUrl,\n  getStylesFromArray,\n  generateId,\n  random,\n  memoize,\n  runFunc,\n  entityDecode,\n  initIdGeneratior,\n  directiveSanitizer,\n  sanitizeCss,\n};\n","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","module.exports = require(\"@braintree/sanitize-url\");","module.exports = require(\"d3\");","module.exports = require(\"dagre\");","module.exports = require(\"dagre-d3\");","module.exports = require(\"dagre-d3/lib/label/add-html-label.js\");","module.exports = require(\"dompurify\");","module.exports = require(\"graphlib\");","module.exports = require(\"khroma\");","module.exports = require(\"moment-mini\");","module.exports = require(\"stylis\");","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(__webpack_require__.s = \"./src/mermaid.js\");\n",""],"names":["assignWithDepth","log","theme","config","defaultConfig","Object","freeze","siteConfig","configFromInitialize","directives","currentConfig","updateCurrentConfig","siteCfg","_directives","cfg","sumOfDirectives","i","length","d","sanitize","tmpConfigFromInitialize","themeVariables","getThemeVariables","setSiteConfig","conf","saveConfigFromInitilize","updateSiteConfig","getSiteConfig","setConfig","getConfig","options","keys","secure","forEach","key","debug","indexOf","addDirective","directive","fontFamily","push","reset","intersectRect","createLabel","select","evaluate","rect","parent","node","trace","id","shapeSvg","insert","attr","class","label","text","appendChild","labelText","labelStyle","undefined","bbox","getBBox","flowchart","htmlLabels","div","children","dv","getBoundingClientRect","width","height","padding","halfPadding","diff","JSON","stringify","style","rx","ry","x","y","rectBox","intersect","point","noteGroup","roundedWithTitle","classes","innerRect","append","divider","shapes","clusterElems","insertCluster","elem","shape","getClusterTitleWidth","removeChild","clear","positionCluster","info","el","sanitizeText","sanitizeTxt","txt","applyStyle","dom","styleFn","addHtmlLabel","fo","document","createElementNS","labelClass","isNode","html","_vertexText","isTitle","vertexText","replace","s","vertexNode","svgLabel","setAttribute","rows","split","Array","isArray","j","tspan","setAttributeNS","textContent","trim","line","curveBasis","utils","edgeLabels","terminalLabels","insertEdgeLabel","edge","labelElement","edgeLabel","startLabelLeft","startLabelElement","startEdgeLabelLeft","inner","slBox","startLeft","setTerminalWidth","startLabelRight","startEdgeLabelRight","startRight","endLabelLeft","endLabelElement","endEdgeLabelLeft","endLeft","endLabelRight","endEdgeLabelRight","endRight","value","positionEdgeLabel","paths","path","updatedPath","originalPath","pos","calcLabelPosition","calcTerminalLabelPosition","arrowTypeStart","arrowTypeEnd","outsideNode","dx","Math","abs","dy","w","h","intersection","outsidePoint","insidePoint","warn","r","Q","R","q","res","_x","_y","cutPathAtIntersect","_points","boundryNode","points","lastPointOutside","isInside","inter","pointPresent","p","find","e","insertEdge","clusterDb","diagramType","graph","pointsHasChanged","tail","v","head","slice","unshift","toCluster","fromCluster","reverse","lineData","filter","Number","isNaN","curve","lineFunction","strokeClasses","thickness","pattern","svgPath","url","state","arrowMarkerAbsolute","window","location","protocol","host","pathname","search","dagre","graphlib","insertMarkers","updateNodeBounds","clearGraphlib","adjustClustersAndEdges","findNonClusterChild","sortNodesByHierarchy","insertNode","positionNode","clearNodes","setNodeElem","clearClusters","clearEdges","recursiveRender","_elem","diagramtype","parentCluster","json","write","dir","rankdir","nodes","edges","clusters","edgePaths","data","parse","clusterData","setNode","setParent","clusterNode","o","newEl","name","layout","n","type","render","markers","circle","ellipse","polygon","intersectEllipse","intersectCircle","cx","cy","px","py","det","sqrt","intersectLine","p1","p2","q1","q2","a1","a2","b1","b2","c1","c2","r1","r2","r3","r4","denom","offset","num","sameSign","module","exports","intersectNode","intersectPolygon","polyPoints","x1","y1","intersections","minX","POSITIVE_INFINITY","minY","entry","min","left","top","sort","pdx","pdy","distp","qdx","qdy","distq","sx","sy","markerArray","markerName","extension","composition","aggregation","dependency","cross","barb","decendants","parents","isDecendant","ancenstorId","edgeInCluster","clusterId","copy","newGraph","rootId","setEdge","error","removeNode","extractDecendants","concat","validate","_id","getAnchorId","externalConnections","depth","d1","d2","removeEdge","extractor","hasChildren","graphSettings","clusterGraph","Graph","multigraph","compound","setGraph","nodesep","ranksep","marginx","marginy","setDefaultEdgeLabel","sorter","result","assign","sorted","labelHelper","insertPolygonShape","note","parseMember","question","questionElem","choice","domId","map","join","hexagon","f","m","hex","rect_left_inv_arrow","lean_right","lean_left","trapezoid","inv_trapezoid","rect_right_inv_arrow","cylinder","totalWidth","totalHeight","props","propKeys","Set","borders","applyNodePropertyBorders","delete","propKey","strokeDashArray","addBorder","skipBorder","includes","rectWithTitle","innerLine","text2","flat","title","textRows","titleBox","descr","stadium","subroutine","start","forkJoin","end","innerCircle","class_box","rowPadding","lineHeight","topLine","bottomLine","maxWidth","maxHeight","labelContainer","verticalPos","hasInterface","classData","annotations","interfaceLabelText","interfaceLabel","interfaceBBox","classTitleString","classTitleLabel","classTitleBBox","classAttributes","members","str","parsedInfo","parsedText","displayText","lbl","cssStyle","classMethods","methods","diffX","fork","nodeElems","link","target","securityLevel","linkTarget","tooltip","haveCallback","decodeEntities","_classes","element","themeCSS","maxTextSize","darkMode","logLevel","startOnLoad","deterministicIds","deterministicIDSeed","diagramPadding","nodeSpacing","rankSpacing","useMaxWidth","defaultRenderer","sequence","activationWidth","diagramMarginX","diagramMarginY","actorMargin","boxMargin","boxTextMargin","noteMargin","messageMargin","messageAlign","mirrorActors","forceMenus","bottomMarginAdj","rightAngles","showSequenceNumbers","actorFontSize","actorFontFamily","actorFontWeight","noteFontSize","noteFontFamily","noteFontWeight","noteAlign","messageFontSize","messageFontFamily","messageFontWeight","wrap","wrapPadding","labelBoxWidth","labelBoxHeight","messageFont","fontSize","fontWeight","noteFont","actorFont","gantt","titleTopMargin","barHeight","barGap","topPadding","rightPadding","leftPadding","gridLineStartPadding","sectionFontSize","numberSectionStyles","axisFormat","topAxis","useWidth","journey","leftMargin","taskFontSize","taskFontFamily","taskMargin","textPlacement","actorColours","sectionFills","sectionColours","git","dividerMargin","sizeUnit","textHeight","titleShift","forkWidth","forkHeight","miniPadding","fontSizeFactor","labelHeight","edgeLengthFactor","compositTitleSize","radius","er","layoutDirection","minEntityWidth","minEntityHeight","entityPadding","stroke","fill","pie","requirement","rect_fill","text_color","rect_border_size","rect_border_color","rect_min_width","rect_min_height","rect_padding","line_height","keyify","obj","prefix","reduce","configKeys","configApi","common","mermaidAPI","MERMAID_DOM_ID_PREFIX","relations","classCounter","funs","parseDirective","statement","context","splitClassNameAndType","genericType","className","addClass","classId","cssClasses","lookUpDomId","classKeys","setupToolTips","getClass","getClasses","getRelations","addRelation","relation","id1","id2","relationTitle1","relationTitle2","addAnnotation","annotation","validatedClassName","addMember","member","theClass","memberString","startsWith","endsWith","substring","addMembers","cleanupLabel","substr","setCssClass","ids","match","setTooltip","setLink","linkStr","formatUrl","setClickEvent","functionName","functionArgs","setClickFunc","elemId","argList","item","charAt","querySelector","addEventListener","runFunc","bindFunctions","fun","lineType","LINE","DOTTED_LINE","relationType","AGGREGATION","EXTENSION","COMPOSITION","DEPENDENCY","tooltipElem","_groups","svg","selectAll","on","transition","duration","scrollX","right","scrollY","body","scrollTop","classed","direction","getDirection","setDirection","classDb","parser","svgDraw","curveLinear","interpolateToCurve","getStylesFromArray","configureSvgSize","yy","idCache","addClasses","g","vertex","cssClassStr","styles","radious","_shape","addRelations","cnt","defaultStyle","defaultLabelStyle","edgeData","arrowhead","getArrowMarker","type1","type2","interpolate","defaultInterpolate","arrowheadStyle","labelpos","labelType","lineBreakRegex","getGraphId","foundEntry","entries","setConf","cnf","draw","sandboxElement","root","contentDocument","svgBounds","_label","doc","labels","querySelectorAll","k","dim","insertBefore","firstChild","marker","diagram","isMultiGraph","classDef","drawClass","drawEdge","vBox","getStyles","nodeBorder","classText","mainBkg","lineColor","edgeCount","getRelationType","l","labelPosition","p1_card_x","p1_card_y","p2_card_x","p2_card_y","cardinality_1_point","calcCardinalityPosition","cardinality_2_point","bounds","classInfo","isFirst","titleText2","classTitle","titleHeight","membersLine","addTspan","membersBox","methodsLine","method","classBox","rectWidth","childNodes","fieldRegEx","methodRegEx","fieldMatch","methodMatch","buildFieldDisplay","buildMethodDisplay","buildLegacyDisplay","visibility","fieldType","parseGenericTypes","fieldName","classifier","parseClassifier","err","methodName","parameters","returnType","memberText","methodStart","methodEnd","firstChar","textEl","tSpan","cleanedText","DOMPurify","getRows","breakToPlaceholder","removeEscapes","newStr","String","fromCharCode","parseInt","_","c","removeScript","rs","idx","decodedText","sanitizeMore","level","placeholderToBreak","sanitizeTextOrArray","a","hasBreaks","test","splitBreaks","getUrl","useAbsolute","val","entities","relationships","Cardinality","ZERO_OR_ONE","ZERO_OR_MORE","ONE_OR_MORE","ONLY_ONE","Identification","NON_IDENTIFYING","IDENTIFYING","addEntity","attributes","getEntities","addAttributes","entityName","attribs","entity","attributeName","addRelationship","entA","rolA","entB","rSpec","rel","entityA","roleA","entityB","relSpec","getRelationships","setTitle","getTitle","ERMarkers","ONLY_ONE_START","ONLY_ONE_END","ZERO_OR_ONE_START","ZERO_OR_ONE_END","ONE_OR_MORE_START","ONE_OR_MORE_END","ZERO_OR_MORE_START","ZERO_OR_MORE_END","erDb","erParser","erMarkers","drawAttributes","groupNode","entityTextNode","heightPadding","widthPadding","attrFontSize","labelBBox","attributeNodes","hasKeyType","hasComment","maxTypeWidth","maxNameWidth","maxKeyWidth","maxCommentWidth","cumulativeHeight","attrNum","attributeKeyType","attributeComment","attrPrefix","nodeHeight","typeNode","attributeType","nameNode","attributeNode","tn","nn","typeBBox","nameBBox","max","keyTypeNode","kn","keyTypeBBox","commentNode","cn","commentNodeBBox","widthPaddingFactor","bBox","spareColumnWidth","heightOffset","attribStyle","alignY","typeRect","nameXOffset","parseFloat","nameRect","keyTypeAndCommentXOffset","keyTypeRect","drawEntities","svgNode","firstOne","textId","textNode","entityWidth","entityHeight","rectNode","rectBBox","adjustEntities","getEdgeName","addRelationships","relationship","relCnt","drawRelationshipFromLayout","relType","cardA","cardB","len","getTotalLength","labelPoint","getPointAtLength","labelId","labelNode","directed","edgesep","firstEntity","tertiaryColor","dagreD3","addToRender","addToRenderV2","addShape","vertexCounter","vertices","subGraphs","subGraphLookup","tooltips","subCount","firstGraphFlag","version","veritceKeys","addVertex","addSingleLink","_start","_end","linktext","addLink","updateLinkInterpolate","positions","interp","updateLink","isSubstringInArray","textStyles","newStyle1","newStyle2","setClass","setClickFun","getTooltip","getVertices","getEdges","ver","setGen","addSubGraph","list","_title","uniq","prims","boolean","number","string","objs","nodeList","stmt","hasOwnProperty","apply","nl","subGraph","makeUniq","getPosForId","secCount","posCrossRef","indexNodes2","count","posCount","childPos","getDepthFirstPos","indexNodes","getSubGraphs","firstGraph","destructStartLink","_str","countChar","char","destructEndLink","dots","destructLink","_startStr","startInfo","exists","allSgs","sg","allSubgraphs","lex","flowDb","flow","addVertices","vert","svgId","classStr","parentNode","addEdges","linkIdCnt","defaultStyles","linkIdBase","linkId","linkNameStart","linkNameEnd","minlen","subG","linkNode","flowChartShapes","_doc","Render","arrows","none","normal","util","clusterRects","clusterEl","xPos","baseVal","yPos","cluster","te","classList","add","nodeTextColor","textColor","titleColor","arrowheadColor","edgeLabelBackground","clusterBkg","clusterBorder","border2","moment","sanitizeUrl","dateFormat","todayMarker","excludes","links","sections","tasks","currentSection","tags","inclusiveEndDates","lastOrder","taskCnt","lastTask","lastTaskID","rawTasks","setAxisFormat","getAxisFormat","setTodayMarker","getTodayMarker","setDateFormat","enableInclusiveEndDates","endDatesAreInclusive","enableTopAxis","topAxisEnabled","getDateFormat","setIncludes","toLowerCase","getIncludes","setExcludes","getExcludes","getLinks","addSection","getSections","getTasks","allItemsPricessed","compileTasks","maxDepth","iterationCount","isInvalidDate","date","format","isoWeekday","checkTaskDates","task","manualEndTime","startTime","endTime","renderEndTime","fixTaskDates","toDate","invalid","getStartDate","prevTime","re","afterStatement","exec","latestEndingTask","findTaskById","dt","Date","setHours","mDate","isValid","durationToDate","durationStatement","relativeTime","getEndDate","inclusive","parseId","idStr","compileData","prevTask","dataStr","ds","getTaskTags","endTimeData","parseData","prevTaskId","startData","taskDb","addTask","rawTask","section","processed","raw","taskInfo","active","done","crit","milestone","order","addTaskOrg","newTask","description","compileTask","allProcessed","_linkStr","pushFun","open","callbackFunction","matchFound","t","regex","RegExp","shift","scaleTime","scaleLinear","interpolateHcl","axisBottom","axisTop","timeFormat","ganttDb","getElementById","parentElement","offsetWidth","taskArray","timeScale","domain","rangeRound","categories","catsUnfiltered","checkUnique","taskCompare","b","taskA","taskB","makeGant","pageWidth","pageHeight","gap","colorScale","range","drawExcludeDays","makeGrid","drawRects","vertLabels","drawToday","theArray","theGap","theTopPad","theSidePad","theBarHeight","theColorScale","enter","rectangles","toString","secNum","taskClass","startX","endX","textWidth","taskType","each","taskRect","taskText","oldParent","Link","createElement","minTime","maxTime","excludeRanges","valueOf","clone","renderEnd","bottomXAxis","tickSize","tickFormat","call","topXAxis","numOccurances","prevGap","getCount","todayG","today","todayLine","arr","hash","prototype","getCounts","word","excludeBkgColor","sectionBkgColor","sectionBkgColor2","altSectionBkgColor","ganttFontSize","gridColor","todayLineColor","taskTextDarkColor","taskTextClickableColor","taskTextColor","taskBkgColor","taskBorderColor","taskTextOutsideColor","activeTaskBkgColor","activeTaskBorderColor","doneTaskBorderColor","doneTaskBkgColor","critBorderColor","critBkgColor","random","commits","branches","master","curBranch","seq","getId","isfastforwardable","currentCommit","otherCommit","isReachableFrom","currentSeq","otherSeq","uniqBy","fn","recordMap","create","out","setOptions","rawOptString","message","getOptions","commit","msg","branch","merge","otherBranch","checkout","commitRef","ref","parentCount","upsert","newval","index","splice","prettyPrintCommitHistory","commitArr","newCommit","nextCommit","prettyPrint","getCommitsArray","getBranchesAsObjArray","branchArr","getBranches","getCommits","getCurrentBranch","getHead","db","gitGraphParser","allCommitsDict","branchNum","nodeFillColor","nodeStrokeWidth","nodeStrokeColor","lineStrokeWidth","branchOffset","branchColors","nodeRadius","nodeLabel","apiConfig","svgCreateDefs","svgDrawLine","colorIdx","color","lineGen","round","getElementCoords","coords","ctm","getCTM","xn","yn","svgDrawLineForCommits","fromId","toId","fromBbox","toBbox","lineStart","lineEnd","cloneNode","selector","renderCommitHistory","commitid","numCommits","size","branchName","renderLines","branchColor","lineDrawn","setMessage","getMessage","setInfo","inf","getInfo","infoParser","showData","setShowData","toggle","getShowData","cleanupValue","scaleOrdinal","d3pie","arc","pieData","pieParser","margin","legendRectSize","legendSpacing","sum","myGeneratedColors","pie1","pie2","pie3","pie4","pie5","pie6","pie7","pie8","pie9","pie10","pie11","pie12","dataReady","arcGenerator","innerRadius","outerRadius","toFixed","centroid","legend","horz","pieStrokeColor","pieStrokeWidth","pieOpacity","pieTitleTextSize","pieTitleTextColor","pieSectionTextColor","pieSectionTextSize","pieLegendTextColor","pieLegendTextSize","latestRequirement","requirements","latestElement","elements","RequirementType","REQUIREMENT","FUNCTIONAL_REQUIREMENT","INTERFACE_REQUIREMENT","PERFORMANCE_REQUIREMENT","PHYSICAL_REQUIREMENT","DESIGN_CONSTRAINT","RiskLevel","LOW_RISK","MED_RISK","HIGH_RISK","VerifyType","VERIFY_ANALYSIS","VERIFY_DEMONSTRATION","VERIFY_INSPECTION","VERIFY_TEST","Relationships","CONTAINS","COPIES","DERIVES","SATISFIES","VERIFIES","REFINES","TRACES","addRequirement","risk","verifyMethod","getRequirements","setNewReqId","setNewReqText","setNewReqRisk","setNewReqVerifyMethod","addElement","docRef","getElements","setNewElementType","setNewElementDocRef","src","dst","req","ReqMarkers","ARROW","insertLineEndings","containsNode","requirementDb","newRectNode","newTitleNode","txts","textStr","yPadding","linePadding","totalY","titleNode","newBodyNode","yStart","currentRow","charLimit","wrappedTxts","currentTextLen","firstPart","lastStr","addEdgeLabel","elementString","drawReqs","reqs","reqName","titleNodeInfo","bodyNode","drawElements","els","elName","relationColor","requirementBackground","requirementBorderColor","requirementBorderSize","requirementTextColor","relationLabelBackground","relationLabelColor","prevActor","actors","messages","notes","titleWrapped","sequenceNumbersEnabled","wrapEnabled","addActor","old","autoWrap","properties","actorCnt","rectData","nextActor","activationCount","part","LINETYPE","ACTIVE_START","from","actor","ACTIVE_END","addMessage","idFrom","idTo","answer","to","addSignal","messageType","Error","token","loc","first_line","last_line","first_column","last_column","expected","getMessages","getActors","getActor","getActorKeys","getTitleWrapped","enableSequenceNumbers","setWrap","wrapSetting","parseMessage","SOLID","DOTTED","NOTE","SOLID_CROSS","DOTTED_CROSS","SOLID_OPEN","DOTTED_OPEN","LOOP_START","LOOP_END","ALT_START","ALT_ELSE","ALT_END","OPT_START","OPT_END","PAR_START","PAR_AND","PAR_END","RECT_START","RECT_END","SOLID_POINT","DOTTED_POINT","ARROWTYPE","FILLED","OPEN","PLACEMENT","LEFTOF","RIGHTOF","OVER","addNote","placement","addLinks","actorId","sanitizedText","insertLinks","addALink","sep","addProperties","insertProperties","addDetails","innerHTML","details","getActorProperty","titleWrap","param","signalType","loopText","optText","altText","parText","drawText","fixLifeLineHeights","sequenceDb","startx","stopx","starty","stopy","sequenceItems","activations","models","getHeight","loops","it","acc","actorModel","addLoop","loopModel","msgModel","noteModel","lastActor","lastLoop","lastMessage","lastNote","init","updateVal","updateBounds","_self","updateFn","updateItemBounds","_startx","_stopx","_starty","_stopy","newActivation","actorRect","stackedSize","actorActivations","anchored","anchorElement","endActivation","lastActorActivationIdx","activation","lastIndexOf","createLoop","newLoop","endLoop","pop","addSectionToLoop","loop","sectionTitles","getVerticalPos","bumpVerticalPos","bump","getBounds","drawNote","getNoteRect","rectElem","drawRect","textObj","getTextObj","anchor","textMargin","valign","textElem","curr","drawMessage","sequenceIndex","lines","textDims","calculateTextDimensions","totalOffset","lineStarty","fromBounds","toBounds","drawActors","actorKeys","prevWidth","prevMargin","drawActor","drawActorsPopup","minMenuWidth","getRequiredPopupWidth","menuDimensions","drawPopup","activationBounds","actorObj","adjustLoopHeightForWrap","loopWidths","preMargin","postMargin","addLoopFn","heightAdjust","loopWidth","textConf","wrapLabel","maxMessageWidthPerActor","getMaxMessageWidthPerActor","calculateActorMargins","insertComputerIcon","insertDatabaseIcon","insertClockIcon","calculateLoopBounds","insertArrowHead","insertArrowCrossHead","insertArrowFilledHead","insertSequenceNumber","activeEnd","activationData","drawActivation","drawLoop","drawBackgroundRect","requiredBoxSize","box","actorLines","boxHeight","boxWidth","extraVertForTitle","isNote","isMessage","textFont","wrappedMessage","messageDimensions","messageWidth","requiredPopupWidth","labelDimensions","labelWidth","actorToMessageWidth","prop","actDims","actorKey","actorWidth","buildNoteModel","shouldWrap","textDimensions","buildMessageModel","process","fromIdx","toIdx","allBounds","boundedWidth","msgDims","stack","current","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","toAdd","enabled","stk","actorBorder","actorBkg","actorTextColor","actorLineColor","signalColor","sequenceNumberColor","signalTextColor","labelBoxBorderColor","labelBoxBkgColor","labelTextColor","loopTextColor","noteBorderColor","noteBkgColor","noteTextColor","activationBkgColor","activationBorderColor","addFunction","addPopupInteraction","popupMenuUpFunc","popupMenuDownFunc","textAttrs","displayValue","actorClass","menuWidth","linkY","linkElem","sanitizedLink","_drawMenuItemTextCandidateFunc","drawImage","imageElem","drawEmbeddedImage","popupMenu","popid","popdownMenu","popupId","pu","display","textData","prevTextHeight","textElems","yfunc","dominantBaseline","alignmentBaseline","span","drawLabel","txtObject","genPoints","cut","drawActorTypeParticipant","center","boxpluslineGroup","cssclass","iconSrc","_drawTextCandidateFunc","drawActorTypeActor","actElem","drawLoopLine","sectionHeight","lower","defs","byText","content","_setTextAttrs","byTspan","byFo","toText","fromTextAttrsDict","set","get","stateDb","drawStartState","drawDivider","drawSimpleState","stateDef","drawDescrState","descriptions","isSecond","descrLine","descrBox","addTitleAndBox","altBkg","pad","dblPad","orgBox","orgWidth","orgX","titleWidth","graphBox","lineY","drawEndState","drawForkJoinState","parentId","tmp","nText","_drawLongText","_text","tHeight","textBounds","drawState","stateInfo","stateBox","titleRows","boundstmp","heightAdj","generateId","rootDoc","setRootDoc","getRootDoc","docTranslator","first","state1","state2","currentDoc","newNode","docNode","getRootDocV2","extract","addState","newDoc","states","documents","currentDocument","startCnt","endCnt","addDescription","des","getState","getStates","logDocuments","_id1","_id2","_descr","theState","dividerCnt","getDividerId","trimColon","nodeDb","setupNode","altFlag","getDir","nodeData","noteData","groupData","position","arrowType","setupDoc","startId","endId","defaultDir","transformationLog","renderDoc","svgWidth","getLabelWidth","domDocument","edgeFreeDoc","ranker","nodeSep","sub","boxBounds","noteDef","nodeCount","svgElem","dividers","pWidth","pShift","getAttribute","transitionColor","stateLabelColor","background","labelBackgroundColor","transitionLabelColor","tertiaryTextColor","specialStateColor","innerEndBackground","compositeBackground","stateBkg","stateBorder","compositeTitleBackground","altBackground","allItemsProcessed","updateActors","tempActors","people","unique","taskData","pieces","score","peeps","peopleList","journeyDb","drawActorLegend","person","colour","circleData","drawCircle","labelData","LEFT_MARGIN","initGraphics","actorNames","actorPos","actorName","drawTasks","fills","textColours","lastSection","sectionVHeight","taskPos","sectionNumber","drawSection","taskActors","drawTask","faceColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","actor0","actor1","actor2","actor3","actor4","actor5","d3arc","drawFace","faceData","circleElement","face","smile","startAngle","PI","endAngle","sad","ambivalent","labelMargin","taskCount","graphics","interactionFunctions","func","attachFunctions","LEVELS","fatal","setLogLevel","console","bind","time","arguments","mermaid","sequenceConfig","callback","Node","ganttConfig","idGeneratior","initIdGeneratior","next","entityDecode","detectInit","svgCode","parseError","initialize","contentLoaded","compile","serialize","pkg","classRenderer","classRendererV2","classParser","erRenderer","flowRenderer","flowRendererV2","flowParser","ganttRenderer","ganttParser","gitGraphAst","gitGraphRenderer","infoDb","infoRenderer","pieDb","pieRenderer","requirementParser","requirementRenderer","sequenceParser","sequenceRenderer","stateParser","stateRenderer","stateRendererV2","journeyRenderer","journeyParser","errorRenderer","directiveSanitizer","sanitizeCss","graphInit","reinitialize","graphType","detectType","encodeEntities","innerTxt","isInt","_txt","cb","container","iframe","existingSvg","remove","userStyles","altFontFamily","stylis","rules","style1","sequenceDiagram","svgEl","viewBox","btoa","tmpElementSelector","currentDirective","args","handleDirective","updateRendererConfigs","default","globalReset","classDiagram","stateDiagram","themes","calcThemeVariables","userOverRides","calcColors","errorBkgColor","errorTextColor","baseThemeVariables","darkThemeVariables","defaultThemeVariables","forestThemeVariables","neutralThemeVariables","base","dark","forest","neutral","darken","lighten","adjust","invert","mkBorder","Theme","primaryColor","primaryTextColor","secondaryColor","primaryBorderColor","secondaryBorderColor","tertiaryBorderColor","secondaryTextColor","nodeBkg","defaultLinkColor","taskTextLightColor","compositeBorder","overrides","updateColors","userOverrides","calculate","rgba","secondBkg","mainContrastColor","darkTextColor","border1","labelBackground","labelColor","col","contrast","critical","curveBasisClosed","curveBasisOpen","curveLinearClosed","curveMonotoneX","curveMonotoneY","curveNatural","curveStep","curveStepAfter","curveStepBefore","d3CurveTypes","directiveWithoutOpen","anyComment","inits","detectDirective","results","commentWithoutDirectives","source","lastIndex","memoize","resolver","cache","defaultCurve","curveName","toUpperCase","arrPaths","fnName","params","distance","pow","traverseEdge","prevPoint","totalDistance","remainingDistance","vectorDistance","distanceRatio","isRelationTypePresent","initialPosition","distanceToCardinalityPoint","angle","atan2","cardinalityPosition","sin","cos","terminalMarkerSize","makeid","characters","charactersLength","floor","clobber","drawSimpleText","joinWith","words","completedLines","nextLine","wordLength","calculateTextWidth","nextLineLength","breakString","hyphenatedStrings","remainingWord","Boolean","currentWord","isLastWord","hyphenCharacter","currentLine","character","lineWidth","currentCharacter","isLastLine","hyphenatedNextLine","calculateTextHeight","fontFamilies","dims","cheight","d3Attrs","d3Elem","attrs","calculateSvgSizeAttrs","Map","deterministic","seed","now","decoder","escape","unescape","arg","stringsearch"],"sourceRoot":""}