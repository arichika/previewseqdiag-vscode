{"version":3,"sources":["webpack://mermaid/webpack/universalModuleDefinition","webpack://mermaid/webpack/bootstrap","webpack://mermaid/./src/themes/dark/index.scss","webpack://mermaid/./src/themes/default/index.scss","webpack://mermaid/./src/themes/forest/index.scss","webpack://mermaid/./src/themes/neutral/index.scss","webpack://mermaid/./node_modules/css-loader/dist/runtime/api.js","webpack://mermaid/./node_modules/path-browserify/index.js","webpack://mermaid/./node_modules/process/browser.js","webpack://mermaid/(webpack)/buildin/module.js","webpack://mermaid/./src/config.js","webpack://mermaid/./src/diagrams/class/classDb.js","webpack://mermaid/./src/diagrams/class/classRenderer.js","webpack://mermaid/./src/diagrams/class/parser/classDiagram.jison","webpack://mermaid/./src/diagrams/flowchart/flowChartShapes.js","webpack://mermaid/./src/diagrams/flowchart/flowDb.js","webpack://mermaid/./src/diagrams/flowchart/flowRenderer.js","webpack://mermaid/./src/diagrams/flowchart/parser/flow.jison","webpack://mermaid/./src/diagrams/gantt/ganttDb.js","webpack://mermaid/./src/diagrams/gantt/ganttRenderer.js","webpack://mermaid/./src/diagrams/gantt/parser/gantt.jison","webpack://mermaid/./src/diagrams/git/gitGraphAst.js","webpack://mermaid/./src/diagrams/git/gitGraphRenderer.js","webpack://mermaid/./src/diagrams/git/parser/gitGraph.jison","webpack://mermaid/./src/diagrams/info/infoDb.js","webpack://mermaid/./src/diagrams/info/infoRenderer.js","webpack://mermaid/./src/diagrams/info/parser/info.jison","webpack://mermaid/./src/diagrams/pie/parser/pie.jison","webpack://mermaid/./src/diagrams/pie/pieDb.js","webpack://mermaid/./src/diagrams/pie/pieRenderer.js","webpack://mermaid/./src/diagrams/sequence/parser/sequenceDiagram.jison","webpack://mermaid/./src/diagrams/sequence/sequenceDb.js","webpack://mermaid/./src/diagrams/sequence/sequenceRenderer.js","webpack://mermaid/./src/diagrams/sequence/svgDraw.js","webpack://mermaid/./src/diagrams/state/id-cache.js","webpack://mermaid/./src/diagrams/state/parser/stateDiagram.jison","webpack://mermaid/./src/diagrams/state/shapes.js","webpack://mermaid/./src/diagrams/state/stateDb.js","webpack://mermaid/./src/diagrams/state/stateRenderer.js","webpack://mermaid/./src/logger.js","webpack://mermaid/./src/mermaidAPI.js","webpack://mermaid/./src/themes sync ^\\.\\/.*\\/index\\.scss$","webpack://mermaid/./src/themes/dark/index.scss?55a3","webpack://mermaid/./src/themes/default/index.scss?1e22","webpack://mermaid/./src/themes/forest/index.scss?c8cd","webpack://mermaid/./src/themes/neutral/index.scss?96e0","webpack://mermaid/./src/utils.js","webpack://mermaid/external \"@braintree/sanitize-url\"","webpack://mermaid/external \"crypto-random-string\"","webpack://mermaid/external \"d3\"","webpack://mermaid/external \"dagre\"","webpack://mermaid/external \"dagre-d3\"","webpack://mermaid/external \"dagre-d3/lib/label/add-html-label.js\"","webpack://mermaid/external \"graphlib\"","webpack://mermaid/external \"lodash\"","webpack://mermaid/external \"moment-mini\"","webpack://mermaid/external \"scope-css\""],"names":["config","setConf","cnf","lvl1Keys","Object","keys","i","length","lvl2Keys","j","setConfig","conf","getConfig","configApi","MERMAID_DOM_ID_PREFIX","relations","classes","funs","splitClassNameAndType","id","genericType","className","indexOf","split","type","addClass","classId","cssClasses","methods","members","annotations","clear","push","setupToolTips","getClass","getClasses","getRelations","addRelation","relation","logger","debug","JSON","stringify","id1","id2","addAnnotation","annotation","validatedClassName","addMember","member","theClass","memberString","trim","startsWith","endsWith","substring","addMembers","Array","isArray","reverse","forEach","cleanupLabel","label","substr","setCssClass","ids","_id","match","setLink","linkStr","tooltip","link","utils","formatUrl","sanitize","setClickEvent","functionName","setClickFunc","elemId","securityLevel","elem","document","querySelector","addEventListener","window","bindFunctions","element","fun","lineType","LINE","DOTTED_LINE","relationType","AGGREGATION","EXTENSION","COMPOSITION","DEPENDENCY","tooltipElem","d3","_groups","append","attr","style","svg","select","nodes","selectAll","on","el","title","rect","getBoundingClientRect","transition","duration","html","left","right","top","body","scrollTop","classed","parser","yy","classDb","idCache","dividerMargin","padding","textHeight","getGraphId","undefined","insertMarkers","edgeCount","drawEdge","path","getRelationType","points","filter","p","Number","isNaN","y","lineData","lineFunction","x","d","curve","svgPath","url","arrowMarkerAbsolute","location","protocol","host","pathname","search","replace","type1","type2","l","labalPosition","calcLabelPosition","p1_card_x","p1_card_y","p2_card_x","p2_card_y","cardinality_1_point","calcCardinalityPosition","cardinality_2_point","g","text","bounds","node","getBBox","insert","width","height","info","relationTitle1","relationTitle2","drawClass","classDef","cssClassStr","join","addTspan","textEl","txt","isFirst","displayText","cssStyle","methodEnd","classifier","tSpan","classInfo","titleText2","classTitleString","classTitle","titleHeight","membersLine","membersBox","methodsLine","method","classBox","rectWidth","childNodes","setAttribute","key","draw","parse","diagram","graphlib","Graph","multigraph","setGraph","isMultiGraph","setDefaultEdgeLabel","setNode","setEdge","dagre","layout","v","edges","e","edge","w","graph","question","parent","bbox","h","s","shapeSvg","insertPolygonShape","intersect","point","dagreD3","polygon","hexagon","f","m","rect_left_inv_arrow","lean_right","lean_left","trapezoid","inv_trapezoid","rect_right_inv_arrow","stadium","cylinder","rx","ry","shape","pos","Math","abs","sqrt","addToRender","render","shapes","map","vertices","subGraphs","subGraphLookup","tooltips","subCount","firstGraphFlag","direction","addVertex","styles","addSingleLink","_start","_end","linktext","start","end","stroke","addLink","updateLinkInterpolate","positions","interp","defaultInterpolate","interpolate","updateLink","defaultStyle","isSubstringInArray","setDirection","dir","setClass","setTooltip","setClickFun","getTooltip","getDirection","getVertices","getEdges","addSubGraph","list","_title","uniq","a","prims","boolean","number","string","objs","item","hasOwnProperty","nodeList","concat","apply","subGraph","getPosForId","secCount","posCrossRef","indexNodes2","result","count","posCount","childPos","res","getDepthFirstPos","indexNodes","getSubGraphs","firstGraph","destructStartLink","_str","str","destructEndLink","destructLink","_startStr","startInfo","lex","newDagreD3","addVertices","vert","svgId","styleFromStyleArr","styleStr","arr","vertex","classStr","labelStyle","vertexText","vertexNode","flowchart","htmlLabels","addHtmlLabel","parentNode","removeChild","svgLabel","createElementNS","rows","tspan","setAttributeNS","textContent","appendChild","radious","_shape","labelType","class","addEdges","cnt","toString","edgeData","arrowhead","interpolateToCurve","arrowheadStyle","labelpos","flowDb","flow","err","compound","rankdir","marginx","marginy","subG","setParent","Render","flowChartShapes","arrows","none","normal","marker","util","applyStyle","svgBounds","_label","useMaxWidth","maxX","minX","maxY","minY","href","clusterRects","querySelectorAll","clusterEl","xPos","baseVal","value","yPos","cluster","te","labels","k","dim","insertBefore","firstChild","linkNode","dateFormat","axisFormat","excludes","sections","tasks","currentSection","tags","inclusiveEndDates","taskCnt","lastTask","lastTaskID","rawTasks","setAxisFormat","getAxisFormat","setDateFormat","enableInclusiveEndDates","endDatesAreInclusive","getDateFormat","setExcludes","toLowerCase","getExcludes","setTitle","getTitle","addSection","getSections","getTasks","allItemsPricessed","compileTasks","maxDepth","iterationCount","isInvalidDate","date","isoWeekday","format","checkTaskDates","task","manualEndTime","startTime","moment","add","endTime","renderEndTime","fixTaskDates","toDate","invalid","getStartDate","prevTime","re","afterStatement","exec","latestEndingTask","findTaskById","dt","Date","setHours","mDate","isValid","durationToDate","durationStatement","relativeTime","getEndDate","inclusive","parseId","idStr","compileData","prevTask","dataStr","ds","data","getTaskTags","endTimeData","parseData","prevTaskId","startData","taskDb","addTask","descr","rawTask","section","processed","raw","taskInfo","active","done","crit","milestone","addTaskOrg","newTask","description","compileTask","allProcessed","_linkStr","sanitizeUrl","pushFun","open","functionArgs","argList","charAt","callbackFunction","matchFound","t","pattern","regex","RegExp","shift","ganttDb","titleTopMargin","barHeight","barGap","topPadding","rightPadding","leftPadding","gridLineStartPadding","fontSize","fontFamily","getElementById","parentElement","offsetWidth","useWidth","taskArray","timeScale","domain","rangeRound","categories","catsUnfiltered","checkUnique","makeGant","pageWidth","pageHeight","gap","colorScale","range","makeGrid","drawRects","vertLabels","drawToday","theArray","theGap","theTopPad","theSidePad","theBarHeight","theColorScale","enter","numberSectionStyles","rectangles","secNum","taskClass","startX","endX","textWidth","taskType","xAxis","tickSize","tickFormat","call","numOccurances","prevGap","getCount","todayG","today","hash","getCounts","obj","word","commits","head","branches","master","curBranch","seq","getId","randomString","characters","isfastforwardable","currentCommit","otherCommit","isReachableFrom","currentSeq","otherSeq","options","setOptions","rawOptString","error","message","getOptions","commit","msg","branch","name","merge","otherBranch","checkout","reset","commitRef","ref","parentCount","parseInt","upsert","newval","index","splice","prettyPrintCommitHistory","commitArr","_","maxBy","line","c","newCommit","nextCommit","uniqBy","prettyPrint","getCommitsArray","getBranchesAsObjArray","branchArr","getBranches","getCommits","o","orderBy","getCurrentBranch","getHead","allCommitsDict","branchNum","nodeSpacing","nodeFillColor","nodeStrokeWidth","nodeStrokeColor","lineStrokeWidth","branchOffset","lineColor","leftMargin","branchColors","nodeRadius","nodeLabel","apiConfig","svgCreateDefs","svgDrawLine","colorIdx","color","lineGen","round","getElementCoords","coords","ctm","getCTM","xn","yn","svgDrawLineForCommits","fromId","toId","fromBbox","toBbox","lineStart","lineEnd","cloneNode","selector","renderCommitHistory","commitid","numCommits","size","branchName","renderLines","branchColor","lineDrawn","ver","gitGraphParser","db","assign","setMessage","getMessage","setInfo","inf","getInfo","infoParser","cleanupValue","pieParser","pieData","margin","legendRectSize","legendSpacing","radius","min","sum","pie","dataReady","arcGenerator","innerRadius","outerRadius","toFixed","centroid","legend","offset","horz","actors","messages","notes","addActor","old","addMessage","idFrom","idTo","answer","from","to","addSignal","messageType","getMessages","getActors","getActor","getActorKeys","LINETYPE","SOLID","DOTTED","NOTE","SOLID_CROSS","DOTTED_CROSS","SOLID_OPEN","DOTTED_OPEN","LOOP_START","LOOP_END","ALT_START","ALT_ELSE","ALT_END","OPT_START","OPT_END","ACTIVE_START","ACTIVE_END","PAR_START","PAR_AND","PAR_END","RECT_START","RECT_END","ARROWTYPE","FILLED","OPEN","PLACEMENT","LEFTOF","RIGHTOF","OVER","addNote","actor","placement","note","titleText","param","signalType","loopText","optText","altText","parText","sequenceDb","diagramMarginX","diagramMarginY","actorMargin","actorFontSize","actorFontFamily","boxMargin","boxTextMargin","noteMargin","messageMargin","mirrorActors","bottomMarginAdj","activationWidth","textPlacement","showSequenceNumbers","startx","stopx","starty","stopy","verticalPos","sequenceItems","activations","init","updateVal","val","updateBounds","_self","updateFn","updateItemBounds","n","max","_startx","_stopx","_starty","_stopy","newActivation","actorRect","stackedSize","actorActivations","anchored","svgDraw","anchorElement","endActivation","lastActorActivationIdx","activation","lastIndexOf","newLoop","fill","endLoop","loop","pop","addSectionToLoop","sectionTitles","getVerticalPos","bumpVerticalPos","bump","getBounds","_drawLongText","lines","textObj","getTextObj","textMargin","dy","textElem","drawText","drawNote","forceWidth","getNoteRect","rectElem","drawRect","drawMessage","sequenceIndex","txtCenter","counterBreaklines","breaklineOffset","breaklines","breakline","offsetLineCounter","totalOffset","rightAngles","dx","drawActors","actorKeys","drawActor","actorFlowVerticaBounds","reduce","acc","insertArrowHead","insertArrowCrossHead","insertSequenceNumber","activeEnd","activationData","drawActivation","loopData","drawLoop","rectData","drawBackgroundRect","fromBounds","toBounds","fromIdx","toIdx","allBounds","includes","box","actorLines","extraVertForTitle","textData","nText","anchor","span","drawLabel","txtObject","genPoints","cut","labelMargin","actorCnt","center","_drawTextCandidateFunc","labelText","drawLoopLine","idx","lower","defs","byText","content","textAttrs","_setTextAttrs","byTspan","byFo","toText","fromTextAttrsDict","set","get","drawStartState","state","sizeUnit","drawDivider","drawSimpleState","stateDef","drawDescrState","descriptions","titleBox","isSecond","descrLine","descrBox","addTitleAndBox","altBkg","pad","dblPad","orgBox","orgWidth","orgX","titleShift","titleWidth","graphBox","doc","lineY","drawEndState","miniPadding","drawForkJoinState","forkWidth","forkHeight","parentId","tmp","_text","tHeight","textBounds","drawState","stateInfo","stateBox","getRows","stateDb","titleRows","heightAdj","rootDoc","setRootDoc","getRootDoc","extract","stmt","addState","state1","state2","newDoc","states","documents","root","currentDocument","startCnt","endCnt","addDescription","des","getState","getStates","logDocuments","_id1","_id2","_descr","theState","dividerCnt","getDividerId","transformationLog","renderDoc","getLabelWidth","fontSizeFactor","edgeFreeDoc","ranker","ranksep","edgeLengthFactor","nodeSep","first","sub","boxBounds","compositTitleSize","noteDef","position","nodeCount","labelHeight","svgElem","warn","dividers","divider","pWidth","pShift","getAttribute","LEVELS","fatal","setLogLevel","level","console","bind","log","time","themes","themeName","require","theme","themeCSS","logLevel","startOnLoad","sequence","gantt","git","graphType","detectType","gitGraphAst","flowParser","sequenceParser","ganttParser","classParser","stateParser","infoDb","pieDb","parseError","encodeEntities","innerTxt","isInt","test","decodeEntities","cb","container","innerHTML","existingSvg","remove","altFontFamily","flowRenderer","style1","createElement","scope","style2","cs","getComputedStyle","font","gitGraphRenderer","sequenceDiagram","sequenceRenderer","ganttRenderer","classRenderer","stateRenderer","infoRenderer","pkg","version","pieRenderer","svgCode","initialize","mermaidAPI","defaultCurve","curveName","toUpperCase","slice","distance","p1","p2","pow","traverseEdge","prevPoint","totalDistance","distanceToLabel","remainingDistance","vectorDistance","distanceRatio","isRelationTypePresent","initialPosition","distanceToCardinalityPoint","angle","atan2","cardinalityPosition","sin","cos"],"mappings":"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AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,oBAAoB;AAC9B;AACA;;AAEA;AACA,UAAU,UAAU;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7SA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA,IAAIA,MAAM,GAAG,EAAb;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAASC,GAAT,EAAc;AAC5B;AACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYH,GAAZ,CAAjB;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb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AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,4yBAA4yB;AACvzB,aAAa,2dAA2d;AACxe;AACA;AACA;;AAEA;AACA;AACA;AACA,wB;AACA;AACA;AACA,e;AACA;AACA;AACA,qC;AACA;AACA;AACA,4B;AACA;AACA;AACA,wB;AACA;AACA;AACA,2CAA2C,0B;AAC3C;AACA;AACA;AACA;AACA;AACA,iDAAiD,wBAAwB;AACzE;AACA;AACA,mC;AACA;AACA;AACA,mB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,kCAAkC;AAClC;AACA;AACA,WAAW,8F;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW,6F;AACX;AACA;AACA,WAAW,8F;AACX;AACA;AACA,SAAS,+C;AACT;AACA;AACA,SAAS,6C;AACT;AACA;AACA,SAAS,6C;AACT;AACA;AACA,SAAS,2C;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,CAAC;AACD,SAAS,gBAAgB,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,8GAA8G,EAAE,SAAS,EAAE,iBAAiB,eAAe,UAAU,wEAAwE,gFAAgF,GAAG,iCAAiC,8BAA8B,2BAA2B,EAAE,iCAAiC,EAAE,iCAAiC,cAAc,2CAA2C,6CAA6C,QAAQ,EAAE,uHAAuH,gBAAgB,2CAA2C,EAAE,4DAA4D,gBAAgB,oBAAoB,eAAe,kCAAkC,oGAAoG,UAAU,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,2BAA2B,iCAAiC,GAAG,QAAQ,gBAAgB,iCAAiC,EAAE,2CAA2C,eAAe,kCAAkC,iBAAiB,aAAa,EAAE,iCAAiC,eAAe,UAAU,gBAAgB,UAAU,4CAA4C,iCAAiC,gBAAgB,UAAU,EAAE,uBAAuB,wEAAwE,UAAU;AAC3nD,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kCAAkC;AAC/D;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+EAA+E,WAAW,wBAAwB,EAAE,gQAAgQ;AACpX,aAAa,UAAU,kCAAkC,YAAY,kCAAkC,WAAW,kCAAkC,YAAY;AAChK,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,0DAAI,eAAe,mBAAO,CAAC,qDAAM;AAC1D;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA,C;;;;;;;;;;;;;ACzwBA;AAAA;AAAA;AAAA;AAAA;;AAEA,SAASmB,QAAT,CAAkBC,MAAlB,EAA0BC,I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;AACrG;AACA;AACA,8CAA8C,gDAAgD,WAAW,yD;AACzG;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,gCAAgC;AAChC;AACA;AACA,kCAAkC,qDAAqD;AACvF;AACA;AACA,oBAAoB;AACpB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA,uBAAuB;AACvB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,8CAA8C;AAChE;AACA;AACA,kBAAkB,4CAA4C;AAC9D;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,4BAA4B,EAAE,MAAM,YAAY,IAAI,GAAG,wBAAwB,EAAE,wBAAwB,EAAE,SAAS,EAAE,2PAA2P,6BAA6B,qCAAqC,gFAAgF,yDAAyD,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,mCAAmC,eAAe,aAAa,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,eAAe,UAAU,gBAAgB,yMAAyM,6RAA6R,SAAS,eAAe,aAAa,iBAAiB,iIAAiI,yDAAyD,0BAA0B,GAAG,wQAAwQ,uIAAuI,yQAAyQ,aAAa,MAAM,gBAAgB,QAAQ,GAAG,0JAA0J,EAAE,6BAA6B,EAAE,0JAA0J,EAAE,+IAA+I,EAAE,+IAA+I,EAAE,sHAAsH,EAAE,yQAAyQ,EAAE,oRAAoR,EAAE,yQAAyQ,EAAE,yQAAyQ,EAAE,yQAAyQ,EAAE,oRAAoR,EAAE,yQAAyQ,EAAE,yQAAyQ,EAAE,yQAAyQ,0DAA0D,cAAc,gBAAgB,WAAW,GAAG,WAAW,EAAE,yQAAyQ,EAAE,uQAAuQ,qjBAAqjB,iSAAiS,EAAE,8PAA8P,EAAE,cAAc,EAAE,mJAAmJ,EAAE,WAAW,kFAAkF,WAAW,EAAE,sBAAsB,iBAAiB,WAAW,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,mJAAmJ,eAAe,+GAA+G,GAAG,uQAAuQ,EAAE,yQAAyQ,EAAE,uQAAuQ,EAAE,uQAAuQ,EAAE,uQAAuQ,EAAE,uQAAuQ,EAAE,uQAAuQ,EAAE,yQAAyQ,EAAE,uQAAuQ,EAAE,kRAAkR,EAAE,kRAAkR,eAAe,QAAQ,+BAA+B,uQAAuQ,+BAA+B,yQAAyQ,aAAa,MAAM,iBAAiB,4HAA4H,EAAE,6GAA6G,kBAAkB,6GAA6G,EAAE,wHAAwH,EAAE,wHAAwH,EAAE,WAAW,EAAE,6GAA6G,EAAE,6GAA6G,EAAE,+IAA+I,EAAE,0JAA0J,gBAAgB,uQAAuQ,wEAAwE,uQAAuQ,oIAAoI,uQAAuQ,EAAE,8PAA8P,8BAA8B,QAAQ,iBAAiB,+FAA+F,iNAAiN,QAAQ,iBAAiB,QAAQ,GAAG,WAAW,gBAAgB,QAAQ,GAAG,WAAW,+BAA+B,QAAQ,iBAAiB,QAAQ,iBAAiB,wIAAwI,iBAAiB,mJAAmJ,iBAAiB,WAAW,GAAG,WAAW,EAAE,WAAW,EAAE,0BAA0B,gBAAgB,sGAAsG,kBAAkB,+IAA+I,EAAE,+IAA+I,EAAE,WAAW,EAAE,WAAW,yCAAyC,MAAM,kBAAkB,+FAA+F,iBAAiB,mJAAmJ,iBAAiB,mJAAmJ,iCAAiC,8PAA8P,EAAE,6GAA6G,EAAE,6GAA6G,8BAA8B,QAAQ,iBAAiB,QAAQ;AAC/sgB,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mBAAmB;AACnD;AACA;AACA;AACA;AACA;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA,2BAA2B,Y;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mJAAmJ;AACnJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,+UAA+U;AAC1V,aAAa,+NAA+N;AAC5O;AACA;AACA;;AAEA;AACA;AACA;AACA,iB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,oCAAoC;AACpC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,gCAAgC;AAChC;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,2CAA2C;AAC7D;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB,yCAAyC;AAC3D;AACA;AACA,kBAAkB,6CAA6C;AAC/D;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,cAAc,IAAI,GAAG,+FAA+F,cAAc,QAAQ,gBAAgB,mEAAmE,4HAA4H,UAAU,EAAE,oBAAoB,0CAA0C,oBAAoB,gBAAgB,UAAU,gBAAgB,UAAU,8BAA8B,UAAU;AAChjB,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mJAAmJ;AACnJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,uSAAuS;AAClT,aAAa,0JAA0J;AACvK;AACA;AACA;;AAEA;AACA;AACA;AACA,iB;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,yBAAyB;AACzB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,QAAQ,EAAE,QAAQ,cAAc,gBAAgB,gBAAgB,sBAAsB,EAAE,QAAQ,EAAE,gFAAgF,eAAe,SAAS,eAAe,UAAU,gBAAgB,0BAA0B,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,0BAA0B,EAAE,QAAQ,eAAe,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,oBAAoB,EAAE,UAAU,EAAE,UAAU;AAC1lB,iBAAiB,2GAA2G;AAC5H;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AAC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,E;;;;;;;;;;;ACpDA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mJAAmJ;AACnJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,mHAAmH;AAC9H,aAAa,gDAAgD;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA,W;AACA;AACA;;AAEA;AACA;AACA,kB;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,cAAc,IAAI,GAAG,iCAAiC,EAAE,QAAQ;AAC7F,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,aAAa,WAAW;AACxB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,0DAAI,eAAe,mBAAO,CAAC,qDAAM;AAC1D;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA,C;;;;;;;;;;;;AC7mBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mJAAmJ;AACnJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,mIAAmI;AAC9I,aAAa,gEAAgE;AAC7E;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kD;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,cAAc,IAAI,GAAG,0CAA0C,EAAE,QAAQ,yCAAyC,UAAU;AACzJ,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qGAAqG;AACrG,aAAa,UAAU,gCAAgC,YAAY;AACnE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AA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AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,smBAAsmB;AACjnB,aAAa,0YAA0Y;AACvZ;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,c;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,SAAS,+BAA+B;AACxC;AACA;;AAEA,oBAAoB,yEAAyE;AAC7F,iBAAiB,qEAAqE;AACtF;AACA;AACA;;AAEA,oBAAoB,uEAAuE;AAC3F,iBAAiB,mEAAmE;AACpF;AACA;AACA;;AAEA,oBAAoB,sEAAsE;AAC1F,iBAAiB,kEAAkE;AACnF;AACA;AACA;;AAEA;AACA,oBAAoB,sEAAsE;AAC1F;AACA;AACA,iBAAiB,gDAAgD;AACjE;AACA;AACA;;AAEA;AACA,oBAAoB,sEAAsE;AAC1F;AACA;AACA,iBAAiB,gDAAgD;AACjE;AACA;AACA;AACA,4BAA4B,+DAA+D,W;AAC3F;AACA;AACA,4BAA4B,iEAAiE,W;AAC7F;AACA;;AAEA,uBAAuB,sEAAsE;AAC7F;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,qFAAqF;AAC5G;AACA;AACA,6B;AACA;AACA;AACA,iB;AACA;AACA;AACA,8B;AACA;AACA;AACA,+B;AACA;AACA;AACA,8BAA8B,4FAA4F;AAC1H,gBAAgB;AAChB;AACA;AACA;AACA,8BAA8B,4FAA4F;AAC1H,eAAe;AACf;AACA;AACA;AACA,8BAA8B,4FAA4F;AAC1H;AACA;AACA,QAAQ;AACR;AACA;AACA,iC;AACA;AACA;AACA,kC;AACA;AACA;AACA,4B;AACA;AACA;AACA,6B;AACA;AACA;AACA,kC;AACA;AACA;AACA,mC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,sBAAsB,EAAE,MAAM,EAAE,sBAAsB,EAAE,sBAAsB,iDAAiD,IAAI,GAAG,QAAQ,EAAE,QAAQ,EAAE,4HAA4H,eAAe,oGAAoG,4BAA4B,aAAa,EAAE,SAAS,EAAE,aAAa,EAAE,aAAa,EAAE,SAAS,EAAE,aAAa,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,kEAAkE,EAAE,oCAAoC,wDAAwD,mBAAmB,gBAAgB,SAAS,EAAE,SAAS,gBAAgB,SAAS,EAAE,SAAS,YAAY,KAAK,aAAa,KAAK,aAAa,KAAK,aAAa,WAAW,aAAa,WAAW,GAAG,iCAAiC,sFAAsF,aAAa,EAAE,mBAAmB,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,0DAA0D,8HAA8H,EAAE,8HAA8H,EAAE,8HAA8H,EAAE,UAAU,EAAE,wIAAwI,EAAE,UAAU,EAAE,wIAAwI,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,oBAAoB,EAAE,SAAS,0DAA0D,UAAU,gBAAgB,UAAU,EAAE,aAAa,EAAE,aAAa,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,aAAa,yBAAyB,WAAW,aAAa,WAAW,GAAG,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU;AAC/sE,iBAAiB,8HAA8H;AAC/I;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,W;AACzB;AACA,uCAAuC,qBAAqB,W;AAC5D;AACA,wBAAwB,iBAAiB,oBAAoB,W;AAC7D;AACA,wBAAwB,iBAAiB,U;AACzC;AACA,2BAA2B,W;AAC3B;AACA,4BAA4B,W;AAC5B;AACA,4BAA4B,W;AAC5B;AACA,4BAA4B,W;AAC5B;AACA,4BAA4B,W;AAC5B;AACA,4BAA4B,W;AAC5B;AACA,4BAA4B,W;AAC5B;AACA,yBAAyB,W;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,W;AAC1B;AACA,0BAA0B,W;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,W;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2HAA2H,iCAAiC,kJAAkJ,yLAAyL,qBAAqB,6FAA6F;AACzlB,aAAa,QAAQ,mCAAmC,UAAU,oCAAoC,OAAO,kCAAkC,YAAY;AAC3J,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,0DAAI,eAAe,mBAAO,CAAC,qDAAM;AAC1D;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA,C;;;;;;;;;;;;;AC3yBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,IAAI2e,MAAM,GAAG,EAAb;AACA,IAAIC,QAAQ,GAAG,EAAf;AACA,IAAMC,KAAK,GAAG,EAAd;AACA,IAAI7kB,KAAK,GAAG,EAAZ;AAEO,IAAM8kB,QAAQ,GAAG,SAAXA,QAAW,CAASvqB,EAAT,EAAa4jB,IAAb,EAAmBpG,WAAnB,EAAgC;AACtD;AACA,MAAMgN,GAAG,GAAGJ,MAAM,CAACpqB,EAAD,CAAlB;AACA,MAAIwqB,GAAG,IAAI5G,IAAI,KAAK4G,GAAG,CAAC5G,IAApB,IAA4BpG,WAAW,IAAI,IAA/C,EAAqD,OAHC,CAKtD;;AACA,MAAIA,WAAW,IAAI,IAAnB,EAAyBA,WAAW,GAAGoG,IAAd;AAEzBwG,QAAM,CAACpqB,EAAD,CAAN,GAAa;AAAE4jB,QAAI,EAAEA,IAAR;AAAcpG,eAAW,EAAEA;AAA3B,GAAb;AACD,CATM;AAWA,IAAMiN,UAAU,GAAG,SAAbA,UAAa,CAASC,MAAT,EAAiBC,IAAjB,EAAuBpH,OAAvB,EAAgCqH,MAAhC,EAAwC;AAChEP,UAAQ,CAACxpB,IAAT,CAAc;AAAEgqB,QAAI,EAAEH,MAAR;AAAgBI,MAAE,EAAEH,IAApB;AAA0BpH,WAAO,EAAEA,OAAnC;AAA4CqH,UAAM,EAAEA;AAApD,GAAd;AACD,CAFM;AAIA,IAAMG,SAAS,GAAG,SAAZA,SAAY,CAASL,MAAT,EAAiBC,IAAjB,EAAuBpH,OAAvB,EAAgCyH,WAAhC,EAA6C;AACpE5pB,gDAAM,CAACC,KAAP,CACE,yBAAyBqpB,MAAzB,GAAkC,MAAlC,GAA2CC,IAA3C,GAAkD,WAAlD,GAAgEpH,OAAhE,GAA0E,QAA1E,GAAqFyH,WADvF;AAGAX,UAAQ,CAACxpB,IAAT,CAAc;AAAEgqB,QAAI,EAAEH,MAAR;AAAgBI,MAAE,EAAEH,IAApB;AAA0BpH,WAAO,EAAEA,OAAnC;AAA4CljB,QAAI,EAAE2qB;AAAlD,GAAd;AACD,CALM;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAW;AACpC,SAAOZ,QAAP;AACD,CAFM;AAIA,IAAMa,SAAS,GAAG,SAAZA,SAAY,GAAW;AAClC,SAAOd,MAAP;AACD,CAFM;AAGA,IAAMe,QAAQ,GAAG,SAAXA,QAAW,CAASnrB,EAAT,EAAa;AACnC,SAAOoqB,MAAM,CAACpqB,EAAD,CAAb;AACD,CAFM;AAGA,IAAMorB,YAAY,GAAG,SAAfA,YAAe,GAAW;AACrC,SAAOnsB,MAAM,CAACC,IAAP,CAAYkrB,MAAZ,CAAP;AACD,CAFM;AAGA,IAAM9Q,QAAQ,GAAG,SAAXA,QAAW,GAAW;AACjC,SAAO7T,KAAP;AACD,CAFM;AAIA,IAAM7E,KAAK,GAAG,SAARA,KAAQ,GAAW;AAC9BwpB,QAAM,GAAG,EAAT;AACAC,UAAQ,GAAG,EAAX;AACD,CAHM;AAKA,IAAMgB,QAAQ,GAAG;AACtBC,OAAK,EAAE,CADe;AAEtBC,QAAM,EAAE,CAFc;AAGtBC,MAAI,EAAE,CAHgB;AAItBC,aAAW,EAAE,CAJS;AAKtBC,cAAY,EAAE,CALQ;AAMtBC,YAAU,EAAE,CANU;AAOtBC,aAAW,EAAE,CAPS;AAQtBC,YAAU,EAAE,EARU;AAStBC,UAAQ,EAAE,EATY;AAUtBC,WAAS,EAAE,EAVW;AAWtBC,UAAQ,EAAE,EAXY;AAYtBC,SAAO,EAAE,EAZa;AAatBC,WAAS,EAAE,EAbW;AActBC,SAAO,EAAE,EAda;AAetBC,cAAY,EAAE,EAfQ;AAgBtBC,YAAU,EAAE,EAhBU;AAiBtBC,WAAS,EAAE,EAjBW;AAkBtBC,SAAO,EAAE,EAlBa;AAmBtBC,SAAO,EAAE,EAnBa;AAoBtBC,YAAU,EAAE,EApBU;AAqBtBC,UAAQ,EAAE;AArBY,CAAjB;AAwBA,IAAMC,SAAS,GAAG;AACvBC,QAAM,EAAE,CADe;AAEvBC,MAAI,EAAE;AAFiB,CAAlB;AAKA,IAAMC,SAAS,GAAG;AACvBC,QAAM,EAAE,CADe;AAEvBC,SAAO,EAAE,CAFc;AAGvBC,MAAI,EAAE;AAHiB,CAAlB;AAMA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAASC,KAAT,EAAgBC,SAAhB,EAA2B7J,OAA3B,EAAoC;AACzD,MAAM8J,IAAI,GAAG;AAAEF,SAAK,EAAEA,KAAT;AAAgBC,aAAS,EAAEA,SAA3B;AAAsC7J,WAAO,EAAEA;AAA/C,GAAb,CADyD,CAGzD;;AACA,MAAM6G,MAAM,GAAG,GAAGxY,MAAH,CAAUub,KAAV,EAAiBA,KAAjB,CAAf;AAEA7C,OAAK,CAACzpB,IAAN,CAAWwsB,IAAX;AACAhD,UAAQ,CAACxpB,IAAT,CAAc;AACZgqB,QAAI,EAAET,MAAM,CAAC,CAAD,CADA;AAEZU,MAAE,EAAEV,MAAM,CAAC,CAAD,CAFE;AAGZ7G,WAAO,EAAEA,OAHG;AAIZljB,QAAI,EAAEgrB,QAAQ,CAACG,IAJH;AAKZ4B,aAAS,EAAEA;AALC,GAAd;AAOD,CAdM;AAgBA,IAAM/T,QAAQ,GAAG,SAAXA,QAAW,CAASiU,SAAT,EAAoB;AAC1C7nB,OAAK,GAAG6nB,SAAR;AACD,CAFM;AAIA,IAAMzb,KAAK,GAAG,SAARA,KAAQ,CAAS0b,KAAT,EAAgB;AACnC,MAAIA,KAAK,YAAYjrB,KAArB,EAA4B;AAC1BirB,SAAK,CAAC9qB,OAAN,CAAc,UAASgP,IAAT,EAAe;AAC3BI,WAAK,CAACJ,IAAD,CAAL;AACD,KAFD;AAGD,GAJD,MAIO;AACL,YAAQ8b,KAAK,CAACltB,IAAd;AACE,WAAK,UAAL;AACEkqB,gBAAQ,CAACgD,KAAK,CAACJ,KAAP,EAAcI,KAAK,CAACJ,KAApB,EAA2BI,KAAK,CAAC/P,WAAjC,CAAR;AACA;;AACF,WAAK,aAAL;AACEuN,iBAAS,CAACwC,KAAK,CAACJ,KAAP,EAActmB,SAAd,EAAyBA,SAAzB,EAAoC0mB,KAAK,CAACC,UAA1C,CAAT;AACA;;AACF,WAAK,WAAL;AACEzC,iBAAS,CAACwC,KAAK,CAACJ,KAAP,EAActmB,SAAd,EAAyBA,SAAzB,EAAoC0mB,KAAK,CAACC,UAA1C,CAAT;AACA;;AACF,WAAK,SAAL;AACEN,eAAO,CAACK,KAAK,CAACJ,KAAP,EAAcI,KAAK,CAACH,SAApB,EAA+BG,KAAK,CAACnkB,IAArC,CAAP;AACA;;AACF,WAAK,YAAL;AACE2hB,iBAAS,CAACwC,KAAK,CAAC1C,IAAP,EAAa0C,KAAK,CAACzC,EAAnB,EAAuByC,KAAK,CAAC7J,GAA7B,EAAkC6J,KAAK,CAACC,UAAxC,CAAT;AACA;;AACF,WAAK,WAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACE,QAA7B,EAAuCF,KAAK,CAACC,UAA7C,CAAT;AACA;;AACF,WAAK,SAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkC0mB,KAAK,CAACC,UAAxC,CAAT;AACA;;AACF,WAAK,WAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAAC1G,KAA7B,EAAoC0G,KAAK,CAACC,UAA1C,CAAT;AACA;;AACF,WAAK,SAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkC0mB,KAAK,CAACC,UAAxC,CAAT;AACA;;AACF,WAAK,UAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACG,OAA7B,EAAsCH,KAAK,CAACC,UAA5C,CAAT;AACA;;AACF,WAAK,QAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkC0mB,KAAK,CAACC,UAAxC,CAAT;AACA;;AACF,WAAK,UAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACI,OAA7B,EAAsCJ,KAAK,CAACC,UAA5C,CAAT;AACA;;AACF,WAAK,MAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACI,OAA7B,EAAsCJ,KAAK,CAACC,UAA5C,CAAT;AACA;;AACF,WAAK,QAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkC0mB,KAAK,CAACC,UAAxC,CAAT;AACA;;AACF,WAAK,UAAL;AACEnU,gBAAQ,CAACkU,KAAK,CAACnkB,IAAP,CAAR;AACA;;AACF,WAAK,UAAL;AACE2hB,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACK,OAA7B,EAAsCL,KAAK,CAACC,UAA5C,CAAT;AACA;;AACF,WAAK,KAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuB0mB,KAAK,CAACK,OAA7B,EAAsCL,KAAK,CAACC,UAA5C,CAAT;AACA;;AACF,WAAK,QAAL;AACEzC,iBAAS,CAAClkB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkC0mB,KAAK,CAACC,UAAxC,CAAT;AACA;AAtDJ;AAwDD;AACF,CA/DM;AAiEQ;AACbjD,UAAQ,EAARA,QADa;AAEbE,YAAU,EAAVA,UAFa;AAGbM,WAAS,EAATA,SAHa;AAIbE,aAAW,EAAXA,WAJa;AAKbC,WAAS,EAATA,SALa;AAMbC,UAAQ,EAARA,QANa;AAObC,cAAY,EAAZA,YAPa;AAQb9R,UAAQ,EAARA,QARa;AASb1Y,OAAK,EAALA,KATa;AAUbyqB,UAAQ,EAARA,QAVa;AAWbsB,WAAS,EAATA,SAXa;AAYbG,WAAS,EAATA,SAZa;AAabI,SAAO,EAAPA,OAba;AAcb7T,UAAQ,EAARA,QAda;AAebxH,OAAK,EAALA;AAfa,CAAf,E;;;;;;;;;;;;AC3KA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEAxL,8DAAM,CAACC,EAAP,GAAYunB,mDAAZ;AAEA,IAAMruB,IAAI,GAAG;AACXsuB,gBAAc,EAAE,EADL;AAEXC,gBAAc,EAAE,EAFL;AAGX;AACAC,aAAW,EAAE,EAJF;AAKX;AACAvkB,OAAK,EAAE,GANI;AAOX;AACAC,QAAM,EAAE,EARG;AASXukB,eAAa,EAAE,EATJ;AAUXC,iBAAe,EAAE,2BAVN;AAWX;AACAC,WAAS,EAAE,EAZA;AAaXC,eAAa,EAAE,CAbJ;AAcXC,YAAU,EAAE,EAdD;AAeX;AACAC,eAAa,EAAE,EAhBJ;AAiBX;AACAC,cAAY,EAAE,KAlBH;AAmBX;AACA;AACAC,iBAAe,EAAE,CArBN;AAuBX;AACAC,iBAAe,EAAE,EAxBN;AA0BX;AACAC,eAAa,EAAE,OA3BJ;AA6BXC,qBAAmB,EAAE;AA7BV,CAAb;AAgCO,IAAMtlB,MAAM,GAAG;AACpB+S,MAAI,EAAE;AACJwS,UAAM,EAAE/nB,SADJ;AAEJgoB,SAAK,EAAEhoB,SAFH;AAGJioB,UAAM,EAAEjoB,SAHJ;AAIJkoB,SAAK,EAAEloB;AAJH,GADc;AAOpBmoB,aAAW,EAAE,CAPO;AASpBC,eAAa,EAAE,EATK;AAUpBC,aAAW,EAAE,EAVO;AAWpBC,MAAI,EAAE,gBAAW;AACf,SAAKF,aAAL,GAAqB,EAArB;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAK9S,IAAL,GAAY;AACVwS,YAAM,EAAE/nB,SADE;AAEVgoB,WAAK,EAAEhoB,SAFG;AAGVioB,YAAM,EAAEjoB,SAHE;AAIVkoB,WAAK,EAAEloB;AAJG,KAAZ;AAMA,SAAKmoB,WAAL,GAAmB,CAAnB;AACD,GArBmB;AAsBpBI,WAAS,EAAE,mBAASlN,GAAT,EAAc1W,GAAd,EAAmB6jB,GAAnB,EAAwBjrB,GAAxB,EAA6B;AACtC,QAAI,OAAO8d,GAAG,CAAC1W,GAAD,CAAV,KAAoB,WAAxB,EAAqC;AACnC0W,SAAG,CAAC1W,GAAD,CAAH,GAAW6jB,GAAX;AACD,KAFD,MAEO;AACLnN,SAAG,CAAC1W,GAAD,CAAH,GAAWpH,GAAG,CAACirB,GAAD,EAAMnN,GAAG,CAAC1W,GAAD,CAAT,CAAd;AACD;AACF,GA5BmB;AA6BpB8jB,cAAY,EAAE,sBAASV,MAAT,EAAiBE,MAAjB,EAAyBD,KAAzB,EAAgCE,KAAhC,EAAuC;AACnD,QAAMQ,KAAK,GAAG,IAAd;;AACA,QAAIta,GAAG,GAAG,CAAV;;AACA,aAASua,QAAT,CAAkBnvB,IAAlB,EAAwB;AACtB,aAAO,SAASovB,gBAAT,CAA0Bhe,IAA1B,EAAgC;AACrCwD,WAAG,GADkC,CAErC;;AACA,YAAMya,CAAC,GAAGH,KAAK,CAACN,aAAN,CAAoB7vB,MAApB,GAA6B6V,GAA7B,GAAmC,CAA7C;;AAEAsa,aAAK,CAACH,SAAN,CAAgB3d,IAAhB,EAAsB,QAAtB,EAAgCqd,MAAM,GAAGY,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAlD,EAA6D7f,IAAI,CAACkb,GAAlE;;AACA+F,aAAK,CAACH,SAAN,CAAgB3d,IAAhB,EAAsB,OAAtB,EAA+Bsd,KAAK,GAAGW,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAhD,EAA2D7f,IAAI,CAACqhB,GAAhE;;AAEAJ,aAAK,CAACH,SAAN,CAAgB/lB,MAAM,CAAC+S,IAAvB,EAA6B,QAA7B,EAAuCwS,MAAM,GAAGc,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAzD,EAAoE7f,IAAI,CAACkb,GAAzE;;AACA+F,aAAK,CAACH,SAAN,CAAgB/lB,MAAM,CAAC+S,IAAvB,EAA6B,OAA7B,EAAsCyS,KAAK,GAAGa,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAvD,EAAkE7f,IAAI,CAACqhB,GAAvE;;AAEA,YAAI,EAAEtvB,IAAI,KAAK,YAAX,CAAJ,EAA8B;AAC5BkvB,eAAK,CAACH,SAAN,CAAgB3d,IAAhB,EAAsB,QAAtB,EAAgCmd,MAAM,GAAGc,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAlD,EAA6D7f,IAAI,CAACkb,GAAlE;;AACA+F,eAAK,CAACH,SAAN,CAAgB3d,IAAhB,EAAsB,OAAtB,EAA+Bod,KAAK,GAAGa,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAhD,EAA2D7f,IAAI,CAACqhB,GAAhE;;AAEAJ,eAAK,CAACH,SAAN,CAAgB/lB,MAAM,CAAC+S,IAAvB,EAA6B,QAA7B,EAAuC0S,MAAM,GAAGY,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAzD,EAAoE7f,IAAI,CAACkb,GAAzE;;AACA+F,eAAK,CAACH,SAAN,CAAgB/lB,MAAM,CAAC+S,IAAvB,EAA6B,OAA7B,EAAsC2S,KAAK,GAAGW,CAAC,GAAGlwB,IAAI,CAAC2uB,SAAvD,EAAkE7f,IAAI,CAACqhB,GAAvE;AACD;AACF,OAlBD;AAmBD;;AAED,SAAKV,aAAL,CAAmBxsB,OAAnB,CAA2B+sB,QAAQ,EAAnC;AACA,SAAKN,WAAL,CAAiBzsB,OAAjB,CAAyB+sB,QAAQ,CAAC,YAAD,CAAjC;AACD,GAxDmB;AAyDpBhmB,QAAM,EAAE,gBAASolB,MAAT,EAAiBE,MAAjB,EAAyBD,KAAzB,EAAgCE,KAAhC,EAAuC;AAC7C,QAAMa,OAAO,GAAGthB,IAAI,CAACkb,GAAL,CAASoF,MAAT,EAAiBC,KAAjB,CAAhB;;AACA,QAAMgB,MAAM,GAAGvhB,IAAI,CAACqhB,GAAL,CAASf,MAAT,EAAiBC,KAAjB,CAAf;;AACA,QAAMiB,OAAO,GAAGxhB,IAAI,CAACkb,GAAL,CAASsF,MAAT,EAAiBC,KAAjB,CAAhB;;AACA,QAAMgB,MAAM,GAAGzhB,IAAI,CAACqhB,GAAL,CAASb,MAAT,EAAiBC,KAAjB,CAAf;;AAEA,SAAKK,SAAL,CAAe/lB,MAAM,CAAC+S,IAAtB,EAA4B,QAA5B,EAAsCwT,OAAtC,EAA+CthB,IAAI,CAACkb,GAApD;AACA,SAAK4F,SAAL,CAAe/lB,MAAM,CAAC+S,IAAtB,EAA4B,QAA5B,EAAsC0T,OAAtC,EAA+CxhB,IAAI,CAACkb,GAApD;AACA,SAAK4F,SAAL,CAAe/lB,MAAM,CAAC+S,IAAtB,EAA4B,OAA5B,EAAqCyT,MAArC,EAA6CvhB,IAAI,CAACqhB,GAAlD;AACA,SAAKP,SAAL,CAAe/lB,MAAM,CAAC+S,IAAtB,EAA4B,OAA5B,EAAqC2T,MAArC,EAA6CzhB,IAAI,CAACqhB,GAAlD;AAEA,SAAKL,YAAL,CAAkBM,OAAlB,EAA2BE,OAA3B,EAAoCD,MAApC,EAA4CE,MAA5C;AACD,GArEmB;AAsEpBC,eAAa,EAAE,uBAASzM,OAAT,EAAkB5X,OAAlB,EAA2B;AACxC,QAAMskB,SAAS,GAAG5pB,8DAAM,CAACC,EAAP,CAAU4kB,SAAV,GAAsB3H,OAAO,CAACsH,IAAR,CAAasC,KAAnC,CAAlB;AACA,QAAM+C,WAAW,GAAGC,gBAAgB,CAAC5M,OAAO,CAACsH,IAAR,CAAasC,KAAd,CAAhB,CAAqC/tB,MAAzD;AACA,QAAMuI,CAAC,GAAGsoB,SAAS,CAACtoB,CAAV,GAAcnI,IAAI,CAACiK,KAAL,GAAa,CAA3B,GAAgC,CAACymB,WAAW,GAAG,CAAf,IAAoB1wB,IAAI,CAACivB,eAA1B,GAA6C,CAAtF;AACA,SAAKS,WAAL,CAAiBruB,IAAjB,CAAsB;AACpB+tB,YAAM,EAAEjnB,CADY;AAEpBmnB,YAAM,EAAE,KAAKE,WAAL,GAAmB,CAFP;AAGpBH,WAAK,EAAElnB,CAAC,GAAGnI,IAAI,CAACivB,eAHI;AAIpBM,WAAK,EAAEloB,SAJa;AAKpBsmB,WAAK,EAAE5J,OAAO,CAACsH,IAAR,CAAasC,KALA;AAMpBiD,cAAQ,EAAEC,gDAAO,CAACC,aAAR,CAAsB3kB,OAAtB;AANU,KAAtB;AAQD,GAlFmB;AAmFpB4kB,eAAa,EAAE,uBAAShN,OAAT,EAAkB;AAC/B;AACA,QAAMiN,sBAAsB,GAAG,KAAKtB,WAAL,CAC5BtgB,GAD4B,CACxB,UAAS6hB,UAAT,EAAqB;AACxB,aAAOA,UAAU,CAACtD,KAAlB;AACD,KAH4B,EAI5BuD,WAJ4B,CAIhBnN,OAAO,CAACsH,IAAR,CAAasC,KAJG,CAA/B;AAKA,QAAMsD,UAAU,GAAG,KAAKvB,WAAL,CAAiB1K,MAAjB,CAAwBgM,sBAAxB,EAAgD,CAAhD,EAAmD,CAAnD,CAAnB;AACA,WAAOC,UAAP;AACD,GA5FmB;AA6FpBE,SAAO,EAAE,iBAASlrB,KAAT,EAAgBmrB,IAAhB,EAAsB;AAC7B,SAAK3B,aAAL,CAAmBpuB,IAAnB,CAAwB;AACtB+tB,YAAM,EAAE/nB,SADc;AAEtBioB,YAAM,EAAE,KAAKE,WAFS;AAGtBH,WAAK,EAAEhoB,SAHe;AAItBkoB,WAAK,EAAEloB,SAJe;AAKtBpB,WAAK,EAAEA,KALe;AAMtBmrB,UAAI,EAAEA;AANgB,KAAxB;AAQD,GAtGmB;AAuGpBC,SAAO,EAAE,mBAAW;AAClB,QAAMC,IAAI,GAAG,KAAK7B,aAAL,CAAmB8B,GAAnB,EAAb;AACA,WAAOD,IAAP;AACD,GA1GmB;AA2GpBE,kBAAgB,EAAE,0BAASzN,OAAT,EAAkB;AAClC,QAAMuN,IAAI,GAAG,KAAK7B,aAAL,CAAmB8B,GAAnB,EAAb;AACAD,QAAI,CAAC3Y,QAAL,GAAgB2Y,IAAI,CAAC3Y,QAAL,IAAiB,EAAjC;AACA2Y,QAAI,CAACG,aAAL,GAAqBH,IAAI,CAACG,aAAL,IAAsB,EAA3C;AACAH,QAAI,CAAC3Y,QAAL,CAActX,IAAd,CAAmBwI,MAAM,CAAC6nB,cAAP,EAAnB;AACAJ,QAAI,CAACG,aAAL,CAAmBpwB,IAAnB,CAAwB0iB,OAAxB;AACA,SAAK0L,aAAL,CAAmBpuB,IAAnB,CAAwBiwB,IAAxB;AACD,GAlHmB;AAmHpBK,iBAAe,EAAE,yBAASC,IAAT,EAAe;AAC9B,SAAKpC,WAAL,GAAmB,KAAKA,WAAL,GAAmBoC,IAAtC;AACA,SAAKhV,IAAL,CAAU2S,KAAV,GAAkB,KAAKC,WAAvB;AACD,GAtHmB;AAuHpBkC,gBAAc,EAAE,0BAAW;AACzB,WAAO,KAAKlC,WAAZ;AACD,GAzHmB;AA0HpBqC,WAAS,EAAE,qBAAW;AACpB,WAAO,KAAKjV,IAAZ;AACD;AA5HmB,CAAf;;AA+HP,IAAMkV,aAAa,GAAG,SAAhBA,aAAgB,CAACloB,IAAD,EAAOzB,CAAP,EAAUH,CAAV,EAAa2B,CAAb,EAAgBM,KAAhB,EAA0B;AAC9C,MAAI9C,UAAU,GAAG,CAAjB;AACA,MAAM4qB,KAAK,GAAGnoB,IAAI,CAAChJ,KAAL,CAAW,cAAX,CAAd;AAF8C;AAAA;AAAA;;AAAA;AAG9C,yBAAmBmxB,KAAnB,8HAA0B;AAAA,UAAf1M,IAAe;AACxB,UAAM2M,OAAO,GAAGnB,gDAAO,CAACoB,UAAR,EAAhB;AACAD,aAAO,CAAC7pB,CAAR,GAAYA,CAAZ;AACA6pB,aAAO,CAAChqB,CAAR,GAAYA,CAAC,GAAGb,UAAhB;AACA6qB,aAAO,CAACE,UAAR,GAAqBlyB,IAAI,CAAC6uB,UAA1B;AACAmD,aAAO,CAACG,EAAR,GAAa,KAAb;AACAH,aAAO,CAACpoB,IAAR,GAAeyb,IAAf;AACA2M,aAAO,CAACzc,KAAR,GAAgB,UAAhB;AACA,UAAM6c,QAAQ,GAAGvB,gDAAO,CAACwB,QAAR,CAAiB1oB,CAAjB,EAAoBqoB,OAApB,EAA6B/nB,KAA7B,CAAjB;AACA9C,gBAAU,IAAI,CAACirB,QAAQ,CAAC7sB,OAAT,IAAoB6sB,QAArB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCroB,OAArC,GAA+CG,MAA7D;AACD;AAb6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAc9C,SAAO/C,UAAP;AACD,CAfD;AAiBA;;;;;;;;AAMA,IAAMmrB,QAAQ,GAAG,SAAXA,QAAW,CAASjuB,IAAT,EAAe+qB,MAAf,EAAuBI,WAAvB,EAAoCtL,GAApC,EAAyCqO,UAAzC,EAAqD;AACpE,MAAMrsB,IAAI,GAAG2qB,gDAAO,CAAC2B,WAAR,EAAb;AACAtsB,MAAI,CAACiC,CAAL,GAASinB,MAAT;AACAlpB,MAAI,CAAC8B,CAAL,GAASwnB,WAAT;AACAtpB,MAAI,CAAC+D,KAAL,GAAasoB,UAAU,IAAIvyB,IAAI,CAACiK,KAAhC;AACA/D,MAAI,CAACqP,KAAL,GAAa,MAAb;AAEA,MAAI5L,CAAC,GAAGtF,IAAI,CAACmB,MAAL,CAAY,GAAZ,CAAR;AACA,MAAMitB,QAAQ,GAAG5B,gDAAO,CAAC6B,QAAR,CAAiB/oB,CAAjB,EAAoBzD,IAApB,CAAjB;;AAEA,MAAMiB,UAAU,GAAG2qB,aAAa,CAC9B5N,GAAG,CAACH,OAD0B,EAE9BqL,MAAM,GAAG,CAFqB,EAG9BI,WAAW,GAAG,EAHgB,EAI9B7lB,CAJ8B,EAK9BzD,IAAI,CAAC+D,KAAL,GAAajK,IAAI,CAAC6uB,UALY,CAAhC;;AAQAhlB,QAAM,CAACG,MAAP,CACEolB,MADF,EAEEI,WAFF,EAGEJ,MAAM,GAAGlpB,IAAI,CAAC+D,KAHhB,EAIEulB,WAAW,GAAG,IAAIxvB,IAAI,CAAC6uB,UAAvB,GAAoC1nB,UAJtC;AAMAsrB,UAAQ,CAAChtB,IAAT,CAAc,QAAd,EAAwB0B,UAAU,GAAG,IAAInH,IAAI,CAAC6uB,UAA9C;AACAhlB,QAAM,CAAC8nB,eAAP,CAAuBxqB,UAAU,GAAG,IAAInH,IAAI,CAAC6uB,UAA7C;AACD,CA1BD;AA4BA;;;;;;;;;;;AASA,IAAM8D,WAAW,GAAG,SAAdA,WAAc,CAAStuB,IAAT,EAAe+qB,MAAf,EAAuBC,KAAvB,EAA8BG,WAA9B,EAA2CtL,GAA3C,EAAgD0O,aAAhD,EAA+D;AACjF,MAAMjpB,CAAC,GAAGtF,IAAI,CAACmB,MAAL,CAAY,GAAZ,CAAV;AACA,MAAMqtB,SAAS,GAAGzD,MAAM,GAAG,CAACC,KAAK,GAAGD,MAAT,IAAmB,CAA9C;AAEA,MAAIgD,QAAJ;AACA,MAAIU,iBAAiB,GAAG,CAAxB;AACA,MAAIC,eAAe,GAAG,EAAtB;AACA,MAAMC,UAAU,GAAG9O,GAAG,CAACH,OAAJ,CAAYnjB,KAAZ,CAAkB,cAAlB,CAAnB;AAPiF;AAAA;AAAA;;AAAA;AAQjF,0BAAwBoyB,UAAxB,mIAAoC;AAAA,UAAzBC,SAAyB;AAClCb,cAAQ,GAAGzoB,CAAC,CACTnE,MADQ,CACD,MADC,EACO;AADP,OAERC,IAFQ,CAEH,GAFG,EAEEotB,SAFF,EAGRptB,IAHQ,CAGH,GAHG,EAGE+pB,WAAW,GAAG,CAAd,GAAkBsD,iBAAiB,GAAGC,eAHxC,EAIRrtB,KAJQ,CAIF,aAJE,EAIa,QAJb,EAKRD,IALQ,CAKH,OALG,EAKM,aALN,EAMRmE,IANQ,CAMHqpB,SAAS,CAACxwB,IAAV,EANG,CAAX;AAOAqwB,uBAAiB;AAClB;AAjBgF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBjF,MAAMI,iBAAiB,GAAGJ,iBAAiB,GAAG,CAA9C;AACA,MAAMK,WAAW,GAAGD,iBAAiB,GAAGH,eAAxC;AAEA,MAAIlR,SAAS,GAAG,CAACuQ,QAAQ,CAAC7sB,OAAT,IAAoB6sB,QAArB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCroB,OAArC,GAA+CE,KAA/D;AAEA,MAAIob,IAAJ;;AACA,MAAI+J,MAAM,KAAKC,KAAf,EAAsB;AACpB,QAAIrvB,IAAI,CAACozB,WAAT,EAAsB;AACpB/N,UAAI,GAAG1b,CAAC,CACLnE,MADI,CACG,MADH,EAEJC,IAFI,CAGH,GAHG,eAIG2pB,MAJH,cAIaI,WAAW,GAAG2D,WAJ3B,gBAI4C/D,MAAM,GAAGpvB,IAAI,CAACiK,KAAL,GAAa,CAJlE,gBAIyEulB,WAAW,GACrF,EAD0E,GAE1E2D,WANC,gBAMgB/D,MANhB,EAAP;AAQD,KATD,MASO;AACL/J,UAAI,GAAG1b,CAAC,CACLnE,MADI,CACG,MADH,EAEJC,IAFI,CAGH,GAHG,EAIH,OACE2pB,MADF,GAEE,GAFF,IAGGI,WAAW,GAAG2D,WAHjB,IAIE,KAJF,IAKG/D,MAAM,GAAG,EALZ,IAME,GANF,IAOGI,WAAW,GAAG,EAAd,GAAmB2D,WAPtB,IAQE,GARF,IASG/D,MAAM,GAAG,EATZ,IAUE,GAVF,IAWGI,WAAW,GAAG,EAAd,GAAmB2D,WAXtB,IAYE,GAZF,GAaE/D,MAbF,GAcE,GAdF,IAeGI,WAAW,GAAG,EAAd,GAAmB2D,WAftB,CAJG,CAAP;AAqBD;;AAEDtpB,UAAM,CAAC8nB,eAAP,CAAuB,KAAKwB,WAA5B;AACA,QAAME,EAAE,GAAGvkB,IAAI,CAACqhB,GAAL,CAAStO,SAAS,GAAG,CAArB,EAAwB,GAAxB,CAAX;AACAhY,UAAM,CAACG,MAAP,CACEolB,MAAM,GAAGiE,EADX,EAEExpB,MAAM,CAAC6nB,cAAP,KAA0B,EAA1B,GAA+ByB,WAFjC,EAGE9D,KAAK,GAAGgE,EAHV,EAIExpB,MAAM,CAAC6nB,cAAP,KAA0ByB,WAJ5B;AAMD,GA1CD,MA0CO;AACL9N,QAAI,GAAG1b,CAAC,CAACnE,MAAF,CAAS,MAAT,CAAP;AACA6f,QAAI,CAAC5f,IAAL,CAAU,IAAV,EAAgB2pB,MAAhB;AACA/J,QAAI,CAAC5f,IAAL,CAAU,IAAV,EAAgB+pB,WAAhB;AACAnK,QAAI,CAAC5f,IAAL,CAAU,IAAV,EAAgB4pB,KAAhB;AACAhK,QAAI,CAAC5f,IAAL,CAAU,IAAV,EAAgB+pB,WAAhB;AACA3lB,UAAM,CAACG,MAAP,CACEolB,MADF,EAEEvlB,MAAM,CAAC6nB,cAAP,KAA0B,EAA1B,GAA+ByB,WAFjC,EAGE9D,KAHF,EAIExlB,MAAM,CAAC6nB,cAAP,KAA0ByB,WAJ5B;AAMD,GA9EgF,CA+EjF;AACA;;;AACA,MACEjP,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBE,MAAhC,IACA7H,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBK,YADhC,IAEAhI,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBO,WAHlC,EAIE;AACA/G,QAAI,CAAC3f,KAAL,CAAW,kBAAX,EAA+B,MAA/B;AACA2f,QAAI,CAAC5f,IAAL,CAAU,OAAV,EAAmB,cAAnB;AACD,GAPD,MAOO;AACL4f,QAAI,CAAC5f,IAAL,CAAU,OAAV,EAAmB,cAAnB;AACD;;AAED,MAAI8C,GAAG,GAAG,EAAV;;AACA,MAAIvI,IAAI,CAACwI,mBAAT,EAA8B;AAC5BD,OAAG,GACD9D,MAAM,CAACgE,QAAP,CAAgBC,QAAhB,GACA,IADA,GAEAjE,MAAM,CAACgE,QAAP,CAAgBE,IAFhB,GAGAlE,MAAM,CAACgE,QAAP,CAAgBG,QAHhB,GAIAnE,MAAM,CAACgE,QAAP,CAAgBI,MALlB;AAMAN,OAAG,GAAGA,GAAG,CAACO,OAAJ,CAAY,KAAZ,EAAmB,KAAnB,CAAN;AACAP,OAAG,GAAGA,GAAG,CAACO,OAAJ,CAAY,KAAZ,EAAmB,KAAnB,CAAN;AACD;;AAEDuc,MAAI,CAAC5f,IAAL,CAAU,cAAV,EAA0B,CAA1B;AACA4f,MAAI,CAAC5f,IAAL,CAAU,QAAV,EAAoB,OAApB;AACA4f,MAAI,CAAC3f,KAAL,CAAW,MAAX,EAAmB,MAAnB,EA1GiF,CA0GrD;;AAC5B,MAAIwe,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBC,KAAhC,IAAyC5H,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBE,MAA7E,EAAqF;AACnF1G,QAAI,CAAC5f,IAAL,CAAU,YAAV,EAAwB,SAAS8C,GAAT,GAAe,aAAvC;AACD;;AAED,MAAI2b,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBI,WAAhC,IAA+C/H,GAAG,CAACrjB,IAAJ,KAAagG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBK,YAAnF,EAAiG;AAC/F7G,QAAI,CAAC5f,IAAL,CAAU,YAAV,EAAwB,SAAS8C,GAAT,GAAe,aAAvC;AACD,GAjHgF,CAmHjF;;;AACA,MAAIvI,IAAI,CAACmvB,mBAAT,EAA8B;AAC5B9J,QAAI,CAAC5f,IAAL,CAAU,cAAV,EAA0B,SAAS8C,GAAT,GAAe,kBAAzC;AACAoB,KAAC,CAACnE,MAAF,CAAS,MAAT,EACGC,IADH,CACQ,GADR,EACa2pB,MADb,EAEG3pB,IAFH,CAEQ,GAFR,EAEa+pB,WAAW,GAAG,CAF3B,EAGG/pB,IAHH,CAGQ,aAHR,EAGuB,YAHvB,EAIGA,IAJH,CAIQ,WAJR,EAIqB,MAJrB,EAKGA,IALH,CAKQ,aALR,EAKuB,QALvB,EAMGA,IANH,CAMQ,YANR,EAMsB,MANtB,EAOGA,IAPH,CAOQ,OAPR,EAOiB,gBAPjB,EAQGmE,IARH,CAQQgpB,aARR;AASD;AACF,CAhID;;AAkIO,IAAMU,UAAU,GAAG,SAAbA,UAAa,CAASnnB,OAAT,EAAkBye,MAAlB,EAA0B2I,SAA1B,EAAqC/D,WAArC,EAAkD;AAC1E;AACA,OAAK,IAAI7vB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4zB,SAAS,CAAC3zB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,QAAMqM,GAAG,GAAGunB,SAAS,CAAC5zB,CAAD,CAArB,CADyC,CAGzC;;AACAirB,UAAM,CAAC5e,GAAD,CAAN,CAAY7D,CAAZ,GAAgBxI,CAAC,GAAGK,IAAI,CAACwuB,WAAT,GAAuB7uB,CAAC,GAAGK,IAAI,CAACiK,KAAhD;AACA2gB,UAAM,CAAC5e,GAAD,CAAN,CAAYhE,CAAZ,GAAgBwnB,WAAhB;AACA5E,UAAM,CAAC5e,GAAD,CAAN,CAAY/B,KAAZ,GAAoBjK,IAAI,CAACsuB,cAAzB;AACA1D,UAAM,CAAC5e,GAAD,CAAN,CAAY9B,MAAZ,GAAqBlK,IAAI,CAACuuB,cAA1B,CAPyC,CASzC;;AACAsC,oDAAO,CAAC2C,SAAR,CAAkBrnB,OAAlB,EAA2Bye,MAAM,CAAC5e,GAAD,CAAN,CAAY7D,CAAvC,EAA0CqnB,WAA1C,EAAuD5E,MAAM,CAAC5e,GAAD,CAAN,CAAYgS,WAAnE,EAAgFhe,IAAhF;AACA6J,UAAM,CAACG,MAAP,CAAc4gB,MAAM,CAAC5e,GAAD,CAAN,CAAY7D,CAA1B,EAA6BqnB,WAA7B,EAA0C5E,MAAM,CAAC5e,GAAD,CAAN,CAAY7D,CAAZ,GAAgBnI,IAAI,CAACiK,KAA/D,EAAsEjK,IAAI,CAACkK,MAA3E;AACD,GAdyE,CAgB1E;;;AACAL,QAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAACkK,MAA5B;AACD,CAlBM;AAoBA,IAAM5K,OAAO,GAAG,SAAVA,OAAU,CAASC,GAAT,EAAc;AACnC,MAAMG,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYH,GAAZ,CAAb;AAEAG,MAAI,CAACuD,OAAL,CAAa,UAAS+I,GAAT,EAAc;AACzBhM,QAAI,CAACgM,GAAD,CAAJ,GAAYzM,GAAG,CAACyM,GAAD,CAAf;AACD,GAFD;AAGAhM,MAAI,CAAC0uB,eAAL,GAAuBnvB,GAAG,CAACmgB,UAA3B;AACD,CAPM;;AASP,IAAMiR,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAShD,KAAT,EAAgB;AACvC,SAAO9jB,MAAM,CAAC6lB,WAAP,CAAmB9nB,MAAnB,CAA0B,UAASqpB,UAAT,EAAqB;AACpD,WAAOA,UAAU,CAACtD,KAAX,KAAqBA,KAA5B;AACD,GAFM,CAAP;AAGD,CAJD;;AAMA,IAAM8F,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAS9F,KAAT,EAAgB;AAC7C;AACA,MAAM/C,MAAM,GAAG/jB,8DAAM,CAACC,EAAP,CAAU4kB,SAAV,EAAf;AACA,MAAMgE,WAAW,GAAGiB,gBAAgB,CAAChD,KAAD,CAApC;AAEA,MAAMpnB,IAAI,GAAGmpB,WAAW,CAACgE,MAAZ,CAAmB,UAASC,GAAT,EAAc1C,UAAd,EAA0B;AACxD,WAAOniB,IAAI,CAACkb,GAAL,CAAS2J,GAAT,EAAc1C,UAAU,CAAC7B,MAAzB,CAAP;AACD,GAFY,EAEVxE,MAAM,CAAC+C,KAAD,CAAN,CAAcxlB,CAAd,GAAkBnI,IAAI,CAACiK,KAAL,GAAa,CAFrB,CAAb;AAGA,MAAMzD,KAAK,GAAGkpB,WAAW,CAACgE,MAAZ,CAAmB,UAASC,GAAT,EAAc1C,UAAd,EAA0B;AACzD,WAAOniB,IAAI,CAACqhB,GAAL,CAASwD,GAAT,EAAc1C,UAAU,CAAC5B,KAAzB,CAAP;AACD,GAFa,EAEXzE,MAAM,CAAC+C,KAAD,CAAN,CAAcxlB,CAAd,GAAkBnI,IAAI,CAACiK,KAAL,GAAa,CAFpB,CAAd;AAGA,SAAO,CAAC1D,IAAD,EAAOC,KAAP,CAAP;AACD,CAZD;AAcA;;;;;;;AAKO,IAAMyF,IAAI,GAAG,SAAPA,IAAO,CAASrC,IAAT,EAAepJ,EAAf,EAAmB;AACrCqG,gEAAM,CAACC,EAAP,CAAU1F,KAAV;AACAyF,gEAAM,CAACqF,KAAP,CAAatC,IAAI,GAAG,IAApB;AAEAC,QAAM,CAAC8lB,IAAP;AACA,MAAMxjB,OAAO,GAAG7G,yCAAA,iBAAkB9E,EAAlB,SAAhB;AAEA,MAAI4uB,MAAJ;AACA,MAAIC,KAAJ;AACA,MAAIkD,UAAJ,CATqC,CAWrC;;AACA,MAAM3H,MAAM,GAAG/jB,8DAAM,CAACC,EAAP,CAAU4kB,SAAV,EAAf;AACA,MAAM6H,SAAS,GAAG1sB,8DAAM,CAACC,EAAP,CAAU8kB,YAAV,EAAlB;AACA,MAAMf,QAAQ,GAAGhkB,8DAAM,CAACC,EAAP,CAAU2kB,WAAV,EAAjB;AACA,MAAMxlB,KAAK,GAAGY,8DAAM,CAACC,EAAP,CAAUgT,QAAV,EAAd;AACAwZ,YAAU,CAACnnB,OAAD,EAAUye,MAAV,EAAkB2I,SAAlB,EAA6B,CAA7B,CAAV,CAhBqC,CAkBrC;;AACA1C,kDAAO,CAAC+C,eAAR,CAAwBznB,OAAxB;AACA0kB,kDAAO,CAACgD,oBAAR,CAA6B1nB,OAA7B;AACA0kB,kDAAO,CAACiD,oBAAR,CAA6B3nB,OAA7B;;AAEA,WAAS4nB,SAAT,CAAmB7P,GAAnB,EAAwBsL,WAAxB,EAAqC;AACnC,QAAMwE,cAAc,GAAGnqB,MAAM,CAACknB,aAAP,CAAqB7M,GAArB,CAAvB;;AACA,QAAI8P,cAAc,CAAC1E,MAAf,GAAwB,EAAxB,GAA6BE,WAAjC,EAA8C;AAC5CwE,oBAAc,CAAC1E,MAAf,GAAwBE,WAAW,GAAG,CAAtC;AACAA,iBAAW,IAAI,EAAf;AACD;;AACDqB,oDAAO,CAACoD,cAAR,CACE9nB,OADF,EAEE6nB,cAFF,EAGExE,WAHF,EAIExvB,IAJF,EAKE2wB,gBAAgB,CAACzM,GAAG,CAACmH,IAAJ,CAASsC,KAAV,CAAhB,CAAiC/tB,MALnC;AAQAiK,UAAM,CAACG,MAAP,CAAcgqB,cAAc,CAAC5E,MAA7B,EAAqCI,WAAW,GAAG,EAAnD,EAAuDwE,cAAc,CAAC3E,KAAtE,EAA6EG,WAA7E;AACD,GAtCoC,CAwCrC;AAEA;;;AACA,MAAIoD,aAAa,GAAG,CAApB;AACA/H,UAAQ,CAAC5nB,OAAT,CAAiB,UAASihB,GAAT,EAAc;AAC7B,QAAIgQ,QAAJ;;AACA,YAAQhQ,GAAG,CAACrjB,IAAZ;AACE,WAAKgG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBG,IAAxB;AACEniB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AAEAS,cAAM,GAAGxE,MAAM,CAAC1G,GAAG,CAACmH,IAAL,CAAN,CAAiBljB,CAA1B;AACAknB,aAAK,GAAGzE,MAAM,CAAC1G,GAAG,CAACoH,EAAL,CAAN,CAAenjB,CAAvB;;AAEA,YAAI+b,GAAG,CAAC0J,SAAJ,KAAkB/mB,8DAAM,CAACC,EAAP,CAAUwmB,SAAV,CAAoBE,OAA1C,EAAmD;AACjD8E,kBAAQ,CACNnmB,OADM,EAENijB,MAAM,GAAG,CAACpvB,IAAI,CAACiK,KAAL,GAAajK,IAAI,CAACwuB,WAAnB,IAAkC,CAFrC,EAGN3kB,MAAM,CAAC6nB,cAAP,EAHM,EAINxN,GAJM,CAAR;AAMD,SAPD,MAOO,IAAIA,GAAG,CAAC0J,SAAJ,KAAkB/mB,8DAAM,CAACC,EAAP,CAAUwmB,SAAV,CAAoBC,MAA1C,EAAkD;AACvD+E,kBAAQ,CACNnmB,OADM,EAENijB,MAAM,GAAG,CAACpvB,IAAI,CAACiK,KAAL,GAAajK,IAAI,CAACwuB,WAAnB,IAAkC,CAFrC,EAGN3kB,MAAM,CAAC6nB,cAAP,EAHM,EAINxN,GAJM,CAAR;AAMD,SAPM,MAOA,IAAIA,GAAG,CAACoH,EAAJ,KAAWpH,GAAG,CAACmH,IAAnB,EAAyB;AAC9B;AACAiH,kBAAQ,CAACnmB,OAAD,EAAUijB,MAAV,EAAkBvlB,MAAM,CAAC6nB,cAAP,EAAlB,EAA2CxN,GAA3C,CAAR;AACD,SAHM,MAGA;AACL;AACAqO,oBAAU,GAAGzjB,IAAI,CAACC,GAAL,CAASqgB,MAAM,GAAGC,KAAlB,IAA2BrvB,IAAI,CAACwuB,WAA7C;AACA8D,kBAAQ,CACNnmB,OADM,EAEN,CAACijB,MAAM,GAAGC,KAAT,GAAiBrvB,IAAI,CAACiK,KAAtB,GAA8BsoB,UAA/B,IAA6C,CAFvC,EAGN1oB,MAAM,CAAC6nB,cAAP,EAHM,EAINxN,GAJM,EAKNqO,UALM,CAAR;AAOD;;AACD;;AACF,WAAK1rB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBe,YAAxB;AACE/iB,cAAM,CAAC2mB,aAAP,CAAqBtM,GAArB,EAA0B/X,OAA1B;AACA;;AACF,WAAKtF,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBgB,UAAxB;AACEkH,iBAAS,CAAC7P,GAAD,EAAMra,MAAM,CAAC6nB,cAAP,EAAN,CAAT;AACA;;AACF,WAAK7qB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBQ,UAAxB;AACExiB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA9kB,cAAM,CAACsnB,OAAP,CAAejN,GAAG,CAACH,OAAnB;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAAL,GAAiB3uB,IAAI,CAAC4uB,aAA7C;AACA;;AACF,WAAK/nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBS,QAAxB;AACE4H,gBAAQ,GAAGrqB,MAAM,CAACwnB,OAAP,EAAX;AAEAR,wDAAO,CAACsD,QAAR,CAAiBhoB,OAAjB,EAA0B+nB,QAA1B,EAAoC,MAApC,EAA4Cl0B,IAA5C;AACA6J,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBoB,UAAxB;AACEpjB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA9kB,cAAM,CAACsnB,OAAP,CAAe9pB,SAAf,EAA0B6c,GAAG,CAACH,OAA9B;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBqB,QAAxB;AAAkC;AAChC,cAAMkH,QAAQ,GAAGvqB,MAAM,CAACwnB,OAAP,EAAjB;AACAR,0DAAO,CAACwD,kBAAR,CAA2BloB,OAA3B,EAAoCioB,QAApC;AACAvqB,gBAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;AACD;;AACD,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBa,SAAxB;AACE7iB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA9kB,cAAM,CAACsnB,OAAP,CAAejN,GAAG,CAACH,OAAnB;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAAL,GAAiB3uB,IAAI,CAAC4uB,aAA7C;AACA;;AACF,WAAK/nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBc,OAAxB;AACEuH,gBAAQ,GAAGrqB,MAAM,CAACwnB,OAAP,EAAX;AAEAR,wDAAO,CAACsD,QAAR,CAAiBhoB,OAAjB,EAA0B+nB,QAA1B,EAAoC,KAApC,EAA2Cl0B,IAA3C;AACA6J,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBU,SAAxB;AACE1iB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA9kB,cAAM,CAACsnB,OAAP,CAAejN,GAAG,CAACH,OAAnB;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAAL,GAAiB3uB,IAAI,CAAC4uB,aAA7C;AACA;;AACF,WAAK/nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBW,QAAxB;AACE3iB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACAuF,gBAAQ,GAAGrqB,MAAM,CAAC2nB,gBAAP,CAAwBtN,GAAG,CAACH,OAA5B,CAAX;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBY,OAAxB;AACEyH,gBAAQ,GAAGrqB,MAAM,CAACwnB,OAAP,EAAX;AAEAR,wDAAO,CAACsD,QAAR,CAAiBhoB,OAAjB,EAA0B+nB,QAA1B,EAAoC,KAApC,EAA2Cl0B,IAA3C;AACA6J,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBiB,SAAxB;AACEjjB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA9kB,cAAM,CAACsnB,OAAP,CAAejN,GAAG,CAACH,OAAnB;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAAL,GAAiB3uB,IAAI,CAAC4uB,aAA7C;AACA;;AACF,WAAK/nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBkB,OAAxB;AACEljB,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACAuF,gBAAQ,GAAGrqB,MAAM,CAAC2nB,gBAAP,CAAwBtN,GAAG,CAACH,OAA5B,CAAX;AACAla,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF,WAAK9nB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBmB,OAAxB;AACEkH,gBAAQ,GAAGrqB,MAAM,CAACwnB,OAAP,EAAX;AACAR,wDAAO,CAACsD,QAAR,CAAiBhoB,OAAjB,EAA0B+nB,QAA1B,EAAoC,KAApC,EAA2Cl0B,IAA3C;AACA6J,cAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAA5B;AACA;;AACF;AACE,YAAI;AACF;AACA9kB,gBAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC8uB,aAA5B;AACA,cAAMwF,UAAU,GAAGb,sBAAsB,CAACvP,GAAG,CAACmH,IAAL,CAAzC;AACA,cAAMkJ,QAAQ,GAAGd,sBAAsB,CAACvP,GAAG,CAACoH,EAAL,CAAvC;AACA,cAAMkJ,OAAO,GAAGF,UAAU,CAAC,CAAD,CAAV,IAAiBC,QAAQ,CAAC,CAAD,CAAzB,GAA+B,CAA/B,GAAmC,CAAnD;AACA,cAAME,KAAK,GAAGH,UAAU,CAAC,CAAD,CAAV,GAAgBC,QAAQ,CAAC,CAAD,CAAxB,GAA8B,CAA9B,GAAkC,CAAhD;AACAnF,gBAAM,GAAGkF,UAAU,CAACE,OAAD,CAAnB;AACAnF,eAAK,GAAGkF,QAAQ,CAACE,KAAD,CAAhB;AAEA,cAAMjF,WAAW,GAAG3lB,MAAM,CAAC6nB,cAAP,EAApB;AACAiB,qBAAW,CAACxmB,OAAD,EAAUijB,MAAV,EAAkBC,KAAlB,EAAyBG,WAAzB,EAAsCtL,GAAtC,EAA2C0O,aAA3C,CAAX;AACA,cAAM8B,SAAS,GAAGJ,UAAU,CAACliB,MAAX,CAAkBmiB,QAAlB,CAAlB;AACA1qB,gBAAM,CAACG,MAAP,CACE8E,IAAI,CAACkb,GAAL,CAAS3X,KAAT,CAAe,IAAf,EAAqBqiB,SAArB,CADF,EAEElF,WAFF,EAGE1gB,IAAI,CAACqhB,GAAL,CAAS9d,KAAT,CAAe,IAAf,EAAqBqiB,SAArB,CAHF,EAIElF,WAJF;AAMD,SAnBD,CAmBE,OAAOxiB,CAAP,EAAU;AACVpL,wDAAM,CAACkiB,KAAP,CAAa,6BAAb,EAA4C9W,CAA5C;AACD;;AAhIL,KAF6B,CAoI7B;;;AACA,QACE,CACEnG,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBM,UADrB,EAEEtlB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBO,WAFrB,EAGEvlB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBC,KAHrB,EAIEjlB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBE,MAJrB,EAKEllB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBI,WALrB,EAMEplB,8DAAM,CAACC,EAAP,CAAU+kB,QAAV,CAAmBK,YANrB,EAOEyI,QAPF,CAOWzQ,GAAG,CAACrjB,IAPf,CADF,EASE;AACA+xB,mBAAa;AACd;AACF,GAjJD;;AAmJA,MAAI5yB,IAAI,CAAC+uB,YAAT,EAAuB;AACrB;AACAllB,UAAM,CAAC8nB,eAAP,CAAuB3xB,IAAI,CAAC2uB,SAAL,GAAiB,CAAxC;AACA2E,cAAU,CAACnnB,OAAD,EAAUye,MAAV,EAAkB2I,SAAlB,EAA6B1pB,MAAM,CAAC6nB,cAAP,EAA7B,CAAV;AACD;;AAED,MAAMkD,GAAG,GAAG/qB,MAAM,CAACgoB,SAAP,EAAZ,CArMqC,CAuMrC;;AACAjwB,gDAAM,CAACC,KAAP,CAAa,oCAAoCrB,EAApC,GAAyC,cAAtD;AACA,MAAMq0B,UAAU,GAAGvvB,4CAAA,CAAa,MAAM9E,EAAN,GAAW,cAAxB,CAAnB;AACAq0B,YAAU,CAACpvB,IAAX,CAAgB,IAAhB,EAAsBmvB,GAAG,CAACrF,KAA1B;AAEA,MAAIrlB,MAAM,GAAG0qB,GAAG,CAACrF,KAAJ,GAAYqF,GAAG,CAACtF,MAAhB,GAAyB,IAAItvB,IAAI,CAACuuB,cAA/C;;AACA,MAAIvuB,IAAI,CAAC+uB,YAAT,EAAuB;AACrB7kB,UAAM,GAAGA,MAAM,GAAGlK,IAAI,CAAC2uB,SAAd,GAA0B3uB,IAAI,CAACgvB,eAAxC;AACD;;AAED,MAAM/kB,KAAK,GAAG2qB,GAAG,CAACvF,KAAJ,GAAYuF,GAAG,CAACxF,MAAhB,GAAyB,IAAIpvB,IAAI,CAACsuB,cAAhD;;AAEA,MAAIroB,KAAJ,EAAW;AACTkG,WAAO,CACJ3G,MADH,CACU,MADV,EAEGoE,IAFH,CAEQ3D,KAFR,EAGGR,IAHH,CAGQ,GAHR,EAGa,CAACmvB,GAAG,CAACvF,KAAJ,GAAYuF,GAAG,CAACxF,MAAjB,IAA2B,CAA3B,GAA+B,IAAIpvB,IAAI,CAACsuB,cAHrD,EAIG7oB,IAJH,CAIQ,GAJR,EAIa,CAAC,EAJd;AAKD;;AAED,MAAIzF,IAAI,CAACmX,WAAT,EAAsB;AACpBhL,WAAO,CAAC1G,IAAR,CAAa,QAAb,EAAuB,MAAvB;AACA0G,WAAO,CAAC1G,IAAR,CAAa,OAAb,EAAsB,MAAtB;AACA0G,WAAO,CAAC1G,IAAR,CAAa,OAAb,EAAsB,eAAewE,KAAf,GAAuB,KAA7C;AACD,GAJD,MAIO;AACLkC,WAAO,CAAC1G,IAAR,CAAa,QAAb,EAAuByE,MAAvB;AACAiC,WAAO,CAAC1G,IAAR,CAAa,OAAb,EAAsBwE,KAAtB;AACD;;AACD,MAAM6qB,iBAAiB,GAAG7uB,KAAK,GAAG,EAAH,GAAQ,CAAvC;AACAkG,SAAO,CAAC1G,IAAR,CACE,SADF,EAEEmvB,GAAG,CAACxF,MAAJ,GACEpvB,IAAI,CAACsuB,cADP,GAEE,IAFF,IAGGtuB,IAAI,CAACuuB,cAAL,GAAsBuG,iBAHzB,IAIE,GAJF,GAKE7qB,KALF,GAME,GANF,IAOGC,MAAM,GAAG4qB,iBAPZ,CAFF;AAWD,CA/OM;AAiPQ;AACbjrB,QAAM,EAANA,MADa;AAEbypB,YAAU,EAAVA,UAFa;AAGbh0B,SAAO,EAAPA,OAHa;AAIb2M,MAAI,EAAJA;AAJa,CAAf,E;;;;;;;;;;;;AC7oBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,IAAMymB,QAAQ,GAAG,SAAXA,QAAW,CAASruB,IAAT,EAAe+vB,QAAf,EAAyB;AAC/C,MAAM3B,QAAQ,GAAGpuB,IAAI,CAACmB,MAAL,CAAY,MAAZ,CAAjB;AACAitB,UAAQ,CAAChtB,IAAT,CAAc,GAAd,EAAmB2uB,QAAQ,CAACjsB,CAA5B;AACAsqB,UAAQ,CAAChtB,IAAT,CAAc,GAAd,EAAmB2uB,QAAQ,CAACpsB,CAA5B;AACAyqB,UAAQ,CAAChtB,IAAT,CAAc,MAAd,EAAsB2uB,QAAQ,CAAChD,IAA/B;AACAqB,UAAQ,CAAChtB,IAAT,CAAc,QAAd,EAAwB2uB,QAAQ,CAAChkB,MAAjC;AACAqiB,UAAQ,CAAChtB,IAAT,CAAc,OAAd,EAAuB2uB,QAAQ,CAACnqB,KAAhC;AACAwoB,UAAQ,CAAChtB,IAAT,CAAc,QAAd,EAAwB2uB,QAAQ,CAAClqB,MAAjC;AACAuoB,UAAQ,CAAChtB,IAAT,CAAc,IAAd,EAAoB2uB,QAAQ,CAAC1lB,EAA7B;AACA+jB,UAAQ,CAAChtB,IAAT,CAAc,IAAd,EAAoB2uB,QAAQ,CAACzlB,EAA7B;;AAEA,MAAI,OAAOylB,QAAQ,CAAC7e,KAAhB,KAA0B,WAA9B,EAA2C;AACzCkd,YAAQ,CAAChtB,IAAT,CAAc,OAAd,EAAuB2uB,QAAQ,CAAC7e,KAAhC;AACD;;AAED,SAAOkd,QAAP;AACD,CAhBM;AAkBA,IAAMJ,QAAQ,GAAG,SAAXA,QAAW,CAAShuB,IAAT,EAAe0wB,QAAf,EAAyB;AAC/C;AACA,MAAMC,KAAK,GAAGD,QAAQ,CAACnrB,IAAT,CAAcd,OAAd,CAAsB,cAAtB,EAAsC,GAAtC,CAAd;AAEA,MAAMspB,QAAQ,GAAG/tB,IAAI,CAACmB,MAAL,CAAY,MAAZ,CAAjB;AACA4sB,UAAQ,CAAC3sB,IAAT,CAAc,GAAd,EAAmBsvB,QAAQ,CAAC5sB,CAA5B;AACAiqB,UAAQ,CAAC3sB,IAAT,CAAc,GAAd,EAAmBsvB,QAAQ,CAAC/sB,CAA5B;AACAoqB,UAAQ,CAAC1sB,KAAT,CAAe,aAAf,EAA8BqvB,QAAQ,CAACE,MAAvC;AACA7C,UAAQ,CAAC3sB,IAAT,CAAc,MAAd,EAAsBsvB,QAAQ,CAAC3D,IAA/B;;AACA,MAAI,OAAO2D,QAAQ,CAACxf,KAAhB,KAA0B,WAA9B,EAA2C;AACzC6c,YAAQ,CAAC3sB,IAAT,CAAc,OAAd,EAAuBsvB,QAAQ,CAACxf,KAAhC;AACD;;AAED,MAAM2f,IAAI,GAAG9C,QAAQ,CAAC5sB,MAAT,CAAgB,OAAhB,CAAb;AACA0vB,MAAI,CAACzvB,IAAL,CAAU,GAAV,EAAesvB,QAAQ,CAAC5sB,CAAT,GAAa4sB,QAAQ,CAAC7C,UAAT,GAAsB,CAAlD;AACAgD,MAAI,CAACzvB,IAAL,CAAU,MAAV,EAAkBsvB,QAAQ,CAAC3D,IAA3B;AACA8D,MAAI,CAACtrB,IAAL,CAAUorB,KAAV;AAEA,SAAO5C,QAAP;AACD,CAnBM;AAqBA,IAAM+C,SAAS,GAAG,SAAZA,SAAY,CAAS9wB,IAAT,EAAe+wB,SAAf,EAA0B;AACjD,WAASC,SAAT,CAAmBltB,CAAnB,EAAsBH,CAAtB,EAAyBiC,KAAzB,EAAgCC,MAAhC,EAAwCorB,GAAxC,EAA6C;AAC3C,WACEntB,CAAC,GACD,GADA,GAEAH,CAFA,GAGA,GAHA,IAICG,CAAC,GAAG8B,KAJL,IAKA,GALA,GAMAjC,CANA,GAOA,GAPA,IAQCG,CAAC,GAAG8B,KARL,IASA,GATA,IAUCjC,CAAC,GAAGkC,MAAJ,GAAaorB,GAVd,IAWA,GAXA,IAYCntB,CAAC,GAAG8B,KAAJ,GAAYqrB,GAAG,GAAG,GAZnB,IAaA,GAbA,IAcCttB,CAAC,GAAGkC,MAdL,IAeA,GAfA,GAgBA/B,CAhBA,GAiBA,GAjBA,IAkBCH,CAAC,GAAGkC,MAlBL,CADF;AAqBD;;AACD,MAAM4D,OAAO,GAAGzJ,IAAI,CAACmB,MAAL,CAAY,SAAZ,CAAhB;AACAsI,SAAO,CAACrI,IAAR,CAAa,QAAb,EAAuB4vB,SAAS,CAACD,SAAS,CAACjtB,CAAX,EAAcitB,SAAS,CAACptB,CAAxB,EAA2B,EAA3B,EAA+B,EAA/B,EAAmC,CAAnC,CAAhC;AACA8F,SAAO,CAACrI,IAAR,CAAa,OAAb,EAAsB,UAAtB;AAEA2vB,WAAS,CAACptB,CAAV,GAAcotB,SAAS,CAACptB,CAAV,GAAcotB,SAAS,CAACG,WAAtC;AACAH,WAAS,CAACjtB,CAAV,GAAcitB,SAAS,CAACjtB,CAAV,GAAc,MAAMitB,SAAS,CAACG,WAA5C;AACAlD,UAAQ,CAAChuB,IAAD,EAAO+wB,SAAP,CAAR;AACD,CA/BM;AAiCP,IAAII,QAAQ,GAAG,CAAC,CAAhB;AACA;;;;;;;AAMO,IAAMhC,SAAS,GAAG,SAAZA,SAAY,CAASnvB,IAAT,EAAekC,IAAf,EAAqBipB,WAArB,EAAkCxR,WAAlC,EAA+Che,IAA/C,EAAqD;AAC5E,MAAMy1B,MAAM,GAAGlvB,IAAI,GAAGvG,IAAI,CAACiK,KAAL,GAAa,CAAnC;AACA,MAAMN,CAAC,GAAGtF,IAAI,CAACmB,MAAL,CAAY,GAAZ,CAAV;;AACA,MAAIgqB,WAAW,KAAK,CAApB,EAAuB;AACrBgG,YAAQ;AACR7rB,KAAC,CAACnE,MAAF,CAAS,MAAT,EACGC,IADH,CACQ,IADR,EACc,UAAU+vB,QADxB,EAEG/vB,IAFH,CAEQ,IAFR,EAEcgwB,MAFd,EAGGhwB,IAHH,CAGQ,IAHR,EAGc,CAHd,EAIGA,IAJH,CAIQ,IAJR,EAIcgwB,MAJd,EAKGhwB,IALH,CAKQ,IALR,EAKc,IALd,EAMGA,IANH,CAMQ,OANR,EAMiB,YANjB,EAOGA,IAPH,CAOQ,cAPR,EAOwB,OAPxB,EAQGA,IARH,CAQQ,QARR,EAQkB,MARlB;AASD;;AAED,MAAMS,IAAI,GAAGssB,WAAW,EAAxB;AACAtsB,MAAI,CAACiC,CAAL,GAAS5B,IAAT;AACAL,MAAI,CAAC8B,CAAL,GAASwnB,WAAT;AACAtpB,MAAI,CAACkrB,IAAL,GAAY,SAAZ;AACAlrB,MAAI,CAAC+D,KAAL,GAAajK,IAAI,CAACiK,KAAlB;AACA/D,MAAI,CAACgE,MAAL,GAAclK,IAAI,CAACkK,MAAnB;AACAhE,MAAI,CAACqP,KAAL,GAAa,OAAb;AACArP,MAAI,CAACwI,EAAL,GAAU,CAAV;AACAxI,MAAI,CAACyI,EAAL,GAAU,CAAV;AACA+jB,UAAQ,CAAC/oB,CAAD,EAAIzD,IAAJ,CAAR;;AAEAwvB,wBAAsB,CAAC11B,IAAD,CAAtB,CACEge,WADF,EAEErU,CAFF,EAGEzD,IAAI,CAACiC,CAHP,EAIEjC,IAAI,CAAC8B,CAJP,EAKE9B,IAAI,CAAC+D,KALP,EAME/D,IAAI,CAACgE,MANP,EAOE;AAAEqL,SAAK,EAAE;AAAT,GAPF,EAQEvV,IARF;AAUD,CArCM;AAuCA,IAAM8wB,aAAa,GAAG,SAAhBA,aAAgB,CAASzsB,IAAT,EAAe;AAC1C,SAAOA,IAAI,CAACmB,MAAL,CAAY,GAAZ,CAAP;AACD,CAFM;AAGP;;;;;;;AAMO,IAAMyuB,cAAc,GAAG,SAAjBA,cAAiB,CAAS5vB,IAAT,EAAewF,MAAf,EAAuB2lB,WAAvB,EAAoCxvB,IAApC,EAA0C2wB,gBAA1C,EAA4D;AACxF,MAAMzqB,IAAI,GAAGssB,WAAW,EAAxB;AACA,MAAM7oB,CAAC,GAAGE,MAAM,CAAC+mB,QAAjB;AACA1qB,MAAI,CAACiC,CAAL,GAAS0B,MAAM,CAACulB,MAAhB;AACAlpB,MAAI,CAAC8B,CAAL,GAAS6B,MAAM,CAACylB,MAAhB;AACAppB,MAAI,CAACqP,KAAL,GAAa,eAAgBob,gBAAgB,GAAG,CAAhD,CALwF,CAKpC;;AACpDzqB,MAAI,CAAC+D,KAAL,GAAaJ,MAAM,CAACwlB,KAAP,GAAexlB,MAAM,CAACulB,MAAnC;AACAlpB,MAAI,CAACgE,MAAL,GAAcslB,WAAW,GAAG3lB,MAAM,CAACylB,MAAnC;AACAoD,UAAQ,CAAC/oB,CAAD,EAAIzD,IAAJ,CAAR;AACD,CATM;AAWP;;;;;;;AAMO,IAAMiuB,QAAQ,GAAG,SAAXA,QAAW,CAAS9vB,IAAT,EAAewF,MAAf,EAAuB8rB,SAAvB,EAAkC31B,IAAlC,EAAwC;AAC9D,MAAM2J,CAAC,GAAGtF,IAAI,CAACmB,MAAL,CAAY,GAAZ,CAAV;;AACA,MAAMowB,YAAY,GAAG,SAAfA,YAAe,CAASxG,MAAT,EAAiBE,MAAjB,EAAyBD,KAAzB,EAAgCE,KAAhC,EAAuC;AAC1D,WAAO5lB,CAAC,CACLnE,MADI,CACG,MADH,EAEJC,IAFI,CAEC,IAFD,EAEO2pB,MAFP,EAGJ3pB,IAHI,CAGC,IAHD,EAGO6pB,MAHP,EAIJ7pB,IAJI,CAIC,IAJD,EAIO4pB,KAJP,EAKJ5pB,IALI,CAKC,IALD,EAKO8pB,KALP,EAMJ9pB,IANI,CAMC,OAND,EAMU,UANV,CAAP;AAOD,GARD;;AASAmwB,cAAY,CAAC/rB,MAAM,CAACulB,MAAR,EAAgBvlB,MAAM,CAACylB,MAAvB,EAA+BzlB,MAAM,CAACwlB,KAAtC,EAA6CxlB,MAAM,CAACylB,MAApD,CAAZ;AACAsG,cAAY,CAAC/rB,MAAM,CAACwlB,KAAR,EAAexlB,MAAM,CAACylB,MAAtB,EAA8BzlB,MAAM,CAACwlB,KAArC,EAA4CxlB,MAAM,CAAC0lB,KAAnD,CAAZ;AACAqG,cAAY,CAAC/rB,MAAM,CAACulB,MAAR,EAAgBvlB,MAAM,CAAC0lB,KAAvB,EAA8B1lB,MAAM,CAACwlB,KAArC,EAA4CxlB,MAAM,CAAC0lB,KAAnD,CAAZ;AACAqG,cAAY,CAAC/rB,MAAM,CAACulB,MAAR,EAAgBvlB,MAAM,CAACylB,MAAvB,EAA+BzlB,MAAM,CAACulB,MAAtC,EAA8CvlB,MAAM,CAAC0lB,KAArD,CAAZ;;AACA,MAAI,OAAO1lB,MAAM,CAAC8O,QAAd,KAA2B,WAA/B,EAA4C;AAC1C9O,UAAM,CAAC8O,QAAP,CAAgB1V,OAAhB,CAAwB,UAASgP,IAAT,EAAe;AACrC2jB,kBAAY,CAAC/rB,MAAM,CAACulB,MAAR,EAAgBnd,IAAhB,EAAsBpI,MAAM,CAACwlB,KAA7B,EAAoCpd,IAApC,CAAZ,CAAsDvM,KAAtD,CAA4D,kBAA5D,EAAgF,MAAhF;AACD,KAFD;AAGD;;AAED,MAAIkF,GAAG,GAAGqnB,UAAU,EAApB;AACArnB,KAAG,CAAChB,IAAJ,GAAW+rB,SAAX;AACA/qB,KAAG,CAACzC,CAAJ,GAAQ0B,MAAM,CAACulB,MAAf;AACAxkB,KAAG,CAAC5C,CAAJ,GAAQ6B,MAAM,CAACylB,MAAf;AACA1kB,KAAG,CAAC2qB,WAAJ,GAAkB,MAAM,EAAxB,CAzB8D,CAyBlC;;AAC5B3qB,KAAG,CAAC2K,KAAJ,GAAY,WAAZ,CA1B8D,CA0BrC;;AAEzB4f,WAAS,CAACxrB,CAAD,EAAIiB,GAAJ,CAAT;AAEAA,KAAG,GAAGqnB,UAAU,EAAhB;AACArnB,KAAG,CAAChB,IAAJ,GAAW,OAAOC,MAAM,CAAC5D,KAAd,GAAsB,IAAjC;AACA2E,KAAG,CAACzC,CAAJ,GAAQ0B,MAAM,CAACulB,MAAP,GAAgB,CAACvlB,MAAM,CAACwlB,KAAP,GAAexlB,MAAM,CAACulB,MAAvB,IAAiC,CAAzD;AACAxkB,KAAG,CAAC5C,CAAJ,GAAQ6B,MAAM,CAACylB,MAAP,GAAgB,MAAMtvB,IAAI,CAAC2uB,SAAnC;AACA/jB,KAAG,CAACqqB,MAAJ,GAAa,QAAb;AACArqB,KAAG,CAAC2K,KAAJ,GAAY,UAAZ;AAEA8c,UAAQ,CAAC1oB,CAAD,EAAIiB,GAAJ,CAAR;;AAEA,MAAI,OAAOf,MAAM,CAAC4nB,aAAd,KAAgC,WAApC,EAAiD;AAC/C5nB,UAAM,CAAC4nB,aAAP,CAAqBxuB,OAArB,CAA6B,UAASgP,IAAT,EAAe4jB,GAAf,EAAoB;AAC/C,UAAI5jB,IAAI,KAAK,EAAb,EAAiB;AACfrH,WAAG,CAAChB,IAAJ,GAAW,OAAOqI,IAAP,GAAc,IAAzB;AACArH,WAAG,CAAC5C,CAAJ,GAAQ6B,MAAM,CAAC8O,QAAP,CAAgBkd,GAAhB,IAAuB,MAAM71B,IAAI,CAAC2uB,SAA1C;AACA0D,gBAAQ,CAAC1oB,CAAD,EAAIiB,GAAJ,CAAR;AACD;AACF,KAND;AAOD;AACF,CAhDM;AAkDP;;;;;AAIO,IAAMypB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAShwB,IAAT,EAAewF,MAAf,EAAuB;AACvD,MAAM4oB,QAAQ,GAAGC,QAAQ,CAACruB,IAAD,EAAO;AAC9B8D,KAAC,EAAE0B,MAAM,CAACulB,MADoB;AAE9BpnB,KAAC,EAAE6B,MAAM,CAACylB,MAFoB;AAG9BrlB,SAAK,EAAEJ,MAAM,CAACwlB,KAAP,GAAexlB,MAAM,CAACulB,MAHC;AAI9BllB,UAAM,EAAEL,MAAM,CAAC0lB,KAAP,GAAe1lB,MAAM,CAACylB,MAJA;AAK9B8B,QAAI,EAAEvnB,MAAM,CAACunB,IALiB;AAM9B7b,SAAK,EAAE;AANuB,GAAP,CAAzB;AAQAkd,UAAQ,CAACqD,KAAT;AACD,CAVM;AAWP;;;;AAGO,IAAMlC,eAAe,GAAG,SAAlBA,eAAkB,CAASvvB,IAAT,EAAe;AAC5CA,MAAI,CACDmB,MADH,CACU,MADV,EAEGA,MAFH,CAEU,QAFV,EAGGC,IAHH,CAGQ,IAHR,EAGc,WAHd,EAIGA,IAJH,CAIQ,MAJR,EAIgB,CAJhB,EAKGA,IALH,CAKQ,MALR,EAKgB,CALhB,EAMGA,IANH,CAMQ,aANR,EAMuB,CANvB,EAOGA,IAPH,CAOQ,cAPR,EAOwB,CAPxB,EAQGA,IARH,CAQQ,QARR,EAQkB,MARlB,EASGD,MATH,CASU,MATV,EAUGC,IAVH,CAUQ,GAVR,EAUa,kBAVb,EAD4C,CAWV;AACnC,CAZM;AAaP;;;;AAGO,IAAMquB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAASzvB,IAAT,EAAe;AACjDA,MAAI,CACDmB,MADH,CACU,MADV,EAEGA,MAFH,CAEU,QAFV,EAGGC,IAHH,CAGQ,IAHR,EAGc,gBAHd,EAIGA,IAJH,CAIQ,MAJR,EAIgB,EAJhB,EAKGA,IALH,CAKQ,MALR,EAKgB,EALhB,EAMGA,IANH,CAMQ,aANR,EAMuB,EANvB,EAOGA,IAPH,CAOQ,cAPR,EAOwB,EAPxB,EAQGA,IARH,CAQQ,QARR,EAQkB,MARlB,EASGD,MATH,CASU,QATV,EAUGC,IAVH,CAUQ,IAVR,EAUc,EAVd,EAWGA,IAXH,CAWQ,IAXR,EAWc,EAXd,EAYGA,IAZH,CAYQ,GAZR,EAYa,CAZb,EADiD,CAcjD;AACD,CAfM;AAgBP;;;;AAGO,IAAMouB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAASxvB,IAAT,EAAe;AACjD,MAAM0xB,IAAI,GAAG1xB,IAAI,CAACmB,MAAL,CAAY,MAAZ,CAAb;AACA,MAAMsR,MAAM,GAAGif,IAAI,CAChBvwB,MADY,CACL,QADK,EAEZC,IAFY,CAEP,IAFO,EAED,WAFC,EAGZA,IAHY,CAGP,aAHO,EAGQ,EAHR,EAIZA,IAJY,CAIP,cAJO,EAIS,CAJT,EAKZA,IALY,CAKP,QALO,EAKG,MALH,EAMZA,IANY,CAMP,MANO,EAMC,EAND,EAOZA,IAPY,CAOP,MAPO,EAOC,CAPD,CAAf,CAFiD,CAWjD;;AACAqR,QAAM,CACHtR,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,MAFR,EAEgB,OAFhB,EAGGA,IAHH,CAGQ,QAHR,EAGkB,SAHlB,EAIGC,KAJH,CAIS,kBAJT,EAI6B,MAJ7B,EAKGD,IALH,CAKQ,cALR,EAKwB,KALxB,EAMGA,IANH,CAMQ,GANR,EAMa,mBANb,EAZiD,CAoBjD;;AACAqR,QAAM,CACHtR,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,MAFR,EAEgB,MAFhB,EAGGA,IAHH,CAGQ,QAHR,EAGkB,SAHlB,EAIGC,KAJH,CAIS,kBAJT,EAI6B,MAJ7B,EAKGD,IALH,CAKQ,cALR,EAKwB,KALxB,EAMGA,IANH,CAMQ,GANR,EAMa,yBANb,EArBiD,CA4BjD;AACD,CA7BM;AA+BA,IAAMwsB,UAAU,GAAG,SAAbA,UAAa,GAAW;AACnC,MAAMrnB,GAAG,GAAG;AACVzC,KAAC,EAAE,CADO;AAEVH,KAAC,EAAE,CAFO;AAGVopB,QAAI,EAAE/pB,SAHI;AAIV,mBAAe,OAJL;AAKV3B,SAAK,EAAE,MALG;AAMVuE,SAAK,EAAE,GANG;AAOVC,UAAM,EAAE,GAPE;AAQVgoB,cAAU,EAAE,CARF;AASVxjB,MAAE,EAAE,CATM;AAUVC,MAAE,EAAE;AAVM,GAAZ;AAYA,SAAO/D,GAAP;AACD,CAdM;AAgBA,IAAM4nB,WAAW,GAAG,SAAdA,WAAc,GAAW;AACpC,MAAMtsB,IAAI,GAAG;AACXiC,KAAC,EAAE,CADQ;AAEXH,KAAC,EAAE,CAFQ;AAGXopB,QAAI,EAAE,SAHK;AAIXhhB,UAAM,EAAE,MAJG;AAKXnG,SAAK,EAAE,GALI;AAMXgrB,UAAM,EAAE,OANG;AAOX/qB,UAAM,EAAE,GAPG;AAQXwE,MAAE,EAAE,CARO;AASXC,MAAE,EAAE;AATO,GAAb;AAWA,SAAOzI,IAAP;AACD,CAbM;;AAeP,IAAMwvB,sBAAsB,GAAI,YAAW;AACzC,WAASM,MAAT,CAAgBC,OAAhB,EAAyBtsB,CAAzB,EAA4BxB,CAA5B,EAA+BH,CAA/B,EAAkCiC,KAAlC,EAAyCC,MAAzC,EAAiDgsB,SAAjD,EAA4D;AAC1D,QAAMtsB,IAAI,GAAGD,CAAC,CACXnE,MADU,CACH,MADG,EAEVC,IAFU,CAEL,GAFK,EAEA0C,CAAC,GAAG8B,KAAK,GAAG,CAFZ,EAGVxE,IAHU,CAGL,GAHK,EAGAuC,CAAC,GAAGkC,MAAM,GAAG,CAAb,GAAiB,CAHjB,EAIVxE,KAJU,CAIJ,aAJI,EAIW,QAJX,EAKVkE,IALU,CAKLqsB,OALK,CAAb;;AAMAE,iBAAa,CAACvsB,IAAD,EAAOssB,SAAP,CAAb;AACD;;AAED,WAASE,OAAT,CAAiBH,OAAjB,EAA0BtsB,CAA1B,EAA6BxB,CAA7B,EAAgCH,CAAhC,EAAmCiC,KAAnC,EAA0CC,MAA1C,EAAkDgsB,SAAlD,EAA6Dl2B,IAA7D,EAAmE;AAAA,QACzDyuB,aADyD,GACtBzuB,IADsB,CACzDyuB,aADyD;AAAA,QAC1CC,eAD0C,GACtB1uB,IADsB,CAC1C0uB,eAD0C;AAGjE,QAAMqD,KAAK,GAAGkE,OAAO,CAACr1B,KAAR,CAAc,cAAd,CAAd;;AACA,SAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoyB,KAAK,CAACnyB,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAMwyB,EAAE,GAAGxyB,CAAC,GAAG8uB,aAAJ,GAAqBA,aAAa,IAAIsD,KAAK,CAACnyB,MAAN,GAAe,CAAnB,CAAd,GAAuC,CAAtE;AACA,UAAMgK,IAAI,GAAGD,CAAC,CACXnE,MADU,CACH,MADG,EAEVC,IAFU,CAEL,GAFK,EAEA0C,CAAC,GAAG8B,KAAK,GAAG,CAFZ,EAGVxE,IAHU,CAGL,GAHK,EAGAuC,CAHA,EAIVtC,KAJU,CAIJ,aAJI,EAIW,QAJX,EAKVA,KALU,CAKJ,WALI,EAKS+oB,aALT,EAMV/oB,KANU,CAMJ,aANI,EAMWgpB,eANX,CAAb;AAOA9kB,UAAI,CACDpE,MADH,CACU,OADV,EAEGC,IAFH,CAEQ,GAFR,EAEa0C,CAAC,GAAG8B,KAAK,GAAG,CAFzB,EAGGxE,IAHH,CAGQ,IAHR,EAGc0sB,EAHd,EAIGvoB,IAJH,CAIQmoB,KAAK,CAACpyB,CAAD,CAJb;AAMAiK,UAAI,CACDnE,IADH,CACQ,GADR,EACauC,CAAC,GAAGkC,MAAM,GAAG,GAD1B,EAEGzE,IAFH,CAEQ,mBAFR,EAE6B,SAF7B,EAGGA,IAHH,CAGQ,oBAHR,EAG8B,SAH9B;;AAKA0wB,mBAAa,CAACvsB,IAAD,EAAOssB,SAAP,CAAb;AACD;AACF;;AAED,WAASG,IAAT,CAAcJ,OAAd,EAAuBtsB,CAAvB,EAA0BxB,CAA1B,EAA6BH,CAA7B,EAAgCiC,KAAhC,EAAuCC,MAAvC,EAA+CgsB,SAA/C,EAA0Dl2B,IAA1D,EAAgE;AAC9D,QAAMwN,CAAC,GAAG7D,CAAC,CAACnE,MAAF,CAAS,QAAT,CAAV;AACA,QAAMwI,CAAC,GAAGR,CAAC,CACRhI,MADO,CACA,eADA,EAEPC,IAFO,CAEF,GAFE,EAEG0C,CAFH,EAGP1C,IAHO,CAGF,GAHE,EAGGuC,CAHH,EAIPvC,IAJO,CAIF,OAJE,EAIOwE,KAJP,EAKPxE,IALO,CAKF,QALE,EAKQyE,MALR,CAAV;AAOA,QAAMN,IAAI,GAAGoE,CAAC,CACXxI,MADU,CACH,KADG,EAEVE,KAFU,CAEJ,SAFI,EAEO,OAFP,EAGVA,KAHU,CAGJ,QAHI,EAGM,MAHN,EAIVA,KAJU,CAIJ,OAJI,EAIK,MAJL,CAAb;AAMAkE,QAAI,CACDpE,MADH,CACU,KADV,EAEGE,KAFH,CAES,SAFT,EAEoB,YAFpB,EAGGA,KAHH,CAGS,YAHT,EAGuB,QAHvB,EAIGA,KAJH,CAIS,gBAJT,EAI2B,QAJ3B,EAKGkE,IALH,CAKQqsB,OALR;AAOAG,WAAO,CAACH,OAAD,EAAUzoB,CAAV,EAAarF,CAAb,EAAgBH,CAAhB,EAAmBiC,KAAnB,EAA0BC,MAA1B,EAAkCgsB,SAAlC,EAA6Cl2B,IAA7C,CAAP;;AACAm2B,iBAAa,CAACvsB,IAAD,EAAOssB,SAAP,CAAb;AACD;;AAED,WAASC,aAAT,CAAuBG,MAAvB,EAA+BC,iBAA/B,EAAkD;AAChD,SAAK,IAAMvqB,GAAX,IAAkBuqB,iBAAlB,EAAqC;AACnC,UAAIA,iBAAiB,CAACrkB,cAAlB,CAAiClG,GAAjC,CAAJ,EAA2C;AAAE;AAC3CsqB,cAAM,CAAC7wB,IAAP,CAAYuG,GAAZ,EAAiBuqB,iBAAiB,CAACvqB,GAAD,CAAlC;AACD;AACF;AACF;;AAED,SAAO,UAAShM,IAAT,EAAe;AACpB,WAAOA,IAAI,CAACkvB,aAAL,KAAuB,IAAvB,GAA8BmH,IAA9B,GAAqCr2B,IAAI,CAACkvB,aAAL,KAAuB,KAAvB,GAA+B8G,MAA/B,GAAwCI,OAApF;AACD,GAFD;AAGD,CA5E8B,EAA/B;;AA8Ee;AACb1D,UAAQ,EAARA,QADa;AAEbL,UAAQ,EAARA,QAFa;AAGb8C,WAAS,EAATA,SAHa;AAIb3B,WAAS,EAATA,SAJa;AAKb1C,eAAa,EAAbA,aALa;AAMbmD,gBAAc,EAAdA,cANa;AAObE,UAAQ,EAARA,QAPa;AAQbE,oBAAkB,EAAlBA,kBARa;AASbT,iBAAe,EAAfA,eATa;AAUbE,sBAAoB,EAApBA,oBAVa;AAWbD,sBAAoB,EAApBA,oBAXa;AAYb5B,YAAU,EAAVA,UAZa;AAabO,aAAW,EAAXA;AAba,CAAf,E;;;;;;;;;;;;ACnYA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAMxrB,OAAO,GAAG,EAAhB;AAEO,IAAMwvB,GAAG,GAAG,SAANA,GAAM,CAACxqB,GAAD,EAAM6jB,GAAN,EAAc;AAC/B7oB,SAAO,CAACgF,GAAD,CAAP,GAAe6jB,GAAf;AACD,CAFM;AAIA,IAAM4G,GAAG,GAAG,SAANA,GAAM,CAAAte,CAAC;AAAA,SAAInR,OAAO,CAACmR,CAAD,CAAX;AAAA,CAAb;AACA,IAAMzY,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAMD,MAAM,CAACC,IAAP,CAAYsH,OAAZ,CAAN;AAAA,CAAb;AACA,IAAM0hB,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAMhpB,IAAI,GAAGE,MAAb;AAAA,CAAb;AAEQ;AACb62B,KAAG,EAAHA,GADa;AAEbD,KAAG,EAAHA,GAFa;AAGb92B,MAAI,EAAJA,IAHa;AAIbgpB,MAAI,EAAJA;AAJa,CAAf,E;;;;;;;;;;;ACVA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mJAAmJ;AACnJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,0BAA0B,EAAE;AAC1C,MAAM;AACN,WAAW,kYAAkY;AAC7Y,aAAa,4RAA4R;AACzS;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,yBAAyB,c;AAClE;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,UAAU;AACtD;AACA;AACA,6DAA6D,UAAU;AACvE;AACA;;AAEA,2CAA2C,iCAAiC;AAC5E,gBAAgB,4BAA4B,gEAAgE,UAAU;;AAEtH;AACA;;AAEA,sEAAsE;AACtE,gBAAgB,4BAA4B,gEAAgE,UAAU,+DAA+D;;AAErL;AACA;;;AAGA,2EAA2E;AAC3E,gBAAgB;;AAEhB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;AAGhB;AACA;;AAEA,kFAAkF;AAClF,iBAAiB;;AAEjB;AACA;;AAEA,gBAAgB;;AAEhB;AACA;;AAEA,gBAAgB;;AAEhB;AACA;;AAEA,gBAAgB;;AAEhB;AACA;;AAEA,4GAA4G;AAC5G,gBAAgB,2CAA2C;;AAE3D;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,sBAAsB,EAAE,MAAM,EAAE,sBAAsB,EAAE,sBAAsB,8CAA8C,IAAI,GAAG,QAAQ,EAAE,QAAQ,EAAE,yGAAyG,eAAe,iFAAiF,wCAAwC,oBAAoB,iBAAiB,UAAU,eAAe,UAAU,GAAG,UAAU,4CAA4C,oCAAoC,yDAAyD,oBAAoB,0BAA0B,KAAK,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,eAAe,UAAU,GAAG,2GAA2G,eAAe,UAAU,GAAG,UAAU,EAAE,UAAU,wCAAwC,KAAK,+BAA+B,2GAA2G;AAC/kC,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,qDAAqD;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC,a;AACzE;AACA;AACA;AACA;AACA;AACA,gC;AACA;AACA,uBAAuB,yCAAyC,0CAA0C;AAC1G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA;AACA;AACA,wBAAwB,2BAA2B;AACnD;AACA,wBAAwB,uCAAuC;AAC/D;AACA;AACA;AACA,wDAAwD;AACxD;AACA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","file":"mermaidAPI.core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mermaid\"] = factory();\n\telse\n\t\troot[\"mermaid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/mermaidAPI.js\");\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Flowchart variables */\\n/* Sequence Diagram variables */\\n/* Gantt chart variables */\\n/* state colors */\\n.label {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  color: #333; }\\n\\n.label text {\\n  fill: #333; }\\n\\n.node rect,\\n.node circle,\\n.node ellipse,\\n.node polygon,\\n.node path {\\n  fill: #BDD5EA;\\n  stroke: purple;\\n  stroke-width: 1px; }\\n\\n.node .label {\\n  text-align: center; }\\n\\n.node.clickable {\\n  cursor: pointer; }\\n\\n.arrowheadPath {\\n  fill: lightgrey; }\\n\\n.edgePath .path {\\n  stroke: lightgrey;\\n  stroke-width: 1.5px; }\\n\\n.edgeLabel {\\n  background-color: #e8e8e8;\\n  text-align: center; }\\n\\n.cluster rect {\\n  fill: #6D6D65;\\n  stroke: rgba(255, 255, 255, 0.25);\\n  stroke-width: 1px; }\\n\\n.cluster text {\\n  fill: #F9FFFE; }\\n\\ndiv.mermaidTooltip {\\n  position: absolute;\\n  text-align: center;\\n  max-width: 200px;\\n  padding: 2px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 12px;\\n  background: #6D6D65;\\n  border: 1px solid rgba(255, 255, 255, 0.25);\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 100; }\\n\\n.actor {\\n  stroke: #81B1DB;\\n  fill: #BDD5EA; }\\n\\ntext.actor {\\n  fill: black;\\n  stroke: none; }\\n\\n.actor-line {\\n  stroke: lightgrey; }\\n\\n.messageLine0 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: lightgrey; }\\n\\n.messageLine1 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: lightgrey; }\\n\\n#arrowhead {\\n  fill: lightgrey; }\\n\\n.sequenceNumber {\\n  fill: white; }\\n\\n#sequencenumber {\\n  fill: lightgrey; }\\n\\n#crosshead path {\\n  fill: lightgrey !important;\\n  stroke: lightgrey !important; }\\n\\n.messageText {\\n  fill: lightgrey;\\n  stroke: none; }\\n\\n.labelBox {\\n  stroke: #81B1DB;\\n  fill: #BDD5EA; }\\n\\n.labelText {\\n  fill: #323D47;\\n  stroke: none; }\\n\\n.loopText {\\n  fill: lightgrey;\\n  stroke: none; }\\n\\n.loopLine {\\n  stroke-width: 2;\\n  stroke-dasharray: '2 2';\\n  stroke: #81B1DB; }\\n\\n.note {\\n  stroke: rgba(255, 255, 255, 0.25);\\n  fill: #fff5ad; }\\n\\n.noteText {\\n  fill: black;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 14px; }\\n\\n.activation0 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation1 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation2 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n/** Section styling */\\n.mermaid-main-font {\\n  font-family: \\\"trebuchet ms\\\", verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.section {\\n  stroke: none;\\n  opacity: 0.2; }\\n\\n.section0 {\\n  fill: rgba(255, 255, 255, 0.3); }\\n\\n.section2 {\\n  fill: #EAE8B9; }\\n\\n.section1,\\n.section3 {\\n  fill: white;\\n  opacity: 0.2; }\\n\\n.sectionTitle0 {\\n  fill: #F9FFFE; }\\n\\n.sectionTitle1 {\\n  fill: #F9FFFE; }\\n\\n.sectionTitle2 {\\n  fill: #F9FFFE; }\\n\\n.sectionTitle3 {\\n  fill: #F9FFFE; }\\n\\n.sectionTitle {\\n  text-anchor: start;\\n  font-size: 11px;\\n  text-height: 14px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n/* Grid and axis */\\n.grid .tick {\\n  stroke: lightgrey;\\n  opacity: 0.8;\\n  shape-rendering: crispEdges; }\\n  .grid .tick text {\\n    font-family: 'trebuchet ms', verdana, arial;\\n    font-family: var(--mermaid-font-family); }\\n\\n.grid path {\\n  stroke-width: 0; }\\n\\n/* Today line */\\n.today {\\n  fill: none;\\n  stroke: #DB5757;\\n  stroke-width: 2px; }\\n\\n/* Task styling */\\n/* Default task */\\n.task {\\n  stroke-width: 2; }\\n\\n.taskText {\\n  text-anchor: middle;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskText:not([font-size]) {\\n  font-size: 11px; }\\n\\n.taskTextOutsideRight {\\n  fill: #323D47;\\n  text-anchor: start;\\n  font-size: 11px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskTextOutsideLeft {\\n  fill: #323D47;\\n  text-anchor: end;\\n  font-size: 11px; }\\n\\n/* Special case clickable */\\n.task.clickable {\\n  cursor: pointer; }\\n\\n.taskText.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideLeft.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideRight.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n/* Specific task settings for the sections*/\\n.taskText0,\\n.taskText1,\\n.taskText2,\\n.taskText3 {\\n  fill: #323D47; }\\n\\n.task0,\\n.task1,\\n.task2,\\n.task3 {\\n  fill: #BDD5EA;\\n  stroke: rgba(255, 255, 255, 0.5); }\\n\\n.taskTextOutside0,\\n.taskTextOutside2 {\\n  fill: lightgrey; }\\n\\n.taskTextOutside1,\\n.taskTextOutside3 {\\n  fill: lightgrey; }\\n\\n/* Active task */\\n.active0,\\n.active1,\\n.active2,\\n.active3 {\\n  fill: #81B1DB;\\n  stroke: rgba(255, 255, 255, 0.5); }\\n\\n.activeText0,\\n.activeText1,\\n.activeText2,\\n.activeText3 {\\n  fill: #323D47 !important; }\\n\\n/* Completed task */\\n.done0,\\n.done1,\\n.done2,\\n.done3 {\\n  stroke: grey;\\n  fill: lightgrey;\\n  stroke-width: 2; }\\n\\n.doneText0,\\n.doneText1,\\n.doneText2,\\n.doneText3 {\\n  fill: #323D47 !important; }\\n\\n/* Tasks on the critical line */\\n.crit0,\\n.crit1,\\n.crit2,\\n.crit3 {\\n  stroke: #E83737;\\n  fill: #E83737;\\n  stroke-width: 2; }\\n\\n.activeCrit0,\\n.activeCrit1,\\n.activeCrit2,\\n.activeCrit3 {\\n  stroke: #E83737;\\n  fill: #81B1DB;\\n  stroke-width: 2; }\\n\\n.doneCrit0,\\n.doneCrit1,\\n.doneCrit2,\\n.doneCrit3 {\\n  stroke: #E83737;\\n  fill: lightgrey;\\n  stroke-width: 2;\\n  cursor: pointer;\\n  shape-rendering: crispEdges; }\\n\\n.milestone {\\n  transform: rotate(45deg) scale(0.8, 0.8); }\\n\\n.milestoneText {\\n  font-style: italic; }\\n\\n.doneCritText0,\\n.doneCritText1,\\n.doneCritText2,\\n.doneCritText3 {\\n  fill: #323D47 !important; }\\n\\n.activeCritText0,\\n.activeCritText1,\\n.activeCritText2,\\n.activeCritText3 {\\n  fill: #323D47 !important; }\\n\\n.titleText {\\n  text-anchor: middle;\\n  font-size: 18px;\\n  fill: #323D47;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.classGroup text {\\n  fill: purple;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 10px; }\\n  g.classGroup text .title {\\n    font-weight: bolder; }\\n\\ng.clickable {\\n  cursor: pointer; }\\n\\ng.classGroup rect {\\n  fill: #BDD5EA;\\n  stroke: purple; }\\n\\ng.classGroup line {\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n.classLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #BDD5EA;\\n  opacity: 0.5; }\\n\\n.classLabel .label {\\n  fill: purple;\\n  font-size: 10px; }\\n\\n.relation {\\n  stroke: purple;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.dashed-line {\\n  stroke-dasharray: 3; }\\n\\n#compositionStart {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#compositionEnd {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#aggregationStart {\\n  fill: #BDD5EA;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#aggregationEnd {\\n  fill: #BDD5EA;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#dependencyStart {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#dependencyEnd {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#extensionStart {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n#extensionEnd {\\n  fill: purple;\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n.commit-id,\\n.commit-msg,\\n.branch-label {\\n  fill: lightgrey;\\n  color: lightgrey;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.pieTitleText {\\n  text-anchor: middle;\\n  font-size: 25px;\\n  fill: #323D47;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.slice {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: purple;\\n  stroke: none;\\n  font-size: 10px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: purple;\\n  stroke: none;\\n  font-size: 10px; }\\n\\ng.stateGroup .state-title {\\n  font-weight: bolder;\\n  fill: black; }\\n\\ng.stateGroup rect {\\n  fill: #BDD5EA;\\n  stroke: purple; }\\n\\ng.stateGroup line {\\n  stroke: purple;\\n  stroke-width: 1; }\\n\\n.transition {\\n  stroke: purple;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.stateGroup .composit {\\n  fill: white;\\n  border-bottom: 1px; }\\n\\n.stateGroup .alt-composit {\\n  fill: #e0e0e0;\\n  border-bottom: 1px; }\\n\\n.state-note {\\n  stroke: rgba(255, 255, 255, 0.25);\\n  fill: #fff5ad; }\\n  .state-note text {\\n    fill: black;\\n    stroke: none;\\n    font-size: 10px; }\\n\\n.stateLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #BDD5EA;\\n  opacity: 0.5; }\\n\\n.stateLabel text {\\n  fill: black;\\n  font-size: 10px;\\n  font-weight: bold;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n:root {\\n  --mermaid-font-family: '\\\"trebuchet ms\\\", verdana, arial';\\n  --mermaid-font-family: \\\"Comic Sans MS\\\", \\\"Comic Sans\\\", cursive; }\\n\", \"\"]);\n\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Flowchart variables */\\n/* Sequence Diagram variables */\\n/* Gantt chart variables */\\n/* state colors */\\n.label {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  color: #333; }\\n\\n.label text {\\n  fill: #333; }\\n\\n.node rect,\\n.node circle,\\n.node ellipse,\\n.node polygon,\\n.node path {\\n  fill: #ECECFF;\\n  stroke: #9370DB;\\n  stroke-width: 1px; }\\n\\n.node .label {\\n  text-align: center; }\\n\\n.node.clickable {\\n  cursor: pointer; }\\n\\n.arrowheadPath {\\n  fill: #333333; }\\n\\n.edgePath .path {\\n  stroke: #333333;\\n  stroke-width: 1.5px; }\\n\\n.edgeLabel {\\n  background-color: #e8e8e8;\\n  text-align: center; }\\n\\n.cluster rect {\\n  fill: #ffffde;\\n  stroke: #aaaa33;\\n  stroke-width: 1px; }\\n\\n.cluster text {\\n  fill: #333; }\\n\\ndiv.mermaidTooltip {\\n  position: absolute;\\n  text-align: center;\\n  max-width: 200px;\\n  padding: 2px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 12px;\\n  background: #ffffde;\\n  border: 1px solid #aaaa33;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 100; }\\n\\n.actor {\\n  stroke: #CCCCFF;\\n  fill: #ECECFF; }\\n\\ntext.actor {\\n  fill: black;\\n  stroke: none; }\\n\\n.actor-line {\\n  stroke: grey; }\\n\\n.messageLine0 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n.messageLine1 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n#arrowhead {\\n  fill: #333; }\\n\\n.sequenceNumber {\\n  fill: white; }\\n\\n#sequencenumber {\\n  fill: #333; }\\n\\n#crosshead path {\\n  fill: #333 !important;\\n  stroke: #333 !important; }\\n\\n.messageText {\\n  fill: #333;\\n  stroke: none; }\\n\\n.labelBox {\\n  stroke: #CCCCFF;\\n  fill: #ECECFF; }\\n\\n.labelText {\\n  fill: black;\\n  stroke: none; }\\n\\n.loopText {\\n  fill: black;\\n  stroke: none; }\\n\\n.loopLine {\\n  stroke-width: 2;\\n  stroke-dasharray: '2 2';\\n  stroke: #CCCCFF; }\\n\\n.note {\\n  stroke: #aaaa33;\\n  fill: #fff5ad; }\\n\\n.noteText {\\n  fill: black;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 14px; }\\n\\n.activation0 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation1 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation2 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n/** Section styling */\\n.mermaid-main-font {\\n  font-family: \\\"trebuchet ms\\\", verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.section {\\n  stroke: none;\\n  opacity: 0.2; }\\n\\n.section0 {\\n  fill: rgba(102, 102, 255, 0.49); }\\n\\n.section2 {\\n  fill: #fff400; }\\n\\n.section1,\\n.section3 {\\n  fill: white;\\n  opacity: 0.2; }\\n\\n.sectionTitle0 {\\n  fill: #333; }\\n\\n.sectionTitle1 {\\n  fill: #333; }\\n\\n.sectionTitle2 {\\n  fill: #333; }\\n\\n.sectionTitle3 {\\n  fill: #333; }\\n\\n.sectionTitle {\\n  text-anchor: start;\\n  font-size: 11px;\\n  text-height: 14px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n/* Grid and axis */\\n.grid .tick {\\n  stroke: lightgrey;\\n  opacity: 0.8;\\n  shape-rendering: crispEdges; }\\n  .grid .tick text {\\n    font-family: 'trebuchet ms', verdana, arial;\\n    font-family: var(--mermaid-font-family); }\\n\\n.grid path {\\n  stroke-width: 0; }\\n\\n/* Today line */\\n.today {\\n  fill: none;\\n  stroke: red;\\n  stroke-width: 2px; }\\n\\n/* Task styling */\\n/* Default task */\\n.task {\\n  stroke-width: 2; }\\n\\n.taskText {\\n  text-anchor: middle;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskText:not([font-size]) {\\n  font-size: 11px; }\\n\\n.taskTextOutsideRight {\\n  fill: black;\\n  text-anchor: start;\\n  font-size: 11px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskTextOutsideLeft {\\n  fill: black;\\n  text-anchor: end;\\n  font-size: 11px; }\\n\\n/* Special case clickable */\\n.task.clickable {\\n  cursor: pointer; }\\n\\n.taskText.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideLeft.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideRight.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n/* Specific task settings for the sections*/\\n.taskText0,\\n.taskText1,\\n.taskText2,\\n.taskText3 {\\n  fill: white; }\\n\\n.task0,\\n.task1,\\n.task2,\\n.task3 {\\n  fill: #8a90dd;\\n  stroke: #534fbc; }\\n\\n.taskTextOutside0,\\n.taskTextOutside2 {\\n  fill: black; }\\n\\n.taskTextOutside1,\\n.taskTextOutside3 {\\n  fill: black; }\\n\\n/* Active task */\\n.active0,\\n.active1,\\n.active2,\\n.active3 {\\n  fill: #bfc7ff;\\n  stroke: #534fbc; }\\n\\n.activeText0,\\n.activeText1,\\n.activeText2,\\n.activeText3 {\\n  fill: black !important; }\\n\\n/* Completed task */\\n.done0,\\n.done1,\\n.done2,\\n.done3 {\\n  stroke: grey;\\n  fill: lightgrey;\\n  stroke-width: 2; }\\n\\n.doneText0,\\n.doneText1,\\n.doneText2,\\n.doneText3 {\\n  fill: black !important; }\\n\\n/* Tasks on the critical line */\\n.crit0,\\n.crit1,\\n.crit2,\\n.crit3 {\\n  stroke: #ff8888;\\n  fill: red;\\n  stroke-width: 2; }\\n\\n.activeCrit0,\\n.activeCrit1,\\n.activeCrit2,\\n.activeCrit3 {\\n  stroke: #ff8888;\\n  fill: #bfc7ff;\\n  stroke-width: 2; }\\n\\n.doneCrit0,\\n.doneCrit1,\\n.doneCrit2,\\n.doneCrit3 {\\n  stroke: #ff8888;\\n  fill: lightgrey;\\n  stroke-width: 2;\\n  cursor: pointer;\\n  shape-rendering: crispEdges; }\\n\\n.milestone {\\n  transform: rotate(45deg) scale(0.8, 0.8); }\\n\\n.milestoneText {\\n  font-style: italic; }\\n\\n.doneCritText0,\\n.doneCritText1,\\n.doneCritText2,\\n.doneCritText3 {\\n  fill: black !important; }\\n\\n.activeCritText0,\\n.activeCritText1,\\n.activeCritText2,\\n.activeCritText3 {\\n  fill: black !important; }\\n\\n.titleText {\\n  text-anchor: middle;\\n  font-size: 18px;\\n  fill: black;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.classGroup text {\\n  fill: #9370DB;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 10px; }\\n  g.classGroup text .title {\\n    font-weight: bolder; }\\n\\ng.clickable {\\n  cursor: pointer; }\\n\\ng.classGroup rect {\\n  fill: #ECECFF;\\n  stroke: #9370DB; }\\n\\ng.classGroup line {\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n.classLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #ECECFF;\\n  opacity: 0.5; }\\n\\n.classLabel .label {\\n  fill: #9370DB;\\n  font-size: 10px; }\\n\\n.relation {\\n  stroke: #9370DB;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.dashed-line {\\n  stroke-dasharray: 3; }\\n\\n#compositionStart {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#compositionEnd {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#aggregationStart {\\n  fill: #ECECFF;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#aggregationEnd {\\n  fill: #ECECFF;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#dependencyStart {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#dependencyEnd {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#extensionStart {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n#extensionEnd {\\n  fill: #9370DB;\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n.commit-id,\\n.commit-msg,\\n.branch-label {\\n  fill: lightgrey;\\n  color: lightgrey;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.pieTitleText {\\n  text-anchor: middle;\\n  font-size: 25px;\\n  fill: black;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.slice {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #9370DB;\\n  stroke: none;\\n  font-size: 10px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #9370DB;\\n  stroke: none;\\n  font-size: 10px; }\\n\\ng.stateGroup .state-title {\\n  font-weight: bolder;\\n  fill: black; }\\n\\ng.stateGroup rect {\\n  fill: #ECECFF;\\n  stroke: #9370DB; }\\n\\ng.stateGroup line {\\n  stroke: #9370DB;\\n  stroke-width: 1; }\\n\\n.transition {\\n  stroke: #9370DB;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.stateGroup .composit {\\n  fill: white;\\n  border-bottom: 1px; }\\n\\n.stateGroup .alt-composit {\\n  fill: #e0e0e0;\\n  border-bottom: 1px; }\\n\\n.state-note {\\n  stroke: #aaaa33;\\n  fill: #fff5ad; }\\n  .state-note text {\\n    fill: black;\\n    stroke: none;\\n    font-size: 10px; }\\n\\n.stateLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #ECECFF;\\n  opacity: 0.5; }\\n\\n.stateLabel text {\\n  fill: black;\\n  font-size: 10px;\\n  font-weight: bold;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n:root {\\n  --mermaid-font-family: '\\\"trebuchet ms\\\", verdana, arial';\\n  --mermaid-font-family: \\\"Comic Sans MS\\\", \\\"Comic Sans\\\", cursive; }\\n\", \"\"]);\n\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Flowchart variables */\\n/* Sequence Diagram variables */\\n/* Gantt chart variables */\\n/* state colors */\\n.label {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  color: #333; }\\n\\n.label text {\\n  fill: #333; }\\n\\n.node rect,\\n.node circle,\\n.node ellipse,\\n.node polygon,\\n.node path {\\n  fill: #cde498;\\n  stroke: #13540c;\\n  stroke-width: 1px; }\\n\\n.node .label {\\n  text-align: center; }\\n\\n.node.clickable {\\n  cursor: pointer; }\\n\\n.arrowheadPath {\\n  fill: green; }\\n\\n.edgePath .path {\\n  stroke: green;\\n  stroke-width: 1.5px; }\\n\\n.edgeLabel {\\n  background-color: #e8e8e8;\\n  text-align: center; }\\n\\n.cluster rect {\\n  fill: #cdffb2;\\n  stroke: #6eaa49;\\n  stroke-width: 1px; }\\n\\n.cluster text {\\n  fill: #333; }\\n\\ndiv.mermaidTooltip {\\n  position: absolute;\\n  text-align: center;\\n  max-width: 200px;\\n  padding: 2px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 12px;\\n  background: #cdffb2;\\n  border: 1px solid #6eaa49;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 100; }\\n\\n.actor {\\n  stroke: #13540c;\\n  fill: #cde498; }\\n\\ntext.actor {\\n  fill: black;\\n  stroke: none; }\\n\\n.actor-line {\\n  stroke: grey; }\\n\\n.messageLine0 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n.messageLine1 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n#arrowhead {\\n  fill: #333; }\\n\\n.sequenceNumber {\\n  fill: white; }\\n\\n#sequencenumber {\\n  fill: #333; }\\n\\n#crosshead path {\\n  fill: #333 !important;\\n  stroke: #333 !important; }\\n\\n.messageText {\\n  fill: #333;\\n  stroke: none; }\\n\\n.labelBox {\\n  stroke: #326932;\\n  fill: #cde498; }\\n\\n.labelText {\\n  fill: black;\\n  stroke: none; }\\n\\n.loopText {\\n  fill: black;\\n  stroke: none; }\\n\\n.loopLine {\\n  stroke-width: 2;\\n  stroke-dasharray: '2 2';\\n  stroke: #326932; }\\n\\n.note {\\n  stroke: #6eaa49;\\n  fill: #fff5ad; }\\n\\n.noteText {\\n  fill: black;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 14px; }\\n\\n.activation0 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation1 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation2 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n/** Section styling */\\n.mermaid-main-font {\\n  font-family: \\\"trebuchet ms\\\", verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.section {\\n  stroke: none;\\n  opacity: 0.2; }\\n\\n.section0 {\\n  fill: #6eaa49; }\\n\\n.section2 {\\n  fill: #6eaa49; }\\n\\n.section1,\\n.section3 {\\n  fill: white;\\n  opacity: 0.2; }\\n\\n.sectionTitle0 {\\n  fill: #333; }\\n\\n.sectionTitle1 {\\n  fill: #333; }\\n\\n.sectionTitle2 {\\n  fill: #333; }\\n\\n.sectionTitle3 {\\n  fill: #333; }\\n\\n.sectionTitle {\\n  text-anchor: start;\\n  font-size: 11px;\\n  text-height: 14px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n/* Grid and axis */\\n.grid .tick {\\n  stroke: lightgrey;\\n  opacity: 0.8;\\n  shape-rendering: crispEdges; }\\n  .grid .tick text {\\n    font-family: 'trebuchet ms', verdana, arial;\\n    font-family: var(--mermaid-font-family); }\\n\\n.grid path {\\n  stroke-width: 0; }\\n\\n/* Today line */\\n.today {\\n  fill: none;\\n  stroke: red;\\n  stroke-width: 2px; }\\n\\n/* Task styling */\\n/* Default task */\\n.task {\\n  stroke-width: 2; }\\n\\n.taskText {\\n  text-anchor: middle;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskText:not([font-size]) {\\n  font-size: 11px; }\\n\\n.taskTextOutsideRight {\\n  fill: black;\\n  text-anchor: start;\\n  font-size: 11px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskTextOutsideLeft {\\n  fill: black;\\n  text-anchor: end;\\n  font-size: 11px; }\\n\\n/* Special case clickable */\\n.task.clickable {\\n  cursor: pointer; }\\n\\n.taskText.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideLeft.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideRight.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n/* Specific task settings for the sections*/\\n.taskText0,\\n.taskText1,\\n.taskText2,\\n.taskText3 {\\n  fill: white; }\\n\\n.task0,\\n.task1,\\n.task2,\\n.task3 {\\n  fill: #487e3a;\\n  stroke: #13540c; }\\n\\n.taskTextOutside0,\\n.taskTextOutside2 {\\n  fill: black; }\\n\\n.taskTextOutside1,\\n.taskTextOutside3 {\\n  fill: black; }\\n\\n/* Active task */\\n.active0,\\n.active1,\\n.active2,\\n.active3 {\\n  fill: #cde498;\\n  stroke: #13540c; }\\n\\n.activeText0,\\n.activeText1,\\n.activeText2,\\n.activeText3 {\\n  fill: black !important; }\\n\\n/* Completed task */\\n.done0,\\n.done1,\\n.done2,\\n.done3 {\\n  stroke: grey;\\n  fill: lightgrey;\\n  stroke-width: 2; }\\n\\n.doneText0,\\n.doneText1,\\n.doneText2,\\n.doneText3 {\\n  fill: black !important; }\\n\\n/* Tasks on the critical line */\\n.crit0,\\n.crit1,\\n.crit2,\\n.crit3 {\\n  stroke: #ff8888;\\n  fill: red;\\n  stroke-width: 2; }\\n\\n.activeCrit0,\\n.activeCrit1,\\n.activeCrit2,\\n.activeCrit3 {\\n  stroke: #ff8888;\\n  fill: #cde498;\\n  stroke-width: 2; }\\n\\n.doneCrit0,\\n.doneCrit1,\\n.doneCrit2,\\n.doneCrit3 {\\n  stroke: #ff8888;\\n  fill: lightgrey;\\n  stroke-width: 2;\\n  cursor: pointer;\\n  shape-rendering: crispEdges; }\\n\\n.milestone {\\n  transform: rotate(45deg) scale(0.8, 0.8); }\\n\\n.milestoneText {\\n  font-style: italic; }\\n\\n.doneCritText0,\\n.doneCritText1,\\n.doneCritText2,\\n.doneCritText3 {\\n  fill: black !important; }\\n\\n.activeCritText0,\\n.activeCritText1,\\n.activeCritText2,\\n.activeCritText3 {\\n  fill: black !important; }\\n\\n.titleText {\\n  text-anchor: middle;\\n  font-size: 18px;\\n  fill: black;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.classGroup text {\\n  fill: #13540c;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 10px; }\\n  g.classGroup text .title {\\n    font-weight: bolder; }\\n\\ng.clickable {\\n  cursor: pointer; }\\n\\ng.classGroup rect {\\n  fill: #cde498;\\n  stroke: #13540c; }\\n\\ng.classGroup line {\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n.classLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #cde498;\\n  opacity: 0.5; }\\n\\n.classLabel .label {\\n  fill: #13540c;\\n  font-size: 10px; }\\n\\n.relation {\\n  stroke: #13540c;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.dashed-line {\\n  stroke-dasharray: 3; }\\n\\n#compositionStart {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#compositionEnd {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#aggregationStart {\\n  fill: #cde498;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#aggregationEnd {\\n  fill: #cde498;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#dependencyStart {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#dependencyEnd {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#extensionStart {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n#extensionEnd {\\n  fill: #13540c;\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n.commit-id,\\n.commit-msg,\\n.branch-label {\\n  fill: lightgrey;\\n  color: lightgrey;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.pieTitleText {\\n  text-anchor: middle;\\n  font-size: 25px;\\n  fill: black;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.slice {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #13540c;\\n  stroke: none;\\n  font-size: 10px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #13540c;\\n  stroke: none;\\n  font-size: 10px; }\\n\\ng.stateGroup .state-title {\\n  font-weight: bolder;\\n  fill: black; }\\n\\ng.stateGroup rect {\\n  fill: #cde498;\\n  stroke: #13540c; }\\n\\ng.stateGroup line {\\n  stroke: #13540c;\\n  stroke-width: 1; }\\n\\n.transition {\\n  stroke: #13540c;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.stateGroup .composit {\\n  fill: white;\\n  border-bottom: 1px; }\\n\\n.stateGroup .alt-composit {\\n  fill: #e0e0e0;\\n  border-bottom: 1px; }\\n\\n.state-note {\\n  stroke: #6eaa49;\\n  fill: #fff5ad; }\\n  .state-note text {\\n    fill: black;\\n    stroke: none;\\n    font-size: 10px; }\\n\\n.stateLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #cde498;\\n  opacity: 0.5; }\\n\\n.stateLabel text {\\n  fill: black;\\n  font-size: 10px;\\n  font-weight: bold;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n:root {\\n  --mermaid-font-family: '\\\"trebuchet ms\\\", verdana, arial';\\n  --mermaid-font-family: \\\"Comic Sans MS\\\", \\\"Comic Sans\\\", cursive; }\\n\", \"\"]);\n\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Flowchart variables */\\n/* Sequence Diagram variables */\\n/* Gantt chart variables */\\n/* state colors */\\n.label {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  color: #333; }\\n\\n.label text {\\n  fill: #333; }\\n\\n.node rect,\\n.node circle,\\n.node ellipse,\\n.node polygon,\\n.node path {\\n  fill: #eee;\\n  stroke: #999;\\n  stroke-width: 1px; }\\n\\n.node .label {\\n  text-align: center; }\\n\\n.node.clickable {\\n  cursor: pointer; }\\n\\n.arrowheadPath {\\n  fill: #333333; }\\n\\n.edgePath .path {\\n  stroke: #666;\\n  stroke-width: 1.5px; }\\n\\n.edgeLabel {\\n  background-color: white;\\n  text-align: center; }\\n\\n.cluster rect {\\n  fill: #eaf2fb;\\n  stroke: #26a;\\n  stroke-width: 1px; }\\n\\n.cluster text {\\n  fill: #333; }\\n\\ndiv.mermaidTooltip {\\n  position: absolute;\\n  text-align: center;\\n  max-width: 200px;\\n  padding: 2px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 12px;\\n  background: #eaf2fb;\\n  border: 1px solid #26a;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 100; }\\n\\n.actor {\\n  stroke: #999;\\n  fill: #eee; }\\n\\ntext.actor {\\n  fill: #333;\\n  stroke: none; }\\n\\n.actor-line {\\n  stroke: #666; }\\n\\n.messageLine0 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n.messageLine1 {\\n  stroke-width: 1.5;\\n  stroke-dasharray: '2 2';\\n  stroke: #333; }\\n\\n#arrowhead {\\n  fill: #333; }\\n\\n.sequenceNumber {\\n  fill: white; }\\n\\n#sequencenumber {\\n  fill: #333; }\\n\\n#crosshead path {\\n  fill: #333 !important;\\n  stroke: #333 !important; }\\n\\n.messageText {\\n  fill: #333;\\n  stroke: none; }\\n\\n.labelBox {\\n  stroke: #999;\\n  fill: #eee; }\\n\\n.labelText {\\n  fill: #333;\\n  stroke: none; }\\n\\n.loopText {\\n  fill: #333;\\n  stroke: none; }\\n\\n.loopLine {\\n  stroke-width: 2;\\n  stroke-dasharray: '2 2';\\n  stroke: #999; }\\n\\n.note {\\n  stroke: #777700;\\n  fill: #ffa; }\\n\\n.noteText {\\n  fill: black;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 14px; }\\n\\n.activation0 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation1 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n.activation2 {\\n  fill: #f4f4f4;\\n  stroke: #666; }\\n\\n/** Section styling */\\n.mermaid-main-font {\\n  font-family: \\\"trebuchet ms\\\", verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.section {\\n  stroke: none;\\n  opacity: 0.2; }\\n\\n.section0 {\\n  fill: #80b3e6; }\\n\\n.section2 {\\n  fill: #80b3e6; }\\n\\n.section1,\\n.section3 {\\n  fill: white;\\n  opacity: 0.2; }\\n\\n.sectionTitle0 {\\n  fill: #333; }\\n\\n.sectionTitle1 {\\n  fill: #333; }\\n\\n.sectionTitle2 {\\n  fill: #333; }\\n\\n.sectionTitle3 {\\n  fill: #333; }\\n\\n.sectionTitle {\\n  text-anchor: start;\\n  font-size: 11px;\\n  text-height: 14px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n/* Grid and axis */\\n.grid .tick {\\n  stroke: #e6e6e6;\\n  opacity: 0.8;\\n  shape-rendering: crispEdges; }\\n  .grid .tick text {\\n    font-family: 'trebuchet ms', verdana, arial;\\n    font-family: var(--mermaid-font-family); }\\n\\n.grid path {\\n  stroke-width: 0; }\\n\\n/* Today line */\\n.today {\\n  fill: none;\\n  stroke: #d42;\\n  stroke-width: 2px; }\\n\\n/* Task styling */\\n/* Default task */\\n.task {\\n  stroke-width: 2; }\\n\\n.taskText {\\n  text-anchor: middle;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskText:not([font-size]) {\\n  font-size: 11px; }\\n\\n.taskTextOutsideRight {\\n  fill: #333;\\n  text-anchor: start;\\n  font-size: 11px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.taskTextOutsideLeft {\\n  fill: #333;\\n  text-anchor: end;\\n  font-size: 11px; }\\n\\n/* Special case clickable */\\n.task.clickable {\\n  cursor: pointer; }\\n\\n.taskText.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideLeft.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n.taskTextOutsideRight.clickable {\\n  cursor: pointer;\\n  fill: #003163 !important;\\n  font-weight: bold; }\\n\\n/* Specific task settings for the sections*/\\n.taskText0,\\n.taskText1,\\n.taskText2,\\n.taskText3 {\\n  fill: white; }\\n\\n.task0,\\n.task1,\\n.task2,\\n.task3 {\\n  fill: #26a;\\n  stroke: #1a4d80; }\\n\\n.taskTextOutside0,\\n.taskTextOutside2 {\\n  fill: #333; }\\n\\n.taskTextOutside1,\\n.taskTextOutside3 {\\n  fill: #333; }\\n\\n/* Active task */\\n.active0,\\n.active1,\\n.active2,\\n.active3 {\\n  fill: #eee;\\n  stroke: #1a4d80; }\\n\\n.activeText0,\\n.activeText1,\\n.activeText2,\\n.activeText3 {\\n  fill: #333 !important; }\\n\\n/* Completed task */\\n.done0,\\n.done1,\\n.done2,\\n.done3 {\\n  stroke: #666;\\n  fill: #bbb;\\n  stroke-width: 2; }\\n\\n.doneText0,\\n.doneText1,\\n.doneText2,\\n.doneText3 {\\n  fill: #333 !important; }\\n\\n/* Tasks on the critical line */\\n.crit0,\\n.crit1,\\n.crit2,\\n.crit3 {\\n  stroke: #b1361b;\\n  fill: #d42;\\n  stroke-width: 2; }\\n\\n.activeCrit0,\\n.activeCrit1,\\n.activeCrit2,\\n.activeCrit3 {\\n  stroke: #b1361b;\\n  fill: #eee;\\n  stroke-width: 2; }\\n\\n.doneCrit0,\\n.doneCrit1,\\n.doneCrit2,\\n.doneCrit3 {\\n  stroke: #b1361b;\\n  fill: #bbb;\\n  stroke-width: 2;\\n  cursor: pointer;\\n  shape-rendering: crispEdges; }\\n\\n.milestone {\\n  transform: rotate(45deg) scale(0.8, 0.8); }\\n\\n.milestoneText {\\n  font-style: italic; }\\n\\n.doneCritText0,\\n.doneCritText1,\\n.doneCritText2,\\n.doneCritText3 {\\n  fill: #333 !important; }\\n\\n.activeCritText0,\\n.activeCritText1,\\n.activeCritText2,\\n.activeCritText3 {\\n  fill: #333 !important; }\\n\\n.titleText {\\n  text-anchor: middle;\\n  font-size: 18px;\\n  fill: #333;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.classGroup text {\\n  fill: #999;\\n  stroke: none;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family);\\n  font-size: 10px; }\\n  g.classGroup text .title {\\n    font-weight: bolder; }\\n\\ng.clickable {\\n  cursor: pointer; }\\n\\ng.classGroup rect {\\n  fill: #eee;\\n  stroke: #999; }\\n\\ng.classGroup line {\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n.classLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #eee;\\n  opacity: 0.5; }\\n\\n.classLabel .label {\\n  fill: #999;\\n  font-size: 10px; }\\n\\n.relation {\\n  stroke: #999;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.dashed-line {\\n  stroke-dasharray: 3; }\\n\\n#compositionStart {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#compositionEnd {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#aggregationStart {\\n  fill: #eee;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#aggregationEnd {\\n  fill: #eee;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#dependencyStart {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#dependencyEnd {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#extensionStart {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n#extensionEnd {\\n  fill: #999;\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n.commit-id,\\n.commit-msg,\\n.branch-label {\\n  fill: lightgrey;\\n  color: lightgrey;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.pieTitleText {\\n  text-anchor: middle;\\n  font-size: 25px;\\n  fill: #333;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n.slice {\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #999;\\n  stroke: none;\\n  font-size: 10px;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\ng.stateGroup text {\\n  fill: #999;\\n  stroke: none;\\n  font-size: 10px; }\\n\\ng.stateGroup .state-title {\\n  font-weight: bolder;\\n  fill: black; }\\n\\ng.stateGroup rect {\\n  fill: #eee;\\n  stroke: #999; }\\n\\ng.stateGroup line {\\n  stroke: #999;\\n  stroke-width: 1; }\\n\\n.transition {\\n  stroke: #999;\\n  stroke-width: 1;\\n  fill: none; }\\n\\n.stateGroup .composit {\\n  fill: white;\\n  border-bottom: 1px; }\\n\\n.stateGroup .alt-composit {\\n  fill: #e0e0e0;\\n  border-bottom: 1px; }\\n\\n.state-note {\\n  stroke: #777700;\\n  fill: #ffa; }\\n  .state-note text {\\n    fill: black;\\n    stroke: none;\\n    font-size: 10px; }\\n\\n.stateLabel .box {\\n  stroke: none;\\n  stroke-width: 0;\\n  fill: #eee;\\n  opacity: 0.5; }\\n\\n.stateLabel text {\\n  fill: black;\\n  font-size: 10px;\\n  font-weight: bold;\\n  font-family: 'trebuchet ms', verdana, arial;\\n  font-family: var(--mermaid-font-family); }\\n\\n:root {\\n  --mermaid-font-family: '\\\"trebuchet ms\\\", verdana, arial';\\n  --mermaid-font-family: \\\"Comic Sans MS\\\", \\\"Comic Sans\\\", cursive; }\\n\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","let config = {};\n\nconst setConf = function(cnf) {\n  // Top level initially mermaid, gflow, sequenceDiagram and gantt\n  const lvl1Keys = Object.keys(cnf);\n  for (let i = 0; i < lvl1Keys.length; i++) {\n    if (typeof cnf[lvl1Keys[i]] === 'object' && cnf[lvl1Keys[i]] != null) {\n      const lvl2Keys = Object.keys(cnf[lvl1Keys[i]]);\n\n      for (let j = 0; j < lvl2Keys.length; j++) {\n        // logger.debug('Setting conf ', lvl1Keys[i], '-', lvl2Keys[j])\n        if (typeof config[lvl1Keys[i]] === 'undefined') {\n          config[lvl1Keys[i]] = {};\n        }\n        // logger.debug('Setting config: ' + lvl1Keys[i] + ' ' + lvl2Keys[j] + ' to ' + cnf[lvl1Keys[i]][lvl2Keys[j]])\n        config[lvl1Keys[i]][lvl2Keys[j]] = cnf[lvl1Keys[i]][lvl2Keys[j]];\n      }\n    } else {\n      config[lvl1Keys[i]] = cnf[lvl1Keys[i]];\n    }\n  }\n};\n\nexport const setConfig = conf => {\n  setConf(conf);\n};\nexport const getConfig = () => config;\n\nconst configApi = {\n  setConfig,\n  getConfig\n  // get conf() {\n  //   return config;\n  // }\n};\nexport default configApi;\n","import * as d3 from 'd3';\nimport { logger } from '../../logger';\nimport { getConfig } from '../../config';\nimport utils from '../../utils';\n\nconst MERMAID_DOM_ID_PREFIX = 'classid-';\n\nconst config = getConfig();\n\nlet relations = [];\nlet classes = {};\n\nlet funs = [];\n\nconst splitClassNameAndType = function(id) {\n  let genericType = '';\n  let className = id;\n\n  if (id.indexOf('~') > 0) {\n    let split = id.split('~');\n    className = split[0];\n    genericType = split[1];\n  }\n\n  return { className: className, type: genericType };\n};\n\n/**\n * Function called by parser when a node definition has been found.\n * @param id\n * @public\n */\nexport const addClass = function(id) {\n  let classId = splitClassNameAndType(id);\n  // Only add class if not exists\n  if (typeof classes[classId.className] !== 'undefined') return;\n\n  classes[classId.className] = {\n    id: classId.className,\n    type: classId.type,\n    cssClasses: [],\n    methods: [],\n    members: [],\n    annotations: []\n  };\n};\n\nexport const clear = function() {\n  relations = [];\n  classes = {};\n  funs = [];\n  funs.push(setupToolTips);\n};\n\nexport const getClass = function(id) {\n  return classes[id];\n};\nexport const getClasses = function() {\n  return classes;\n};\n\nexport const getRelations = function() {\n  return relations;\n};\n\nexport const addRelation = function(relation) {\n  logger.debug('Adding relation: ' + JSON.stringify(relation));\n  addClass(relation.id1);\n  addClass(relation.id2);\n\n  relation.id1 = splitClassNameAndType(relation.id1).className;\n  relation.id2 = splitClassNameAndType(relation.id2).className;\n\n  relations.push(relation);\n};\n\n/**\n * Adds an annotation to the specified class\n * Annotations mark special properties of the given type (like 'interface' or 'service')\n * @param className The class name\n * @param annotation The name of the annotation without any brackets\n * @public\n */\nexport const addAnnotation = function(className, annotation) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  classes[validatedClassName].annotations.push(annotation);\n};\n\n/**\n * Adds a member to the specified class\n * @param className The class name\n * @param member The full name of the member.\n * If the member is enclosed in <<brackets>> it is treated as an annotation\n * If the member is ending with a closing bracket ) it is treated as a method\n * Otherwise the member will be treated as a normal property\n * @public\n */\nexport const addMember = function(className, member) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  const theClass = classes[validatedClassName];\n\n  if (typeof member === 'string') {\n    // Member can contain white spaces, we trim them out\n    const memberString = member.trim();\n\n    if (memberString.startsWith('<<') && memberString.endsWith('>>')) {\n      // Remove leading and trailing brackets\n      theClass.annotations.push(memberString.substring(2, memberString.length - 2));\n    } else if (memberString.indexOf(')') > 0) {\n      theClass.methods.push(memberString);\n    } else if (memberString) {\n      theClass.members.push(memberString);\n    }\n  }\n};\n\nexport const addMembers = function(className, members) {\n  if (Array.isArray(members)) {\n    members.reverse();\n    members.forEach(member => addMember(className, member));\n  }\n};\n\nexport const cleanupLabel = function(label) {\n  if (label.substring(0, 1) === ':') {\n    return label.substr(2).trim();\n  } else {\n    return label.trim();\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setCssClass = function(ids, className) {\n  ids.split(',').forEach(function(_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].cssClasses.push(className);\n    }\n  });\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param tooltip Tooltip for the clickable element\n */\nexport const setLink = function(ids, linkStr, tooltip) {\n  ids.split(',').forEach(function(_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].link = utils.formatUrl(linkStr, config);\n\n      if (tooltip) {\n        classes[id].tooltip = utils.sanitize(tooltip, config);\n      }\n    }\n  });\n  setCssClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param tooltip Tooltip for the clickable element\n */\nexport const setClickEvent = function(ids, functionName, tooltip) {\n  ids.split(',').forEach(function(id) {\n    setClickFunc(id, functionName, tooltip);\n  });\n  setCssClass(ids, 'clickable');\n};\n\nconst setClickFunc = function(_id, functionName, tooltip) {\n  let id = _id;\n  let elemId = MERMAID_DOM_ID_PREFIX + id;\n\n  if (config.securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  if (typeof classes[id] !== 'undefined') {\n    if (tooltip) {\n      classes[id].tooltip = utils.sanitize(tooltip, config);\n    }\n\n    funs.push(function() {\n      const elem = document.querySelector(`[id=\"${elemId}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function() {\n            window[functionName](elemId);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\nexport const bindFunctions = function(element) {\n  funs.forEach(function(fun) {\n    fun(element);\n  });\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3\n};\n\nconst setupToolTips = function(element) {\n  let tooltipElem = d3.select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'mermaidTooltip')\n      .style('opacity', 0);\n  }\n\n  const svg = d3.select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function() {\n      const el = d3.select(this);\n      const title = el.attr('title');\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem\n        .transition()\n        .duration(200)\n        .style('opacity', '.9');\n      tooltipElem\n        .html(el.attr('title'))\n        .style('left', rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', rect.top - 14 + document.body.scrollTop + 'px');\n      el.classed('hover', true);\n    })\n    .on('mouseout', function() {\n      tooltipElem\n        .transition()\n        .duration(500)\n        .style('opacity', 0);\n      const el = d3.select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\nexport default {\n  addClass,\n  bindFunctions,\n  clear,\n  getClass,\n  getClasses,\n  addAnnotation,\n  getRelations,\n  addRelation,\n  addMember,\n  addMembers,\n  cleanupLabel,\n  lineType,\n  relationType,\n  setClickEvent,\n  setCssClass,\n  setLink\n};\n","import * as d3 from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { logger } from '../../logger';\nimport classDb from './classDb';\nimport utils from '../../utils';\nimport { parser } from './parser/classDiagram';\n\nparser.yy = classDb;\n\nconst MERMAID_DOM_ID_PREFIX = 'classid-';\nlet idCache = {};\n\nconst conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10\n};\n\n// Todo optimize\nconst getGraphId = function(label) {\n  const keys = Object.keys(idCache);\n\n  for (let i = 0; i < keys.length; i++) {\n    if (idCache[keys[i]].label === label) {\n      return keys[i];\n    }\n  }\n\n  return undefined;\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n */\nconst insertMarkers = function(elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,7 L18,13 V 1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,1 V 13 L18,7 Z'); // this is actual shape for arrowhead\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 5,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n\nlet edgeCount = 0;\nconst drawEdge = function(elem, path, relation) {\n  const getRelationType = function(type) {\n    switch (type) {\n      case classDb.relationType.AGGREGATION:\n        return 'aggregation';\n      case classDb.relationType.EXTENSION:\n        return 'extension';\n      case classDb.relationType.COMPOSITION:\n        return 'composition';\n      case classDb.relationType.DEPENDENCY:\n        return 'dependency';\n    }\n  };\n\n  path.points = path.points.filter(p => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = d3\n    .line()\n    .x(function(d) {\n      return d.x;\n    })\n    .y(function(d) {\n      return d.y;\n    })\n    .curve(d3.curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'relation');\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  if (relation.relation.lineType == 1) {\n    svgPath.attr('class', 'relation dashed-line');\n  }\n  if (relation.relation.type1 !== 'none') {\n    svgPath.attr(\n      'marker-start',\n      'url(' + url + '#' + getRelationType(relation.relation.type1) + 'Start' + ')'\n    );\n  }\n  if (relation.relation.type2 !== 'none') {\n    svgPath.attr(\n      'marker-end',\n      'url(' + url + '#' + getRelationType(relation.relation.type2) + 'End' + ')'\n    );\n  }\n\n  let x, y;\n  const l = path.points.length;\n  // Calculate Label position\n  let labalPosition = utils.calcLabelPosition(path.points);\n  x = labalPosition.x;\n  y = labalPosition.y;\n\n  let p1_card_x, p1_card_y;\n  // p1_card_padd_x = conf.padding * 2,\n  // p1_card_padd_y = conf.padding;\n  let p2_card_x, p2_card_y;\n  // p2_card_padd_x = conf.padding * 2,\n  // p2_card_padd_y = -conf.padding / 2;\n  if (l % 2 !== 0 && l > 1) {\n    let cardinality_1_point = utils.calcCardinalityPosition(\n      relation.relation.type1 !== 'none',\n      path.points,\n      path.points[0]\n    );\n    let cardinality_2_point = utils.calcCardinalityPosition(\n      relation.relation.type2 !== 'none',\n      path.points,\n      path.points[l - 1]\n    );\n\n    logger.debug('cardinality_1_point ' + JSON.stringify(cardinality_1_point));\n    logger.debug('cardinality_2_point ' + JSON.stringify(cardinality_2_point));\n\n    p1_card_x = cardinality_1_point.x;\n    p1_card_y = cardinality_1_point.y;\n    p2_card_x = cardinality_2_point.x;\n    p2_card_y = cardinality_2_point.y;\n  }\n\n  if (typeof relation.title !== 'undefined') {\n    const g = elem.append('g').attr('class', 'classLabel');\n    const label = g\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('fill', 'red')\n      .attr('text-anchor', 'middle')\n      .text(relation.title);\n\n    window.label = label;\n    const bounds = label.node().getBBox();\n\n    g.insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', bounds.x - conf.padding / 2)\n      .attr('y', bounds.y - conf.padding / 2)\n      .attr('width', bounds.width + conf.padding)\n      .attr('height', bounds.height + conf.padding);\n  }\n\n  logger.info('Rendering relation ' + JSON.stringify(relation));\n  if (typeof relation.relationTitle1 !== 'undefined' && relation.relationTitle1 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type1')\n      .attr('x', p1_card_x)\n      .attr('y', p1_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle1);\n  }\n  if (typeof relation.relationTitle2 !== 'undefined' && relation.relationTitle2 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type2')\n      .attr('x', p2_card_x)\n      .attr('y', p2_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle2);\n  }\n\n  edgeCount++;\n};\n\nconst drawClass = function(elem, classDef) {\n  logger.info('Rendering class ' + classDef);\n\n  let cssClassStr = 'classGroup ';\n  if (classDef.cssClasses.length > 0) {\n    cssClassStr = cssClassStr + classDef.cssClasses.join(' ');\n  }\n\n  const addTspan = function(textEl, txt, isFirst) {\n    let displayText = txt;\n    let cssStyle = '';\n    let methodEnd = txt.indexOf(')') + 1;\n\n    if (methodEnd > 1 && methodEnd <= txt.length) {\n      let classifier = txt.substring(methodEnd);\n\n      switch (classifier) {\n        case '*':\n          cssStyle = 'font-style:italic;';\n          break;\n        case '$':\n          cssStyle = 'text-decoration:underline;';\n          break;\n      }\n\n      displayText = txt.substring(0, methodEnd);\n    }\n\n    const tSpan = textEl\n      .append('tspan')\n      .attr('x', conf.padding)\n      .text(displayText);\n\n    if (cssStyle !== '') {\n      tSpan.attr('style', cssStyle);\n    }\n\n    if (!isFirst) {\n      tSpan.attr('dy', conf.textHeight);\n    }\n  };\n\n  const id = MERMAID_DOM_ID_PREFIX + classDef.id;\n  const classInfo = {\n    id: id,\n    label: classDef.id,\n    width: 0,\n    height: 0\n  };\n\n  // add class group\n  const g = elem\n    .append('g')\n    .attr('id', id)\n    .attr('class', cssClassStr);\n\n  // add title\n  let title;\n  if (classDef.link) {\n    title = g\n      .append('svg:a')\n      .attr('xlink:href', classDef.link)\n      .attr('target', '_blank')\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  } else {\n    title = g\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  }\n\n  // add annotations\n  let isFirst = true;\n  classDef.annotations.forEach(function(member) {\n    const titleText2 = title.append('tspan').text('«' + member + '»');\n    if (!isFirst) titleText2.attr('dy', conf.textHeight);\n    isFirst = false;\n  });\n\n  let classTitleString = classDef.id;\n\n  if (classDef.type !== undefined && classDef.type !== '') {\n    classTitleString += '<' + classDef.type + '>';\n  }\n\n  const classTitle = title\n    .append('tspan')\n    .text(classTitleString)\n    .attr('class', 'title');\n\n  // If class has annotations the title needs to have an offset of the text height\n  if (!isFirst) classTitle.attr('dy', conf.textHeight);\n\n  const titleHeight = title.node().getBBox().height;\n\n  const membersLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin / 2)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin / 2);\n\n  const members = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + conf.dividerMargin + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n  classDef.members.forEach(function(member) {\n    addTspan(members, member, isFirst);\n    isFirst = false;\n  });\n\n  const membersBox = members.node().getBBox();\n\n  const methodsLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin + membersBox.height)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin + membersBox.height);\n\n  const methods = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + 2 * conf.dividerMargin + membersBox.height + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n\n  classDef.methods.forEach(function(method) {\n    addTspan(methods, method, isFirst);\n    isFirst = false;\n  });\n\n  const classBox = g.node().getBBox();\n  const rect = g\n    .insert('rect', ':first-child')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', classBox.width + 2 * conf.padding)\n    .attr('height', classBox.height + conf.padding + 0.5 * conf.dividerMargin);\n\n  const rectWidth = rect.node().getBBox().width;\n\n  // Center title\n  // We subtract the width of each text element from the class box width and divide it by 2\n  title.node().childNodes.forEach(function(x) {\n    x.setAttribute('x', (rectWidth - x.getBBox().width) / 2);\n  });\n\n  if (classDef.tooltip) {\n    title.insert('title').text(classDef.tooltip);\n  }\n\n  membersLine.attr('x2', rectWidth);\n  methodsLine.attr('x2', rectWidth);\n\n  classInfo.width = rectWidth;\n  classInfo.height = classBox.height + conf.padding + 0.5 * conf.dividerMargin;\n\n  idCache[id] = classInfo;\n  return classInfo;\n};\n\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function(key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n * @param text\n * @param id\n */\nexport const draw = function(text, id) {\n  idCache = {};\n  parser.yy.clear();\n  parser.parse(text);\n\n  logger.info('Rendering diagram ' + text);\n\n  /// / Fetch the default direction, use TD if none was found\n  const diagram = d3.select(`[id='${id}']`);\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const g = new graphlib.Graph({\n    multigraph: true\n  });\n\n  // Set an object for the graph label\n  g.setGraph({\n    isMultiGraph: true\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  g.setDefaultEdgeLabel(function() {\n    return {};\n  });\n\n  const classes = classDb.getClasses();\n  const keys = Object.keys(classes);\n  for (let i = 0; i < keys.length; i++) {\n    const classDef = classes[keys[i]];\n    const node = drawClass(diagram, classDef);\n\n    // Add nodes to the graph. The first argument is the node id. The second is\n    // metadata about the node. In this case we're going to add labels to each of\n    // our nodes.\n    g.setNode(node.id, node);\n\n    logger.info('Org height: ' + node.height);\n  }\n\n  const relations = classDb.getRelations();\n  relations.forEach(function(relation) {\n    logger.info(\n      'tjoho' + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(getGraphId(relation.id1), getGraphId(relation.id2), {\n      relation: relation\n    });\n  });\n  dagre.layout(g);\n  g.nodes().forEach(function(v) {\n    if (typeof v !== 'undefined' && typeof g.node(v) !== 'undefined') {\n      logger.debug('Node ' + v + ': ' + JSON.stringify(g.node(v)));\n      d3.select('#' + v).attr(\n        'transform',\n        'translate(' +\n          (g.node(v).x - g.node(v).width / 2) +\n          ',' +\n          (g.node(v).y - g.node(v).height / 2) +\n          ' )'\n      );\n    }\n  });\n  g.edges().forEach(function(e) {\n    if (typeof e !== 'undefined' && typeof g.edge(e) !== 'undefined') {\n      logger.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(g.edge(e)));\n      drawEdge(diagram, g.edge(e), g.edge(e).relation);\n    }\n  });\n\n  diagram.attr('height', '100%');\n  diagram.attr('width', `${g.graph().width * 1.5 + 20}`);\n  diagram.attr('viewBox', '-10 -10 ' + (g.graph().width + 20) + ' ' + (g.graph().height + 20));\n};\n\nexport default {\n  setConf,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,13],$V1=[1,16],$V2=[1,14],$V3=[1,15],$V4=[1,17],$V5=[1,18],$V6=[1,20],$V7=[1,21],$V8=[1,22],$V9=[6,8],$Va=[1,31],$Vb=[1,32],$Vc=[1,33],$Vd=[1,34],$Ve=[1,35],$Vf=[1,36],$Vg=[6,8,14,20,28,31,32,33,34,35,36],$Vh=[6,8,12,14,20,24,28,31,32,33,34,35,36,52,53,54],$Vi=[28,52,53,54],$Vj=[28,35,36,52,53,54],$Vk=[28,31,32,33,34,52,53,54],$Vl=[6,8,14],$Vm=[1,59];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"mermaidDoc\":3,\"graphConfig\":4,\"CLASS_DIAGRAM\":5,\"NEWLINE\":6,\"statements\":7,\"EOF\":8,\"statement\":9,\"className\":10,\"alphaNumToken\":11,\"GENERICTYPE\":12,\"relationStatement\":13,\"LABEL\":14,\"classStatement\":15,\"methodStatement\":16,\"annotationStatement\":17,\"clickStatement\":18,\"CLASS\":19,\"STRUCT_START\":20,\"members\":21,\"STRUCT_STOP\":22,\"ANNOTATION_START\":23,\"ANNOTATION_END\":24,\"MEMBER\":25,\"SEPARATOR\":26,\"relation\":27,\"STR\":28,\"relationType\":29,\"lineType\":30,\"AGGREGATION\":31,\"EXTENSION\":32,\"COMPOSITION\":33,\"DEPENDENCY\":34,\"LINE\":35,\"DOTTED_LINE\":36,\"CALLBACK\":37,\"LINK\":38,\"commentToken\":39,\"textToken\":40,\"graphCodeTokens\":41,\"textNoTagsToken\":42,\"TAGSTART\":43,\"TAGEND\":44,\"==\":45,\"--\":46,\"PCT\":47,\"DEFAULT\":48,\"SPACE\":49,\"MINUS\":50,\"keywords\":51,\"UNICODE_TEXT\":52,\"NUM\":53,\"ALPHA\":54,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"CLASS_DIAGRAM\",6:\"NEWLINE\",8:\"EOF\",12:\"GENERICTYPE\",14:\"LABEL\",19:\"CLASS\",20:\"STRUCT_START\",22:\"STRUCT_STOP\",23:\"ANNOTATION_START\",24:\"ANNOTATION_END\",25:\"MEMBER\",26:\"SEPARATOR\",28:\"STR\",31:\"AGGREGATION\",32:\"EXTENSION\",33:\"COMPOSITION\",34:\"DEPENDENCY\",35:\"LINE\",36:\"DOTTED_LINE\",37:\"CALLBACK\",38:\"LINK\",41:\"graphCodeTokens\",43:\"TAGSTART\",44:\"TAGEND\",45:\"==\",46:\"--\",47:\"PCT\",48:\"DEFAULT\",49:\"SPACE\",50:\"MINUS\",51:\"keywords\",52:\"UNICODE_TEXT\",53:\"NUM\",54:\"ALPHA\"},\nproductions_: [0,[3,1],[4,4],[7,1],[7,2],[7,3],[10,2],[10,1],[10,3],[10,2],[9,1],[9,2],[9,1],[9,1],[9,1],[9,1],[15,2],[15,5],[17,4],[21,1],[21,2],[16,1],[16,2],[16,1],[16,1],[13,3],[13,4],[13,4],[13,5],[27,3],[27,2],[27,2],[27,1],[29,1],[29,1],[29,1],[29,1],[30,1],[30,1],[18,3],[18,4],[18,3],[18,4],[39,1],[39,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[42,1],[42,1],[42,1],[42,1],[11,1],[11,1],[11,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 6:\n this.$=$$[$0-1]+$$[$0]; \nbreak;\ncase 7:\n this.$=$$[$0]; \nbreak;\ncase 8:\n this.$=$$[$0-2]+'~'+$$[$0-1]+$$[$0]; \nbreak;\ncase 9:\n this.$=$$[$0-1]+'~'+$$[$0]; \nbreak;\ncase 10:\n yy.addRelation($$[$0]); \nbreak;\ncase 11:\n $$[$0-1].title =  yy.cleanupLabel($$[$0]); yy.addRelation($$[$0-1]);        \nbreak;\ncase 16:\nyy.addClass($$[$0]);\nbreak;\ncase 17:\n/*console.log($$[$0-3],JSON.stringify($$[$0-1]));*/yy.addClass($$[$0-3]);yy.addMembers($$[$0-3],$$[$0-1]);\nbreak;\ncase 18:\n yy.addAnnotation($$[$0],$$[$0-2]); \nbreak;\ncase 19:\n this.$ = [$$[$0]]; \nbreak;\ncase 20:\n $$[$0].push($$[$0-1]);this.$=$$[$0];\nbreak;\ncase 21:\n/*console.log('Rel found',$$[$0]);*/\nbreak;\ncase 22:\nyy.addMember($$[$0-1],yy.cleanupLabel($$[$0]));\nbreak;\ncase 23:\n/*console.warn('Member',$$[$0]);*/\nbreak;\ncase 24:\n/*console.log('sep found',$$[$0]);*/\nbreak;\ncase 25:\n this.$ = {'id1':$$[$0-2],'id2':$$[$0], relation:$$[$0-1], relationTitle1:'none', relationTitle2:'none'}; \nbreak;\ncase 26:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-1], relationTitle1:$$[$0-2], relationTitle2:'none'}\nbreak;\ncase 27:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-2], relationTitle1:'none', relationTitle2:$$[$0-1]}; \nbreak;\ncase 28:\n this.$ = {id1:$$[$0-4], id2:$$[$0], relation:$$[$0-2], relationTitle1:$$[$0-3], relationTitle2:$$[$0-1]} \nbreak;\ncase 29:\n this.$={type1:$$[$0-2],type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 30:\n this.$={type1:'none',type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 31:\n this.$={type1:$$[$0-1],type2:'none',lineType:$$[$0]}; \nbreak;\ncase 32:\n this.$={type1:'none',type2:'none',lineType:$$[$0]}; \nbreak;\ncase 33:\n this.$=yy.relationType.AGGREGATION;\nbreak;\ncase 34:\n this.$=yy.relationType.EXTENSION;\nbreak;\ncase 35:\n this.$=yy.relationType.COMPOSITION;\nbreak;\ncase 36:\n this.$=yy.relationType.DEPENDENCY;\nbreak;\ncase 37:\nthis.$=yy.lineType.LINE;\nbreak;\ncase 38:\nthis.$=yy.lineType.DOTTED_LINE;\nbreak;\ncase 39:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-1], $$[$0], undefined);\nbreak;\ncase 40:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 41:\nthis.$ = $$[$0-2];yy.setLink($$[$0-1], $$[$0], undefined);\nbreak;\ncase 42:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\n}\n},\ntable: [{3:1,4:2,5:[1,3]},{1:[3]},{1:[2,1]},{6:[1,4]},{7:5,9:6,10:12,11:19,13:7,15:8,16:9,17:10,18:11,19:$V0,23:$V1,25:$V2,26:$V3,37:$V4,38:$V5,52:$V6,53:$V7,54:$V8},{8:[1,23]},{6:[1,24],8:[2,3]},o($V9,[2,10],{14:[1,25]}),o($V9,[2,12]),o($V9,[2,13]),o($V9,[2,14]),o($V9,[2,15]),o($V9,[2,21],{27:26,29:29,30:30,14:[1,28],28:[1,27],31:$Va,32:$Vb,33:$Vc,34:$Vd,35:$Ve,36:$Vf}),{10:37,11:19,52:$V6,53:$V7,54:$V8},o($V9,[2,23]),o($V9,[2,24]),{11:38,52:$V6,53:$V7,54:$V8},{10:39,11:19,52:$V6,53:$V7,54:$V8},{10:40,11:19,52:$V6,53:$V7,54:$V8},o($Vg,[2,7],{11:19,10:41,12:[1,42],52:$V6,53:$V7,54:$V8}),o($Vh,[2,56]),o($Vh,[2,57]),o($Vh,[2,58]),{1:[2,2]},{7:43,8:[2,4],9:6,10:12,11:19,13:7,15:8,16:9,17:10,18:11,19:$V0,23:$V1,25:$V2,26:$V3,37:$V4,38:$V5,52:$V6,53:$V7,54:$V8},o($V9,[2,11]),{10:44,11:19,28:[1,45],52:$V6,53:$V7,54:$V8},{27:46,29:29,30:30,31:$Va,32:$Vb,33:$Vc,34:$Vd,35:$Ve,36:$Vf},o($V9,[2,22]),{30:47,35:$Ve,36:$Vf},o($Vi,[2,32],{29:48,31:$Va,32:$Vb,33:$Vc,34:$Vd}),o($Vj,[2,33]),o($Vj,[2,34]),o($Vj,[2,35]),o($Vj,[2,36]),o($Vk,[2,37]),o($Vk,[2,38]),o($V9,[2,16],{20:[1,49]}),{24:[1,50]},{28:[1,51]},{28:[1,52]},o($Vg,[2,6]),o($Vg,[2,9],{11:19,10:53,52:$V6,53:$V7,54:$V8}),{8:[2,5]},o($Vl,[2,25]),{10:54,11:19,52:$V6,53:$V7,54:$V8},{10:55,11:19,28:[1,56],52:$V6,53:$V7,54:$V8},o($Vi,[2,31],{29:57,31:$Va,32:$Vb,33:$Vc,34:$Vd}),o($Vi,[2,30]),{21:58,25:$Vm},{10:60,11:19,52:$V6,53:$V7,54:$V8},o($V9,[2,39],{28:[1,61]}),o($V9,[2,41],{28:[1,62]}),o($Vg,[2,8]),o($Vl,[2,27]),o($Vl,[2,26]),{10:63,11:19,52:$V6,53:$V7,54:$V8},o($Vi,[2,29]),{22:[1,64]},{21:65,22:[2,19],25:$Vm},o($V9,[2,18]),o($V9,[2,40]),o($V9,[2,42]),o($Vl,[2,28]),o($V9,[2,17]),{22:[2,20]}],\ndefaultActions: {2:[2,1],23:[2,2],43:[2,5],65:[2,20]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* do nothing */\nbreak;\ncase 1:return 6;\nbreak;\ncase 2:/* skip whitespace */\nbreak;\ncase 3:return 5;\nbreak;\ncase 4: this.begin(\"struct\"); /*console.log('Starting struct');*/return 20;\nbreak;\ncase 5: /*console.log('Ending struct');*/this.popState(); return 22;\nbreak;\ncase 6:/* nothing */\nbreak;\ncase 7: /*console.log('lex-member: ' + yy_.yytext);*/  return \"MEMBER\";\nbreak;\ncase 8:return 19;\nbreak;\ncase 9:return 37;\nbreak;\ncase 10:return 38;\nbreak;\ncase 11:return 23;\nbreak;\ncase 12:return 24;\nbreak;\ncase 13:this.begin(\"generic\");\nbreak;\ncase 14:this.popState();\nbreak;\ncase 15:return \"GENERICTYPE\";\nbreak;\ncase 16:this.begin(\"string\");\nbreak;\ncase 17:this.popState();\nbreak;\ncase 18:return \"STR\";\nbreak;\ncase 19:return 32;\nbreak;\ncase 20:return 32;\nbreak;\ncase 21:return 34;\nbreak;\ncase 22:return 34;\nbreak;\ncase 23:return 33;\nbreak;\ncase 24:return 31;\nbreak;\ncase 25:return 35;\nbreak;\ncase 26:return 36;\nbreak;\ncase 27:return 14;\nbreak;\ncase 28:return 50;\nbreak;\ncase 29:return 'DOT';\nbreak;\ncase 30:return 'PLUS';\nbreak;\ncase 31:return 47;\nbreak;\ncase 32:return 'EQUALS';\nbreak;\ncase 33:return 'EQUALS';\nbreak;\ncase 34:return 54;\nbreak;\ncase 35:return 'PUNCTUATION';\nbreak;\ncase 36:return 53;\nbreak;\ncase 37:return 52;\nbreak;\ncase 38:return 49;\nbreak;\ncase 39:return 8;\nbreak;\n}\n},\nrules: [/^(?:%%[^\\n]*\\n*)/,/^(?:\\n+)/,/^(?:\\s+)/,/^(?:classDiagram\\b)/,/^(?:[\\{])/,/^(?:\\})/,/^(?:[\\n])/,/^(?:[^\\{\\}\\n]*)/,/^(?:class\\b)/,/^(?:callback\\b)/,/^(?:link\\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:\\s*<\\|)/,/^(?:\\s*\\|>)/,/^(?:\\s*>)/,/^(?:\\s*<)/,/^(?:\\s*\\*)/,/^(?:\\s*o\\b)/,/^(?:--)/,/^(?:\\.\\.)/,/^(?::[^\\n;]+)/,/^(?:-)/,/^(?:\\.)/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\\w+)/,/^(?:[!\"#$%&'*+,-.`?\\\\\\/])/,/^(?:[0-9]+)/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"string\":{\"rules\":[17,18],\"inclusive\":false},\"generic\":{\"rules\":[14,15],\"inclusive\":false},\"struct\":{\"rules\":[5,6,7],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,8,9,10,11,12,13,16,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import dagreD3 from 'dagre-d3';\n\nfunction question(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const s = (w + h) * 0.9;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 }\n  ];\n  const shapeSvg = insertPolygonShape(parent, s, s, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction hexagon(parent, bbox, node) {\n  const f = 4;\n  const h = bbox.height;\n  const m = h / f;\n  const w = bbox.width + 2 * m;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction rect_left_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: -h / 2, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: -h / 2, y: -h },\n    { x: 0, y: -h / 2 }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction lean_right(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: h / 6, y: -h }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction lean_left(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (2 * h) / 6, y: 0 },\n    { x: w + h / 6, y: 0 },\n    { x: w - (2 * h) / 6, y: -h },\n    { x: -h / 6, y: -h }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: -h },\n    { x: h / 6, y: -h }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction inv_trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: h / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: (-2 * h) / 6, y: -h }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction rect_right_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + h / 2, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w + h / 2, y: -h },\n    { x: 0, y: -h }\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function(point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\nfunction stadium(parent, bbox, node) {\n  const h = bbox.height;\n  const w = bbox.width + h / 4;\n\n  const shapeSvg = parent\n    .insert('rect', ':first-child')\n    .attr('rx', h / 2)\n    .attr('ry', h / 2)\n    .attr('x', -w / 2)\n    .attr('y', -h / 2)\n    .attr('width', w)\n    .attr('height', h);\n\n  node.intersect = function(point) {\n    return dagreD3.intersect.rect(node, point);\n  };\n  return shapeSvg;\n}\n\nfunction cylinder(parent, bbox, node) {\n  const w = bbox.width;\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = bbox.height + ry;\n\n  const shape =\n    'M 0,' +\n    ry +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    -w +\n    ' 0 l 0,' +\n    h +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 l 0,' +\n    -h;\n\n  const shapeSvg = parent\n    .attr('label-offset-y', ry)\n    .insert('path', ':first-child')\n    .attr('d', shape)\n    .attr('transform', 'translate(' + -w / 2 + ',' + -(h / 2 + ry) + ')');\n\n  node.intersect = function(point) {\n    const pos = dagreD3.intersect.rect(node, point);\n    const x = pos.x - node.x;\n\n    if (\n      rx != 0 &&\n      (Math.abs(x) < node.width / 2 ||\n        (Math.abs(x) == node.width / 2 && Math.abs(pos.y - node.y) > node.height / 2 - ry))\n    ) {\n      // ellipsis equation: x*x / a*a + y*y / b*b = 1\n      // solve for y to get adjustion value for pos.y\n      let y = ry * ry * (1 - (x * x) / (rx * rx));\n      if (y != 0) y = Math.sqrt(y);\n      y = ry - y;\n      if (point.y - node.y > 0) y = -y;\n\n      pos.y += y;\n    }\n\n    return pos;\n  };\n\n  return shapeSvg;\n}\n\nexport function addToRender(render) {\n  render.shapes().question = question;\n  render.shapes().hexagon = hexagon;\n  render.shapes().stadium = stadium;\n  render.shapes().cylinder = cylinder;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().rect_left_inv_arrow = rect_left_inv_arrow;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_right = lean_right;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_left = lean_left;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().trapezoid = trapezoid;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().inv_trapezoid = inv_trapezoid;\n\n  // Add custom shape for box with inverted arrow on right side\n  render.shapes().rect_right_inv_arrow = rect_right_inv_arrow;\n}\n\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent\n    .insert('polygon', ':first-child')\n    .attr(\n      'points',\n      points\n        .map(function(d) {\n          return d.x + ',' + d.y;\n        })\n        .join(' ')\n    )\n    .attr('transform', 'translate(' + -w / 2 + ',' + h / 2 + ')');\n}\n\nexport default {\n  addToRender\n};\n","import * as d3 from 'd3';\nimport { logger } from '../../logger';\nimport utils from '../../utils';\nimport { getConfig } from '../../config';\n\n// const MERMAID_DOM_ID_PREFIX = 'mermaid-dom-id-';\nconst MERMAID_DOM_ID_PREFIX = '';\n\nconst config = getConfig();\nlet vertices = {};\nlet edges = [];\nlet classes = [];\nlet subGraphs = [];\nlet subGraphLookup = {};\nlet tooltips = {};\nlet subCount = 0;\nlet firstGraphFlag = true;\nlet direction;\n// Functions to be run after graph rendering\nlet funs = [];\n\n/**\n * Function called by parser when a node definition has been found\n * @param id\n * @param text\n * @param type\n * @param style\n * @param classes\n */\nexport const addVertex = function(_id, text, type, style, classes) {\n  let txt;\n  let id = _id;\n  if (typeof id === 'undefined') {\n    return;\n  }\n  if (id.trim().length === 0) {\n    return;\n  }\n\n  if (id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n\n  if (typeof vertices[id] === 'undefined') {\n    vertices[id] = { id: id, styles: [], classes: [] };\n  }\n  if (typeof text !== 'undefined') {\n    txt = utils.sanitize(text.trim(), config);\n\n    // strip quotes if string starts and ends with a quote\n    if (txt[0] === '\"' && txt[txt.length - 1] === '\"') {\n      txt = txt.substring(1, txt.length - 1);\n    }\n\n    vertices[id].text = txt;\n  } else {\n    if (!vertices[id].text) {\n      vertices[id].text = _id;\n    }\n  }\n  if (typeof type !== 'undefined') {\n    vertices[id].type = type;\n  }\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function(s) {\n        vertices[id].styles.push(s);\n      });\n    }\n  }\n  if (typeof classes !== 'undefined') {\n    if (classes !== null) {\n      classes.forEach(function(s) {\n        vertices[id].classes.push(s);\n      });\n    }\n  }\n};\n\n/**\n * Function called by parser when a link/edge definition has been found\n * @param start\n * @param end\n * @param type\n * @param linktext\n */\nexport const addSingleLink = function(_start, _end, type, linktext) {\n  let start = _start;\n  let end = _end;\n  if (start[0].match(/\\d/)) start = MERMAID_DOM_ID_PREFIX + start;\n  if (end[0].match(/\\d/)) end = MERMAID_DOM_ID_PREFIX + end;\n  logger.info('Got edge...', start, end);\n\n  const edge = { start: start, end: end, type: undefined, text: '' };\n  linktext = type.text;\n\n  if (typeof linktext !== 'undefined') {\n    edge.text = utils.sanitize(linktext.trim(), config);\n\n    // strip quotes if string starts and exnds with a quote\n    if (edge.text[0] === '\"' && edge.text[edge.text.length - 1] === '\"') {\n      edge.text = edge.text.substring(1, edge.text.length - 1);\n    }\n  }\n\n  if (typeof type !== 'undefined') {\n    edge.type = type.type;\n    edge.stroke = type.stroke;\n  }\n  edges.push(edge);\n};\nexport const addLink = function(_start, _end, type, linktext) {\n  let i, j;\n  for (i = 0; i < _start.length; i++) {\n    for (j = 0; j < _end.length; j++) {\n      addSingleLink(_start[i], _end[j], type, linktext);\n    }\n  }\n};\n\n/**\n * Updates a link's line interpolation algorithm\n * @param pos\n * @param interpolate\n */\nexport const updateLinkInterpolate = function(positions, interp) {\n  positions.forEach(function(pos) {\n    if (pos === 'default') {\n      edges.defaultInterpolate = interp;\n    } else {\n      edges[pos].interpolate = interp;\n    }\n  });\n};\n\n/**\n * Updates a link with a style\n * @param pos\n * @param style\n */\nexport const updateLink = function(positions, style) {\n  positions.forEach(function(pos) {\n    if (pos === 'default') {\n      edges.defaultStyle = style;\n    } else {\n      if (utils.isSubstringInArray('fill', style) === -1) {\n        style.push('fill:none');\n      }\n      edges[pos].style = style;\n    }\n  });\n};\n\nexport const addClass = function(id, style) {\n  if (typeof classes[id] === 'undefined') {\n    classes[id] = { id: id, styles: [] };\n  }\n\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function(s) {\n        classes[id].styles.push(s);\n      });\n    }\n  }\n};\n\n/**\n * Called by parser when a graph definition is found, stores the direction of the chart.\n * @param dir\n */\nexport const setDirection = function(dir) {\n  direction = dir;\n  if (direction.match(/.*</)) {\n    direction = 'RL';\n  }\n  if (direction.match(/.*\\^/)) {\n    direction = 'BT';\n  }\n  if (direction.match(/.*>/)) {\n    direction = 'LR';\n  }\n  if (direction.match(/.*v/)) {\n    direction = 'TB';\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function(ids, className) {\n  ids.split(',').forEach(function(_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].classes.push(className);\n    }\n\n    if (typeof subGraphLookup[id] !== 'undefined') {\n      subGraphLookup[id].classes.push(className);\n    }\n  });\n};\n\nconst setTooltip = function(ids, tooltip) {\n  ids.split(',').forEach(function(id) {\n    if (typeof tooltip !== 'undefined') {\n      tooltips[id] = utils.sanitize(tooltip, config);\n    }\n  });\n};\n\nconst setClickFun = function(_id, functionName) {\n  let id = _id;\n  if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n  if (config.securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  if (typeof vertices[id] !== 'undefined') {\n    funs.push(function() {\n      const elem = document.querySelector(`[id=\"${id}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function() {\n            window[functionName](id);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param tooltip Tooltip for the clickable element\n */\nexport const setLink = function(ids, linkStr, tooltip) {\n  ids.split(',').forEach(function(_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].link = utils.formatUrl(linkStr, config);\n    }\n  });\n  setTooltip(ids, tooltip);\n  setClass(ids, 'clickable');\n};\nexport const getTooltip = function(id) {\n  return tooltips[id];\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param tooltip Tooltip for the clickable element\n */\nexport const setClickEvent = function(ids, functionName, tooltip) {\n  ids.split(',').forEach(function(id) {\n    setClickFun(id, functionName);\n  });\n  setTooltip(ids, tooltip);\n  setClass(ids, 'clickable');\n};\n\nexport const bindFunctions = function(element) {\n  funs.forEach(function(fun) {\n    fun(element);\n  });\n};\nexport const getDirection = function() {\n  return direction.trim();\n};\n/**\n * Retrieval function for fetching the found nodes after parsing has completed.\n * @returns {{}|*|vertices}\n */\nexport const getVertices = function() {\n  return vertices;\n};\n\n/**\n * Retrieval function for fetching the found links after parsing has completed.\n * @returns {{}|*|edges}\n */\nexport const getEdges = function() {\n  return edges;\n};\n\n/**\n * Retrieval function for fetching the found class definitions after parsing has completed.\n * @returns {{}|*|classes}\n */\nexport const getClasses = function() {\n  return classes;\n};\n\nconst setupToolTips = function(element) {\n  let tooltipElem = d3.select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'mermaidTooltip')\n      .style('opacity', 0);\n  }\n\n  const svg = d3.select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function() {\n      const el = d3.select(this);\n      const title = el.attr('title');\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem\n        .transition()\n        .duration(200)\n        .style('opacity', '.9');\n      tooltipElem\n        .html(el.attr('title'))\n        .style('left', rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', rect.top - 14 + document.body.scrollTop + 'px');\n      el.classed('hover', true);\n    })\n    .on('mouseout', function() {\n      tooltipElem\n        .transition()\n        .duration(500)\n        .style('opacity', 0);\n      const el = d3.select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n */\nexport const clear = function() {\n  vertices = {};\n  classes = {};\n  edges = [];\n  funs = [];\n  funs.push(setupToolTips);\n  subGraphs = [];\n  subGraphLookup = {};\n  subCount = 0;\n  tooltips = [];\n  firstGraphFlag = true;\n};\n/**\n *\n * @returns {string}\n */\nexport const defaultStyle = function() {\n  return 'fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;';\n};\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n */\nexport const addSubGraph = function(_id, list, _title) {\n  let id = _id;\n  let title = _title;\n  if (_id === _title && _title.match(/\\s/)) {\n    id = undefined;\n  }\n  function uniq(a) {\n    const prims = { boolean: {}, number: {}, string: {} };\n    const objs = [];\n\n    return a.filter(function(item) {\n      const type = typeof item;\n      if (item.trim() === '') {\n        return false;\n      }\n      if (type in prims) {\n        return prims[type].hasOwnProperty(item) ? false : (prims[type][item] = true); // eslint-disable-line\n      } else {\n        return objs.indexOf(item) >= 0 ? false : objs.push(item);\n      }\n    });\n  }\n\n  let nodeList = [];\n\n  nodeList = uniq(nodeList.concat.apply(nodeList, list));\n  for (let i = 0; i < nodeList.length; i++) {\n    if (nodeList[i][0].match(/\\d/)) nodeList[i] = MERMAID_DOM_ID_PREFIX + nodeList[i];\n  }\n\n  id = id || 'subGraph' + subCount;\n  if (id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n  title = title || '';\n  title = utils.sanitize(title, config);\n  subCount = subCount + 1;\n  const subGraph = { id: id, nodes: nodeList, title: title.trim(), classes: [] };\n  subGraphs.push(subGraph);\n  subGraphLookup[id] = subGraph;\n  return id;\n};\n\nconst getPosForId = function(id) {\n  for (let i = 0; i < subGraphs.length; i++) {\n    if (subGraphs[i].id === id) {\n      return i;\n    }\n  }\n  return -1;\n};\nlet secCount = -1;\nconst posCrossRef = [];\nconst indexNodes2 = function(id, pos) {\n  const nodes = subGraphs[pos].nodes;\n  secCount = secCount + 1;\n  if (secCount > 2000) {\n    return;\n  }\n  posCrossRef[secCount] = pos;\n  // Check if match\n  if (subGraphs[pos].id === id) {\n    return {\n      result: true,\n      count: 0\n    };\n  }\n\n  let count = 0;\n  let posCount = 1;\n  while (count < nodes.length) {\n    const childPos = getPosForId(nodes[count]);\n    // Ignore regular nodes (pos will be -1)\n    if (childPos >= 0) {\n      const res = indexNodes2(id, childPos);\n      if (res.result) {\n        return {\n          result: true,\n          count: posCount + res.count\n        };\n      } else {\n        posCount = posCount + res.count;\n      }\n    }\n    count = count + 1;\n  }\n\n  return {\n    result: false,\n    count: posCount\n  };\n};\n\nexport const getDepthFirstPos = function(pos) {\n  return posCrossRef[pos];\n};\nexport const indexNodes = function() {\n  secCount = -1;\n  if (subGraphs.length > 0) {\n    indexNodes2('none', subGraphs.length - 1, 0);\n  }\n};\n\nexport const getSubGraphs = function() {\n  return subGraphs;\n};\n\nexport const firstGraph = () => {\n  if (firstGraphFlag) {\n    firstGraphFlag = false;\n    return true;\n  }\n  return false;\n};\n\nconst destructStartLink = _str => {\n  const str = _str.trim();\n\n  switch (str) {\n    case '<--':\n      return { type: 'arrow', stroke: 'normal' };\n    case 'x--':\n      return { type: 'arrow_cross', stroke: 'normal' };\n    case 'o--':\n      return { type: 'arrow_circle', stroke: 'normal' };\n    case '<-.':\n      return { type: 'arrow', stroke: 'dotted' };\n    case 'x-.':\n      return { type: 'arrow_cross', stroke: 'dotted' };\n    case 'o-.':\n      return { type: 'arrow_circle', stroke: 'dotted' };\n    case '<==':\n      return { type: 'arrow', stroke: 'thick' };\n    case 'x==':\n      return { type: 'arrow_cross', stroke: 'thick' };\n    case 'o==':\n      return { type: 'arrow_circle', stroke: 'thick' };\n    case '--':\n      return { type: 'arrow_open', stroke: 'normal' };\n    case '==':\n      return { type: 'arrow_open', stroke: 'thick' };\n    case '-.':\n      return { type: 'arrow_open', stroke: 'dotted' };\n  }\n};\n\nconst destructEndLink = _str => {\n  const str = _str.trim();\n\n  switch (str) {\n    case '--x':\n      return { type: 'arrow_cross', stroke: 'normal' };\n    case '-->':\n      return { type: 'arrow', stroke: 'normal' };\n    case '<-->':\n      return { type: 'double_arrow_point', stroke: 'normal' };\n    case 'x--x':\n      return { type: 'double_arrow_cross', stroke: 'normal' };\n    case 'o--o':\n      return { type: 'double_arrow_circle', stroke: 'normal' };\n    case 'o.-o':\n      return { type: 'double_arrow_circle', stroke: 'dotted' };\n    case '<==>':\n      return { type: 'double_arrow_point', stroke: 'thick' };\n    case 'o==o':\n      return { type: 'double_arrow_circle', stroke: 'thick' };\n    case 'x==x':\n      return { type: 'double_arrow_cross', stroke: 'thick' };\n    case 'x.-x':\n      return { type: 'double_arrow_cross', stroke: 'dotted' };\n    case 'x-.-x':\n      return { type: 'double_arrow_cross', stroke: 'dotted' };\n    case '<.->':\n      return { type: 'double_arrow_point', stroke: 'dotted' };\n    case '<-.->':\n      return { type: 'double_arrow_point', stroke: 'dotted' };\n    case 'o-.-o':\n      return { type: 'double_arrow_circle', stroke: 'dotted' };\n    case '--o':\n      return { type: 'arrow_circle', stroke: 'normal' };\n    case '---':\n      return { type: 'arrow_open', stroke: 'normal' };\n    case '-.-x':\n      return { type: 'arrow_cross', stroke: 'dotted' };\n    case '-.->':\n      return { type: 'arrow', stroke: 'dotted' };\n    case '-.-o':\n      return { type: 'arrow_circle', stroke: 'dotted' };\n    case '-.-':\n      return { type: 'arrow_open', stroke: 'dotted' };\n    case '.-x':\n      return { type: 'arrow_cross', stroke: 'dotted' };\n    case '.->':\n      return { type: 'arrow', stroke: 'dotted' };\n    case '.-o':\n      return { type: 'arrow_circle', stroke: 'dotted' };\n    case '.-':\n      return { type: 'arrow_open', stroke: 'dotted' };\n    case '==x':\n      return { type: 'arrow_cross', stroke: 'thick' };\n    case '==>':\n      return { type: 'arrow', stroke: 'thick' };\n    case '==o':\n      return { type: 'arrow_circle', stroke: 'thick' };\n    case '===':\n      return { type: 'arrow_open', stroke: 'thick' };\n  }\n};\n\nconst destructLink = (_str, _startStr) => {\n  const info = destructEndLink(_str);\n  let startInfo;\n  if (_startStr) {\n    startInfo = destructStartLink(_startStr);\n\n    if (startInfo.stroke !== info.stroke) {\n      return { type: 'INVALID', stroke: 'INVALID' };\n    }\n\n    if (startInfo.type === 'arrow_open') {\n      // -- xyz -->  - take arrow type form ending\n      startInfo.type = info.type;\n    } else {\n      // x-- xyz -->  - not supported\n      if (startInfo.type !== info.type) return { type: 'INVALID', stroke: 'INVALID' };\n\n      startInfo.type = 'double_' + startInfo.type;\n    }\n\n    if (startInfo.type === 'double_arrow') {\n      startInfo.type = 'double_arrow_point';\n    }\n\n    return startInfo;\n  }\n\n  return info;\n};\n\nexport default {\n  addVertex,\n  addLink,\n  updateLinkInterpolate,\n  updateLink,\n  addClass,\n  setDirection,\n  setClass,\n  getTooltip,\n  setClickEvent,\n  setLink,\n  bindFunctions,\n  getDirection,\n  getVertices,\n  getEdges,\n  getClasses,\n  clear,\n  defaultStyle,\n  addSubGraph,\n  getDepthFirstPos,\n  indexNodes,\n  getSubGraphs,\n  destructLink,\n  lex: {\n    firstGraph\n  }\n};\n","import graphlib from 'graphlib';\nimport * as d3 from 'd3';\n\nimport flowDb from './flowDb';\nimport flow from './parser/flow';\nimport { getConfig } from '../../config';\n\nconst newDagreD3 = true;\nimport dagreD3 from 'dagre-d3';\n// const newDagreD3 = false;\n\nimport addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { logger } from '../../logger';\nimport { interpolateToCurve } from '../../utils';\nimport flowChartShapes from './flowChartShapes';\n\nconst conf = {};\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Function that adds the vertices found in the graph definition to the graph to be rendered.\n * @param vert Object containing the vertices.\n * @param g The graph that is to be drawn.\n */\nexport const addVertices = function(vert, g, svgId) {\n  const svg = d3.select(`[id=\"${svgId}\"]`);\n  const keys = Object.keys(vert);\n\n  const styleFromStyleArr = function(styleStr, arr, { label }) {\n    if (!label) {\n      // Create a compound style definition from the style definitions found for the node in the graph definition\n      for (let i = 0; i < arr.length; i++) {\n        if (typeof arr[i] !== 'undefined') {\n          styleStr = styleStr + arr[i] + ';';\n        }\n      }\n    } else {\n      // create the style definition for the text, if property is a text-property\n      for (let i = 0; i < arr.length; i++) {\n        if (typeof arr[i] !== 'undefined') {\n          if (arr[i].match('^color:|^text-align:')) styleStr = styleStr + arr[i] + ';';\n        }\n      }\n    }\n    return styleStr;\n  };\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function(id) {\n    const vertex = vert[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     * @type {string}\n     */\n    let classStr = '';\n    if (vertex.classes.length > 0) {\n      classStr = vertex.classes.join(' ');\n    }\n\n    /**\n     * Variable for storing the extracted style for the vertex\n     * @type {string}\n     */\n    let style = '';\n    // Create a compound style definition from the style definitions found for the node in the graph definition\n    style = styleFromStyleArr(style, vertex.styles, { label: false });\n    let labelStyle = '';\n    labelStyle = styleFromStyleArr(labelStyle, vertex.styles, { label: true });\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    let vertexNode;\n    if (getConfig().flowchart.htmlLabels) {\n      // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n      const node = {\n        label: vertexText.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          s => `<i class='${s.replace(':', ' ')}'></i>`\n        )\n      };\n      vertexNode = addHtmlLabel(svg, node).node();\n      vertexNode.parentNode.removeChild(vertexNode);\n    } else {\n      const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n\n      const rows = vertexText.split(/<br[/]{0,1}>/);\n\n      for (let j = 0; j < rows.length; j++) {\n        const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n        tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        tspan.setAttribute('dy', '1em');\n        tspan.setAttribute('x', '1');\n        tspan.textContent = rows[j];\n        svgLabel.appendChild(tspan);\n      }\n      vertexNode = svgLabel;\n    }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'round':\n        radious = 5;\n        _shape = 'rect';\n        break;\n      case 'square':\n        _shape = 'rect';\n        break;\n      case 'diamond':\n        _shape = 'question';\n        break;\n      case 'hexagon':\n        _shape = 'hexagon';\n        break;\n      case 'odd':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'lean_right':\n        _shape = 'lean_right';\n        break;\n      case 'lean_left':\n        _shape = 'lean_left';\n        break;\n      case 'trapezoid':\n        _shape = 'trapezoid';\n        break;\n      case 'inv_trapezoid':\n        _shape = 'inv_trapezoid';\n        break;\n      case 'odd_right':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'circle':\n        _shape = 'circle';\n        break;\n      case 'ellipse':\n        _shape = 'ellipse';\n        break;\n      case 'stadium':\n        _shape = 'stadium';\n        break;\n      case 'cylinder':\n        _shape = 'cylinder';\n        break;\n      case 'group':\n        _shape = 'rect';\n        break;\n      default:\n        _shape = 'rect';\n    }\n    // Add the node\n    g.setNode(vertex.id, {\n      labelType: 'svg',\n      labelStyle: labelStyle,\n      shape: _shape,\n      label: vertexNode,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: style,\n      id: vertex.id\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph defninition\n * @param {Object} edges The edges to add to the graph\n * @param {Object} g The graph object\n */\nexport const addEdges = function(edges, g) {\n  let cnt = 0;\n\n  let defaultStyle;\n  if (typeof edges.defaultStyle !== 'undefined') {\n    defaultStyle = edges.defaultStyle.toString().replace(/,/g, ';');\n  }\n\n  edges.forEach(function(edge) {\n    cnt++;\n    const edgeData = {};\n\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    let style = '';\n    if (typeof edge.style !== 'undefined') {\n      edge.style.forEach(function(s) {\n        style = style + s + ';';\n      });\n    } else {\n      switch (edge.stroke) {\n        case 'normal':\n          style = 'fill:none';\n          if (typeof defaultStyle !== 'undefined') {\n            style = defaultStyle;\n          }\n          break;\n        case 'dotted':\n          style = 'fill:none;stroke-width:2px;stroke-dasharray:3;';\n          break;\n        case 'thick':\n          style = ' stroke-width: 3.5px;fill:none';\n          break;\n      }\n    }\n    edgeData.style = style;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, d3.curveLinear);\n    } else if (typeof edges.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edges.defaultInterpolate, d3.curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, d3.curveLinear);\n    }\n\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n\n      if (getConfig().flowchart.htmlLabels) {\n        edgeData.labelType = 'html';\n        edgeData.label = '<span class=\"edgeLabel\">' + edge.text + '</span>';\n      } else {\n        edgeData.labelType = 'text';\n        edgeData.label = edge.text.replace(/<br\\s*\\/?>/g, '\\n');\n\n        if (typeof edge.style === 'undefined') {\n          edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none';\n        }\n      }\n    }\n    // Add the edge to the graph\n    g.setEdge(edge.start, edge.end, edgeData, cnt);\n  });\n};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n * @returns {object} classDef styles\n */\nexport const getClasses = function(text) {\n  logger.info('Extracting classes');\n  flowDb.clear();\n  const parser = flow.parser;\n  parser.yy = flowDb;\n\n  // Parse the graph definition\n  parser.parse(text);\n  return flowDb.getClasses();\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n * @param text\n * @param id\n */\nexport const draw = function(text, id) {\n  logger.info('Drawing flowchart');\n  flowDb.clear();\n  const parser = flow.parser;\n  parser.yy = flowDb;\n\n  // Parse the graph definition\n  try {\n    parser.parse(text);\n  } catch (err) {\n    logger.debug('Parsing failed');\n  }\n\n  // Fetch the default direction, use TD if none was found\n  let dir = flowDb.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'TD';\n  }\n\n  // Create the input mermaid.graph\n  let g;\n  // Todo remove newDagreD3 when properly verified\n  if (newDagreD3) {\n    g = new graphlib.Graph({\n      multigraph: true,\n      compound: true\n    })\n      .setGraph({\n        rankdir: dir,\n        marginx: 8,\n        marginy: 8\n      })\n      .setDefaultEdgeLabel(function() {\n        return {};\n      });\n  } else {\n    g = new graphlib.Graph({\n      multigraph: true,\n      compound: true\n    })\n      .setGraph({\n        rankdir: dir,\n        marginx: 20,\n        marginy: 20\n      })\n      .setDefaultEdgeLabel(function() {\n        return {};\n      });\n  }\n\n  let subG;\n  const subGraphs = flowDb.getSubGraphs();\n  for (let i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n    flowDb.addVertex(subG.id, subG.title, 'group', undefined, subG.classes);\n  }\n\n  // Fetch the verices/nodes and edges/links from the parsed graph definition\n  const vert = flowDb.getVertices();\n\n  const edges = flowDb.getEdges();\n\n  let i = 0;\n  for (i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n\n    d3.selectAll('cluster').append('text');\n\n    for (let j = 0; j < subG.nodes.length; j++) {\n      g.setParent(subG.nodes[j], subG.id);\n    }\n  }\n  addVertices(vert, g, id);\n  addEdges(edges, g);\n\n  // Create the renderer\n  const Render = dagreD3.render;\n  const render = new Render();\n\n  // Add custom shapes\n  flowChartShapes.addToRender(render);\n\n  // Add our custom arrow - an empty arrowhead\n  render.arrows().none = function normal(parent, id, edge, type) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    const path = marker.append('path').attr('d', 'M 0 0 L 0 0 L 0 0 z');\n    dagreD3.util.applyStyle(path, edge[type + 'Style']);\n  };\n\n  // Override normal arrowhead defined in d3. Remove style & add class to allow css styling.\n  render.arrows().normal = function normal(parent, id) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    marker\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('class', 'arrowheadPath')\n      .style('stroke-width', 1)\n      .style('stroke-dasharray', '1,0');\n  };\n\n  // Set up an SVG group so that we can translate the final graph.\n  const svg = d3.select(`[id=\"${id}\"]`);\n\n  // Run the renderer. This is what draws the final graph.\n  const element = d3.select('#' + id + ' g');\n  render(element, g);\n\n  element.selectAll('g.node').attr('title', function() {\n    return flowDb.getTooltip(this.id);\n  });\n\n  const conf = getConfig().flowchart;\n  const padding = 8;\n  // Todo remove newDagreD3 when properly verified\n  if (newDagreD3) {\n    const svgBounds = svg.node().getBBox();\n    const width = svgBounds.width + padding * 2;\n    const height = svgBounds.height + padding * 2;\n    logger.debug(\n      `new ViewBox 0 0 ${width} ${height}`,\n      `translate(${padding - g._label.marginx}, ${padding - g._label.marginy})`\n    );\n\n    if (conf.useMaxWidth) {\n      svg.attr('width', '100%');\n      svg.attr('style', `max-width: ${width}px;`);\n    } else {\n      svg.attr('height', height);\n      svg.attr('width', width);\n    }\n\n    svg.attr('viewBox', `0 0 ${width} ${height}`);\n    svg\n      .select('g')\n      .attr('transform', `translate(${padding - g._label.marginx}, ${padding - svgBounds.y})`);\n  } else {\n    const width = g.maxX - g.minX + padding * 2;\n    const height = g.maxY - g.minY + padding * 2;\n\n    if (conf.useMaxWidth) {\n      svg.attr('width', '100%');\n      svg.attr('style', `max-width: ${width}px;`);\n    } else {\n      svg.attr('height', height);\n      svg.attr('width', width);\n    }\n\n    logger.debug(\n      `Org ViewBox 0 0 ${width} ${height}`,\n      `translate(${padding - g.minX}, ${padding - g.minY})\\n${location.href}`\n    );\n\n    svg.attr('viewBox', `0 0 ${width} ${height}`);\n    svg.select('g').attr('transform', `translate(${padding - g.minX}, ${padding - g.minY})`);\n    // svg.select('g').attr('transform', `translate(${padding - minX}, ${padding - minY})`);\n  }\n  // Index nodes\n  flowDb.indexNodes('subGraph' + i);\n\n  // reposition labels\n  for (i = 0; i < subGraphs.length; i++) {\n    subG = subGraphs[i];\n\n    if (subG.title !== 'undefined') {\n      const clusterRects = document.querySelectorAll('#' + id + ' [id=\"' + subG.id + '\"] rect');\n      const clusterEl = document.querySelectorAll('#' + id + ' [id=\"' + subG.id + '\"]');\n\n      const xPos = clusterRects[0].x.baseVal.value;\n      const yPos = clusterRects[0].y.baseVal.value;\n      const width = clusterRects[0].width.baseVal.value;\n      const cluster = d3.select(clusterEl[0]);\n      const te = cluster.select('.label');\n      te.attr('transform', `translate(${xPos + width / 2}, ${yPos + 14})`);\n      te.attr('id', id + 'Text');\n    }\n  }\n\n  // Add label rects for non html labels\n  if (!conf.htmlLabels) {\n    const labels = document.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  // If node has a link, wrap it in an anchor SVG object.\n  const keys = Object.keys(vert);\n  keys.forEach(function(key) {\n    const vertex = vert[key];\n\n    if (vertex.link) {\n      const node = d3.select('#' + id + ' [id=\"' + key + '\"]');\n      if (node) {\n        const link = document.createElementNS('http://www.w3.org/2000/svg', 'a');\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n\n        const linkNode = node.insert(function() {\n          return link;\n        }, ':first-child');\n\n        const shape = node.select('.label-container');\n        if (shape) {\n          linkNode.append(function() {\n            return shape.node();\n          });\n        }\n\n        const label = node.select('.label');\n        if (label) {\n          linkNode.append(function() {\n            return label.node();\n          });\n        }\n      }\n    }\n  });\n};\n\nexport default {\n  setConf,\n  addVertices,\n  addEdges,\n  getClasses,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,3],$V2=[1,5],$V3=[1,8,9,10,11,26,34,61,62,63,64,65,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$V4=[2,2],$V5=[1,12],$V6=[1,13],$V7=[1,14],$V8=[1,15],$V9=[1,22],$Va=[1,46],$Vb=[1,24],$Vc=[1,25],$Vd=[1,26],$Ve=[1,27],$Vf=[1,28],$Vg=[1,40],$Vh=[1,35],$Vi=[1,37],$Vj=[1,32],$Vk=[1,36],$Vl=[1,39],$Vm=[1,43],$Vn=[1,44],$Vo=[1,45],$Vp=[1,34],$Vq=[1,38],$Vr=[1,41],$Vs=[1,42],$Vt=[1,33],$Vu=[1,51],$Vv=[1,8,9,10,11,26,30,34,61,62,63,64,65,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$Vw=[1,55],$Vx=[1,54],$Vy=[1,56],$Vz=[8,9,11,55,56],$VA=[8,9,10,11,55,56],$VB=[8,9,10,11,35,55,56],$VC=[8,9,10,11,28,34,35,37,39,41,43,45,47,48,50,55,56,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$VD=[8,9,11,34,55,56,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$VE=[34,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$VF=[1,100],$VG=[1,121],$VH=[1,122],$VI=[1,123],$VJ=[1,124],$VK=[1,104],$VL=[1,95],$VM=[1,96],$VN=[1,92],$VO=[1,116],$VP=[1,117],$VQ=[1,118],$VR=[1,119],$VS=[1,120],$VT=[1,125],$VU=[1,126],$VV=[1,98],$VW=[1,106],$VX=[1,109],$VY=[1,107],$VZ=[1,108],$V_=[1,101],$V$=[1,114],$V01=[1,113],$V11=[1,97],$V21=[1,94],$V31=[1,103],$V41=[1,105],$V51=[1,110],$V61=[1,111],$V71=[1,112],$V81=[1,115],$V91=[8,9,10,11,26,30,34,61,62,63,64,65,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$Va1=[1,129],$Vb1=[1,133],$Vc1=[1,135],$Vd1=[1,136],$Ve1=[8,9,10,11,12,13,26,28,29,30,34,38,40,42,44,46,47,49,51,55,56,57,61,62,63,64,65,66,67,70,76,77,80,81,82,84,85,86,87,91,92,93,94,95,96],$Vf1=[8,9,10,11,13,34,66,76,77,80,81,82,84,85,91,92,93,94,95,96],$Vg1=[10,77],$Vh1=[1,201],$Vi1=[1,205],$Vj1=[1,202],$Vk1=[1,199],$Vl1=[1,196],$Vm1=[1,197],$Vn1=[1,198],$Vo1=[1,200],$Vp1=[1,203],$Vq1=[1,204],$Vr1=[1,206],$Vs1=[8,9,11],$Vt1=[1,222],$Vu1=[8,9,11,77],$Vv1=[8,9,10,11,61,73,76,77,80,81,82,83,84,85,86];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"mermaidDoc\":3,\"graphConfig\":4,\"document\":5,\"line\":6,\"statement\":7,\"SEMI\":8,\"NEWLINE\":9,\"SPACE\":10,\"EOF\":11,\"GRAPH\":12,\"DIR\":13,\"FirstStmtSeperator\":14,\"ending\":15,\"endToken\":16,\"spaceList\":17,\"spaceListNewline\":18,\"verticeStatement\":19,\"separator\":20,\"styleStatement\":21,\"linkStyleStatement\":22,\"classDefStatement\":23,\"classStatement\":24,\"clickStatement\":25,\"subgraph\":26,\"text\":27,\"SQS\":28,\"SQE\":29,\"end\":30,\"link\":31,\"node\":32,\"vertex\":33,\"AMP\":34,\"STYLE_SEPARATOR\":35,\"idString\":36,\"PS\":37,\"PE\":38,\"(-\":39,\"-)\":40,\"STADIUMSTART\":41,\"STADIUMEND\":42,\"CYLINDERSTART\":43,\"CYLINDEREND\":44,\"DIAMOND_START\":45,\"DIAMOND_STOP\":46,\"TAGEND\":47,\"TRAPSTART\":48,\"TRAPEND\":49,\"INVTRAPSTART\":50,\"INVTRAPEND\":51,\"linkStatement\":52,\"arrowText\":53,\"TESTSTR\":54,\"START_LINK\":55,\"LINK\":56,\"PIPE\":57,\"textToken\":58,\"STR\":59,\"keywords\":60,\"STYLE\":61,\"LINKSTYLE\":62,\"CLASSDEF\":63,\"CLASS\":64,\"CLICK\":65,\"DOWN\":66,\"UP\":67,\"textNoTags\":68,\"textNoTagsToken\":69,\"DEFAULT\":70,\"stylesOpt\":71,\"alphaNum\":72,\"HEX\":73,\"numList\":74,\"INTERPOLATE\":75,\"NUM\":76,\"COMMA\":77,\"style\":78,\"styleComponent\":79,\"ALPHA\":80,\"COLON\":81,\"MINUS\":82,\"UNIT\":83,\"BRKT\":84,\"DOT\":85,\"PCT\":86,\"TAGSTART\":87,\"alphaNumToken\":88,\"idStringToken\":89,\"alphaNumStatement\":90,\"PUNCTUATION\":91,\"UNICODE_TEXT\":92,\"PLUS\":93,\"EQUALS\":94,\"MULT\":95,\"UNDERSCORE\":96,\"graphCodeTokens\":97,\"ARROW_CROSS\":98,\"ARROW_POINT\":99,\"ARROW_CIRCLE\":100,\"ARROW_OPEN\":101,\"QUOTE\":102,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",8:\"SEMI\",9:\"NEWLINE\",10:\"SPACE\",11:\"EOF\",12:\"GRAPH\",13:\"DIR\",26:\"subgraph\",28:\"SQS\",29:\"SQE\",30:\"end\",34:\"AMP\",35:\"STYLE_SEPARATOR\",37:\"PS\",38:\"PE\",39:\"(-\",40:\"-)\",41:\"STADIUMSTART\",42:\"STADIUMEND\",43:\"CYLINDERSTART\",44:\"CYLINDEREND\",45:\"DIAMOND_START\",46:\"DIAMOND_STOP\",47:\"TAGEND\",48:\"TRAPSTART\",49:\"TRAPEND\",50:\"INVTRAPSTART\",51:\"INVTRAPEND\",54:\"TESTSTR\",55:\"START_LINK\",56:\"LINK\",57:\"PIPE\",59:\"STR\",61:\"STYLE\",62:\"LINKSTYLE\",63:\"CLASSDEF\",64:\"CLASS\",65:\"CLICK\",66:\"DOWN\",67:\"UP\",70:\"DEFAULT\",73:\"HEX\",75:\"INTERPOLATE\",76:\"NUM\",77:\"COMMA\",80:\"ALPHA\",81:\"COLON\",82:\"MINUS\",83:\"UNIT\",84:\"BRKT\",85:\"DOT\",86:\"PCT\",87:\"TAGSTART\",91:\"PUNCTUATION\",92:\"UNICODE_TEXT\",93:\"PLUS\",94:\"EQUALS\",95:\"MULT\",96:\"UNDERSCORE\",98:\"ARROW_CROSS\",99:\"ARROW_POINT\",100:\"ARROW_CIRCLE\",101:\"ARROW_OPEN\",102:\"QUOTE\"},\nproductions_: [0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,3],[15,2],[15,1],[16,1],[16,1],[16,1],[14,1],[14,1],[14,2],[18,2],[18,2],[18,1],[18,1],[17,2],[17,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[20,1],[20,1],[20,1],[19,3],[19,4],[19,2],[19,1],[32,1],[32,5],[32,3],[33,4],[33,6],[33,4],[33,4],[33,4],[33,4],[33,4],[33,6],[33,4],[33,4],[33,4],[33,4],[33,4],[33,1],[31,2],[31,3],[31,3],[31,1],[31,3],[52,1],[53,3],[27,1],[27,2],[27,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[60,1],[68,1],[68,2],[23,5],[23,5],[24,5],[25,5],[25,7],[25,5],[25,7],[21,5],[21,5],[22,5],[22,5],[22,9],[22,9],[22,7],[22,7],[74,1],[74,3],[71,1],[71,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[69,1],[69,1],[69,1],[69,1],[36,1],[36,2],[72,1],[72,2],[90,1],[90,1],[90,1],[90,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[89,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1],[97,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 2:\n this.$ = [];\nbreak;\ncase 3:\n\n\t    if($$[$0] !== []){\n\t        $$[$0-1].push($$[$0]);\n\t    }\n\t    this.$=$$[$0-1];\nbreak;\ncase 4: case 66: case 68: case 80: case 126: case 128: case 129:\nthis.$=$$[$0];\nbreak;\ncase 11:\n yy.setDirection($$[$0-1]);this.$ = $$[$0-1];\nbreak;\ncase 26:\n /* console.warn('finat vs', $$[$0-1].nodes); */ this.$=$$[$0-1].nodes\nbreak;\ncase 27: case 28: case 29: case 30: case 31:\nthis.$=[];\nbreak;\ncase 32:\nthis.$=yy.addSubGraph($$[$0-6],$$[$0-1],$$[$0-4]);\nbreak;\ncase 33:\nthis.$=yy.addSubGraph($$[$0-3],$$[$0-1],$$[$0-3]);\nbreak;\ncase 34:\nthis.$=yy.addSubGraph(undefined,$$[$0-1],undefined);\nbreak;\ncase 38:\n /* console.warn('vs',$$[$0-2].stmt,$$[$0]); */ yy.addLink($$[$0-2].stmt,$$[$0],$$[$0-1]); this.$ = { stmt: $$[$0], nodes: $$[$0].concat($$[$0-2].nodes) } \nbreak;\ncase 39:\n /* console.warn('vs',$$[$0-3].stmt,$$[$0-1]); */ yy.addLink($$[$0-3].stmt,$$[$0-1],$$[$0-2]); this.$ = { stmt: $$[$0-1], nodes: $$[$0-1].concat($$[$0-3].nodes) } \nbreak;\ncase 40:\n/*console.warn('noda', $$[$0-1]);*/ this.$ = {stmt: $$[$0-1], nodes:$$[$0-1] }\nbreak;\ncase 41:\n /*console.warn('noda', $$[$0]);*/ this.$ = {stmt: $$[$0], nodes:$$[$0] }\nbreak;\ncase 42:\n /* console.warn('nod', $$[$0]); */ this.$ = [$$[$0]];\nbreak;\ncase 43:\n this.$ = $$[$0-4].concat($$[$0]); /* console.warn('pip', $$[$0-4][0], $$[$0], this.$); */ \nbreak;\ncase 44:\nthis.$ = [$$[$0-2]];yy.setClass($$[$0-2],$$[$0])\nbreak;\ncase 45:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'square');\nbreak;\ncase 46:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'circle');\nbreak;\ncase 47:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'ellipse');\nbreak;\ncase 48:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'stadium');\nbreak;\ncase 49:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'cylinder');\nbreak;\ncase 50:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'round');\nbreak;\ncase 51:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'diamond');\nbreak;\ncase 52:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'hexagon');\nbreak;\ncase 53:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'odd');\nbreak;\ncase 54:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'trapezoid');\nbreak;\ncase 55:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'inv_trapezoid');\nbreak;\ncase 56:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_right');\nbreak;\ncase 57:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_left');\nbreak;\ncase 58:\n /*console.warn('h: ', $$[$0]);*/this.$ = $$[$0];yy.addVertex($$[$0]);\nbreak;\ncase 59:\n$$[$0-1].text = $$[$0];this.$ = $$[$0-1];\nbreak;\ncase 60: case 61:\n$$[$0-2].text = $$[$0-1];this.$ = $$[$0-2];\nbreak;\ncase 62:\nthis.$ = $$[$0];\nbreak;\ncase 63:\nvar inf = yy.destructLink($$[$0], $$[$0-2]); this.$ = {\"type\":inf.type,\"stroke\":inf.stroke,\"text\":$$[$0-1]};\nbreak;\ncase 64:\nvar inf = yy.destructLink($$[$0]);this.$ = {\"type\":inf.type,\"stroke\":inf.stroke};\nbreak;\ncase 65:\nthis.$ = $$[$0-1];\nbreak;\ncase 67: case 81: case 127:\nthis.$=$$[$0-1]+''+$$[$0];\nbreak;\ncase 82: case 83:\nthis.$ = $$[$0-4];yy.addClass($$[$0-2],$$[$0]);\nbreak;\ncase 84:\nthis.$ = $$[$0-4];yy.setClass($$[$0-2], $$[$0]);\nbreak;\ncase 85:\nthis.$ = $$[$0-4];yy.setClickEvent($$[$0-2], $$[$0], undefined);\nbreak;\ncase 86:\nthis.$ = $$[$0-6];yy.setClickEvent($$[$0-4], $$[$0-2], $$[$0])       ;\nbreak;\ncase 87:\nthis.$ = $$[$0-4];yy.setLink($$[$0-2], $$[$0], undefined);\nbreak;\ncase 88:\nthis.$ = $$[$0-6];yy.setLink($$[$0-4], $$[$0-2], $$[$0]       );\nbreak;\ncase 89:\nthis.$ = $$[$0-4];yy.addVertex($$[$0-2],undefined,undefined,$$[$0]);\nbreak;\ncase 90: case 92:\nthis.$ = $$[$0-4];yy.updateLink($$[$0-2],$$[$0]);\nbreak;\ncase 91:\nthis.$ = $$[$0-4];yy.updateLink([$$[$0-2]],$$[$0]);\nbreak;\ncase 93:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate([$$[$0-6]],$$[$0-2]);yy.updateLink([$$[$0-6]],$$[$0]);\nbreak;\ncase 94:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate($$[$0-6],$$[$0-2]);yy.updateLink($$[$0-6],$$[$0]);\nbreak;\ncase 95:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate([$$[$0-4]],$$[$0]);\nbreak;\ncase 96:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate($$[$0-4],$$[$0]);\nbreak;\ncase 97: case 99:\nthis.$ = [$$[$0]]\nbreak;\ncase 98: case 100:\n$$[$0-2].push($$[$0]);this.$ = $$[$0-2];\nbreak;\ncase 102:\nthis.$ = $$[$0-1] + $$[$0];\nbreak;\ncase 124:\nthis.$=$$[$0]\nbreak;\ncase 125:\nthis.$=$$[$0-1]+''+$$[$0]\nbreak;\ncase 130:\nthis.$='v';\nbreak;\ncase 131:\nthis.$='-';\nbreak;\n}\n},\ntable: [{3:1,4:2,9:$V0,10:$V1,12:$V2},{1:[3]},o($V3,$V4,{5:6}),{4:7,9:$V0,10:$V1,12:$V2},{4:8,9:$V0,10:$V1,12:$V2},{13:[1,9]},{1:[2,1],6:10,7:11,8:$V5,9:$V6,10:$V7,11:$V8,19:16,21:17,22:18,23:19,24:20,25:21,26:$V9,32:23,33:29,34:$Va,36:30,61:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},o($V3,[2,9]),o($V3,[2,10]),{8:[1,48],9:[1,49],10:$Vu,14:47,17:50},o($Vv,[2,3]),o($Vv,[2,4]),o($Vv,[2,5]),o($Vv,[2,6]),o($Vv,[2,7]),o($Vv,[2,8]),{8:$Vw,9:$Vx,11:$Vy,20:52,31:53,52:57,55:[1,58],56:[1,59]},{8:$Vw,9:$Vx,11:$Vy,20:60},{8:$Vw,9:$Vx,11:$Vy,20:61},{8:$Vw,9:$Vx,11:$Vy,20:62},{8:$Vw,9:$Vx,11:$Vy,20:63},{8:$Vw,9:$Vx,11:$Vy,20:64},{8:$Vw,9:$Vx,10:[1,65],11:$Vy,20:66},o($Vz,[2,41],{17:67,10:$Vu}),{10:[1,68]},{10:[1,69]},{10:[1,70]},{10:[1,71]},{10:[1,72]},o($VA,[2,42],{35:[1,73]}),o($VB,[2,58],{89:83,28:[1,74],34:$Va,37:[1,75],39:[1,76],41:[1,77],43:[1,78],45:[1,79],47:[1,80],48:[1,81],50:[1,82],66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt}),o($VC,[2,124]),o($VC,[2,145]),o($VC,[2,146]),o($VC,[2,147]),o($VC,[2,148]),o($VC,[2,149]),o($VC,[2,150]),o($VC,[2,151]),o($VC,[2,152]),o($VC,[2,153]),o($VC,[2,154]),o($VC,[2,155]),o($VC,[2,156]),o($VC,[2,157]),o($VC,[2,158]),o($VC,[2,159]),o($V3,[2,11]),o($V3,[2,17]),o($V3,[2,18]),{9:[1,84]},o($VD,[2,25],{17:85,10:$Vu}),o($Vv,[2,26]),{32:86,33:29,34:$Va,36:30,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},o($Vv,[2,35]),o($Vv,[2,36]),o($Vv,[2,37]),o($VE,[2,62],{53:87,54:[1,88],57:[1,89]}),{10:$VF,12:$VG,13:$VH,26:$VI,27:90,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o([34,54,57,66,76,77,80,81,82,84,85,91,92,93,94,95,96],[2,64]),o($Vv,[2,27]),o($Vv,[2,28]),o($Vv,[2,29]),o($Vv,[2,30]),o($Vv,[2,31]),{10:$VF,12:$VG,13:$VH,26:$VI,27:127,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($V91,$V4,{5:128}),o($Vz,[2,40],{34:$Va1}),{13:$Vb1,34:$VK,66:$Vc1,72:130,73:[1,131],76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{70:[1,137],74:138,76:[1,139]},{13:$Vb1,34:$VK,66:$Vc1,70:[1,140],72:141,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{13:$Vb1,34:$VK,66:$Vc1,72:142,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{13:$Vb1,34:$VK,66:$Vc1,72:143,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{34:$Va,36:144,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},{10:$VF,12:$VG,13:$VH,26:$VI,27:145,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:147,30:$VJ,34:$VK,37:[1,146],47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:148,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:149,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:150,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:151,30:$VJ,34:$VK,45:[1,152],47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:153,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:154,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:155,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VC,[2,125]),o($V3,[2,19]),o($VD,[2,24]),o($Vz,[2,38],{17:156,10:$Vu}),o($VE,[2,59],{10:[1,157]}),{10:[1,158]},{10:$VF,12:$VG,13:$VH,26:$VI,27:159,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,47:$VL,55:$VM,56:[1,160],58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($Ve1,[2,66]),o($Ve1,[2,68]),o($Ve1,[2,114]),o($Ve1,[2,115]),o($Ve1,[2,116]),o($Ve1,[2,117]),o($Ve1,[2,118]),o($Ve1,[2,119]),o($Ve1,[2,120]),o($Ve1,[2,121]),o($Ve1,[2,122]),o($Ve1,[2,123]),o($Ve1,[2,132]),o($Ve1,[2,133]),o($Ve1,[2,134]),o($Ve1,[2,135]),o($Ve1,[2,136]),o($Ve1,[2,137]),o($Ve1,[2,138]),o($Ve1,[2,139]),o($Ve1,[2,140]),o($Ve1,[2,141]),o($Ve1,[2,142]),o($Ve1,[2,143]),o($Ve1,[2,144]),o($Ve1,[2,69]),o($Ve1,[2,70]),o($Ve1,[2,71]),o($Ve1,[2,72]),o($Ve1,[2,73]),o($Ve1,[2,74]),o($Ve1,[2,75]),o($Ve1,[2,76]),o($Ve1,[2,77]),o($Ve1,[2,78]),o($Ve1,[2,79]),{8:$Vw,9:$Vx,10:$VF,11:$Vy,12:$VG,13:$VH,20:163,26:$VI,28:[1,162],30:$VJ,34:$VK,47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{6:10,7:11,8:$V5,9:$V6,10:$V7,11:$V8,19:16,21:17,22:18,23:19,24:20,25:21,26:$V9,30:[1,164],32:23,33:29,34:$Va,36:30,61:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},{10:$Vu,17:165},{10:[1,166],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:167,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:[1,168]},o($Vf1,[2,126]),o($Vf1,[2,128]),o($Vf1,[2,129]),o($Vf1,[2,130]),o($Vf1,[2,131]),{10:[1,169]},{10:[1,170],77:[1,171]},o($Vg1,[2,97]),{10:[1,172]},{10:[1,173],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:167,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:[1,174],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:167,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:[1,175],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:167,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VA,[2,44],{89:83,34:$Va,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt}),{10:$VF,12:$VG,13:$VH,26:$VI,29:[1,176],30:$VJ,34:$VK,47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:177,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,38:[1,178],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,40:[1,179],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,42:[1,180],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,44:[1,181],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,46:[1,182],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,27:183,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,29:[1,184],30:$VJ,34:$VK,47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,47:$VL,49:[1,185],51:[1,186],55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,47:$VL,49:[1,188],51:[1,187],55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($Vz,[2,39],{34:$Va1}),o($VE,[2,61]),o($VE,[2,60]),{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,47:$VL,55:$VM,57:[1,189],58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VE,[2,63]),o($Ve1,[2,67]),{10:$VF,12:$VG,13:$VH,26:$VI,27:190,30:$VJ,34:$VK,47:$VL,55:$VM,58:91,59:$VN,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($V91,$V4,{5:191}),o($Vv,[2,34]),{33:192,34:$Va,36:30,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},{10:$Vh1,61:$Vi1,71:193,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},o($Vf1,[2,127]),{10:$Vh1,61:$Vi1,71:207,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{10:$Vh1,61:$Vi1,71:208,73:$Vj1,75:[1,209],76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{10:$Vh1,61:$Vi1,71:210,73:$Vj1,75:[1,211],76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{76:[1,212]},{10:$Vh1,61:$Vi1,71:213,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{10:$Vh1,61:$Vi1,71:214,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{13:$Vb1,34:$VK,66:$Vc1,72:215,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{13:$Vb1,34:$VK,59:[1,217],66:$Vc1,72:216,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VB,[2,45]),{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,38:[1,218],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VB,[2,50]),o($VB,[2,47]),o($VB,[2,48]),o($VB,[2,49]),o($VB,[2,51]),{10:$VF,12:$VG,13:$VH,26:$VI,30:$VJ,34:$VK,46:[1,219],47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},o($VB,[2,53]),o($VB,[2,54]),o($VB,[2,56]),o($VB,[2,55]),o($VB,[2,57]),o([10,34,66,76,77,80,81,82,84,85,91,92,93,94,95,96],[2,65]),{10:$VF,12:$VG,13:$VH,26:$VI,29:[1,220],30:$VJ,34:$VK,47:$VL,55:$VM,58:161,60:102,61:$VO,62:$VP,63:$VQ,64:$VR,65:$VS,66:$VT,67:$VU,69:93,70:$VV,76:$VW,77:$VX,80:$VY,81:$VZ,82:$V_,84:$V$,85:$V01,86:$V11,87:$V21,88:99,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{6:10,7:11,8:$V5,9:$V6,10:$V7,11:$V8,19:16,21:17,22:18,23:19,24:20,25:21,26:$V9,30:[1,221],32:23,33:29,34:$Va,36:30,61:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},o($VA,[2,43]),o($Vs1,[2,89],{77:$Vt1}),o($Vu1,[2,99],{79:223,10:$Vh1,61:$Vi1,73:$Vj1,76:$Vk1,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1}),o($Vv1,[2,101]),o($Vv1,[2,103]),o($Vv1,[2,104]),o($Vv1,[2,105]),o($Vv1,[2,106]),o($Vv1,[2,107]),o($Vv1,[2,108]),o($Vv1,[2,109]),o($Vv1,[2,110]),o($Vv1,[2,111]),o($Vv1,[2,112]),o($Vv1,[2,113]),o($Vs1,[2,90],{77:$Vt1}),o($Vs1,[2,91],{77:$Vt1}),{10:[1,224]},o($Vs1,[2,92],{77:$Vt1}),{10:[1,225]},o($Vg1,[2,98]),o($Vs1,[2,82],{77:$Vt1}),o($Vs1,[2,83],{77:$Vt1}),o($Vs1,[2,84],{88:134,90:167,13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81}),o($Vs1,[2,85],{88:134,90:167,10:[1,226],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81}),o($Vs1,[2,87],{10:[1,227]}),{38:[1,228]},{46:[1,229]},{8:$Vw,9:$Vx,11:$Vy,20:230},o($Vv,[2,33]),{10:$Vh1,61:$Vi1,73:$Vj1,76:$Vk1,78:231,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},o($Vv1,[2,102]),{13:$Vb1,34:$VK,66:$Vc1,72:232,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{13:$Vb1,34:$VK,66:$Vc1,72:233,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,88:134,90:132,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81},{59:[1,234]},{59:[1,235]},o($VB,[2,46]),o($VB,[2,52]),o($V91,$V4,{5:236}),o($Vu1,[2,100],{79:223,10:$Vh1,61:$Vi1,73:$Vj1,76:$Vk1,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1}),o($Vs1,[2,95],{88:134,90:167,10:[1,237],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81}),o($Vs1,[2,96],{88:134,90:167,10:[1,238],13:$Vb1,34:$VK,66:$Vc1,76:$VW,77:$VX,80:$VY,81:$VZ,82:$Vd1,84:$V$,85:$V01,91:$V31,92:$V41,93:$V51,94:$V61,95:$V71,96:$V81}),o($Vs1,[2,86]),o($Vs1,[2,88]),{6:10,7:11,8:$V5,9:$V6,10:$V7,11:$V8,19:16,21:17,22:18,23:19,24:20,25:21,26:$V9,30:[1,239],32:23,33:29,34:$Va,36:30,61:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,66:$Vg,76:$Vh,77:$Vi,80:$Vj,81:$Vk,82:$Vl,84:$Vm,85:$Vn,89:31,91:$Vo,92:$Vp,93:$Vq,94:$Vr,95:$Vs,96:$Vt},{10:$Vh1,61:$Vi1,71:240,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},{10:$Vh1,61:$Vi1,71:241,73:$Vj1,76:$Vk1,78:194,79:195,80:$Vl1,81:$Vm1,82:$Vn1,83:$Vo1,84:$Vp1,85:$Vq1,86:$Vr1},o($Vv,[2,32]),o($Vs1,[2,93],{77:$Vt1}),o($Vs1,[2,94],{77:$Vt1})],\ndefaultActions: {},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* do nothing */\nbreak;\ncase 1:this.begin(\"string\");\nbreak;\ncase 2:this.popState();\nbreak;\ncase 3:return \"STR\";\nbreak;\ncase 4:return 61;\nbreak;\ncase 5:return 70;\nbreak;\ncase 6:return 62;\nbreak;\ncase 7:return 75;\nbreak;\ncase 8:return 63;\nbreak;\ncase 9:return 64;\nbreak;\ncase 10:return 65;\nbreak;\ncase 11:if(yy.lex.firstGraph()){this.begin(\"dir\");}  return 12;\nbreak;\ncase 12:return 26;\nbreak;\ncase 13:return 30;\nbreak;\ncase 14:   this.popState();  return 13; \nbreak;\ncase 15:   this.popState();  return 13; \nbreak;\ncase 16:   this.popState();  return 13; \nbreak;\ncase 17:   this.popState();  return 13; \nbreak;\ncase 18:   this.popState();  return 13; \nbreak;\ncase 19:   this.popState();  return 13; \nbreak;\ncase 20:   this.popState();  return 13; \nbreak;\ncase 21:   this.popState();  return 13; \nbreak;\ncase 22:   this.popState();  return 13; \nbreak;\ncase 23:   this.popState();  return 13; \nbreak;\ncase 24: return 76;\nbreak;\ncase 25:return 84;\nbreak;\ncase 26:return 35;\nbreak;\ncase 27:return 81;\nbreak;\ncase 28:return 34;\nbreak;\ncase 29:return 8;\nbreak;\ncase 30:return 77;\nbreak;\ncase 31:return 95;\nbreak;\ncase 32:return 56;\nbreak;\ncase 33:return 56;\nbreak;\ncase 34:return 56;\nbreak;\ncase 35:return 56;\nbreak;\ncase 36:return 56;\nbreak;\ncase 37:return 56;\nbreak;\ncase 38:return 56;\nbreak;\ncase 39:return 56;\nbreak;\ncase 40:return 56;\nbreak;\ncase 41:return 56;\nbreak;\ncase 42:return 56;\nbreak;\ncase 43:return 56;\nbreak;\ncase 44:return 56;\nbreak;\ncase 45:return 56;\nbreak;\ncase 46:return 56;\nbreak;\ncase 47:return 56;\nbreak;\ncase 48:return 56;\nbreak;\ncase 49:return 56;\nbreak;\ncase 50:return 56;\nbreak;\ncase 51:return 56;\nbreak;\ncase 52:return 56;\nbreak;\ncase 53:return 56;\nbreak;\ncase 54:return 56;\nbreak;\ncase 55:return 56;\nbreak;\ncase 56:return 56;\nbreak;\ncase 57:return 56;\nbreak;\ncase 58:return 56;\nbreak;\ncase 59:return 56;\nbreak;\ncase 60:return 55;\nbreak;\ncase 61:return 55;\nbreak;\ncase 62:return 55;\nbreak;\ncase 63:return 55;\nbreak;\ncase 64:return 55;\nbreak;\ncase 65:return 55;\nbreak;\ncase 66:return 55;\nbreak;\ncase 67:return 55;\nbreak;\ncase 68:return 55;\nbreak;\ncase 69:return 55;\nbreak;\ncase 70:return 55;\nbreak;\ncase 71:return 55;\nbreak;\ncase 72:return 39;\nbreak;\ncase 73:return 40;\nbreak;\ncase 74:return 41;\nbreak;\ncase 75:return 42;\nbreak;\ncase 76:return 43;\nbreak;\ncase 77:return 44;\nbreak;\ncase 78:return 82;\nbreak;\ncase 79:return 85;\nbreak;\ncase 80:return 96;\nbreak;\ncase 81:return 93;\nbreak;\ncase 82:return 86;\nbreak;\ncase 83:return 94;\nbreak;\ncase 84:return 94;\nbreak;\ncase 85:return 87;\nbreak;\ncase 86:return 47;\nbreak;\ncase 87:return 67;\nbreak;\ncase 88:return 'SEP';\nbreak;\ncase 89:return 66;\nbreak;\ncase 90:return 80;\nbreak;\ncase 91:return 49;\nbreak;\ncase 92:return 48;\nbreak;\ncase 93:return 51;\nbreak;\ncase 94:return 50;\nbreak;\ncase 95:return 91;\nbreak;\ncase 96:return 92;\nbreak;\ncase 97:return 57;\nbreak;\ncase 98:return 37;\nbreak;\ncase 99:return 38;\nbreak;\ncase 100:return 28;\nbreak;\ncase 101:return 29;\nbreak;\ncase 102:return 45\nbreak;\ncase 103:return 46\nbreak;\ncase 104:return 102;\nbreak;\ncase 105:return 9;\nbreak;\ncase 106:return 10;\nbreak;\ncase 107:return 11;\nbreak;\n}\n},\nrules: [/^(?:%%[^\\n]*\\n*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:style\\b)/,/^(?:default\\b)/,/^(?:linkStyle\\b)/,/^(?:interpolate\\b)/,/^(?:classDef\\b)/,/^(?:class\\b)/,/^(?:click\\b)/,/^(?:graph\\b)/,/^(?:subgraph\\b)/,/^(?:end\\b\\s*)/,/^(?:\\s*LR\\b)/,/^(?:\\s*RL\\b)/,/^(?:\\s*TB\\b)/,/^(?:\\s*BT\\b)/,/^(?:\\s*TD\\b)/,/^(?:\\s*BR\\b)/,/^(?:\\s*<)/,/^(?:\\s*>)/,/^(?:\\s*\\^)/,/^(?:\\s*v\\b)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\\*)/,/^(?:\\s*--[x]\\s*)/,/^(?:\\s*-->\\s*)/,/^(?:\\s*<-->\\s*)/,/^(?:\\s*[x]--[x]\\s*)/,/^(?:\\s*[o]--[o]\\s*)/,/^(?:\\s*[o]\\.-[o]\\s*)/,/^(?:\\s*<==>\\s*)/,/^(?:\\s*[o]==[o]\\s*)/,/^(?:\\s*[x]==[x]\\s*)/,/^(?:\\s*[x].-[x]\\s*)/,/^(?:\\s*[x]-\\.-[x]\\s*)/,/^(?:\\s*<\\.->\\s*)/,/^(?:\\s*<-\\.->\\s*)/,/^(?:\\s*[o]-\\.-[o]\\s*)/,/^(?:\\s*--[o]\\s*)/,/^(?:\\s*---\\s*)/,/^(?:\\s*-\\.-[x]\\s*)/,/^(?:\\s*-\\.->\\s*)/,/^(?:\\s*-\\.-[o]\\s*)/,/^(?:\\s*-\\.-\\s*)/,/^(?:\\s*.-[x]\\s*)/,/^(?:\\s*\\.->\\s*)/,/^(?:\\s*\\.-[o]\\s*)/,/^(?:\\s*\\.-\\s*)/,/^(?:\\s*==[x]\\s*)/,/^(?:\\s*==>\\s*)/,/^(?:\\s*==[o]\\s*)/,/^(?:\\s*==[\\=]\\s*)/,/^(?:\\s*<--\\s*)/,/^(?:\\s*[x]--\\s*)/,/^(?:\\s*[o]--\\s*)/,/^(?:\\s*<-\\.\\s*)/,/^(?:\\s*[x]-\\.\\s*)/,/^(?:\\s*[o]-\\.\\s*)/,/^(?:\\s*<==\\s*)/,/^(?:\\s*[x]==\\s*)/,/^(?:\\s*[o]==\\s*)/,/^(?:\\s*--\\s*)/,/^(?:\\s*-\\.\\s*)/,/^(?:\\s*==\\s*)/,/^(?:\\(-)/,/^(?:-\\))/,/^(?:\\(\\[)/,/^(?:\\]\\))/,/^(?:\\[\\()/,/^(?:\\)\\])/,/^(?:-)/,/^(?:\\.)/,/^(?:[\\_])/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\\^)/,/^(?:\\\\\\|)/,/^(?:v\\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\\\\])/,/^(?:\\[\\/)/,/^(?:\\/\\])/,/^(?:\\[\\\\)/,/^(?:[!\"#$%&'*+,-.`?\\\\_\\/])/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\|)/,/^(?:\\()/,/^(?:\\))/,/^(?:\\[)/,/^(?:\\])/,/^(?:\\{)/,/^(?:\\})/,/^(?:\")/,/^(?:(\\r|\\n|\\r\\n)+)/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"vertex\":{\"rules\":[],\"inclusive\":false},\"dir\":{\"rules\":[14,15,16,17,18,19,20,21,22,23],\"inclusive\":false},\"string\":{\"rules\":[2,3],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,4,5,6,7,8,9,10,11,12,13,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import moment from 'moment-mini';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport { logger } from '../../logger';\nimport { getConfig } from '../../config';\n\nconst config = getConfig();\nlet dateFormat = '';\nlet axisFormat = '';\nlet excludes = [];\nlet title = '';\nlet sections = [];\nlet tasks = [];\nlet currentSection = '';\nconst tags = ['active', 'done', 'crit', 'milestone'];\nlet funs = [];\nlet inclusiveEndDates = false;\n\nexport const clear = function() {\n  sections = [];\n  tasks = [];\n  currentSection = '';\n  funs = [];\n  title = '';\n  taskCnt = 0;\n  lastTask = undefined;\n  lastTaskID = undefined;\n  rawTasks = [];\n  dateFormat = '';\n  axisFormat = '';\n  excludes = [];\n  inclusiveEndDates = false;\n};\n\nexport const setAxisFormat = function(txt) {\n  axisFormat = txt;\n};\n\nexport const getAxisFormat = function() {\n  return axisFormat;\n};\n\nexport const setDateFormat = function(txt) {\n  dateFormat = txt;\n};\n\nexport const enableInclusiveEndDates = function() {\n  inclusiveEndDates = true;\n};\n\nexport const endDatesAreInclusive = function() {\n  return inclusiveEndDates;\n};\n\nexport const getDateFormat = function() {\n  return dateFormat;\n};\n\nexport const setExcludes = function(txt) {\n  excludes = txt.toLowerCase().split(/[\\s,]+/);\n};\n\nexport const getExcludes = function() {\n  return excludes;\n};\n\nexport const setTitle = function(txt) {\n  title = txt;\n};\n\nexport const getTitle = function() {\n  return title;\n};\n\nexport const addSection = function(txt) {\n  currentSection = txt;\n  sections.push(txt);\n};\n\nexport const getSections = function() {\n  return sections;\n};\n\nexport const getTasks = function() {\n  let allItemsPricessed = compileTasks();\n  const maxDepth = 10;\n  let iterationCount = 0;\n  while (!allItemsPricessed && iterationCount < maxDepth) {\n    allItemsPricessed = compileTasks();\n    iterationCount++;\n  }\n\n  tasks = rawTasks;\n\n  return tasks;\n};\n\nconst isInvalidDate = function(date, dateFormat, excludes) {\n  if (date.isoWeekday() >= 6 && excludes.indexOf('weekends') >= 0) {\n    return true;\n  }\n  if (excludes.indexOf(date.format('dddd').toLowerCase()) >= 0) {\n    return true;\n  }\n  return excludes.indexOf(date.format(dateFormat.trim())) >= 0;\n};\n\nconst checkTaskDates = function(task, dateFormat, excludes) {\n  if (!excludes.length || task.manualEndTime) return;\n  let startTime = moment(task.startTime, dateFormat, true);\n  startTime.add(1, 'd');\n  let endTime = moment(task.endTime, dateFormat, true);\n  let renderEndTime = fixTaskDates(startTime, endTime, dateFormat, excludes);\n  task.endTime = endTime.toDate();\n  task.renderEndTime = renderEndTime;\n};\n\nconst fixTaskDates = function(startTime, endTime, dateFormat, excludes) {\n  let invalid = false;\n  let renderEndTime = null;\n  while (startTime <= endTime) {\n    if (!invalid) {\n      renderEndTime = endTime.toDate();\n    }\n    invalid = isInvalidDate(startTime, dateFormat, excludes);\n    if (invalid) {\n      endTime.add(1, 'd');\n    }\n    startTime.add(1, 'd');\n  }\n  return renderEndTime;\n};\n\nconst getStartDate = function(prevTime, dateFormat, str) {\n  str = str.trim();\n\n  // Test for after\n  const re = /^after\\s+([\\d\\w- ]+)/;\n  const afterStatement = re.exec(str.trim());\n\n  if (afterStatement !== null) {\n    // check all after ids and take the latest\n    let latestEndingTask = null;\n    afterStatement[1].split(' ').forEach(function(id) {\n      let task = findTaskById(id);\n      if (typeof task !== 'undefined') {\n        if (!latestEndingTask) {\n          latestEndingTask = task;\n        } else {\n          if (task.endTime > latestEndingTask.endTime) {\n            latestEndingTask = task;\n          }\n        }\n      }\n    });\n\n    if (!latestEndingTask) {\n      const dt = new Date();\n      dt.setHours(0, 0, 0, 0);\n      return dt;\n    } else {\n      return latestEndingTask.endTime;\n    }\n  }\n\n  // Check for actual date set\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    return mDate.toDate();\n  } else {\n    logger.debug('Invalid date:' + str);\n    logger.debug('With date format:' + dateFormat.trim());\n  }\n\n  // Default date - now\n  return new Date();\n};\n\nconst durationToDate = function(durationStatement, relativeTime) {\n  if (durationStatement !== null) {\n    switch (durationStatement[2]) {\n      case 's':\n        relativeTime.add(durationStatement[1], 'seconds');\n        break;\n      case 'm':\n        relativeTime.add(durationStatement[1], 'minutes');\n        break;\n      case 'h':\n        relativeTime.add(durationStatement[1], 'hours');\n        break;\n      case 'd':\n        relativeTime.add(durationStatement[1], 'days');\n        break;\n      case 'w':\n        relativeTime.add(durationStatement[1], 'weeks');\n        break;\n    }\n  }\n  // Default date - now\n  return relativeTime.toDate();\n};\n\nconst getEndDate = function(prevTime, dateFormat, str, inclusive) {\n  inclusive = inclusive || false;\n  str = str.trim();\n\n  // Check for actual date\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    if (inclusive) {\n      mDate.add(1, 'd');\n    }\n    return mDate.toDate();\n  }\n\n  return durationToDate(/^([\\d]+)([wdhms])/.exec(str.trim()), moment(prevTime));\n};\n\nlet taskCnt = 0;\nconst parseId = function(idStr) {\n  if (typeof idStr === 'undefined') {\n    taskCnt = taskCnt + 1;\n    return 'task' + taskCnt;\n  }\n  return idStr;\n};\n// id, startDate, endDate\n// id, startDate, length\n// id, after x, endDate\n// id, after x, length\n// startDate, endDate\n// startDate, length\n// after x, endDate\n// after x, length\n// endDate\n// length\n\nconst compileData = function(prevTask, dataStr) {\n  let ds;\n\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  let endTimeData = '';\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = prevTask.endTime;\n      endTimeData = data[0];\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = getStartDate(undefined, dateFormat, data[0]);\n      endTimeData = data[1];\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = getStartDate(undefined, dateFormat, data[1]);\n      endTimeData = data[2];\n      break;\n    default:\n  }\n\n  if (endTimeData) {\n    task.endTime = getEndDate(task.startTime, dateFormat, endTimeData, inclusiveEndDates);\n    task.manualEndTime = moment(endTimeData, 'YYYY-MM-DD', true).isValid();\n    checkTaskDates(task, dateFormat, excludes);\n  }\n\n  return task;\n};\n\nconst parseData = function(prevTaskId, dataStr) {\n  let ds;\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = {\n        type: 'prevTaskEnd',\n        id: prevTaskId\n      };\n      task.endTime = {\n        data: data[0]\n      };\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[0]\n      };\n      task.endTime = {\n        data: data[1]\n      };\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[1]\n      };\n      task.endTime = {\n        data: data[2]\n      };\n      break;\n    default:\n  }\n\n  return task;\n};\n\nlet lastTask;\nlet lastTaskID;\nlet rawTasks = [];\nconst taskDb = {};\nexport const addTask = function(descr, data) {\n  const rawTask = {\n    section: currentSection,\n    type: currentSection,\n    processed: false,\n    manualEndTime: false,\n    renderEndTime: null,\n    raw: { data: data },\n    task: descr,\n    classes: []\n  };\n  const taskInfo = parseData(lastTaskID, data);\n  rawTask.raw.startTime = taskInfo.startTime;\n  rawTask.raw.endTime = taskInfo.endTime;\n  rawTask.id = taskInfo.id;\n  rawTask.prevTaskId = lastTaskID;\n  rawTask.active = taskInfo.active;\n  rawTask.done = taskInfo.done;\n  rawTask.crit = taskInfo.crit;\n  rawTask.milestone = taskInfo.milestone;\n\n  const pos = rawTasks.push(rawTask);\n\n  lastTaskID = rawTask.id;\n  // Store cross ref\n  taskDb[rawTask.id] = pos - 1;\n};\n\nexport const findTaskById = function(id) {\n  const pos = taskDb[id];\n  return rawTasks[pos];\n};\n\nexport const addTaskOrg = function(descr, data) {\n  const newTask = {\n    section: currentSection,\n    type: currentSection,\n    description: descr,\n    task: descr,\n    classes: []\n  };\n  const taskInfo = compileData(lastTask, data);\n  newTask.startTime = taskInfo.startTime;\n  newTask.endTime = taskInfo.endTime;\n  newTask.id = taskInfo.id;\n  newTask.active = taskInfo.active;\n  newTask.done = taskInfo.done;\n  newTask.crit = taskInfo.crit;\n  newTask.milestone = taskInfo.milestone;\n  lastTask = newTask;\n  tasks.push(newTask);\n};\n\nconst compileTasks = function() {\n  const compileTask = function(pos) {\n    const task = rawTasks[pos];\n    let startTime = '';\n    switch (rawTasks[pos].raw.startTime.type) {\n      case 'prevTaskEnd': {\n        const prevTask = findTaskById(task.prevTaskId);\n        task.startTime = prevTask.endTime;\n        break;\n      }\n      case 'getStartDate':\n        startTime = getStartDate(undefined, dateFormat, rawTasks[pos].raw.startTime.startData);\n        if (startTime) {\n          rawTasks[pos].startTime = startTime;\n        }\n        break;\n    }\n\n    if (rawTasks[pos].startTime) {\n      rawTasks[pos].endTime = getEndDate(\n        rawTasks[pos].startTime,\n        dateFormat,\n        rawTasks[pos].raw.endTime.data,\n        inclusiveEndDates\n      );\n      if (rawTasks[pos].endTime) {\n        rawTasks[pos].processed = true;\n        rawTasks[pos].manualEndTime = moment(\n          rawTasks[pos].raw.endTime.data,\n          'YYYY-MM-DD',\n          true\n        ).isValid();\n        checkTaskDates(rawTasks[pos], dateFormat, excludes);\n      }\n    }\n\n    return rawTasks[pos].processed;\n  };\n\n  let allProcessed = true;\n  for (let i = 0; i < rawTasks.length; i++) {\n    compileTask(i);\n\n    allProcessed = allProcessed && rawTasks[i].processed;\n  }\n  return allProcessed;\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n */\nexport const setLink = function(ids, _linkStr) {\n  let linkStr = _linkStr;\n  if (config.securityLevel !== 'loose') {\n    linkStr = sanitizeUrl(_linkStr);\n  }\n  ids.split(',').forEach(function(id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      pushFun(id, () => {\n        window.open(linkStr, '_self');\n      });\n    }\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function(ids, className) {\n  ids.split(',').forEach(function(id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      rawTask.classes.push(className);\n    }\n  });\n};\n\nconst setClickFun = function(id, functionName, functionArgs) {\n  if (config.securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n\n  let argList = [];\n  if (typeof functionArgs === 'string') {\n    /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n    argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n    for (let i = 0; i < argList.length; i++) {\n      let item = argList[i].trim();\n      /* Removes all double quotes at the start and end of an argument */\n      /* This preserves all starting and ending whitespace inside */\n      if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n        item = item.substr(1, item.length - 2);\n      }\n      argList[i] = item;\n    }\n  }\n\n  /* if no arguments passed into callback, default to passing in id */\n  if (argList.length === 0) {\n    argList.push(id);\n  }\n\n  let rawTask = findTaskById(id);\n  if (typeof rawTask !== 'undefined') {\n    pushFun(id, () => {\n      window[functionName](...argList);\n    });\n  }\n};\n\n/**\n * The callbackFunction is executed in a click event bound to the task with the specified id or the task's assigned text\n * @param id The task's id\n * @param callbackFunction A function to be executed when clicked on the task or the task's text\n */\nconst pushFun = function(id, callbackFunction) {\n  funs.push(function() {\n    // const elem = d3.select(element).select(`[id=\"${id}\"]`)\n    const elem = document.querySelector(`[id=\"${id}\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function() {\n        callbackFunction();\n      });\n    }\n  });\n  funs.push(function() {\n    // const elem = d3.select(element).select(`[id=\"${id}-text\"]`)\n    const elem = document.querySelector(`[id=\"${id}-text\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function() {\n        callbackFunction();\n      });\n    }\n  });\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs Function args the function should be called with\n */\nexport const setClickEvent = function(ids, functionName, functionArgs) {\n  ids.split(',').forEach(function(id) {\n    setClickFun(id, functionName, functionArgs);\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Binds all functions previously added to fun (specified through click) to the element\n * @param element\n */\nexport const bindFunctions = function(element) {\n  funs.forEach(function(fun) {\n    fun(element);\n  });\n};\n\nexport default {\n  clear,\n  setDateFormat,\n  getDateFormat,\n  enableInclusiveEndDates,\n  endDatesAreInclusive,\n  setAxisFormat,\n  getAxisFormat,\n  setTitle,\n  getTitle,\n  addSection,\n  getSections,\n  getTasks,\n  addTask,\n  findTaskById,\n  addTaskOrg,\n  setExcludes,\n  getExcludes,\n  setClickEvent,\n  setLink,\n  bindFunctions,\n  durationToDate\n};\n\nfunction getTaskTags(data, task, tags) {\n  let matchFound = true;\n  while (matchFound) {\n    matchFound = false;\n    tags.forEach(function(t) {\n      const pattern = '^\\\\s*' + t + '\\\\s*$';\n      const regex = new RegExp(pattern);\n      if (data[0].match(regex)) {\n        task[t] = true;\n        data.shift(1);\n        matchFound = true;\n      }\n    });\n  }\n}\n","import * as d3 from 'd3';\n\nimport { parser } from './parser/gantt';\nimport ganttDb from './ganttDb';\n\nparser.yy = ganttDb;\n\nconst conf = {\n  titleTopMargin: 25,\n  barHeight: 20,\n  barGap: 4,\n  topPadding: 50,\n  rightPadding: 75,\n  leftPadding: 75,\n  gridLineStartPadding: 35,\n  fontSize: 11,\n  fontFamily: '\"Open-Sans\", \"sans-serif\"'\n};\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function(key) {\n    conf[key] = cnf[key];\n  });\n};\nlet w;\nexport const draw = function(text, id) {\n  parser.yy.clear();\n  parser.parse(text);\n\n  const elem = document.getElementById(id);\n  w = elem.parentElement.offsetWidth;\n\n  if (typeof w === 'undefined') {\n    w = 1200;\n  }\n\n  if (typeof conf.useWidth !== 'undefined') {\n    w = conf.useWidth;\n  }\n\n  const taskArray = parser.yy.getTasks();\n\n  // Set height based on number of tasks\n  const h = taskArray.length * (conf.barHeight + conf.barGap) + 2 * conf.topPadding;\n\n  elem.setAttribute('height', '100%');\n  // Set viewBox\n  elem.setAttribute('viewBox', '0 0 ' + w + ' ' + h);\n  const svg = d3.select(`[id=\"${id}\"]`);\n\n  // Set timescale\n  const timeScale = d3\n    .scaleTime()\n    .domain([\n      d3.min(taskArray, function(d) {\n        return d.startTime;\n      }),\n      d3.max(taskArray, function(d) {\n        return d.endTime;\n      })\n    ])\n    .rangeRound([0, w - conf.leftPadding - conf.rightPadding]);\n\n  let categories = [];\n\n  for (let i = 0; i < taskArray.length; i++) {\n    categories.push(taskArray[i].type);\n  }\n\n  const catsUnfiltered = categories; // for vert labels\n\n  categories = checkUnique(categories);\n\n  makeGant(taskArray, w, h);\n  if (typeof conf.useWidth !== 'undefined') {\n    elem.setAttribute('width', w);\n  }\n\n  svg\n    .append('text')\n    .text(parser.yy.getTitle())\n    .attr('x', w / 2)\n    .attr('y', conf.titleTopMargin)\n    .attr('class', 'titleText');\n\n  function makeGant(tasks, pageWidth, pageHeight) {\n    const barHeight = conf.barHeight;\n    const gap = barHeight + conf.barGap;\n    const topPadding = conf.topPadding;\n    const leftPadding = conf.leftPadding;\n\n    const colorScale = d3\n      .scaleLinear()\n      .domain([0, categories.length])\n      .range(['#00B9FA', '#F95002'])\n      .interpolate(d3.interpolateHcl);\n\n    makeGrid(leftPadding, topPadding, pageWidth, pageHeight);\n    drawRects(tasks, gap, topPadding, leftPadding, barHeight, colorScale, pageWidth, pageHeight);\n    vertLabels(gap, topPadding, leftPadding, barHeight, colorScale);\n    drawToday(leftPadding, topPadding, pageWidth, pageHeight);\n  }\n\n  function drawRects(theArray, theGap, theTopPad, theSidePad, theBarHeight, theColorScale, w) {\n    // Draw background rects covering the entire width of the graph, these form the section rows.\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(theArray)\n      .enter()\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', function(d, i) {\n        return i * theGap + theTopPad - 2;\n      })\n      .attr('width', function() {\n        return w - conf.rightPadding / 2;\n      })\n      .attr('height', theGap)\n      .attr('class', function(d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            return 'section section' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'section section0';\n      });\n\n    // Draw the rects representing the tasks\n    const rectangles = svg\n      .append('g')\n      .selectAll('rect')\n      .data(theArray)\n      .enter();\n\n    rectangles\n      .append('rect')\n      .attr('id', function(d) {\n        return d.id;\n      })\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .attr('x', function(d) {\n        if (d.milestone) {\n          return (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) -\n            0.5 * theBarHeight\n          );\n        }\n        return timeScale(d.startTime) + theSidePad;\n      })\n      .attr('y', function(d, i) {\n        return i * theGap + theTopPad;\n      })\n      .attr('width', function(d) {\n        if (d.milestone) {\n          return theBarHeight;\n        }\n        return timeScale(d.renderEndTime || d.endTime) - timeScale(d.startTime);\n      })\n      .attr('height', theBarHeight)\n      .attr('transform-origin', function(d, i) {\n        return (\n          (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime))\n          ).toString() +\n          'px ' +\n          (i * theGap + theTopPad + 0.5 * theBarHeight).toString() +\n          'px'\n        );\n      })\n      .attr('class', function(d) {\n        const res = 'task';\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskClass = '';\n        if (d.active) {\n          if (d.crit) {\n            taskClass += ' activeCrit';\n          } else {\n            taskClass = ' active';\n          }\n        } else if (d.done) {\n          if (d.crit) {\n            taskClass = ' doneCrit';\n          } else {\n            taskClass = ' done';\n          }\n        } else {\n          if (d.crit) {\n            taskClass += ' crit';\n          }\n        }\n\n        if (taskClass.length === 0) {\n          taskClass = ' task';\n        }\n\n        if (d.milestone) {\n          taskClass = ' milestone ' + taskClass;\n        }\n\n        taskClass += secNum;\n\n        taskClass += ' ' + classStr;\n\n        return res + taskClass;\n      });\n\n    // Append task labels\n    rectangles\n      .append('text')\n      .attr('id', function(d) {\n        return d.id + '-text';\n      })\n      .text(function(d) {\n        return d.task;\n      })\n      .attr('font-size', conf.fontSize)\n      .attr('x', function(d) {\n        let startX = timeScale(d.startTime);\n        let endX = timeScale(d.renderEndTime || d.endTime);\n        if (d.milestone) {\n          startX += 0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) - 0.5 * theBarHeight;\n        }\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return startX + theSidePad - 5;\n          } else {\n            return endX + theSidePad + 5;\n          }\n        } else {\n          return (endX - startX) / 2 + startX + theSidePad;\n        }\n      })\n      .attr('y', function(d, i) {\n        return i * theGap + conf.barHeight / 2 + (conf.fontSize / 2 - 2) + theTopPad;\n      })\n      .attr('text-height', theBarHeight)\n      .attr('class', function(d) {\n        const startX = timeScale(d.startTime);\n        let endX = timeScale(d.endTime);\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskType = '';\n        if (d.active) {\n          if (d.crit) {\n            taskType = 'activeCritText' + secNum;\n          } else {\n            taskType = 'activeText' + secNum;\n          }\n        }\n\n        if (d.done) {\n          if (d.crit) {\n            taskType = taskType + ' doneCritText' + secNum;\n          } else {\n            taskType = taskType + ' doneText' + secNum;\n          }\n        } else {\n          if (d.crit) {\n            taskType = taskType + ' critText' + secNum;\n          }\n        }\n\n        if (d.milestone) {\n          taskType += ' milestoneText';\n        }\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return classStr + ' taskTextOutsideLeft taskTextOutside' + secNum + ' ' + taskType;\n          } else {\n            return (\n              classStr +\n              ' taskTextOutsideRight taskTextOutside' +\n              secNum +\n              ' ' +\n              taskType +\n              ' width-' +\n              textWidth\n            );\n          }\n        } else {\n          return classStr + ' taskText taskText' + secNum + ' ' + taskType + ' width-' + textWidth;\n        }\n      });\n  }\n\n  function makeGrid(theSidePad, theTopPad, w, h) {\n    let xAxis = d3\n      .axisBottom(timeScale)\n      .tickSize(-h + theTopPad + conf.gridLineStartPadding)\n      .tickFormat(d3.timeFormat(parser.yy.getAxisFormat() || conf.axisFormat || '%Y-%m-%d'));\n\n    svg\n      .append('g')\n      .attr('class', 'grid')\n      .attr('transform', 'translate(' + theSidePad + ', ' + (h - 50) + ')')\n      .call(xAxis)\n      .selectAll('text')\n      .style('text-anchor', 'middle')\n      .attr('fill', '#000')\n      .attr('stroke', 'none')\n      .attr('font-size', 10)\n      .attr('dy', '1em');\n  }\n\n  function vertLabels(theGap, theTopPad) {\n    const numOccurances = [];\n    let prevGap = 0;\n\n    for (let i = 0; i < categories.length; i++) {\n      numOccurances[i] = [categories[i], getCount(categories[i], catsUnfiltered)];\n    }\n\n    svg\n      .append('g') // without doing this, impossible to put grid lines behind text\n      .selectAll('text')\n      .data(numOccurances)\n      .enter()\n      .append('text')\n      .text(function(d) {\n        return d[0];\n      })\n      .attr('x', 10)\n      .attr('y', function(d, i) {\n        if (i > 0) {\n          for (let j = 0; j < i; j++) {\n            prevGap += numOccurances[i - 1][1];\n            return (d[1] * theGap) / 2 + prevGap * theGap + theTopPad;\n          }\n        } else {\n          return (d[1] * theGap) / 2 + theTopPad;\n        }\n      })\n      .attr('class', function(d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d[0] === categories[i]) {\n            return 'sectionTitle sectionTitle' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'sectionTitle';\n      });\n  }\n\n  function drawToday(theSidePad, theTopPad, w, h) {\n    const todayG = svg.append('g').attr('class', 'today');\n\n    const today = new Date();\n\n    todayG\n      .append('line')\n      .attr('x1', timeScale(today) + theSidePad)\n      .attr('x2', timeScale(today) + theSidePad)\n      .attr('y1', conf.titleTopMargin)\n      .attr('y2', h - conf.titleTopMargin)\n      .attr('class', 'today');\n  }\n\n  // from this stackexchange question: http://stackoverflow.com/questions/1890203/unique-for-arrays-in-javascript\n  function checkUnique(arr) {\n    const hash = {};\n    const result = [];\n    for (let i = 0, l = arr.length; i < l; ++i) {\n      if (!hash.hasOwnProperty(arr[i])) { // eslint-disable-line\n        // it works with objects! in FF, at least\n        hash[arr[i]] = true;\n        result.push(arr[i]);\n      }\n    }\n    return result;\n  }\n\n  // from this stackexchange question: http://stackoverflow.com/questions/14227981/count-how-many-strings-in-an-array-have-duplicates-in-the-same-array\n  function getCounts(arr) {\n    let i = arr.length; // const to loop over\n    const obj = {}; // obj to store results\n    while (i) {\n      obj[arr[--i]] = (obj[arr[i]] || 0) + 1; // count occurrences\n    }\n    return obj;\n  }\n\n  // get specific from everything\n  function getCount(word, arr) {\n    return getCounts(arr)[word] || 0;\n  }\n};\n\nexport default {\n  setConf,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,8,10,11,12,13,14,15,16,18,20],$V1=[1,9],$V2=[1,10],$V3=[1,11],$V4=[1,12],$V5=[1,13],$V6=[1,14],$V7=[1,16],$V8=[1,17];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"gantt\":4,\"document\":5,\"EOF\":6,\"line\":7,\"SPACE\":8,\"statement\":9,\"NL\":10,\"dateFormat\":11,\"inclusiveEndDates\":12,\"axisFormat\":13,\"excludes\":14,\"title\":15,\"section\":16,\"clickStatement\":17,\"taskTxt\":18,\"taskData\":19,\"click\":20,\"callbackname\":21,\"callbackargs\":22,\"href\":23,\"clickStatementDebug\":24,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"gantt\",6:\"EOF\",8:\"SPACE\",10:\"NL\",11:\"dateFormat\",12:\"inclusiveEndDates\",13:\"axisFormat\",14:\"excludes\",15:\"title\",16:\"section\",18:\"taskTxt\",19:\"taskData\",20:\"click\",21:\"callbackname\",22:\"callbackargs\",23:\"href\"},\nproductions_: [0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[17,2],[17,3],[17,3],[17,4],[17,3],[17,4],[17,2],[24,2],[24,3],[24,3],[24,4],[24,3],[24,4],[24,2]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return $$[$0-1]; \nbreak;\ncase 2:\n this.$ = [] \nbreak;\ncase 3:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 4: case 5:\n this.$ = $$[$0] \nbreak;\ncase 6: case 7:\n this.$=[];\nbreak;\ncase 8:\nyy.setDateFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 9:\nyy.enableInclusiveEndDates();this.$=$$[$0].substr(18);\nbreak;\ncase 10:\nyy.setAxisFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 11:\nyy.setExcludes($$[$0].substr(9));this.$=$$[$0].substr(9);\nbreak;\ncase 12:\nyy.setTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\ncase 13:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 15:\nyy.addTask($$[$0-1],$$[$0]);this.$='task';\nbreak;\ncase 16:\nthis.$ = $$[$0-1];yy.setClickEvent($$[$0-1], $$[$0], null);\nbreak;\ncase 17:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 18:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], null);yy.setLink($$[$0-2],$$[$0]);\nbreak;\ncase 19:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-2], $$[$0-1]);yy.setLink($$[$0-3],$$[$0]);\nbreak;\ncase 20:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0], null);yy.setLink($$[$0-2],$$[$0-1]);\nbreak;\ncase 21:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-1], $$[$0]);yy.setLink($$[$0-3],$$[$0-2]);\nbreak;\ncase 22:\nthis.$ = $$[$0-1];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 23: case 29:\nthis.$=$$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 24: case 25: case 27:\nthis.$=$$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 26: case 28:\nthis.$=$$[$0-3] + ' ' + $$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},o($V0,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:$V1,12:$V2,13:$V3,14:$V4,15:$V5,16:$V6,17:15,18:$V7,20:$V8},o($V0,[2,7],{1:[2,1]}),o($V0,[2,3]),{9:18,11:$V1,12:$V2,13:$V3,14:$V4,15:$V5,16:$V6,17:15,18:$V7,20:$V8},o($V0,[2,5]),o($V0,[2,6]),o($V0,[2,8]),o($V0,[2,9]),o($V0,[2,10]),o($V0,[2,11]),o($V0,[2,12]),o($V0,[2,13]),o($V0,[2,14]),{19:[1,19]},{21:[1,20],23:[1,21]},o($V0,[2,4]),o($V0,[2,15]),o($V0,[2,16],{22:[1,22],23:[1,23]}),o($V0,[2,22],{21:[1,24]}),o($V0,[2,17],{23:[1,25]}),o($V0,[2,18]),o($V0,[2,20],{22:[1,26]}),o($V0,[2,19]),o($V0,[2,21])],\ndefaultActions: {},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 10;\nbreak;\ncase 1:/* skip whitespace */\nbreak;\ncase 2:/* skip comments */\nbreak;\ncase 3:/* skip comments */\nbreak;\ncase 4:this.begin(\"href\");\nbreak;\ncase 5:this.popState();\nbreak;\ncase 6:return 23;\nbreak;\ncase 7:this.begin(\"callbackname\");\nbreak;\ncase 8:this.popState();\nbreak;\ncase 9:this.popState(); this.begin(\"callbackargs\");\nbreak;\ncase 10:return 21;\nbreak;\ncase 11:this.popState();\nbreak;\ncase 12:return 22;\nbreak;\ncase 13:this.begin(\"click\");\nbreak;\ncase 14:this.popState();\nbreak;\ncase 15:return 20;\nbreak;\ncase 16:return 4;\nbreak;\ncase 17:return 11;\nbreak;\ncase 18:return 12;\nbreak;\ncase 19:return 13;\nbreak;\ncase 20:return 14;\nbreak;\ncase 21:return 'date';\nbreak;\ncase 22:return 15;\nbreak;\ncase 23:return 16;\nbreak;\ncase 24:return 18;\nbreak;\ncase 25:return 19;\nbreak;\ncase 26:return ':';\nbreak;\ncase 27:return 6;\nbreak;\ncase 28:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:href[\\s]+[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:call[\\s]+)/i,/^(?:\\([\\s]*\\))/i,/^(?:\\()/i,/^(?:[^(]*)/i,/^(?:\\))/i,/^(?:[^)]*)/i,/^(?:click[\\s]+)/i,/^(?:[\\s\\n])/i,/^(?:[^\\s\\n]*)/i,/^(?:gantt\\b)/i,/^(?:dateFormat\\s[^#\\n;]+)/i,/^(?:inclusiveEndDates\\b)/i,/^(?:axisFormat\\s[^#\\n;]+)/i,/^(?:excludes\\s[^#\\n;]+)/i,/^(?:\\d\\d\\d\\d-\\d\\d-\\d\\d\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:section\\s[^#:\\n;]+)/i,/^(?:[^#:\\n;]+)/i,/^(?::[^#\\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"callbackargs\":{\"rules\":[11,12],\"inclusive\":false},\"callbackname\":{\"rules\":[8,9,10],\"inclusive\":false},\"href\":{\"rules\":[5,6],\"inclusive\":false},\"click\":{\"rules\":[14,15],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,7,13,16,17,18,19,20,21,22,23,24,25,26,27,28],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import _ from 'lodash';\nimport randomString from 'crypto-random-string';\n\nimport { logger } from '../../logger';\n\nlet commits = {};\nlet head = null;\nlet branches = { master: head };\nlet curBranch = 'master';\nlet direction = 'LR';\nlet seq = 0;\n\nfunction getId() {\n  return randomString({\n    length: 7,\n    characters: '0123456789abcdef'\n  });\n}\n\nfunction isfastforwardable(currentCommit, otherCommit) {\n  logger.debug('Entering isfastforwardable:', currentCommit.id, otherCommit.id);\n  while (currentCommit.seq <= otherCommit.seq && currentCommit !== otherCommit) {\n    // only if other branch has more commits\n    if (otherCommit.parent == null) break;\n    if (Array.isArray(otherCommit.parent)) {\n      logger.debug('In merge commit:', otherCommit.parent);\n      return (\n        isfastforwardable(currentCommit, commits[otherCommit.parent[0]]) ||\n        isfastforwardable(currentCommit, commits[otherCommit.parent[1]])\n      );\n    } else {\n      otherCommit = commits[otherCommit.parent];\n    }\n  }\n  logger.debug(currentCommit.id, otherCommit.id);\n  return currentCommit.id === otherCommit.id;\n}\n\nfunction isReachableFrom(currentCommit, otherCommit) {\n  const currentSeq = currentCommit.seq;\n  const otherSeq = otherCommit.seq;\n  if (currentSeq > otherSeq) return isfastforwardable(otherCommit, currentCommit);\n  return false;\n}\n\nexport const setDirection = function(dir) {\n  direction = dir;\n};\nlet options = {};\nexport const setOptions = function(rawOptString) {\n  logger.debug('options str', rawOptString);\n  rawOptString = rawOptString && rawOptString.trim();\n  rawOptString = rawOptString || '{}';\n  try {\n    options = JSON.parse(rawOptString);\n  } catch (e) {\n    logger.error('error while parsing gitGraph options', e.message);\n  }\n};\n\nexport const getOptions = function() {\n  return options;\n};\n\nexport const commit = function(msg) {\n  const commit = {\n    id: getId(),\n    message: msg,\n    seq: seq++,\n    parent: head == null ? null : head.id\n  };\n  head = commit;\n  commits[commit.id] = commit;\n  branches[curBranch] = commit.id;\n  logger.debug('in pushCommit ' + commit.id);\n};\n\nexport const branch = function(name) {\n  branches[name] = head != null ? head.id : null;\n  logger.debug('in createBranch');\n};\n\nexport const merge = function(otherBranch) {\n  const currentCommit = commits[branches[curBranch]];\n  const otherCommit = commits[branches[otherBranch]];\n  if (isReachableFrom(currentCommit, otherCommit)) {\n    logger.debug('Already merged');\n    return;\n  }\n  if (isfastforwardable(currentCommit, otherCommit)) {\n    branches[curBranch] = branches[otherBranch];\n    head = commits[branches[curBranch]];\n  } else {\n    // create merge commit\n    const commit = {\n      id: getId(),\n      message: 'merged branch ' + otherBranch + ' into ' + curBranch,\n      seq: seq++,\n      parent: [head == null ? null : head.id, branches[otherBranch]]\n    };\n    head = commit;\n    commits[commit.id] = commit;\n    branches[curBranch] = commit.id;\n  }\n  logger.debug(branches);\n  logger.debug('in mergeBranch');\n};\n\nexport const checkout = function(branch) {\n  logger.debug('in checkout');\n  curBranch = branch;\n  const id = branches[curBranch];\n  head = commits[id];\n};\n\nexport const reset = function(commitRef) {\n  logger.debug('in reset', commitRef);\n  const ref = commitRef.split(':')[0];\n  let parentCount = parseInt(commitRef.split(':')[1]);\n  let commit = ref === 'HEAD' ? head : commits[branches[ref]];\n  logger.debug(commit, parentCount);\n  while (parentCount > 0) {\n    commit = commits[commit.parent];\n    parentCount--;\n    if (!commit) {\n      const err = 'Critical error - unique parent commit not found during reset';\n      logger.error(err);\n      throw err;\n    }\n  }\n  head = commit;\n  branches[curBranch] = commit.id;\n};\n\nfunction upsert(arr, key, newval) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newval);\n  } else {\n    arr.splice(index, 1, newval);\n  }\n}\n\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit = _.maxBy(commitArr, 'seq');\n  let line = '';\n  commitArr.forEach(function(c) {\n    if (c === commit) {\n      line += '\\t*';\n    } else {\n      line += '\\t|';\n    }\n  });\n  const label = [line, commit.id, commit.seq];\n  for (let branch in branches) {\n    if (branches[branch] === commit.id) label.push(branch);\n  }\n  logger.debug(label.join(' '));\n  if (Array.isArray(commit.parent)) {\n    const newCommit = commits[commit.parent[0]];\n    upsert(commitArr, commit, newCommit);\n    commitArr.push(commits[commit.parent[1]]);\n  } else if (commit.parent == null) {\n    return;\n  } else {\n    const nextCommit = commits[commit.parent];\n    upsert(commitArr, commit, nextCommit);\n  }\n  commitArr = _.uniqBy(commitArr, 'id');\n  prettyPrintCommitHistory(commitArr);\n}\n\nexport const prettyPrint = function() {\n  logger.debug(commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n};\n\nexport const clear = function() {\n  commits = {};\n  head = null;\n  branches = { master: head };\n  curBranch = 'master';\n  seq = 0;\n};\n\nexport const getBranchesAsObjArray = function() {\n  const branchArr = [];\n  for (let branch in branches) {\n    branchArr.push({ name: branch, commit: commits[branches[branch]] });\n  }\n  return branchArr;\n};\n\nexport const getBranches = function() {\n  return branches;\n};\nexport const getCommits = function() {\n  return commits;\n};\nexport const getCommitsArray = function() {\n  const commitArr = Object.keys(commits).map(function(key) {\n    return commits[key];\n  });\n  commitArr.forEach(function(o) {\n    logger.debug(o.id);\n  });\n  return _.orderBy(commitArr, ['seq'], ['desc']);\n};\nexport const getCurrentBranch = function() {\n  return curBranch;\n};\nexport const getDirection = function() {\n  return direction;\n};\nexport const getHead = function() {\n  return head;\n};\n\nexport default {\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  checkout,\n  reset,\n  prettyPrint,\n  clear,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead\n};\n","import * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport db from './gitGraphAst';\nimport gitGraphParser from './parser/gitGraph';\nimport { logger } from '../../logger';\nimport { interpolateToCurve } from '../../utils';\n\nlet allCommitsDict = {};\nlet branchNum;\nlet config = {\n  nodeSpacing: 150,\n  nodeFillColor: 'yellow',\n  nodeStrokeWidth: 2,\n  nodeStrokeColor: 'grey',\n  lineStrokeWidth: 4,\n  branchOffset: 50,\n  lineColor: 'grey',\n  leftMargin: 50,\n  branchColors: ['#442f74', '#983351', '#609732', '#AA9A39'],\n  nodeRadius: 10,\n  nodeLabel: {\n    width: 75,\n    height: 100,\n    x: -25,\n    y: 0\n  }\n};\nlet apiConfig = {};\nexport const setConf = function(c) {\n  apiConfig = c;\n};\n\nfunction svgCreateDefs(svg) {\n  svg\n    .append('defs')\n    .append('g')\n    .attr('id', 'def-commit')\n    .append('circle')\n    .attr('r', config.nodeRadius)\n    .attr('cx', 0)\n    .attr('cy', 0);\n  svg\n    .select('#def-commit')\n    .append('foreignObject')\n    .attr('width', config.nodeLabel.width)\n    .attr('height', config.nodeLabel.height)\n    .attr('x', config.nodeLabel.x)\n    .attr('y', config.nodeLabel.y)\n    .attr('class', 'node-label')\n    .attr('requiredFeatures', 'http://www.w3.org/TR/SVG11/feature#Extensibility')\n    .append('p')\n    .html('');\n}\n\nfunction svgDrawLine(svg, points, colorIdx, interpolate) {\n  const curve = interpolateToCurve(interpolate, d3.curveBasis);\n  const color = config.branchColors[colorIdx % config.branchColors.length];\n  const lineGen = d3\n    .line()\n    .x(function(d) {\n      return Math.round(d.x);\n    })\n    .y(function(d) {\n      return Math.round(d.y);\n    })\n    .curve(curve);\n\n  svg\n    .append('svg:path')\n    .attr('d', lineGen(points))\n    .style('stroke', color)\n    .style('stroke-width', config.lineStrokeWidth)\n    .style('fill', 'none');\n}\n\n// Pass in the element and its pre-transform coords\nfunction getElementCoords(element, coords) {\n  coords = coords || element.node().getBBox();\n  const ctm = element.node().getCTM();\n  const xn = ctm.e + coords.x * ctm.a;\n  const yn = ctm.f + coords.y * ctm.d;\n  return {\n    left: xn,\n    top: yn,\n    width: coords.width,\n    height: coords.height\n  };\n}\n\nfunction svgDrawLineForCommits(svg, fromId, toId, direction, color) {\n  logger.debug('svgDrawLineForCommits: ', fromId, toId);\n  const fromBbox = getElementCoords(svg.select('#node-' + fromId + ' circle'));\n  const toBbox = getElementCoords(svg.select('#node-' + toId + ' circle'));\n  switch (direction) {\n    case 'LR':\n      // (toBbox)\n      //  +--------\n      //          + (fromBbox)\n      if (fromBbox.left - toBbox.left > config.nodeSpacing) {\n        const lineStart = {\n          x: fromBbox.left - config.nodeSpacing,\n          y: toBbox.top + toBbox.height / 2\n        };\n        const lineEnd = { x: toBbox.left + toBbox.width, y: toBbox.top + toBbox.height / 2 };\n        svgDrawLine(svg, [lineStart, lineEnd], color, 'linear');\n        svgDrawLine(\n          svg,\n          [\n            { x: fromBbox.left, y: fromBbox.top + fromBbox.height / 2 },\n            { x: fromBbox.left - config.nodeSpacing / 2, y: fromBbox.top + fromBbox.height / 2 },\n            { x: fromBbox.left - config.nodeSpacing / 2, y: lineStart.y },\n            lineStart\n          ],\n          color\n        );\n      } else {\n        svgDrawLine(\n          svg,\n          [\n            {\n              x: fromBbox.left,\n              y: fromBbox.top + fromBbox.height / 2\n            },\n            {\n              x: fromBbox.left - config.nodeSpacing / 2,\n              y: fromBbox.top + fromBbox.height / 2\n            },\n            {\n              x: fromBbox.left - config.nodeSpacing / 2,\n              y: toBbox.top + toBbox.height / 2\n            },\n            {\n              x: toBbox.left + toBbox.width,\n              y: toBbox.top + toBbox.height / 2\n            }\n          ],\n          color\n        );\n      }\n      break;\n    case 'BT':\n      //      +           (fromBbox)\n      //      |\n      //      |\n      //              +   (toBbox)\n      if (toBbox.top - fromBbox.top > config.nodeSpacing) {\n        const lineStart = {\n          x: toBbox.left + toBbox.width / 2,\n          y: fromBbox.top + fromBbox.height + config.nodeSpacing\n        };\n        const lineEnd = { x: toBbox.left + toBbox.width / 2, y: toBbox.top };\n        svgDrawLine(svg, [lineStart, lineEnd], color, 'linear');\n        svgDrawLine(\n          svg,\n          [\n            { x: fromBbox.left + fromBbox.width / 2, y: fromBbox.top + fromBbox.height },\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + fromBbox.height + config.nodeSpacing / 2\n            },\n            { x: toBbox.left + toBbox.width / 2, y: lineStart.y - config.nodeSpacing / 2 },\n            lineStart\n          ],\n          color\n        );\n      } else {\n        svgDrawLine(\n          svg,\n          [\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + fromBbox.height\n            },\n            {\n              x: fromBbox.left + fromBbox.width / 2,\n              y: fromBbox.top + config.nodeSpacing / 2\n            },\n            {\n              x: toBbox.left + toBbox.width / 2,\n              y: toBbox.top - config.nodeSpacing / 2\n            },\n            {\n              x: toBbox.left + toBbox.width / 2,\n              y: toBbox.top\n            }\n          ],\n          color\n        );\n      }\n      break;\n  }\n}\n\nfunction cloneNode(svg, selector) {\n  return svg\n    .select(selector)\n    .node()\n    .cloneNode(true);\n}\n\nfunction renderCommitHistory(svg, commitid, branches, direction) {\n  let commit;\n  const numCommits = Object.keys(allCommitsDict).length;\n  if (typeof commitid === 'string') {\n    do {\n      commit = allCommitsDict[commitid];\n      logger.debug('in renderCommitHistory', commit.id, commit.seq);\n      if (svg.select('#node-' + commitid).size() > 0) {\n        return;\n      }\n      svg\n        .append(function() {\n          return cloneNode(svg, '#def-commit');\n        })\n        .attr('class', 'commit')\n        .attr('id', function() {\n          return 'node-' + commit.id;\n        })\n        .attr('transform', function() {\n          switch (direction) {\n            case 'LR':\n              return (\n                'translate(' +\n                (commit.seq * config.nodeSpacing + config.leftMargin) +\n                ', ' +\n                branchNum * config.branchOffset +\n                ')'\n              );\n            case 'BT':\n              return (\n                'translate(' +\n                (branchNum * config.branchOffset + config.leftMargin) +\n                ', ' +\n                (numCommits - commit.seq) * config.nodeSpacing +\n                ')'\n              );\n          }\n        })\n        .attr('fill', config.nodeFillColor)\n        .attr('stroke', config.nodeStrokeColor)\n        .attr('stroke-width', config.nodeStrokeWidth);\n\n      let branch;\n      for (let branchName in branches) {\n        if (branches[branchName].commit === commit) {\n          branch = branches[branchName];\n          break;\n        }\n      }\n      if (branch) {\n        logger.debug('found branch ', branch.name);\n        svg\n          .select('#node-' + commit.id + ' p')\n          .append('xhtml:span')\n          .attr('class', 'branch-label')\n          .text(branch.name + ', ');\n      }\n      svg\n        .select('#node-' + commit.id + ' p')\n        .append('xhtml:span')\n        .attr('class', 'commit-id')\n        .text(commit.id);\n      if (commit.message !== '' && direction === 'BT') {\n        svg\n          .select('#node-' + commit.id + ' p')\n          .append('xhtml:span')\n          .attr('class', 'commit-msg')\n          .text(', ' + commit.message);\n      }\n      commitid = commit.parent;\n    } while (commitid && allCommitsDict[commitid]);\n  }\n\n  if (Array.isArray(commitid)) {\n    logger.debug('found merge commmit', commitid);\n    renderCommitHistory(svg, commitid[0], branches, direction);\n    branchNum++;\n    renderCommitHistory(svg, commitid[1], branches, direction);\n    branchNum--;\n  }\n}\n\nfunction renderLines(svg, commit, direction, branchColor) {\n  branchColor = branchColor || 0;\n  while (commit.seq > 0 && !commit.lineDrawn) {\n    if (typeof commit.parent === 'string') {\n      svgDrawLineForCommits(svg, commit.id, commit.parent, direction, branchColor);\n      commit.lineDrawn = true;\n      commit = allCommitsDict[commit.parent];\n    } else if (Array.isArray(commit.parent)) {\n      svgDrawLineForCommits(svg, commit.id, commit.parent[0], direction, branchColor);\n      svgDrawLineForCommits(svg, commit.id, commit.parent[1], direction, branchColor + 1);\n      renderLines(svg, allCommitsDict[commit.parent[1]], direction, branchColor + 1);\n      commit.lineDrawn = true;\n      commit = allCommitsDict[commit.parent[0]];\n    }\n  }\n}\n\nexport const draw = function(txt, id, ver) {\n  try {\n    const parser = gitGraphParser.parser;\n    parser.yy = db;\n    parser.yy.clear();\n\n    logger.debug('in gitgraph renderer', txt + '\\n', 'id:', id, ver);\n    // Parse the graph definition\n    parser.parse(txt + '\\n');\n\n    config = _.assign(config, apiConfig, db.getOptions());\n    logger.debug('effective options', config);\n    const direction = db.getDirection();\n    allCommitsDict = db.getCommits();\n    const branches = db.getBranchesAsObjArray();\n    if (direction === 'BT') {\n      config.nodeLabel.x = branches.length * config.branchOffset;\n      config.nodeLabel.width = '100%';\n      config.nodeLabel.y = -1 * 2 * config.nodeRadius;\n    }\n    const svg = d3.select(`[id=\"${id}\"]`);\n    svgCreateDefs(svg);\n    branchNum = 1;\n    for (let branch in branches) {\n      const v = branches[branch];\n      renderCommitHistory(svg, v.commit.id, branches, direction);\n      renderLines(svg, v.commit, direction);\n      branchNum++;\n    }\n    svg.attr('height', function() {\n      if (direction === 'BT') return Object.keys(allCommitsDict).length * config.nodeSpacing;\n      return (branches.length + 1) * config.branchOffset;\n    });\n  } catch (e) {\n    logger.error('Error while rendering gitgraph');\n    logger.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[2,3],$V1=[1,7],$V2=[7,12,15,17,19,20,21],$V3=[7,11,12,15,17,19,20,21],$V4=[2,20],$V5=[1,32];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"GG\":4,\":\":5,\"document\":6,\"EOF\":7,\"DIR\":8,\"options\":9,\"body\":10,\"OPT\":11,\"NL\":12,\"line\":13,\"statement\":14,\"COMMIT\":15,\"commit_arg\":16,\"BRANCH\":17,\"ID\":18,\"CHECKOUT\":19,\"MERGE\":20,\"RESET\":21,\"reset_arg\":22,\"STR\":23,\"HEAD\":24,\"reset_parents\":25,\"CARET\":26,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"GG\",5:\":\",7:\"EOF\",8:\"DIR\",11:\"OPT\",12:\"NL\",15:\"COMMIT\",17:\"BRANCH\",18:\"ID\",19:\"CHECKOUT\",20:\"MERGE\",21:\"RESET\",23:\"STR\",24:\"HEAD\",26:\"CARET\"},\nproductions_: [0,[3,4],[3,5],[6,0],[6,2],[9,2],[9,1],[10,0],[10,2],[13,2],[13,1],[14,2],[14,2],[14,2],[14,2],[14,2],[16,0],[16,1],[22,2],[22,2],[25,0],[25,2]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return $$[$0-1]; \nbreak;\ncase 2:\nyy.setDirection($$[$0-3]); return $$[$0-1];\nbreak;\ncase 4:\n yy.setOptions($$[$0-1]); this.$ = $$[$0]\nbreak;\ncase 5:\n$$[$0-1] +=$$[$0]; this.$=$$[$0-1]\nbreak;\ncase 7:\nthis.$ = []\nbreak;\ncase 8:\n$$[$0-1].push($$[$0]); this.$=$$[$0-1];\nbreak;\ncase 9:\nthis.$ =$$[$0-1]\nbreak;\ncase 11:\nyy.commit($$[$0])\nbreak;\ncase 12:\nyy.branch($$[$0])\nbreak;\ncase 13:\nyy.checkout($$[$0])\nbreak;\ncase 14:\nyy.merge($$[$0])\nbreak;\ncase 15:\nyy.reset($$[$0])\nbreak;\ncase 16:\nthis.$ = \"\"\nbreak;\ncase 17:\nthis.$=$$[$0]\nbreak;\ncase 18:\nthis.$ = $$[$0-1]+ \":\" + $$[$0] \nbreak;\ncase 19:\nthis.$ = $$[$0-1]+ \":\"  + yy.count; yy.count = 0\nbreak;\ncase 20:\nyy.count = 0\nbreak;\ncase 21:\n yy.count += 1 \nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},{5:[1,3],8:[1,4]},{6:5,7:$V0,9:6,12:$V1},{5:[1,8]},{7:[1,9]},o($V2,[2,7],{10:10,11:[1,11]}),o($V3,[2,6]),{6:12,7:$V0,9:6,12:$V1},{1:[2,1]},{7:[2,4],12:[1,15],13:13,14:14,15:[1,16],17:[1,17],19:[1,18],20:[1,19],21:[1,20]},o($V3,[2,5]),{7:[1,21]},o($V2,[2,8]),{12:[1,22]},o($V2,[2,10]),{12:[2,16],16:23,23:[1,24]},{18:[1,25]},{18:[1,26]},{18:[1,27]},{18:[1,30],22:28,24:[1,29]},{1:[2,2]},o($V2,[2,9]),{12:[2,11]},{12:[2,17]},{12:[2,12]},{12:[2,13]},{12:[2,14]},{12:[2,15]},{12:$V4,25:31,26:$V5},{12:$V4,25:33,26:$V5},{12:[2,18]},{12:$V4,25:34,26:$V5},{12:[2,19]},{12:[2,21]}],\ndefaultActions: {9:[2,1],21:[2,2],23:[2,11],24:[2,17],25:[2,12],26:[2,13],27:[2,14],28:[2,15],31:[2,18],33:[2,19],34:[2,21]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 12;\nbreak;\ncase 1:/* skip all whitespace */\nbreak;\ncase 2:/* skip comments */\nbreak;\ncase 3:/* skip comments */\nbreak;\ncase 4:return 4;\nbreak;\ncase 5:return 15;\nbreak;\ncase 6:return 17;\nbreak;\ncase 7:return 20;\nbreak;\ncase 8:return 21;\nbreak;\ncase 9:return 19;\nbreak;\ncase 10:return 8;\nbreak;\ncase 11:return 8;\nbreak;\ncase 12:return 5;\nbreak;\ncase 13:return 26\nbreak;\ncase 14:this.begin(\"options\");\nbreak;\ncase 15:this.popState();\nbreak;\ncase 16:return 11;\nbreak;\ncase 17:this.begin(\"string\");\nbreak;\ncase 18:this.popState();\nbreak;\ncase 19:return 23;\nbreak;\ncase 20:return 18;\nbreak;\ncase 21:return 7;\nbreak;\n}\n},\nrules: [/^(?:(\\r?\\n)+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:gitGraph\\b)/i,/^(?:commit\\b)/i,/^(?:branch\\b)/i,/^(?:merge\\b)/i,/^(?:reset\\b)/i,/^(?:checkout\\b)/i,/^(?:LR\\b)/i,/^(?:BT\\b)/i,/^(?::)/i,/^(?:\\^)/i,/^(?:options\\r?\\n)/i,/^(?:end\\r?\\n)/i,/^(?:[^\\n]+\\r?\\n)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[a-zA-Z][a-zA-Z0-9_]+)/i,/^(?:$)/i],\nconditions: {\"options\":{\"rules\":[15,16],\"inclusive\":false},\"string\":{\"rules\":[18,19],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,20,21],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/**\n * Created by knut on 15-01-14.\n */\nimport { logger } from '../../logger';\n\nvar message = '';\nvar info = false;\n\nexport const setMessage = txt => {\n  logger.debug('Setting message to: ' + txt);\n  message = txt;\n};\n\nexport const getMessage = () => {\n  return message;\n};\n\nexport const setInfo = inf => {\n  info = inf;\n};\n\nexport const getInfo = () => {\n  return info;\n};\n\n// export const parseError = (err, hash) => {\n//   global.mermaidAPI.parseError(err, hash)\n// }\n\nexport default {\n  setMessage,\n  getMessage,\n  setInfo,\n  getInfo\n  // parseError\n};\n","/**\n * Created by knut on 14-12-11.\n */\nimport * as d3 from 'd3';\nimport db from './infoDb';\nimport infoParser from './parser/info';\nimport { logger } from '../../logger';\n\nconst conf = {};\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function(key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a an info picture in the tag with id: id based on the graph definition in text.\n * @param text\n * @param id\n */\nexport const draw = (txt, id, ver) => {\n  try {\n    const parser = infoParser.parser;\n    parser.yy = db;\n    logger.debug('Renering info diagram\\n' + txt);\n    // Parse the graph definition\n    parser.parse(txt);\n    logger.debug('Parsed info diagram');\n    // Fetch the default direction, use TD if none was found\n    const svg = d3.select('#' + id);\n\n    const g = svg.append('g');\n\n    g.append('text') // text label for the x axis\n      .attr('x', 100)\n      .attr('y', 40)\n      .attr('class', 'version')\n      .attr('font-size', '32px')\n      .style('text-anchor', 'middle')\n      .text('v ' + ver);\n\n    svg.attr('height', 100);\n    svg.attr('width', 400);\n    // svg.attr('viewBox', '0 0 300 150');\n  } catch (e) {\n    logger.error('Error while rendering info diagram');\n    logger.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,9,10];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"info\":4,\"document\":5,\"EOF\":6,\"line\":7,\"statement\":8,\"NL\":9,\"showInfo\":10,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"info\",6:\"EOF\",9:\"NL\",10:\"showInfo\"},\nproductions_: [0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return yy; \nbreak;\ncase 4:\n \nbreak;\ncase 6:\n yy.setInfo(true);  \nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},o($V0,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},o($V0,[2,3]),o($V0,[2,4]),o($V0,[2,5]),o($V0,[2,6])],\ndefaultActions: {4:[2,1]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\n\t// Pre-lexer code can go here\n\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 4    ;\nbreak;\ncase 1:return 9      ;\nbreak;\ncase 2:return 'space';\nbreak;\ncase 3:return 10;\nbreak;\ncase 4:return 6     ;\nbreak;\ncase 5:return 'TXT' ;\nbreak;\n}\n},\nrules: [/^(?:info\\b)/i,/^(?:[\\s\\n\\r]+)/i,/^(?:[\\s]+)/i,/^(?:showInfo\\b)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,9,10,12];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"pie\":4,\"document\":5,\"EOF\":6,\"line\":7,\"statement\":8,\"NL\":9,\"STR\":10,\"VALUE\":11,\"title\":12,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"pie\",6:\"EOF\",9:\"NL\",10:\"STR\",11:\"VALUE\",12:\"title\"},\nproductions_: [0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,2],[8,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n \nbreak;\ncase 6:\n\n\t\t/*console.log('str:'+$$[$0-1]+' value: '+$$[$0])*/\n\t\tyy.addSection($$[$0-1],yy.cleanupValue($$[$0]));  \nbreak;\ncase 7:\nyy.setTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},o($V0,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8],12:[1,9]},{1:[2,1]},o($V0,[2,3]),o($V0,[2,4]),o($V0,[2,5]),{11:[1,10]},o($V0,[2,7]),o($V0,[2,6])],\ndefaultActions: {4:[2,1]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\n\t// Pre-lexer code can go here\n\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* do nothing */\nbreak;\ncase 1:/* skip whitespace */\nbreak;\ncase 2:return 4    ;\nbreak;\ncase 3:return 9      ;\nbreak;\ncase 4:return 'space';\nbreak;\ncase 5:return 12;\nbreak;\ncase 6:/*console.log('begin str');*/this.begin(\"string\");\nbreak;\ncase 7:/*console.log('pop-state');*/this.popState();\nbreak;\ncase 8:/*console.log('ending string')*/return \"STR\";\nbreak;\ncase 9:return \"VALUE\";\nbreak;\ncase 10:return 6     ;\nbreak;\n}\n},\nrules: [/^(?:%%[^\\n]*)/i,/^(?:\\s+)/i,/^(?:pie\\b)/i,/^(?:[\\s\\n\\r]+)/i,/^(?:[\\s]+)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?::[\\s]*[\\d]+(?:\\.[\\d]+)?)/i,/^(?:$)/i],\nconditions: {\"string\":{\"rules\":[7,8],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,9,10],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/**\n *\n */\nimport { logger } from '../../logger';\n\nlet sections = {};\nlet title = '';\n\nconst addSection = function(id, value) {\n  if (typeof sections[id] === 'undefined') {\n    sections[id] = value;\n    logger.debug('Added new section :', id);\n    // console.log('Added new section:', id, value)\n  }\n};\nconst getSections = () => sections;\n\nconst setTitle = function(txt) {\n  title = txt;\n};\n\nconst getTitle = function() {\n  return title;\n};\nconst cleanupValue = function(value) {\n  if (value.substring(0, 1) === ':') {\n    value = value.substring(1).trim();\n    return Number(value.trim());\n  } else {\n    return Number(value.trim());\n  }\n};\n\nconst clear = function() {\n  sections = {};\n  title = '';\n};\n// export const parseError = (err, hash) => {\n//   global.mermaidAPI.parseError(err, hash)\n// }\n\nexport default {\n  addSection,\n  getSections,\n  cleanupValue,\n  clear,\n  setTitle,\n  getTitle\n  // parseError\n};\n","/**\n * Created by AshishJ on 11-09-2019.\n */\nimport * as d3 from 'd3';\nimport pieData from './pieDb';\nimport pieParser from './parser/pie';\nimport { logger } from '../../logger';\n\nconst conf = {};\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function(key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a Pie Chart with the data given in text.\n * @param text\n * @param id\n */\nlet w;\nexport const draw = (txt, id) => {\n  try {\n    const parser = pieParser.parser;\n    parser.yy = pieData;\n    logger.debug('Rendering info diagram\\n' + txt);\n    // Parse the Pie Chart definition\n    parser.yy.clear();\n    parser.parse(txt);\n    logger.debug('Parsed info diagram');\n    const elem = document.getElementById(id);\n    w = elem.parentElement.offsetWidth;\n\n    if (typeof w === 'undefined') {\n      w = 1200;\n    }\n\n    if (typeof conf.useWidth !== 'undefined') {\n      w = conf.useWidth;\n    }\n    const h = 450;\n    elem.setAttribute('height', '100%');\n    // Set viewBox\n    elem.setAttribute('viewBox', '0 0 ' + w + ' ' + h);\n\n    // Fetch the default direction, use TD if none was found\n\n    var width = w; // 450\n    var height = 450;\n    var margin = 40;\n    var legendRectSize = 18;\n    var legendSpacing = 4;\n\n    var radius = Math.min(width, height) / 2 - margin;\n\n    var svg = d3\n      .select('#' + id)\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n    var data = pieData.getSections();\n    var sum = 0;\n    Object.keys(data).forEach(function(key) {\n      sum += data[key];\n    });\n    logger.info(data);\n\n    // set the color scale\n    var color = d3\n      .scaleOrdinal()\n      .domain(data)\n      .range(d3.schemeSet2);\n\n    // Compute the position of each group on the pie:\n    var pie = d3.pie().value(function(d) {\n      return d.value;\n    });\n    var dataReady = pie(d3.entries(data));\n\n    // shape helper to build arcs:\n    var arcGenerator = d3\n      .arc()\n      .innerRadius(0)\n      .outerRadius(radius);\n\n    // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('path')\n      .attr('d', arcGenerator)\n      .attr('fill', function(d) {\n        return color(d.data.key);\n      })\n      .attr('stroke', 'black')\n      .style('stroke-width', '2px')\n      .style('opacity', 0.7);\n\n    // Now add the Percentage. Use the centroid method to get the best coordinates\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('text')\n      .text(function(d) {\n        return ((d.data.value / sum) * 100).toFixed(0) + '%';\n      })\n      .attr('transform', function(d) {\n        return 'translate(' + arcGenerator.centroid(d) + ')';\n      })\n      .style('text-anchor', 'middle')\n      .attr('class', 'slice')\n      .style('font-size', 17);\n\n    svg\n      .append('text')\n      .text(parser.yy.getTitle())\n      .attr('x', 0)\n      .attr('y', -(h - 50) / 2)\n      .attr('class', 'pieTitleText');\n\n    //Add the slegend/annotations for each section\n    var legend = svg\n      .selectAll('.legend')\n      .data(color.domain())\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', function(d, i) {\n        var height = legendRectSize + legendSpacing;\n        var offset = (height * color.domain().length) / 2;\n        var horz = 12 * legendRectSize;\n        var vert = i * height - offset;\n        return 'translate(' + horz + ',' + vert + ')';\n      });\n\n    legend\n      .append('rect')\n      .attr('width', legendRectSize)\n      .attr('height', legendRectSize)\n      .style('fill', color)\n      .style('stroke', color);\n\n    legend\n      .append('text')\n      .attr('x', legendRectSize + legendSpacing)\n      .attr('y', legendRectSize - legendSpacing)\n      .text(function(d) {\n        return d;\n      });\n  } catch (e) {\n    logger.error('Error while rendering info diagram');\n    logger.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,4],$V3=[2,4],$V4=[1,9],$V5=[1,11],$V6=[1,12],$V7=[1,14],$V8=[1,15],$V9=[1,17],$Va=[1,18],$Vb=[1,19],$Vc=[1,20],$Vd=[1,21],$Ve=[1,22],$Vf=[1,24],$Vg=[1,25],$Vh=[1,4,5,10,15,16,18,20,21,22,23,24,26,28,29,30,41],$Vi=[1,33],$Vj=[4,5,10,15,16,18,20,21,22,23,24,26,30,41],$Vk=[4,5,10,15,16,18,20,21,22,23,24,26,29,30,41],$Vl=[4,5,10,15,16,18,20,21,22,23,24,26,28,30,41],$Vm=[39,40,41];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NL\":5,\"SD\":6,\"document\":7,\"line\":8,\"statement\":9,\"participant\":10,\"actor\":11,\"AS\":12,\"restOfLine\":13,\"signal\":14,\"activate\":15,\"deactivate\":16,\"note_statement\":17,\"title\":18,\"text2\":19,\"loop\":20,\"end\":21,\"rect\":22,\"opt\":23,\"alt\":24,\"else_sections\":25,\"par\":26,\"par_sections\":27,\"and\":28,\"else\":29,\"note\":30,\"placement\":31,\"over\":32,\"actor_pair\":33,\"spaceList\":34,\",\":35,\"left_of\":36,\"right_of\":37,\"signaltype\":38,\"+\":39,\"-\":40,\"ACTOR\":41,\"SOLID_OPEN_ARROW\":42,\"DOTTED_OPEN_ARROW\":43,\"SOLID_ARROW\":44,\"DOTTED_ARROW\":45,\"SOLID_CROSS\":46,\"DOTTED_CROSS\":47,\"TXT\":48,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NL\",6:\"SD\",10:\"participant\",12:\"AS\",13:\"restOfLine\",15:\"activate\",16:\"deactivate\",18:\"title\",20:\"loop\",21:\"end\",22:\"rect\",23:\"opt\",24:\"alt\",26:\"par\",28:\"and\",29:\"else\",30:\"note\",32:\"over\",35:\",\",36:\"left_of\",37:\"right_of\",39:\"+\",40:\"-\",41:\"ACTOR\",42:\"SOLID_OPEN_ARROW\",43:\"DOTTED_OPEN_ARROW\",44:\"SOLID_ARROW\",45:\"DOTTED_ARROW\",46:\"SOLID_CROSS\",47:\"DOTTED_CROSS\",48:\"TXT\"},\nproductions_: [0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,5],[9,3],[9,2],[9,3],[9,3],[9,2],[9,3],[9,4],[9,4],[9,4],[9,4],[9,4],[27,1],[27,4],[25,1],[25,4],[17,4],[17,4],[34,2],[34,1],[33,3],[33,1],[31,1],[31,1],[14,5],[14,5],[14,4],[11,1],[38,1],[38,1],[38,1],[38,1],[38,1],[38,1],[19,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 3:\n yy.apply($$[$0]);return $$[$0]; \nbreak;\ncase 4:\n this.$ = [] \nbreak;\ncase 5:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 6: case 7:\n this.$ = $$[$0] \nbreak;\ncase 8:\n this.$=[];\nbreak;\ncase 9:\n$$[$0-3].description=$$[$0-1]; this.$=$$[$0-3];\nbreak;\ncase 10:\nthis.$=$$[$0-1];\nbreak;\ncase 12:\nthis.$={type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]};\nbreak;\ncase 13:\nthis.$={type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-1]};\nbreak;\ncase 15:\nthis.$=[{type:'setTitle', text:$$[$0-1]}]\nbreak;\ncase 16:\n\n\t\t$$[$0-1].unshift({type: 'loopStart', loopText:$$[$0-2], signalType: yy.LINETYPE.LOOP_START});\n\t\t$$[$0-1].push({type: 'loopEnd', loopText:$$[$0-2], signalType: yy.LINETYPE.LOOP_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 17:\n\n\t\t$$[$0-1].unshift({type: 'rectStart', color:$$[$0-2], signalType: yy.LINETYPE.RECT_START });\n\t\t$$[$0-1].push({type: 'rectEnd', color:$$[$0-2], signalType: yy.LINETYPE.RECT_END });\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 18:\n\n\t\t$$[$0-1].unshift({type: 'optStart', optText:$$[$0-2], signalType: yy.LINETYPE.OPT_START});\n\t\t$$[$0-1].push({type: 'optEnd', optText:$$[$0-2], signalType: yy.LINETYPE.OPT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 19:\n\n\t\t// Alt start\n\t\t$$[$0-1].unshift({type: 'altStart', altText:$$[$0-2], signalType: yy.LINETYPE.ALT_START});\n\t\t// Content in alt is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'altEnd', signalType: yy.LINETYPE.ALT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 20:\n\n\t\t// Parallel start\n\t\t$$[$0-1].unshift({type: 'parStart', parText:$$[$0-2], signalType: yy.LINETYPE.PAR_START});\n\t\t// Content in par is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'parEnd', signalType: yy.LINETYPE.PAR_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 22:\n this.$ = $$[$0-3].concat([{type: 'and', parText:$$[$0-1], signalType: yy.LINETYPE.PAR_AND}, $$[$0]]); \nbreak;\ncase 24:\n this.$ = $$[$0-3].concat([{type: 'else', altText:$$[$0-1], signalType: yy.LINETYPE.ALT_ELSE}, $$[$0]]); \nbreak;\ncase 25:\n\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:$$[$0-2], actor:$$[$0-1].actor, text:$$[$0]}];\nbreak;\ncase 26:\n\n\t\t// Coerce actor_pair into a [to, from, ...] array\n\t\t$$[$0-2] = [].concat($$[$0-1], $$[$0-1]).slice(0, 2);\n\t\t$$[$0-2][0] = $$[$0-2][0].actor;\n\t\t$$[$0-2][1] = $$[$0-2][1].actor;\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:yy.PLACEMENT.OVER, actor:$$[$0-2].slice(0, 2), text:$$[$0]}];\nbreak;\ncase 29:\n this.$ = [$$[$0-2], $$[$0]]; \nbreak;\ncase 30:\n this.$ = $$[$0]; \nbreak;\ncase 31:\n this.$ = yy.PLACEMENT.LEFTOF; \nbreak;\ncase 32:\n this.$ = yy.PLACEMENT.RIGHTOF; \nbreak;\ncase 33:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t              {type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]}\n\t             ]\nbreak;\ncase 34:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t             {type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-4]}\n\t             ]\nbreak;\ncase 35:\n this.$ = [$$[$0-3],$$[$0-1],{type: 'addMessage', from:$$[$0-3].actor, to:$$[$0-1].actor, signalType:$$[$0-2], msg:$$[$0]}]\nbreak;\ncase 36:\nthis.$={type: 'addActor', actor:$$[$0]}\nbreak;\ncase 37:\n this.$ = yy.LINETYPE.SOLID_OPEN; \nbreak;\ncase 38:\n this.$ = yy.LINETYPE.DOTTED_OPEN; \nbreak;\ncase 39:\n this.$ = yy.LINETYPE.SOLID; \nbreak;\ncase 40:\n this.$ = yy.LINETYPE.DOTTED; \nbreak;\ncase 41:\n this.$ = yy.LINETYPE.SOLID_CROSS; \nbreak;\ncase 42:\n this.$ = yy.LINETYPE.DOTTED_CROSS; \nbreak;\ncase 43:\nthis.$ = $$[$0].substring(1).trim().replace(/\\\\n/gm, \"\\n\");\nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:$V2},{1:[3]},{3:5,4:$V0,5:$V1,6:$V2},{3:6,4:$V0,5:$V1,6:$V2},o([1,4,5,10,15,16,18,20,22,23,24,26,30,41],$V3,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,26:$Ve,30:$Vf,41:$Vg},o($Vh,[2,5]),{9:26,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,26:$Ve,30:$Vf,41:$Vg},o($Vh,[2,7]),o($Vh,[2,8]),{11:27,41:$Vg},{5:[1,28]},{11:29,41:$Vg},{11:30,41:$Vg},{5:[1,31]},{19:32,48:$Vi},{13:[1,34]},{13:[1,35]},{13:[1,36]},{13:[1,37]},{13:[1,38]},{38:39,42:[1,40],43:[1,41],44:[1,42],45:[1,43],46:[1,44],47:[1,45]},{31:46,32:[1,47],36:[1,48],37:[1,49]},o([5,12,35,42,43,44,45,46,47,48],[2,36]),o($Vh,[2,6]),{5:[1,51],12:[1,50]},o($Vh,[2,11]),{5:[1,52]},{5:[1,53]},o($Vh,[2,14]),{5:[1,54]},{5:[2,43]},o($Vj,$V3,{7:55}),o($Vj,$V3,{7:56}),o($Vj,$V3,{7:57}),o($Vk,$V3,{25:58,7:59}),o($Vl,$V3,{27:60,7:61}),{11:64,39:[1,62],40:[1,63],41:$Vg},o($Vm,[2,37]),o($Vm,[2,38]),o($Vm,[2,39]),o($Vm,[2,40]),o($Vm,[2,41]),o($Vm,[2,42]),{11:65,41:$Vg},{11:67,33:66,41:$Vg},{41:[2,31]},{41:[2,32]},{13:[1,68]},o($Vh,[2,10]),o($Vh,[2,12]),o($Vh,[2,13]),o($Vh,[2,15]),{4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,21:[1,69],22:$Vb,23:$Vc,24:$Vd,26:$Ve,30:$Vf,41:$Vg},{4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,21:[1,70],22:$Vb,23:$Vc,24:$Vd,26:$Ve,30:$Vf,41:$Vg},{4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,21:[1,71],22:$Vb,23:$Vc,24:$Vd,26:$Ve,30:$Vf,41:$Vg},{21:[1,72]},{4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,21:[2,23],22:$Vb,23:$Vc,24:$Vd,26:$Ve,29:[1,73],30:$Vf,41:$Vg},{21:[1,74]},{4:$V4,5:$V5,8:8,9:10,10:$V6,11:23,14:13,15:$V7,16:$V8,17:16,18:$V9,20:$Va,21:[2,21],22:$Vb,23:$Vc,24:$Vd,26:$Ve,28:[1,75],30:$Vf,41:$Vg},{11:76,41:$Vg},{11:77,41:$Vg},{19:78,48:$Vi},{19:79,48:$Vi},{19:80,48:$Vi},{35:[1,81],48:[2,30]},{5:[1,82]},o($Vh,[2,16]),o($Vh,[2,17]),o($Vh,[2,18]),o($Vh,[2,19]),{13:[1,83]},o($Vh,[2,20]),{13:[1,84]},{19:85,48:$Vi},{19:86,48:$Vi},{5:[2,35]},{5:[2,25]},{5:[2,26]},{11:87,41:$Vg},o($Vh,[2,9]),o($Vk,$V3,{7:59,25:88}),o($Vl,$V3,{7:61,27:89}),{5:[2,33]},{5:[2,34]},{48:[2,29]},{21:[2,24]},{21:[2,22]}],\ndefaultActions: {5:[2,1],6:[2,2],33:[2,43],48:[2,31],49:[2,32],78:[2,35],79:[2,25],80:[2,26],85:[2,33],86:[2,34],87:[2,29],88:[2,24],89:[2,22]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 5;\nbreak;\ncase 1:/* skip all whitespace */\nbreak;\ncase 2:/* skip same-line whitespace */\nbreak;\ncase 3:/* skip comments */\nbreak;\ncase 4:/* skip comments */\nbreak;\ncase 5: this.begin('ID'); return 10; \nbreak;\ncase 6: yy_.yytext = yy_.yytext.trim(); this.begin('ALIAS'); return 41; \nbreak;\ncase 7: this.popState(); this.popState(); this.begin('LINE'); return 12; \nbreak;\ncase 8: this.popState(); this.popState(); return 5; \nbreak;\ncase 9: this.begin('LINE'); return 20; \nbreak;\ncase 10: this.begin('LINE'); return 22; \nbreak;\ncase 11: this.begin('LINE'); return 23; \nbreak;\ncase 12: this.begin('LINE'); return 24; \nbreak;\ncase 13: this.begin('LINE'); return 29; \nbreak;\ncase 14: this.begin('LINE'); return 26; \nbreak;\ncase 15: this.begin('LINE'); return 28; \nbreak;\ncase 16: this.popState(); return 13; \nbreak;\ncase 17:return 21;\nbreak;\ncase 18:return 36;\nbreak;\ncase 19:return 37;\nbreak;\ncase 20:return 32;\nbreak;\ncase 21:return 30;\nbreak;\ncase 22: this.begin('ID'); return 15; \nbreak;\ncase 23: this.begin('ID'); return 16; \nbreak;\ncase 24:return 18;\nbreak;\ncase 25:return 6;\nbreak;\ncase 26:return 35;\nbreak;\ncase 27:return 5;\nbreak;\ncase 28: yy_.yytext = yy_.yytext.trim(); return 41; \nbreak;\ncase 29:return 44;\nbreak;\ncase 30:return 45;\nbreak;\ncase 31:return 42;\nbreak;\ncase 32:return 43;\nbreak;\ncase 33:return 46;\nbreak;\ncase 34:return 47;\nbreak;\ncase 35:return 48;\nbreak;\ncase 36:return 39;\nbreak;\ncase 37:return 40;\nbreak;\ncase 38:return 5;\nbreak;\ncase 39:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:participant\\b)/i,/^(?:[^\\->:\\n,;]+?(?=((?!\\n)\\s)+as(?!\\n)\\s|[#\\n;]|$))/i,/^(?:as\\b)/i,/^(?:(?:))/i,/^(?:loop\\b)/i,/^(?:rect\\b)/i,/^(?:opt\\b)/i,/^(?:alt\\b)/i,/^(?:else\\b)/i,/^(?:par\\b)/i,/^(?:and\\b)/i,/^(?:[^#\\n;]*)/i,/^(?:end\\b)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:over\\b)/i,/^(?:note\\b)/i,/^(?:activate\\b)/i,/^(?:deactivate\\b)/i,/^(?:title\\b)/i,/^(?:sequenceDiagram\\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\\+\\->:\\n,;]+)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?::[^#\\n;]+)/i,/^(?:\\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"LINE\":{\"rules\":[2,3,16],\"inclusive\":false},\"ALIAS\":{\"rules\":[2,3,7,8],\"inclusive\":false},\"ID\":{\"rules\":[2,3,6],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,3,4,5,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import { logger } from '../../logger';\n\nlet actors = {};\nlet messages = [];\nconst notes = [];\nlet title = '';\n\nexport const addActor = function(id, name, description) {\n  // Don't allow description nulling\n  const old = actors[id];\n  if (old && name === old.name && description == null) return;\n\n  // Don't allow null descriptions, either\n  if (description == null) description = name;\n\n  actors[id] = { name: name, description: description };\n};\n\nexport const addMessage = function(idFrom, idTo, message, answer) {\n  messages.push({ from: idFrom, to: idTo, message: message, answer: answer });\n};\n\nexport const addSignal = function(idFrom, idTo, message, messageType) {\n  logger.debug(\n    'Adding message from=' + idFrom + ' to=' + idTo + ' message=' + message + ' type=' + messageType\n  );\n  messages.push({ from: idFrom, to: idTo, message: message, type: messageType });\n};\n\nexport const getMessages = function() {\n  return messages;\n};\n\nexport const getActors = function() {\n  return actors;\n};\nexport const getActor = function(id) {\n  return actors[id];\n};\nexport const getActorKeys = function() {\n  return Object.keys(actors);\n};\nexport const getTitle = function() {\n  return title;\n};\n\nexport const clear = function() {\n  actors = {};\n  messages = [];\n};\n\nexport const LINETYPE = {\n  SOLID: 0,\n  DOTTED: 1,\n  NOTE: 2,\n  SOLID_CROSS: 3,\n  DOTTED_CROSS: 4,\n  SOLID_OPEN: 5,\n  DOTTED_OPEN: 6,\n  LOOP_START: 10,\n  LOOP_END: 11,\n  ALT_START: 12,\n  ALT_ELSE: 13,\n  ALT_END: 14,\n  OPT_START: 15,\n  OPT_END: 16,\n  ACTIVE_START: 17,\n  ACTIVE_END: 18,\n  PAR_START: 19,\n  PAR_AND: 20,\n  PAR_END: 21,\n  RECT_START: 22,\n  RECT_END: 23\n};\n\nexport const ARROWTYPE = {\n  FILLED: 0,\n  OPEN: 1\n};\n\nexport const PLACEMENT = {\n  LEFTOF: 0,\n  RIGHTOF: 1,\n  OVER: 2\n};\n\nexport const addNote = function(actor, placement, message) {\n  const note = { actor: actor, placement: placement, message: message };\n\n  // Coerce actor into a [to, from, ...] array\n  const actors = [].concat(actor, actor);\n\n  notes.push(note);\n  messages.push({\n    from: actors[0],\n    to: actors[1],\n    message: message,\n    type: LINETYPE.NOTE,\n    placement: placement\n  });\n};\n\nexport const setTitle = function(titleText) {\n  title = titleText;\n};\n\nexport const apply = function(param) {\n  if (param instanceof Array) {\n    param.forEach(function(item) {\n      apply(item);\n    });\n  } else {\n    switch (param.type) {\n      case 'addActor':\n        addActor(param.actor, param.actor, param.description);\n        break;\n      case 'activeStart':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'activeEnd':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'addNote':\n        addNote(param.actor, param.placement, param.text);\n        break;\n      case 'addMessage':\n        addSignal(param.from, param.to, param.msg, param.signalType);\n        break;\n      case 'loopStart':\n        addSignal(undefined, undefined, param.loopText, param.signalType);\n        break;\n      case 'loopEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'rectStart':\n        addSignal(undefined, undefined, param.color, param.signalType);\n        break;\n      case 'rectEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'optStart':\n        addSignal(undefined, undefined, param.optText, param.signalType);\n        break;\n      case 'optEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'altStart':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'else':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'altEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'setTitle':\n        setTitle(param.text);\n        break;\n      case 'parStart':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'and':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'parEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n    }\n  }\n};\n\nexport default {\n  addActor,\n  addMessage,\n  addSignal,\n  getMessages,\n  getActors,\n  getActor,\n  getActorKeys,\n  getTitle,\n  clear,\n  LINETYPE,\n  ARROWTYPE,\n  PLACEMENT,\n  addNote,\n  setTitle,\n  apply\n};\n","import * as d3 from 'd3';\n\nimport svgDraw from './svgDraw';\nimport { logger } from '../../logger';\nimport { parser } from './parser/sequenceDiagram';\nimport sequenceDb from './sequenceDb';\n\nparser.yy = sequenceDb;\n\nconst conf = {\n  diagramMarginX: 50,\n  diagramMarginY: 30,\n  // Margin between actors\n  actorMargin: 50,\n  // Width of actor boxes\n  width: 150,\n  // Height of actor boxes\n  height: 65,\n  actorFontSize: 14,\n  actorFontFamily: '\"Open-Sans\", \"sans-serif\"',\n  // Margin around loop boxes\n  boxMargin: 10,\n  boxTextMargin: 5,\n  noteMargin: 10,\n  // Space between messages\n  messageMargin: 35,\n  // mirror actors under diagram\n  mirrorActors: false,\n  // Depending on css styling this might need adjustment\n  // Prolongs the edge of the diagram downwards\n  bottomMarginAdj: 1,\n\n  // width of activation box\n  activationWidth: 10,\n\n  // text placement as: tspan | fo | old only text as before\n  textPlacement: 'tspan',\n\n  showSequenceNumbers: false\n};\n\nexport const bounds = {\n  data: {\n    startx: undefined,\n    stopx: undefined,\n    starty: undefined,\n    stopy: undefined\n  },\n  verticalPos: 0,\n\n  sequenceItems: [],\n  activations: [],\n  init: function() {\n    this.sequenceItems = [];\n    this.activations = [];\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined\n    };\n    this.verticalPos = 0;\n  },\n  updateVal: function(obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  },\n  updateBounds: function(startx, starty, stopx, stopy) {\n    const _self = this;\n    let cnt = 0;\n    function updateFn(type) {\n      return function updateItemBounds(item) {\n        cnt++;\n        // The loop sequenceItems is a stack so the biggest margins in the beginning of the sequenceItems\n        const n = _self.sequenceItems.length - cnt + 1;\n\n        _self.updateVal(item, 'starty', starty - n * conf.boxMargin, Math.min);\n        _self.updateVal(item, 'stopy', stopy + n * conf.boxMargin, Math.max);\n\n        _self.updateVal(bounds.data, 'startx', startx - n * conf.boxMargin, Math.min);\n        _self.updateVal(bounds.data, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n        if (!(type === 'activation')) {\n          _self.updateVal(item, 'startx', startx - n * conf.boxMargin, Math.min);\n          _self.updateVal(item, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n          _self.updateVal(bounds.data, 'starty', starty - n * conf.boxMargin, Math.min);\n          _self.updateVal(bounds.data, 'stopy', stopy + n * conf.boxMargin, Math.max);\n        }\n      };\n    }\n\n    this.sequenceItems.forEach(updateFn());\n    this.activations.forEach(updateFn('activation'));\n  },\n  insert: function(startx, starty, stopx, stopy) {\n    const _startx = Math.min(startx, stopx);\n    const _stopx = Math.max(startx, stopx);\n    const _starty = Math.min(starty, stopy);\n    const _stopy = Math.max(starty, stopy);\n\n    this.updateVal(bounds.data, 'startx', _startx, Math.min);\n    this.updateVal(bounds.data, 'starty', _starty, Math.min);\n    this.updateVal(bounds.data, 'stopx', _stopx, Math.max);\n    this.updateVal(bounds.data, 'stopy', _stopy, Math.max);\n\n    this.updateBounds(_startx, _starty, _stopx, _stopy);\n  },\n  newActivation: function(message, diagram) {\n    const actorRect = parser.yy.getActors()[message.from.actor];\n    const stackedSize = actorActivations(message.from.actor).length;\n    const x = actorRect.x + conf.width / 2 + ((stackedSize - 1) * conf.activationWidth) / 2;\n    this.activations.push({\n      startx: x,\n      starty: this.verticalPos + 2,\n      stopx: x + conf.activationWidth,\n      stopy: undefined,\n      actor: message.from.actor,\n      anchored: svgDraw.anchorElement(diagram)\n    });\n  },\n  endActivation: function(message) {\n    // find most recent activation for given actor\n    const lastActorActivationIdx = this.activations\n      .map(function(activation) {\n        return activation.actor;\n      })\n      .lastIndexOf(message.from.actor);\n    const activation = this.activations.splice(lastActorActivationIdx, 1)[0];\n    return activation;\n  },\n  newLoop: function(title, fill) {\n    this.sequenceItems.push({\n      startx: undefined,\n      starty: this.verticalPos,\n      stopx: undefined,\n      stopy: undefined,\n      title: title,\n      fill: fill\n    });\n  },\n  endLoop: function() {\n    const loop = this.sequenceItems.pop();\n    return loop;\n  },\n  addSectionToLoop: function(message) {\n    const loop = this.sequenceItems.pop();\n    loop.sections = loop.sections || [];\n    loop.sectionTitles = loop.sectionTitles || [];\n    loop.sections.push(bounds.getVerticalPos());\n    loop.sectionTitles.push(message);\n    this.sequenceItems.push(loop);\n  },\n  bumpVerticalPos: function(bump) {\n    this.verticalPos = this.verticalPos + bump;\n    this.data.stopy = this.verticalPos;\n  },\n  getVerticalPos: function() {\n    return this.verticalPos;\n  },\n  getBounds: function() {\n    return this.data;\n  }\n};\n\nconst _drawLongText = (text, x, y, g, width) => {\n  let textHeight = 0;\n  const lines = text.split(/<br\\s*\\/?>/gi);\n  for (const line of lines) {\n    const textObj = svgDraw.getTextObj();\n    textObj.x = x;\n    textObj.y = y + textHeight;\n    textObj.textMargin = conf.noteMargin;\n    textObj.dy = '1em';\n    textObj.text = line;\n    textObj.class = 'noteText';\n    const textElem = svgDraw.drawText(g, textObj, width);\n    textHeight += (textElem._groups || textElem)[0][0].getBBox().height;\n  }\n  return textHeight;\n};\n\n/**\n * Draws an actor in the diagram with the attaced line\n * @param center - The center of the the actor\n * @param pos The position if the actor in the liost of actors\n * @param description The text in the box\n */\nconst drawNote = function(elem, startx, verticalPos, msg, forceWidth) {\n  const rect = svgDraw.getNoteRect();\n  rect.x = startx;\n  rect.y = verticalPos;\n  rect.width = forceWidth || conf.width;\n  rect.class = 'note';\n\n  let g = elem.append('g');\n  const rectElem = svgDraw.drawRect(g, rect);\n\n  const textHeight = _drawLongText(\n    msg.message,\n    startx - 4,\n    verticalPos + 24,\n    g,\n    rect.width - conf.noteMargin\n  );\n\n  bounds.insert(\n    startx,\n    verticalPos,\n    startx + rect.width,\n    verticalPos + 2 * conf.noteMargin + textHeight\n  );\n  rectElem.attr('height', textHeight + 2 * conf.noteMargin);\n  bounds.bumpVerticalPos(textHeight + 2 * conf.noteMargin);\n};\n\n/**\n * Draws a message\n * @param elem\n * @param startx\n * @param stopx\n * @param verticalPos\n * @param txtCenter\n * @param msg\n */\nconst drawMessage = function(elem, startx, stopx, verticalPos, msg, sequenceIndex) {\n  const g = elem.append('g');\n  const txtCenter = startx + (stopx - startx) / 2;\n\n  let textElem;\n  let counterBreaklines = 0;\n  let breaklineOffset = 17;\n  const breaklines = msg.message.split(/<br\\s*\\/?>/gi);\n  for (const breakline of breaklines) {\n    textElem = g\n      .append('text') // text label for the x axis\n      .attr('x', txtCenter)\n      .attr('y', verticalPos - 7 + counterBreaklines * breaklineOffset)\n      .style('text-anchor', 'middle')\n      .attr('class', 'messageText')\n      .text(breakline.trim());\n    counterBreaklines++;\n  }\n  const offsetLineCounter = counterBreaklines - 1;\n  const totalOffset = offsetLineCounter * breaklineOffset;\n\n  let textWidth = (textElem._groups || textElem)[0][0].getBBox().width;\n\n  let line;\n  if (startx === stopx) {\n    if (conf.rightAngles) {\n      line = g\n        .append('path')\n        .attr(\n          'd',\n          `M  ${startx},${verticalPos + totalOffset} H ${startx + conf.width / 2} V ${verticalPos +\n            25 +\n            totalOffset} H ${startx}`\n        );\n    } else {\n      line = g\n        .append('path')\n        .attr(\n          'd',\n          'M ' +\n            startx +\n            ',' +\n            (verticalPos + totalOffset) +\n            ' C ' +\n            (startx + 60) +\n            ',' +\n            (verticalPos - 10 + totalOffset) +\n            ' ' +\n            (startx + 60) +\n            ',' +\n            (verticalPos + 30 + totalOffset) +\n            ' ' +\n            startx +\n            ',' +\n            (verticalPos + 20 + totalOffset)\n        );\n    }\n\n    bounds.bumpVerticalPos(30 + totalOffset);\n    const dx = Math.max(textWidth / 2, 100);\n    bounds.insert(\n      startx - dx,\n      bounds.getVerticalPos() - 10 + totalOffset,\n      stopx + dx,\n      bounds.getVerticalPos() + totalOffset\n    );\n  } else {\n    line = g.append('line');\n    line.attr('x1', startx);\n    line.attr('y1', verticalPos);\n    line.attr('x2', stopx);\n    line.attr('y2', verticalPos);\n    bounds.insert(\n      startx,\n      bounds.getVerticalPos() - 10 + totalOffset,\n      stopx,\n      bounds.getVerticalPos() + totalOffset\n    );\n  }\n  // Make an SVG Container\n  // Draw the line\n  if (\n    msg.type === parser.yy.LINETYPE.DOTTED ||\n    msg.type === parser.yy.LINETYPE.DOTTED_CROSS ||\n    msg.type === parser.yy.LINETYPE.DOTTED_OPEN\n  ) {\n    line.style('stroke-dasharray', '3, 3');\n    line.attr('class', 'messageLine1');\n  } else {\n    line.attr('class', 'messageLine0');\n  }\n\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  line.attr('stroke-width', 2);\n  line.attr('stroke', 'black');\n  line.style('fill', 'none'); // remove any fill colour\n  if (msg.type === parser.yy.LINETYPE.SOLID || msg.type === parser.yy.LINETYPE.DOTTED) {\n    line.attr('marker-end', 'url(' + url + '#arrowhead)');\n  }\n\n  if (msg.type === parser.yy.LINETYPE.SOLID_CROSS || msg.type === parser.yy.LINETYPE.DOTTED_CROSS) {\n    line.attr('marker-end', 'url(' + url + '#crosshead)');\n  }\n\n  // add node number\n  if (conf.showSequenceNumbers) {\n    line.attr('marker-start', 'url(' + url + '#sequencenumber)');\n    g.append('text')\n      .attr('x', startx)\n      .attr('y', verticalPos + 4)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '12px')\n      .attr('text-anchor', 'middle')\n      .attr('textLength', '16px')\n      .attr('class', 'sequenceNumber')\n      .text(sequenceIndex);\n  }\n};\n\nexport const drawActors = function(diagram, actors, actorKeys, verticalPos) {\n  // Draw the actors\n  for (let i = 0; i < actorKeys.length; i++) {\n    const key = actorKeys[i];\n\n    // Add some rendering data to the object\n    actors[key].x = i * conf.actorMargin + i * conf.width;\n    actors[key].y = verticalPos;\n    actors[key].width = conf.diagramMarginX;\n    actors[key].height = conf.diagramMarginY;\n\n    // Draw the box with the attached line\n    svgDraw.drawActor(diagram, actors[key].x, verticalPos, actors[key].description, conf);\n    bounds.insert(actors[key].x, verticalPos, actors[key].x + conf.width, conf.height);\n  }\n\n  // Add a margin between the actor boxes and the first arrow\n  bounds.bumpVerticalPos(conf.height);\n};\n\nexport const setConf = function(cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function(key) {\n    conf[key] = cnf[key];\n  });\n  conf.actorFontFamily = cnf.fontFamily;\n};\n\nconst actorActivations = function(actor) {\n  return bounds.activations.filter(function(activation) {\n    return activation.actor === actor;\n  });\n};\n\nconst actorFlowVerticaBounds = function(actor) {\n  // handle multiple stacked activations for same actor\n  const actors = parser.yy.getActors();\n  const activations = actorActivations(actor);\n\n  const left = activations.reduce(function(acc, activation) {\n    return Math.min(acc, activation.startx);\n  }, actors[actor].x + conf.width / 2);\n  const right = activations.reduce(function(acc, activation) {\n    return Math.max(acc, activation.stopx);\n  }, actors[actor].x + conf.width / 2);\n  return [left, right];\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n * @param text\n * @param id\n */\nexport const draw = function(text, id) {\n  parser.yy.clear();\n  parser.parse(text + '\\n');\n\n  bounds.init();\n  const diagram = d3.select(`[id=\"${id}\"]`);\n\n  let startx;\n  let stopx;\n  let forceWidth;\n\n  // Fetch data from the parsing\n  const actors = parser.yy.getActors();\n  const actorKeys = parser.yy.getActorKeys();\n  const messages = parser.yy.getMessages();\n  const title = parser.yy.getTitle();\n  drawActors(diagram, actors, actorKeys, 0);\n\n  // The arrow head definition is attached to the svg once\n  svgDraw.insertArrowHead(diagram);\n  svgDraw.insertArrowCrossHead(diagram);\n  svgDraw.insertSequenceNumber(diagram);\n\n  function activeEnd(msg, verticalPos) {\n    const activationData = bounds.endActivation(msg);\n    if (activationData.starty + 18 > verticalPos) {\n      activationData.starty = verticalPos - 6;\n      verticalPos += 12;\n    }\n    svgDraw.drawActivation(\n      diagram,\n      activationData,\n      verticalPos,\n      conf,\n      actorActivations(msg.from.actor).length\n    );\n\n    bounds.insert(activationData.startx, verticalPos - 10, activationData.stopx, verticalPos);\n  }\n\n  // const lastMsg\n\n  // Draw the messages/signals\n  let sequenceIndex = 1;\n  messages.forEach(function(msg) {\n    let loopData;\n    switch (msg.type) {\n      case parser.yy.LINETYPE.NOTE:\n        bounds.bumpVerticalPos(conf.boxMargin);\n\n        startx = actors[msg.from].x;\n        stopx = actors[msg.to].x;\n\n        if (msg.placement === parser.yy.PLACEMENT.RIGHTOF) {\n          drawNote(\n            diagram,\n            startx + (conf.width + conf.actorMargin) / 2,\n            bounds.getVerticalPos(),\n            msg\n          );\n        } else if (msg.placement === parser.yy.PLACEMENT.LEFTOF) {\n          drawNote(\n            diagram,\n            startx - (conf.width + conf.actorMargin) / 2,\n            bounds.getVerticalPos(),\n            msg\n          );\n        } else if (msg.to === msg.from) {\n          // Single-actor over\n          drawNote(diagram, startx, bounds.getVerticalPos(), msg);\n        } else {\n          // Multi-actor over\n          forceWidth = Math.abs(startx - stopx) + conf.actorMargin;\n          drawNote(\n            diagram,\n            (startx + stopx + conf.width - forceWidth) / 2,\n            bounds.getVerticalPos(),\n            msg,\n            forceWidth\n          );\n        }\n        break;\n      case parser.yy.LINETYPE.ACTIVE_START:\n        bounds.newActivation(msg, diagram);\n        break;\n      case parser.yy.LINETYPE.ACTIVE_END:\n        activeEnd(msg, bounds.getVerticalPos());\n        break;\n      case parser.yy.LINETYPE.LOOP_START:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        bounds.newLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin + conf.boxTextMargin);\n        break;\n      case parser.yy.LINETYPE.LOOP_END:\n        loopData = bounds.endLoop();\n\n        svgDraw.drawLoop(diagram, loopData, 'loop', conf);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.RECT_START:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        bounds.newLoop(undefined, msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.RECT_END: {\n        const rectData = bounds.endLoop();\n        svgDraw.drawBackgroundRect(diagram, rectData);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      }\n      case parser.yy.LINETYPE.OPT_START:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        bounds.newLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin + conf.boxTextMargin);\n        break;\n      case parser.yy.LINETYPE.OPT_END:\n        loopData = bounds.endLoop();\n\n        svgDraw.drawLoop(diagram, loopData, 'opt', conf);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.ALT_START:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        bounds.newLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin + conf.boxTextMargin);\n        break;\n      case parser.yy.LINETYPE.ALT_ELSE:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        loopData = bounds.addSectionToLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.ALT_END:\n        loopData = bounds.endLoop();\n\n        svgDraw.drawLoop(diagram, loopData, 'alt', conf);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.PAR_START:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        bounds.newLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin + conf.boxTextMargin);\n        break;\n      case parser.yy.LINETYPE.PAR_AND:\n        bounds.bumpVerticalPos(conf.boxMargin);\n        loopData = bounds.addSectionToLoop(msg.message);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      case parser.yy.LINETYPE.PAR_END:\n        loopData = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopData, 'par', conf);\n        bounds.bumpVerticalPos(conf.boxMargin);\n        break;\n      default:\n        try {\n          // lastMsg = msg\n          bounds.bumpVerticalPos(conf.messageMargin);\n          const fromBounds = actorFlowVerticaBounds(msg.from);\n          const toBounds = actorFlowVerticaBounds(msg.to);\n          const fromIdx = fromBounds[0] <= toBounds[0] ? 1 : 0;\n          const toIdx = fromBounds[0] < toBounds[0] ? 0 : 1;\n          startx = fromBounds[fromIdx];\n          stopx = toBounds[toIdx];\n\n          const verticalPos = bounds.getVerticalPos();\n          drawMessage(diagram, startx, stopx, verticalPos, msg, sequenceIndex);\n          const allBounds = fromBounds.concat(toBounds);\n          bounds.insert(\n            Math.min.apply(null, allBounds),\n            verticalPos,\n            Math.max.apply(null, allBounds),\n            verticalPos\n          );\n        } catch (e) {\n          logger.error('error while drawing message', e);\n        }\n    }\n    // Increment sequence counter if msg.type is a line (and not another event like activation or note, etc)\n    if (\n      [\n        parser.yy.LINETYPE.SOLID_OPEN,\n        parser.yy.LINETYPE.DOTTED_OPEN,\n        parser.yy.LINETYPE.SOLID,\n        parser.yy.LINETYPE.DOTTED,\n        parser.yy.LINETYPE.SOLID_CROSS,\n        parser.yy.LINETYPE.DOTTED_CROSS\n      ].includes(msg.type)\n    ) {\n      sequenceIndex++;\n    }\n  });\n\n  if (conf.mirrorActors) {\n    // Draw actors below diagram\n    bounds.bumpVerticalPos(conf.boxMargin * 2);\n    drawActors(diagram, actors, actorKeys, bounds.getVerticalPos());\n  }\n\n  const box = bounds.getBounds();\n\n  // Adjust line height of actor lines now that the height of the diagram is known\n  logger.debug('For line height fix Querying: #' + id + ' .actor-line');\n  const actorLines = d3.selectAll('#' + id + ' .actor-line');\n  actorLines.attr('y2', box.stopy);\n\n  let height = box.stopy - box.starty + 2 * conf.diagramMarginY;\n  if (conf.mirrorActors) {\n    height = height - conf.boxMargin + conf.bottomMarginAdj;\n  }\n\n  const width = box.stopx - box.startx + 2 * conf.diagramMarginX;\n\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', (box.stopx - box.startx) / 2 - 2 * conf.diagramMarginX)\n      .attr('y', -25);\n  }\n\n  if (conf.useMaxWidth) {\n    diagram.attr('height', '100%');\n    diagram.attr('width', '100%');\n    diagram.attr('style', 'max-width:' + width + 'px;');\n  } else {\n    diagram.attr('height', height);\n    diagram.attr('width', width);\n  }\n  const extraVertForTitle = title ? 40 : 0;\n  diagram.attr(\n    'viewBox',\n    box.startx -\n      conf.diagramMarginX +\n      ' -' +\n      (conf.diagramMarginY + extraVertForTitle) +\n      ' ' +\n      width +\n      ' ' +\n      (height + extraVertForTitle)\n  );\n};\n\nexport default {\n  bounds,\n  drawActors,\n  setConf,\n  draw\n};\n","export const drawRect = function(elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (typeof rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\nexport const drawText = function(elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(/<br\\s*\\/?>/gi, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nexport const drawLabel = function(elem, txtObject) {\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, 50, 20, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.labelMargin;\n  txtObject.x = txtObject.x + 0.5 * txtObject.labelMargin;\n  drawText(elem, txtObject);\n};\n\nlet actorCnt = -1;\n/**\n * Draws an actor in the diagram with the attaced line\n * @param center - The center of the the actor\n * @param pos The position if the actor in the liost of actors\n * @param description The text in the box\n */\nexport const drawActor = function(elem, left, verticalPos, description, conf) {\n  const center = left + conf.width / 2;\n  const g = elem.append('g');\n  if (verticalPos === 0) {\n    actorCnt++;\n    g.append('line')\n      .attr('id', 'actor' + actorCnt)\n      .attr('x1', center)\n      .attr('y1', 5)\n      .attr('x2', center)\n      .attr('y2', 2000)\n      .attr('class', 'actor-line')\n      .attr('stroke-width', '0.5px')\n      .attr('stroke', '#999');\n  }\n\n  const rect = getNoteRect();\n  rect.x = left;\n  rect.y = verticalPos;\n  rect.fill = '#eaeaea';\n  rect.width = conf.width;\n  rect.height = conf.height;\n  rect.class = 'actor';\n  rect.rx = 3;\n  rect.ry = 3;\n  drawRect(g, rect);\n\n  _drawTextCandidateFunc(conf)(\n    description,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'actor' },\n    conf\n  );\n};\n\nexport const anchorElement = function(elem) {\n  return elem.append('g');\n};\n/**\n * Draws an actor in the diagram with the attaced line\n * @param elem - element to append activation rect\n * @param bounds - activation box bounds\n * @param verticalPos - precise y cooridnate of bottom activation box edge\n */\nexport const drawActivation = function(elem, bounds, verticalPos, conf, actorActivations) {\n  const rect = getNoteRect();\n  const g = bounds.anchored;\n  rect.x = bounds.startx;\n  rect.y = bounds.starty;\n  rect.class = 'activation' + (actorActivations % 3); // Will evaluate to 0, 1 or 2\n  rect.width = bounds.stopx - bounds.startx;\n  rect.height = verticalPos - bounds.starty;\n  drawRect(g, rect);\n};\n\n/**\n * Draws an actor in the diagram with the attaced line\n * @param center - The center of the the actor\n * @param pos The position if the actor in the list of actors\n * @param description The text in the box\n */\nexport const drawLoop = function(elem, bounds, labelText, conf) {\n  const g = elem.append('g');\n  const drawLoopLine = function(startx, starty, stopx, stopy) {\n    return g\n      .append('line')\n      .attr('x1', startx)\n      .attr('y1', starty)\n      .attr('x2', stopx)\n      .attr('y2', stopy)\n      .attr('class', 'loopLine');\n  };\n  drawLoopLine(bounds.startx, bounds.starty, bounds.stopx, bounds.starty);\n  drawLoopLine(bounds.stopx, bounds.starty, bounds.stopx, bounds.stopy);\n  drawLoopLine(bounds.startx, bounds.stopy, bounds.stopx, bounds.stopy);\n  drawLoopLine(bounds.startx, bounds.starty, bounds.startx, bounds.stopy);\n  if (typeof bounds.sections !== 'undefined') {\n    bounds.sections.forEach(function(item) {\n      drawLoopLine(bounds.startx, item, bounds.stopx, item).style('stroke-dasharray', '3, 3');\n    });\n  }\n\n  let txt = getTextObj();\n  txt.text = labelText;\n  txt.x = bounds.startx;\n  txt.y = bounds.starty;\n  txt.labelMargin = 1.5 * 10; // This is the small box that says \"loop\"\n  txt.class = 'labelText'; // Its size & position are fixed.\n\n  drawLabel(g, txt);\n\n  txt = getTextObj();\n  txt.text = '[ ' + bounds.title + ' ]';\n  txt.x = bounds.startx + (bounds.stopx - bounds.startx) / 2;\n  txt.y = bounds.starty + 1.5 * conf.boxMargin;\n  txt.anchor = 'middle';\n  txt.class = 'loopText';\n\n  drawText(g, txt);\n\n  if (typeof bounds.sectionTitles !== 'undefined') {\n    bounds.sectionTitles.forEach(function(item, idx) {\n      if (item !== '') {\n        txt.text = '[ ' + item + ' ]';\n        txt.y = bounds.sections[idx] + 1.5 * conf.boxMargin;\n        drawText(g, txt);\n      }\n    });\n  }\n};\n\n/**\n * Draws a background rectangle\n * @param color - The fill color for the background\n */\nexport const drawBackgroundRect = function(elem, bounds) {\n  const rectElem = drawRect(elem, {\n    x: bounds.startx,\n    y: bounds.starty,\n    width: bounds.stopx - bounds.startx,\n    height: bounds.stopy - bounds.starty,\n    fill: bounds.fill,\n    class: 'rect'\n  });\n  rectElem.lower();\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n */\nexport const insertArrowHead = function(elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 5)\n    .attr('refY', 2)\n    .attr('markerWidth', 6)\n    .attr('markerHeight', 4)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0,0 V 4 L6,2 Z'); // this is actual shape for arrowhead\n};\n/**\n * Setup node number. The result is appended to the svg.\n */\nexport const insertSequenceNumber = function(elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'sequencenumber')\n    .attr('refX', 15)\n    .attr('refY', 15)\n    .attr('markerWidth', 60)\n    .attr('markerHeight', 40)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', 15)\n    .attr('cy', 15)\n    .attr('r', 6);\n  // .style(\"fill\", '#f00');\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n */\nexport const insertArrowCrossHead = function(elem) {\n  const defs = elem.append('defs');\n  const marker = defs\n    .append('marker')\n    .attr('id', 'crosshead')\n    .attr('markerWidth', 15)\n    .attr('markerHeight', 8)\n    .attr('orient', 'auto')\n    .attr('refX', 16)\n    .attr('refY', 4);\n\n  // The arrow\n  marker\n    .append('path')\n    .attr('fill', 'black')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 9,2 V 6 L16,4 Z');\n\n  // The cross\n  marker\n    .append('path')\n    .attr('fill', 'none')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 0,1 L 6,7 M 6,1 L 0,7');\n  // this is actual shape for arrowhead\n};\n\nexport const getTextObj = function() {\n  const txt = {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    'text-anchor': 'start',\n    style: '#666',\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0\n  };\n  return txt;\n};\n\nexport const getNoteRect = function() {\n  const rect = {\n    x: 0,\n    y: 0,\n    fill: '#EDF2AE',\n    stroke: '#666',\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0\n  };\n  return rect;\n};\n\nconst _drawTextCandidateFunc = (function() {\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { actorFontSize, actorFontFamily } = conf;\n\n    const lines = content.split(/<br\\s*\\/?>/gi);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * actorFontSize - (actorFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .style('text-anchor', 'middle')\n        .style('font-size', actorFontSize)\n        .style('font-family', actorFontFamily);\n      text\n        .append('tspan')\n        .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) { // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function(conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nexport default {\n  drawRect,\n  drawText,\n  drawLabel,\n  drawActor,\n  anchorElement,\n  drawActivation,\n  drawLoop,\n  drawBackgroundRect,\n  insertArrowHead,\n  insertSequenceNumber,\n  insertArrowCrossHead,\n  getTextObj,\n  getNoteRect\n};\n","const idCache = {};\n\nexport const set = (key, val) => {\n  idCache[key] = val;\n};\n\nexport const get = k => idCache[k];\nexport const keys = () => Object.keys(idCache);\nexport const size = () => keys().length;\n\nexport default {\n  get,\n  set,\n  keys,\n  size\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,4],$V3=[2,4],$V4=[1,9],$V5=[1,11],$V6=[1,13],$V7=[1,14],$V8=[1,15],$V9=[1,16],$Va=[1,21],$Vb=[1,17],$Vc=[1,18],$Vd=[1,19],$Ve=[1,20],$Vf=[1,22],$Vg=[1,4,5,13,14,16,18,19,21,22,23,24,25,28],$Vh=[1,4,5,11,12,13,14,16,18,19,21,22,23,24,25,28],$Vi=[4,5,13,14,16,18,19,21,22,23,24,25,28];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NL\":5,\"SD\":6,\"document\":7,\"line\":8,\"statement\":9,\"idStatement\":10,\"DESCR\":11,\"-->\":12,\"HIDE_EMPTY\":13,\"scale\":14,\"WIDTH\":15,\"COMPOSIT_STATE\":16,\"STRUCT_START\":17,\"STRUCT_STOP\":18,\"STATE_DESCR\":19,\"AS\":20,\"ID\":21,\"FORK\":22,\"JOIN\":23,\"CONCURRENT\":24,\"note\":25,\"notePosition\":26,\"NOTE_TEXT\":27,\"EDGE_STATE\":28,\"left_of\":29,\"right_of\":30,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NL\",6:\"SD\",11:\"DESCR\",12:\"-->\",13:\"HIDE_EMPTY\",14:\"scale\",15:\"WIDTH\",16:\"COMPOSIT_STATE\",17:\"STRUCT_START\",18:\"STRUCT_STOP\",19:\"STATE_DESCR\",20:\"AS\",21:\"ID\",22:\"FORK\",23:\"JOIN\",24:\"CONCURRENT\",25:\"note\",27:\"NOTE_TEXT\",28:\"EDGE_STATE\",29:\"left_of\",30:\"right_of\"},\nproductions_: [0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,4],[9,4],[10,1],[10,1],[26,1],[26,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 3:\n /*console.warn('Root document', $$[$0]);*/ yy.setRootDoc($$[$0]);return $$[$0]; \nbreak;\ncase 4:\n this.$ = [] \nbreak;\ncase 5:\n\n        if($$[$0]!='nl'){\n            $$[$0-1].push($$[$0]);this.$ = $$[$0-1]\n        }\n        // console.warn('Got document',$$[$0-1], $$[$0]);\n    \nbreak;\ncase 6: case 7:\n this.$ = $$[$0] \nbreak;\ncase 8:\n this.$='nl';\nbreak;\ncase 9:\n /*console.warn('got id and descr', $$[$0]);*/this.$={ stmt: 'state', id: $$[$0], type: 'default', description: ''};\nbreak;\ncase 10:\n /*console.warn('got id and descr', $$[$0-1], $$[$0].trim());*/this.$={ stmt: 'state', id: $$[$0-1], type: 'default', description: $$[$0].trim()};\nbreak;\ncase 11:\n\n        /*console.warn('got id', $$[$0-2]);yy.addRelation($$[$0-2], $$[$0]);*/\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-2], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0] ,type: 'default', description: ''}};\n    \nbreak;\ncase 12:\n\n        /*yy.addRelation($$[$0-3], $$[$0-1], $$[$0].substr(1).trim());*/\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-3], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0-1] ,type: 'default', description: ''}, description: $$[$0].substr(1).trim()};\n    \nbreak;\ncase 16:\n\n\n        /* console.warn('Adding document for state without id ', $$[$0-3]);*/\n        this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: '', doc: $$[$0-1] }\n    \nbreak;\ncase 17:\n\n        var id=$$[$0];\n        var description = $$[$0-2].trim();\n        if($$[$0].match(':')){\n            var parts = $$[$0].split(':');\n            id=parts[0];\n            description = [description, parts[1]];\n        }\n        this.$={stmt: 'state', id: id, type: 'default', description: description};\n\n    \nbreak;\ncase 18:\n\n         //console.warn('Adding document for state with id ', $$[$0-3], $$[$0-2]); yy.addDocument($$[$0-3]);\n         this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: $$[$0-5], doc: $$[$0-1] }\n    \nbreak;\ncase 19:\n\n        this.$={ stmt: 'state', id: $$[$0], type: 'fork' }\n    \nbreak;\ncase 20:\n\n        this.$={ stmt: 'state', id: $$[$0], type: 'join' }\n    \nbreak;\ncase 21:\n\n        this.$={ stmt: 'state', id: yy.getDividerId(), type: 'divider' }\n    \nbreak;\ncase 22:\n\n        /*console.warn('got NOTE, position: ', $$[$0-2].trim(), 'id = ', $$[$0-1].trim(), 'note: ', $$[$0]);*/\n        this.$={ stmt: 'state', id: $$[$0-1].trim(), note:{position: $$[$0-2].trim(), text: $$[$0].trim()}};\n    \nbreak;\ncase 24: case 25:\nthis.$=$$[$0];\nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:$V2},{1:[3]},{3:5,4:$V0,5:$V1,6:$V2},{3:6,4:$V0,5:$V1,6:$V2},o([1,4,5,13,14,16,19,21,22,23,24,25,28],$V3,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:$V4,5:$V5,8:8,9:10,10:12,13:$V6,14:$V7,16:$V8,19:$V9,21:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,28:$Vf},o($Vg,[2,5]),{9:23,10:12,13:$V6,14:$V7,16:$V8,19:$V9,21:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,28:$Vf},o($Vg,[2,7]),o($Vg,[2,8]),o($Vg,[2,9],{11:[1,24],12:[1,25]}),o($Vg,[2,13]),{15:[1,26]},o($Vg,[2,15],{17:[1,27]}),{20:[1,28]},o($Vg,[2,19]),o($Vg,[2,20]),o($Vg,[2,21]),{26:29,27:[1,30],29:[1,31],30:[1,32]},o($Vh,[2,24]),o($Vh,[2,25]),o($Vg,[2,6]),o($Vg,[2,10]),{10:33,21:$Va,28:$Vf},o($Vg,[2,14]),o($Vi,$V3,{7:34}),{21:[1,35]},{21:[1,36]},{20:[1,37]},{21:[2,26]},{21:[2,27]},o($Vg,[2,11],{11:[1,38]}),{4:$V4,5:$V5,8:8,9:10,10:12,13:$V6,14:$V7,16:$V8,18:[1,39],19:$V9,21:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,28:$Vf},o($Vg,[2,17],{17:[1,40]}),{27:[1,41]},{21:[1,42]},o($Vg,[2,12]),o($Vg,[2,16]),o($Vi,$V3,{7:43}),o($Vg,[2,22]),o($Vg,[2,23]),{4:$V4,5:$V5,8:8,9:10,10:12,13:$V6,14:$V7,16:$V8,18:[1,44],19:$V9,21:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,28:$Vf},o($Vg,[2,18])],\ndefaultActions: {5:[2,1],6:[2,2],31:[2,26],32:[2,27]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 5;\nbreak;\ncase 1:/* skip all whitespace */\nbreak;\ncase 2:/* skip same-line whitespace */\nbreak;\ncase 3:/* skip comments */\nbreak;\ncase 4:/* skip comments */\nbreak;\ncase 5: this.pushState('SCALE'); /* console.log('Got scale', yy_.yytext);*/ return 14; \nbreak;\ncase 6:return 15;\nbreak;\ncase 7:this.popState();\nbreak;\ncase 8: this.pushState('STATE'); \nbreak;\ncase 9:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim(); /*console.warn('Fork Fork: ',yy_.yytext);*/return 22;\nbreak;\ncase 10:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 23;\nbreak;\ncase 11:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Fork: ',yy_.yytext);*/return 22;\nbreak;\ncase 12:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 23;\nbreak;\ncase 13:this.begin(\"STATE_STRING\");\nbreak;\ncase 14:this.popState();this.pushState('STATE_ID');return \"AS\";\nbreak;\ncase 15:this.popState();/* console.log('STATE_ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 16:this.popState();\nbreak;\ncase 17: /*console.log('Long description:', yy_.yytext);*/return \"STATE_DESCR\";\nbreak;\ncase 18:/*console.log('COMPOSIT_STATE', yy_.yytext);*/return 16;\nbreak;\ncase 19:this.popState();\nbreak;\ncase 20:this.popState();this.pushState('struct'); /*console.log('begin struct', yy_.yytext);*/return 17;\nbreak;\ncase 21: /*console.log('Ending struct');*/ this.popState(); return 18;\nbreak;\ncase 22:/* nothing */\nbreak;\ncase 23: this.begin('NOTE'); return 25; \nbreak;\ncase 24: this.popState();this.pushState('NOTE_ID');return 29;\nbreak;\ncase 25: this.popState();this.pushState('NOTE_ID');return 30;\nbreak;\ncase 26: this.popState();this.pushState('FLOATING_NOTE');\nbreak;\ncase 27:this.popState();this.pushState('FLOATING_NOTE_ID');return \"AS\";\nbreak;\ncase 28:/**/\nbreak;\ncase 29: /*console.log('Floating note text: ', yy_.yytext);*/return \"NOTE_TEXT\";\nbreak;\ncase 30:this.popState();/*console.log('Floating note ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 31: this.popState();this.pushState('NOTE_TEXT');/*console.log('Got ID for note', yy_.yytext);*/return 21;\nbreak;\ncase 32: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.substr(2).trim();return 27;\nbreak;\ncase 33: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.slice(0,-8).trim();return 27;\nbreak;\ncase 34: /*console.log('Got state diagram', yy_.yytext,'#');*/return 6; \nbreak;\ncase 35: /*console.log('HIDE_EMPTY', yy_.yytext,'#');*/return 13; \nbreak;\ncase 36: /*console.log('EDGE_STATE=',yy_.yytext);*/ return 28;\nbreak;\ncase 37: /*console.log('=>ID=',yy_.yytext);*/ return 21;\nbreak;\ncase 38: yy_.yytext = yy_.yytext.trim(); /*console.log('Descr = ', yy_.yytext);*/ return 11; \nbreak;\ncase 39:return 12;\nbreak;\ncase 40:return 24;\nbreak;\ncase 41:return 5;\nbreak;\ncase 42:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:scale\\s+)/i,/^(?:\\d+)/i,/^(?:\\s+width\\b)/i,/^(?:state\\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*\\[\\[fork\\]\\])/i,/^(?:.*\\[\\[join\\]\\])/i,/^(?:[\"])/i,/^(?:as\\s*)/i,/^(?:[^\\n\\{]*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n\\s\\{]+)/i,/^(?:\\n)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?:[\\n])/i,/^(?:note\\s+)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:\")/i,/^(?:\\s*as\\s*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n]*)/i,/^(?:\\s*[^:\\n\\s\\-]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:\\s*[^:;]+end note\\b)/i,/^(?:stateDiagram\\s+)/i,/^(?:hide empty description\\b)/i,/^(?:\\[\\*\\])/i,/^(?:[^:\\n\\s\\-\\{]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"LINE\":{\"rules\":[2,3],\"inclusive\":false},\"struct\":{\"rules\":[2,3,8,21,22,23,36,37,38,39,40],\"inclusive\":false},\"FLOATING_NOTE_ID\":{\"rules\":[30],\"inclusive\":false},\"FLOATING_NOTE\":{\"rules\":[27,28,29],\"inclusive\":false},\"NOTE_TEXT\":{\"rules\":[32,33],\"inclusive\":false},\"NOTE_ID\":{\"rules\":[31],\"inclusive\":false},\"NOTE\":{\"rules\":[24,25,26],\"inclusive\":false},\"SCALE\":{\"rules\":[6,7],\"inclusive\":false},\"ALIAS\":{\"rules\":[],\"inclusive\":false},\"STATE_ID\":{\"rules\":[15],\"inclusive\":false},\"STATE_STRING\":{\"rules\":[16,17],\"inclusive\":false},\"FORK_STATE\":{\"rules\":[],\"inclusive\":false},\"STATE\":{\"rules\":[2,3,9,10,11,12,13,14,18,19,20],\"inclusive\":false},\"ID\":{\"rules\":[2,3],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,3,4,5,8,20,23,34,35,36,37,38,39,41,42],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import * as d3 from 'd3';\nimport idCache from './id-cache.js';\nimport stateDb from './stateDb';\nimport utils from '../../utils';\nimport { getConfig } from '../../config';\n\n// let conf;\n\n/**\n * Draws a start state as a black circle\n */\nexport const drawStartState = g =>\n  g\n    .append('circle')\n    .style('stroke', 'black')\n    .style('fill', 'black')\n    .attr('r', getConfig().state.sizeUnit)\n    .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit)\n    .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit);\n\n/**\n * Draws a start state as a black circle\n */\nexport const drawDivider = g =>\n  g\n    .append('line')\n    .style('stroke', 'grey')\n    .style('stroke-dasharray', '3')\n    .attr('x1', getConfig().state.textHeight)\n    .attr('class', 'divider')\n    .attr('x2', getConfig().state.textHeight * 2)\n    .attr('y1', 0)\n    .attr('y2', 0);\n\n/**\n * Draws a an end state as a black circle\n */\nexport const drawSimpleState = (g, stateDef) => {\n  const state = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 2 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const classBox = state.node().getBBox();\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', classBox.width + 2 * getConfig().state.padding)\n    .attr('height', classBox.height + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return state;\n};\n\n/**\n * Draws a state with descriptions\n * @param {*} g\n * @param {*} stateDef\n */\nexport const drawDescrState = (g, stateDef) => {\n  const addTspan = function(textEl, txt, isFirst) {\n    const tSpan = textEl\n      .append('tspan')\n      .attr('x', 2 * getConfig().state.padding)\n      .text(txt);\n    if (!isFirst) {\n      tSpan.attr('dy', getConfig().state.textHeight);\n    }\n  };\n  const title = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 1.3 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.descriptions[0]);\n\n  const titleBox = title.node().getBBox();\n  const titleHeight = titleBox.height;\n\n  const description = g\n    .append('text') // text label for the x axis\n    .attr('x', getConfig().state.padding)\n    .attr(\n      'y',\n      titleHeight +\n        getConfig().state.padding * 0.4 +\n        getConfig().state.dividerMargin +\n        getConfig().state.textHeight\n    )\n    .attr('class', 'state-description');\n\n  let isFirst = true;\n  let isSecond = true;\n  stateDef.descriptions.forEach(function(descr) {\n    if (!isFirst) {\n      addTspan(description, descr, isSecond);\n      isSecond = false;\n    }\n    isFirst = false;\n  });\n\n  const descrLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', getConfig().state.padding)\n    .attr('y1', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('y2', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('class', 'descr-divider');\n  const descrBox = description.node().getBBox();\n  const width = Math.max(descrBox.width, titleBox.width);\n\n  descrLine.attr('x2', width + 3 * getConfig().state.padding);\n  // const classBox = title.node().getBBox();\n\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', width + 2 * getConfig().state.padding)\n    .attr('height', descrBox.height + titleHeight + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\n/**\n * Adds the creates a box around the existing content and adds a\n * panel for the id on top of the content.\n */\n/**\n * Function that creates an title row and a frame around a substate for a composit state diagram.\n * The function returns a new d3 svg object with updated width and height properties;\n * @param {*} g The d3 svg object for the substate to framed\n * @param {*} stateDef The info about the\n */\nexport const addTitleAndBox = (g, stateDef, altBkg) => {\n  const pad = getConfig().state.padding;\n  const dblPad = 2 * getConfig().state.padding;\n  const orgBox = g.node().getBBox();\n  const orgWidth = orgBox.width;\n  const orgX = orgBox.x;\n\n  const title = g\n    .append('text')\n    .attr('x', 0)\n    .attr('y', getConfig().state.titleShift)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const titleBox = title.node().getBBox();\n  const titleWidth = titleBox.width + dblPad;\n  let width = Math.max(titleWidth, orgWidth); // + dblPad;\n  if (width === orgWidth) {\n    width = width + dblPad;\n  }\n  let startX;\n  // const lineY = 1 - getConfig().state.textHeight;\n  // const descrLine = g\n  //   .append('line') // text label for the x axis\n  //   .attr('x1', 0)\n  //   .attr('y1', lineY)\n  //   .attr('y2', lineY)\n  //   .attr('class', 'descr-divider');\n\n  const graphBox = g.node().getBBox();\n  // console.warn(width / 2, titleWidth / 2, getConfig().state.padding, orgBox);\n  // descrLine.attr('x2', graphBox.width + getConfig().state.padding);\n\n  if (stateDef.doc) {\n    // cnsole.warn(\n    //   stateDef.id,\n    //   'orgX: ',\n    //   orgX,\n    //   'width: ',\n    //   width,\n    //   'titleWidth: ',\n    //   titleWidth,\n    //   'orgWidth: ',\n    //   orgWidth,\n    //   'width',\n    //   width\n    // );\n  }\n\n  startX = orgX - pad;\n  if (titleWidth > orgWidth) {\n    startX = (orgWidth - width) / 2 + pad;\n  }\n  if (Math.abs(orgX - graphBox.x) < pad) {\n    if (titleWidth > orgWidth) {\n      startX = orgX - (titleWidth - orgWidth) / 2;\n    }\n  }\n\n  const lineY = 1 - getConfig().state.textHeight;\n  // White color\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr('y', lineY)\n    .attr('class', altBkg ? 'alt-composit' : 'composit')\n    .attr('width', width)\n    .attr(\n      'height',\n      graphBox.height + getConfig().state.textHeight + getConfig().state.titleShift + 1\n    )\n    .attr('rx', '0');\n\n  title.attr('x', startX + pad);\n  if (titleWidth <= orgWidth) title.attr('x', orgX + (width - dblPad) / 2 - titleWidth / 2 + pad);\n\n  // Title background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    // Just needs to be higher then the descr line, will be clipped by the white color box\n    .attr('height', getConfig().state.textHeight * 3)\n    .attr('rx', getConfig().state.radius);\n\n  // Full background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    .attr('height', graphBox.height + 3 + 2 * getConfig().state.textHeight)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\nconst drawEndState = g => {\n  g.append('circle')\n    .style('stroke', 'black')\n    .style('fill', 'white')\n    .attr('r', getConfig().state.sizeUnit + getConfig().state.miniPadding)\n    .attr(\n      'cx',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    )\n    .attr(\n      'cy',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    );\n\n  return g\n    .append('circle')\n    .style('stroke', 'black')\n    .style('fill', 'black')\n    .attr('r', getConfig().state.sizeUnit)\n    .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit + 2)\n    .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit + 2);\n};\nconst drawForkJoinState = (g, stateDef) => {\n  let width = getConfig().state.forkWidth;\n  let height = getConfig().state.forkHeight;\n\n  if (stateDef.parentId) {\n    let tmp = width;\n    width = height;\n    height = tmp;\n  }\n  return g\n    .append('rect')\n    .style('stroke', 'black')\n    .style('fill', 'black')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding);\n};\n\nexport const drawText = function(elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(/<br\\/?>/gi, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nconst _drawLongText = (_text, x, y, g) => {\n  let textHeight = 0;\n\n  const textElem = g.append('text');\n  textElem.style('text-anchor', 'start');\n  textElem.attr('class', 'noteText');\n\n  let text = _text.replace(/\\r\\n/g, '<br/>');\n  text = text.replace(/\\n/g, '<br/>');\n  const lines = text.split(/<br\\/?>/gi);\n\n  let tHeight = 1.25 * getConfig().state.noteMargin;\n  for (const line of lines) {\n    const txt = line.trim();\n\n    if (txt.length > 0) {\n      const span = textElem.append('tspan');\n      span.text(txt);\n      if (tHeight === 0) {\n        const textBounds = span.node().getBBox();\n        tHeight += textBounds.height;\n      }\n      // console.warn('textBounds', textBounds);\n      textHeight += tHeight;\n      span.attr('x', x + getConfig().state.noteMargin);\n      span.attr('y', y + textHeight + 1.25 * getConfig().state.noteMargin);\n    }\n  }\n  return { textWidth: textElem.node().getBBox().width, textHeight };\n};\n\n/**\n * Draws an actor in the diagram with the attaced line\n * @param center - The center of the the actor\n * @param pos The position if the actor in the liost of actors\n * @param description The text in the box\n */\n\nexport const drawNote = (text, g) => {\n  g.attr('class', 'state-note');\n  const note = g\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', getConfig().state.padding);\n  const rectElem = g.append('g');\n\n  const { textWidth, textHeight } = _drawLongText(text, 0, 0, rectElem);\n  note.attr('height', textHeight + 2 * getConfig().state.noteMargin);\n  note.attr('width', textWidth + getConfig().state.noteMargin * 2);\n\n  return note;\n};\n\n/**\n * Starting point for drawing a state. The function finds out the specifics\n * about the state and renders with approprtiate function.\n * @param {*} elem\n * @param {*} stateDef\n */\n\nexport const drawState = function(elem, stateDef) {\n  const id = stateDef.id;\n  const stateInfo = {\n    id: id,\n    label: stateDef.id,\n    width: 0,\n    height: 0\n  };\n\n  const g = elem\n    .append('g')\n    .attr('id', id)\n    .attr('class', 'stateGroup');\n\n  if (stateDef.type === 'start') drawStartState(g);\n  if (stateDef.type === 'end') drawEndState(g);\n  if (stateDef.type === 'fork' || stateDef.type === 'join') drawForkJoinState(g, stateDef);\n  if (stateDef.type === 'note') drawNote(stateDef.note.text, g);\n  if (stateDef.type === 'divider') drawDivider(g);\n  if (stateDef.type === 'default' && stateDef.descriptions.length === 0)\n    drawSimpleState(g, stateDef);\n  if (stateDef.type === 'default' && stateDef.descriptions.length > 0) drawDescrState(g, stateDef);\n\n  const stateBox = g.node().getBBox();\n  stateInfo.width = stateBox.width + 2 * getConfig().state.padding;\n  stateInfo.height = stateBox.height + 2 * getConfig().state.padding;\n\n  idCache.set(id, stateInfo);\n  // stateCnt++;\n  return stateInfo;\n};\n\nconst getRows = s => {\n  let str = s.replace(/<br\\/?>/gi, '#br#');\n  str = str.replace(/\\\\n/g, '#br#');\n  return str.split('#br#');\n};\n\nlet edgeCount = 0;\nexport const drawEdge = function(elem, path, relation) {\n  const getRelationType = function(type) {\n    switch (type) {\n      case stateDb.relationType.AGGREGATION:\n        return 'aggregation';\n      case stateDb.relationType.EXTENSION:\n        return 'extension';\n      case stateDb.relationType.COMPOSITION:\n        return 'composition';\n      case stateDb.relationType.DEPENDENCY:\n        return 'dependency';\n    }\n  };\n\n  path.points = path.points.filter(p => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = d3\n    .line()\n    .x(function(d) {\n      return d.x;\n    })\n    .y(function(d) {\n      return d.y;\n    })\n    .curve(d3.curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'transition');\n  let url = '';\n  if (getConfig().state.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  svgPath.attr(\n    'marker-end',\n    'url(' + url + '#' + getRelationType(stateDb.relationType.DEPENDENCY) + 'End' + ')'\n  );\n\n  if (typeof relation.title !== 'undefined') {\n    const label = elem.append('g').attr('class', 'stateLabel');\n\n    const { x, y } = utils.calcLabelPosition(path.points);\n\n    const rows = getRows(relation.title);\n\n    // console.warn(rows);\n\n    let titleHeight = 0;\n    const titleRows = [];\n    for (let i = 0; i <= rows.length; i++) {\n      const title = label\n        .append('text')\n        .attr('text-anchor', 'middle')\n        .text(rows[i])\n        .attr('x', x)\n        .attr('y', y + titleHeight);\n\n      if (titleHeight === 0) {\n        const titleBox = title.node().getBBox();\n        titleHeight = titleBox.height;\n      }\n      titleRows.push(title);\n    }\n\n    if (rows.length > 1) {\n      const heightAdj = rows.length * titleHeight * 0.25;\n\n      titleRows.forEach((title, i) => title.attr('y', y + i * titleHeight - heightAdj));\n    }\n\n    const bounds = label.node().getBBox();\n    label\n      .insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', bounds.x - getConfig().state.padding / 2)\n      .attr('y', bounds.y - getConfig().state.padding / 2)\n      .attr('width', bounds.width + getConfig().state.padding)\n      .attr('height', bounds.height + getConfig().state.padding);\n\n    //label.attr('transform', '0 -' + (bounds.y / 2));\n\n    // Debug points\n    // path.points.forEach(point => {\n    //   g.append('circle')\n    //     .style('stroke', 'red')\n    //     .style('fill', 'red')\n    //     .attr('r', 1)\n    //     .attr('cx', point.x)\n    //     .attr('cy', point.y);\n    // });\n    // g.append('circle')\n    //   .style('stroke', 'blue')\n    //   .style('fill', 'blue')\n    //   .attr('r', 1)\n    //   .attr('cx', x)\n    //   .attr('cy', y);\n  }\n\n  edgeCount++;\n};\n","import { logger } from '../../logger';\n\nlet rootDoc = [];\nconst setRootDoc = o => {\n  logger.info('Setting root doc', o);\n  rootDoc = o;\n};\n\nconst getRootDoc = () => rootDoc;\n\nconst extract = doc => {\n  // const res = { states: [], relations: [] };\n  clear();\n\n  doc.forEach(item => {\n    if (item.stmt === 'state') {\n      addState(item.id, item.type, item.doc, item.description, item.note);\n    }\n    if (item.stmt === 'relation') {\n      addRelation(item.state1.id, item.state2.id, item.description);\n    }\n  });\n};\n\nconst newDoc = () => {\n  return {\n    relations: [],\n    states: {},\n    documents: {}\n  };\n};\n\nlet documents = {\n  root: newDoc()\n};\n\nlet currentDocument = documents.root;\n\nlet startCnt = 0;\nlet endCnt = 0; // eslint-disable-line\n// let stateCnt = 0;\n\n/**\n * Function called by parser when a node definition has been found.\n * @param id\n * @param text\n * @param type\n * @param style\n */\nexport const addState = function(id, type, doc, descr, note) {\n  if (typeof currentDocument.states[id] === 'undefined') {\n    currentDocument.states[id] = {\n      id: id,\n      descriptions: [],\n      type,\n      doc,\n      note\n    };\n  } else {\n    if (!currentDocument.states[id].doc) {\n      currentDocument.states[id].doc = doc;\n    }\n    if (!currentDocument.states[id].type) {\n      currentDocument.states[id].type = type;\n    }\n  }\n  if (descr) {\n    if (typeof descr === 'string') addDescription(id, descr.trim());\n\n    if (typeof descr === 'object') {\n      descr.forEach(des => addDescription(id, des.trim()));\n    }\n  }\n\n  if (note) currentDocument.states[id].note = note;\n};\n\nexport const clear = function() {\n  documents = {\n    root: newDoc()\n  };\n  currentDocument = documents.root;\n};\n\nexport const getState = function(id) {\n  return currentDocument.states[id];\n};\n\nexport const getStates = function() {\n  return currentDocument.states;\n};\nexport const logDocuments = function() {\n  logger.info('Documents = ', documents);\n};\nexport const getRelations = function() {\n  return currentDocument.relations;\n};\n\nexport const addRelation = function(_id1, _id2, title) {\n  let id1 = _id1;\n  let id2 = _id2;\n  let type1 = 'default';\n  let type2 = 'default';\n  if (_id1 === '[*]') {\n    startCnt++;\n    id1 = 'start' + startCnt;\n    type1 = 'start';\n  }\n  if (_id2 === '[*]') {\n    endCnt++;\n    id2 = 'end' + startCnt;\n    type2 = 'end';\n  }\n  addState(id1, type1);\n  addState(id2, type2);\n  currentDocument.relations.push({ id1, id2, title });\n};\n\nconst addDescription = function(id, _descr) {\n  const theState = currentDocument.states[id];\n  let descr = _descr;\n  if (descr[0] === ':') {\n    descr = descr.substr(1).trim();\n  }\n\n  theState.descriptions.push(descr);\n};\n\nexport const cleanupLabel = function(label) {\n  if (label.substring(0, 1) === ':') {\n    return label.substr(2).trim();\n  } else {\n    return label.trim();\n  }\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1\n};\n\nlet dividerCnt = 0;\nconst getDividerId = () => {\n  dividerCnt++;\n  return 'divider-id-' + dividerCnt;\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3\n};\n\nexport default {\n  addState,\n  clear,\n  getState,\n  getStates,\n  getRelations,\n  addRelation,\n  getDividerId,\n  // addDescription,\n  cleanupLabel,\n  lineType,\n  relationType,\n  logDocuments,\n  getRootDoc,\n  setRootDoc,\n  extract\n};\n","import * as d3 from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { logger } from '../../logger';\nimport stateDb from './stateDb';\nimport { parser } from './parser/stateDiagram';\n// import idCache from './id-cache';\nimport { drawState, addTitleAndBox, drawEdge } from './shapes';\nimport { getConfig } from '../../config';\n\nparser.yy = stateDb;\n\n// TODO Move conf object to main conf in mermaidAPI\nlet conf;\n\nconst transformationLog = {};\n\nexport const setConf = function() {};\n\n// Todo optimize\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n */\nconst insertMarkers = function(elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 19,7 L9,13 L14,7 L9,1 Z');\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n * @param text\n * @param id\n */\nexport const draw = function(text, id) {\n  conf = getConfig().state;\n  parser.yy.clear();\n  parser.parse(text);\n  logger.debug('Rendering diagram ' + text);\n\n  // Fetch the default direction, use TD if none was found\n  const diagram = d3.select(`[id='${id}']`);\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    multigraph: false,\n    compound: true,\n    // acyclicer: 'greedy',\n    rankdir: 'RL'\n    // ranksep: '20'\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function() {\n    return {};\n  });\n\n  const rootDoc = stateDb.getRootDoc();\n  renderDoc(rootDoc, diagram, undefined, false);\n\n  const padding = conf.padding;\n  const bounds = diagram.node().getBBox();\n\n  const width = bounds.width + padding * 2;\n  const height = bounds.height + padding * 2;\n\n  // diagram.attr('height', '100%');\n  // diagram.attr('style', `width: ${bounds.width * 3 + conf.padding * 2};`);\n  // diagram.attr('height', height);\n\n  // Zoom in a bit\n  diagram.attr('width', width * 1.75);\n  // diagram.attr('height', bounds.height * 3 + conf.padding * 2);\n  diagram.attr(\n    'viewBox',\n    `${bounds.x - conf.padding}  ${bounds.y - conf.padding} ` + width + ' ' + height\n  );\n  // diagram.attr('transform', `translate(, 0)`);\n\n  // diagram.attr(\n  //   'viewBox',\n  //   `${conf.padding * -1} ${conf.padding * -1} ` +\n  //     (bounds.width * 1.5 + conf.padding * 2) +\n  //     ' ' +\n  //     (bounds.height + conf.padding * 5)\n  // );\n};\nconst getLabelWidth = text => {\n  return text ? text.length * conf.fontSizeFactor : 1;\n};\n\n/* TODO: REMOVE DUPLICATION, SEE SHAPES */\nconst getRows = s => {\n  if (!s) return 1;\n  let str = s.replace(/<br\\/?>/gi, '#br#');\n  str = str.replace(/\\\\n/g, '#br#');\n  return str.split('#br#');\n};\n\nconst renderDoc = (doc, diagram, parentId, altBkg) => {\n  // // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    compound: true\n  });\n\n  let i;\n  let edgeFreeDoc = true;\n  for (i = 0; i < doc.length; i++) {\n    if (doc[i].stmt === 'relation') {\n      edgeFreeDoc = false;\n      break;\n    }\n  }\n\n  // Set an object for the graph label\n  if (parentId)\n    graph.setGraph({\n      rankdir: 'LR',\n      // multigraph: false,\n      compound: true,\n      // acyclicer: 'greedy',\n      ranker: 'tight-tree',\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50\n      // isMultiGraph: false\n      // ranksep: 5,\n      // nodesep: 1\n    });\n  else {\n    graph.setGraph({\n      rankdir: 'TB',\n      compound: true,\n      // isCompound: true,\n      // acyclicer: 'greedy',\n      // ranker: 'longest-path'\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50,\n      ranker: 'tight-tree'\n      // ranker: 'network-simplex'\n      // isMultiGraph: false\n    });\n  }\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function() {\n    return {};\n  });\n\n  stateDb.extract(doc);\n  const states = stateDb.getStates();\n  const relations = stateDb.getRelations();\n\n  const keys = Object.keys(states);\n\n  let first = true;\n\n  for (let i = 0; i < keys.length; i++) {\n    const stateDef = states[keys[i]];\n\n    if (parentId) {\n      stateDef.parentId = parentId;\n    }\n\n    let node;\n    if (stateDef.doc) {\n      let sub = diagram\n        .append('g')\n        .attr('id', stateDef.id)\n        .attr('class', 'stateGroup');\n      node = renderDoc(stateDef.doc, sub, stateDef.id, !altBkg);\n\n      if (first) {\n        // first = false;\n        sub = addTitleAndBox(sub, stateDef, altBkg);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height + conf.padding / 2;\n        transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      } else {\n        // sub = addIdAndBox(sub, stateDef);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height;\n        // transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      }\n    } else {\n      node = drawState(diagram, stateDef, graph);\n    }\n\n    if (stateDef.note) {\n      // Draw note note\n      const noteDef = {\n        descriptions: [],\n        id: stateDef.id + '-note',\n        note: stateDef.note,\n        type: 'note'\n      };\n      const note = drawState(diagram, noteDef, graph);\n\n      // graph.setNode(node.id, node);\n      if (stateDef.note.position === 'left of') {\n        graph.setNode(node.id + '-note', note);\n        graph.setNode(node.id, node);\n      } else {\n        graph.setNode(node.id, node);\n        graph.setNode(node.id + '-note', note);\n      }\n      // graph.setNode(node.id);\n      graph.setParent(node.id, node.id + '-group');\n      graph.setParent(node.id + '-note', node.id + '-group');\n    } else {\n      // Add nodes to the graph. The first argument is the node id. The second is\n      // metadata about the node. In this case we're going to add labels to each of\n      // our nodes.\n      graph.setNode(node.id, node);\n    }\n  }\n\n  logger.info('Count=', graph.nodeCount());\n  relations.forEach(function(relation) {\n    graph.setEdge(relation.id1, relation.id2, {\n      relation: relation,\n      width: getLabelWidth(relation.title),\n      height: conf.labelHeight * getRows(relation.title).length,\n      labelpos: 'c'\n    });\n  });\n\n  dagre.layout(graph);\n\n  logger.debug('Graph after layout', graph.nodes());\n  const svgElem = diagram.node();\n\n  graph.nodes().forEach(function(v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      logger.warn('Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n      d3.select('#' + svgElem.id + ' #' + v).attr(\n        'transform',\n        'translate(' +\n          (graph.node(v).x - graph.node(v).width / 2) +\n          ',' +\n          (graph.node(v).y +\n            (transformationLog[v] ? transformationLog[v].y : 0) -\n            graph.node(v).height / 2) +\n          ' )'\n      );\n      d3.select('#' + svgElem.id + ' #' + v).attr(\n        'data-x-shift',\n        graph.node(v).x - graph.node(v).width / 2\n      );\n      const dividers = document.querySelectorAll('#' + svgElem.id + ' #' + v + ' .divider');\n      dividers.forEach(divider => {\n        const parent = divider.parentElement;\n        let pWidth = 0;\n        let pShift = 0;\n        if (parent) {\n          if (parent.parentElement) pWidth = parent.parentElement.getBBox().width;\n          pShift = parseInt(parent.getAttribute('data-x-shift'), 10);\n          if (Number.isNaN(pShift)) {\n            pShift = 0;\n          }\n        }\n        divider.setAttribute('x1', 0 - pShift + 8);\n        divider.setAttribute('x2', pWidth - pShift - 8);\n      });\n    } else {\n      logger.debug('No Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n    }\n  });\n\n  let stateBox = svgElem.getBBox();\n\n  graph.edges().forEach(function(e) {\n    if (typeof e !== 'undefined' && typeof graph.edge(e) !== 'undefined') {\n      logger.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(graph.edge(e)));\n      drawEdge(diagram, graph.edge(e), graph.edge(e).relation);\n    }\n  });\n\n  stateBox = svgElem.getBBox();\n\n  const stateInfo = {\n    id: parentId ? parentId : 'root',\n    label: parentId ? parentId : 'root',\n    width: 0,\n    height: 0\n  };\n\n  stateInfo.width = stateBox.width + 2 * conf.padding;\n  stateInfo.height = stateBox.height + 2 * conf.padding;\n\n  logger.info('Doc rendered', stateInfo, graph);\n  return stateInfo;\n};\n\nexport default {\n  setConf,\n  draw\n};\n","import moment from 'moment-mini';\n\nexport const LEVELS = {\n  debug: 1,\n  info: 2,\n  warn: 3,\n  error: 4,\n  fatal: 5\n};\n\nexport const logger = {\n  debug: () => {},\n  info: () => {},\n  warn: () => {},\n  error: () => {},\n  fatal: () => {}\n};\n\nexport const setLogLevel = function(level) {\n  logger.debug = () => {};\n  logger.info = () => {};\n  logger.warn = () => {};\n  logger.error = () => {};\n  logger.fatal = () => {};\n  if (level <= LEVELS.fatal) {\n    logger.fatal = console.error\n      ? console.error.bind(console, format('FATAL'), 'color: orange')\n      : console.log.bind(console, '\\x1b[35m', format('FATAL'));\n  }\n  if (level <= LEVELS.error) {\n    logger.error = console.error\n      ? console.error.bind(console, format('ERROR'), 'color: orange')\n      : console.log.bind(console, '\\x1b[31m', format('ERROR'));\n  }\n  if (level <= LEVELS.warn) {\n    logger.warn = console.warn\n      ? console.warn.bind(console, format('WARN'), 'color: orange')\n      : console.log.bind(console, `\\x1b[33m`, format('WARN'));\n  }\n  if (level <= LEVELS.info) {\n    logger.info = console.info\n      ? // ? console.info.bind(console, '\\x1b[34m', format('INFO'), 'color: blue')\n        console.info.bind(console, format('INFO'), 'color: lightblue')\n      : console.log.bind(console, '\\x1b[34m', format('INFO'));\n  }\n  if (level <= LEVELS.debug) {\n    logger.debug = console.debug\n      ? console.debug.bind(console, format('DEBUG'), 'color: lightgreen')\n      : console.log.bind(console, '\\x1b[32m', format('DEBUG'));\n  }\n};\n\nconst format = level => {\n  const time = moment().format('ss.SSS');\n  return `%c${time} : ${level} : `;\n};\n","/**\n * This is the api to be used when optionally handling the integration with the web page, instead of using the default integration provided by mermaid.js.\n *\n * The core of this api is the [**render**](https://github.com/knsv/mermaid/blob/master/docs/mermaidAPI.md#render) function which, given a graph\n * definition as text, renders the graph/diagram and returns an svg element for the graph.\n *\n * It is is then up to the user of the API to make use of the svg, either insert it somewhere in the page or do something completely different.\n *\n * In addition to the render function, a number of behavioral configuration options are available.\n *\n * @name mermaidAPI\n */\nimport * as d3 from 'd3';\nimport scope from 'scope-css';\nimport pkg from '../package.json';\nimport { setConfig, getConfig } from './config';\nimport { logger, setLogLevel } from './logger';\nimport utils from './utils';\nimport flowRenderer from './diagrams/flowchart/flowRenderer';\nimport flowParser from './diagrams/flowchart/parser/flow';\nimport flowDb from './diagrams/flowchart/flowDb';\nimport sequenceRenderer from './diagrams/sequence/sequenceRenderer';\nimport sequenceParser from './diagrams/sequence/parser/sequenceDiagram';\nimport sequenceDb from './diagrams/sequence/sequenceDb';\nimport ganttRenderer from './diagrams/gantt/ganttRenderer';\nimport ganttParser from './diagrams/gantt/parser/gantt';\nimport ganttDb from './diagrams/gantt/ganttDb';\nimport classRenderer from './diagrams/class/classRenderer';\nimport classParser from './diagrams/class/parser/classDiagram';\nimport classDb from './diagrams/class/classDb';\nimport stateRenderer from './diagrams/state/stateRenderer';\nimport stateParser from './diagrams/state/parser/stateDiagram';\nimport stateDb from './diagrams/state/stateDb';\nimport gitGraphRenderer from './diagrams/git/gitGraphRenderer';\nimport gitGraphParser from './diagrams/git/parser/gitGraph';\nimport gitGraphAst from './diagrams/git/gitGraphAst';\nimport infoRenderer from './diagrams/info/infoRenderer';\nimport infoParser from './diagrams/info/parser/info';\nimport infoDb from './diagrams/info/infoDb';\nimport pieRenderer from './diagrams/pie/pieRenderer';\nimport pieParser from './diagrams/pie/parser/pie';\nimport pieDb from './diagrams/pie/pieDb';\n\nconst themes = {};\nfor (const themeName of ['default', 'forest', 'dark', 'neutral']) {\n  themes[themeName] = require(`./themes/${themeName}/index.scss`);\n}\n\n/**\n * These are the default options which can be overridden with the initialization call like so:\n * **Example 1:**\n * <pre>\n * mermaid.initialize({\n *   flowchart:{\n *      htmlLabels: false\n *   }\n * });\n * </pre>\n *\n * **Example 2:**\n * <pre>\n *  <script>\n *   var config = {\n *     startOnLoad:true,\n *     flowchart:{\n *       useMaxWidth:true,\n *       htmlLabels:true,\n *       curve:'cardinal',\n *     },\n *\n *     securityLevel:'loose',\n *   };\n *   mermaid.initialize(config);\n * </script>\n * </pre>\n * A summary of all options and their defaults is found [here](https://github.com/knsv/mermaid/blob/master/docs/mermaidAPI.md#mermaidapi-configuration-defaults). A description of each option follows below.\n *\n * @name Configuration\n */\nconst config = {\n  /** theme , the CSS style sheet\n   *\n   * **theme** - Choose one of the built-in themes:\n   *    * default\n   *    * forest\n   *    * dark\n   *    * neutral.\n   * To disable any pre-defined mermaid theme, use \"null\".\n   *\n   * **themeCSS** - Use your own CSS. This overrides **theme**.\n   * <pre>\n   *  \"theme\": \"forest\",\n   *  \"themeCSS\": \".node rect { fill: red; }\"\n   * </pre>\n   */\n  theme: 'default',\n  themeCSS: undefined,\n\n  /**\n   * **fontFamily** The font to be used for the rendered diagrams. Default value is \\\"trebuchet ms\\\", verdana, arial;\n   */\n  fontFamily: '\"trebuchet ms\", verdana, arial;',\n\n  /**\n   * This option decides the amount of logging to be used.\n   *    * debug: 1\n   *    * info: 2\n   *    * warn: 3\n   *    * error: 4\n   *    * fatal: (**default**) 5\n   */\n  logLevel: 5,\n\n  /**\n   * Sets the level of trust to be used on the parsed diagrams.\n   *  * **strict**: (**default**) tags in text are encoded, click functionality is disabeled\n   *  * **loose**: tags in text are allowed, click functionality is enabled\n   */\n  securityLevel: 'strict',\n\n  /**\n   * This options controls whether or mermaid starts when the page loads\n   * **Default value true**.\n   */\n  startOnLoad: true,\n\n  /**\n   * This options controls whether or arrow markers in html code will be absolute paths or\n   * an anchor, #. This matters if you are using base tag settings.\n   * **Default value false**.\n   */\n  arrowMarkerAbsolute: false,\n\n  /**\n   * The object containing configurations specific for flowcharts\n   */\n  flowchart: {\n    /**\n     * Flag for setting whether or not a html tag should be used for rendering labels\n     * on the edges.\n     * **Default value true**.\n     */\n    htmlLabels: true,\n\n    /**\n     * How mermaid renders curves for flowcharts. Possible values are\n     *   * basis\n     *   * linear **default**\n     *   * cardinal\n     */\n    curve: 'linear'\n  },\n\n  /**\n   * The object containing configurations specific for sequence diagrams\n   */\n  sequence: {\n    /**\n     * margin to the right and left of the sequence diagram.\n     * **Default value 50**.\n     */\n    diagramMarginX: 50,\n\n    /**\n     * margin to the over and under the sequence diagram.\n     * **Default value 10**.\n     */\n    diagramMarginY: 10,\n\n    /**\n     * Margin between actors.\n     * **Default value 50**.\n     */\n    actorMargin: 50,\n\n    /**\n     * Width of actor boxes\n     * **Default value 150**.\n     */\n    width: 150,\n\n    /**\n     * Height of actor boxes\n     * **Default value 65**.\n     */\n    height: 65,\n\n    /**\n     * Margin around loop boxes\n     * **Default value 10**.\n     */\n    boxMargin: 10,\n\n    /**\n     * margin around the text in loop/alt/opt boxes\n     * **Default value 5**.\n     */\n    boxTextMargin: 5,\n\n    /**\n     * margin around notes.\n     * **Default value 10**.\n     */\n    noteMargin: 10,\n\n    /**\n     * Space between messages.\n     * **Default value 35**.\n     */\n    messageMargin: 35,\n\n    /**\n     * mirror actors under diagram.\n     * **Default value true**.\n     */\n    mirrorActors: true,\n\n    /**\n     * Depending on css styling this might need adjustment.\n     * Prolongs the edge of the diagram downwards.\n     * **Default value 1**.\n     */\n    bottomMarginAdj: 1,\n\n    /**\n     * when this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     * **Default value true**.\n     */\n    useMaxWidth: true,\n\n    /**\n     * This will display arrows that start and begin at the same node as right angles, rather than a curve\n     * **Default value false**.\n     */\n    rightAngles: false,\n    /**\n     * This will show the node numbers\n     * **Default value false**.\n     */\n    showSequenceNumbers: false\n  },\n\n  /**\n   * The object containing configurations specific for gantt diagrams*\n   */\n  gantt: {\n    /**\n     * Margin top for the text over the gantt diagram\n     * **Default value 25**.\n     */\n    titleTopMargin: 25,\n\n    /**\n     * The height of the bars in the graph\n     * **Default value 20**.\n     */\n    barHeight: 20,\n\n    /**\n     * The margin between the different activities in the gantt diagram.\n     * **Default value 4**.\n     */\n    barGap: 4,\n\n    /**\n     *  Margin between title and gantt diagram and between axis and gantt diagram.\n     * **Default value 50**.\n     */\n    topPadding: 50,\n\n    /**\n     *  The space allocated for the section name to the left of the activities.\n     * **Default value 75**.\n     */\n    leftPadding: 75,\n\n    /**\n     *  Vertical starting position of the grid lines.\n     * **Default value 35**.\n     */\n    gridLineStartPadding: 35,\n\n    /**\n     *  Font size ...\n     * **Default value 11**.\n     */\n    fontSize: 11,\n\n    /**\n     * font family ...\n     * **Default value '\"Open-Sans\", \"sans-serif\"'**.\n     */\n    fontFamily: '\"Open-Sans\", \"sans-serif\"',\n\n    /**\n     * The number of alternating section styles.\n     * **Default value 4**.\n     */\n    numberSectionStyles: 4,\n\n    /**\n     * Datetime format of the axis. This might need adjustment to match your locale and preferences\n     * **Default value '%Y-%m-%d'**.\n     */\n    axisFormat: '%Y-%m-%d'\n  },\n  class: {},\n  git: {},\n  state: {\n    dividerMargin: 10,\n    sizeUnit: 5,\n    padding: 8,\n    textHeight: 10,\n    titleShift: -15,\n    noteMargin: 10,\n    forkWidth: 70,\n    forkHeight: 7,\n    // Used\n    miniPadding: 2,\n    // Font size factor, this is used to guess the width of the edges labels before rendering by dagre\n    // layout. This might need updating if/when switching font\n    fontSizeFactor: 5.02,\n    fontSize: 24,\n    labelHeight: 16,\n    edgeLengthFactor: '20',\n    compositTitleSize: 35,\n    radius: 5\n  }\n};\n\nsetLogLevel(config.logLevel);\nsetConfig(config);\n\nfunction parse(text) {\n  const graphType = utils.detectType(text);\n  let parser;\n\n  logger.debug('Type ' + graphType);\n  switch (graphType) {\n    case 'git':\n      parser = gitGraphParser;\n      parser.parser.yy = gitGraphAst;\n      break;\n    case 'flowchart':\n      flowDb.clear();\n      parser = flowParser;\n      parser.parser.yy = flowDb;\n      break;\n    case 'sequence':\n      parser = sequenceParser;\n      parser.parser.yy = sequenceDb;\n      break;\n    case 'gantt':\n      parser = ganttParser;\n      parser.parser.yy = ganttDb;\n      break;\n    case 'class':\n      parser = classParser;\n      parser.parser.yy = classDb;\n      break;\n    case 'state':\n      parser = stateParser;\n      parser.parser.yy = stateDb;\n      break;\n    case 'info':\n      logger.debug('info info info');\n      parser = infoParser;\n      parser.parser.yy = infoDb;\n      break;\n    case 'pie':\n      logger.debug('pie');\n      parser = pieParser;\n      parser.parser.yy = pieDb;\n      break;\n  }\n\n  parser.parser.yy.parseError = (str, hash) => {\n    const error = { str, hash };\n    throw error;\n  };\n\n  parser.parse(text);\n}\n\nexport const encodeEntities = function(text) {\n  let txt = text;\n\n  txt = txt.replace(/style.*:\\S*#.*;/g, function(s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n  txt = txt.replace(/classDef.*:\\S*#.*;/g, function(s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n\n  txt = txt.replace(/#\\w+;/g, function(s) {\n    const innerTxt = s.substring(1, s.length - 1);\n\n    const isInt = /^\\+?\\d+$/.test(innerTxt);\n    if (isInt) {\n      return 'ﬂ°°' + innerTxt + '¶ß';\n    } else {\n      return 'ﬂ°' + innerTxt + '¶ß';\n    }\n  });\n\n  return txt;\n};\n\nexport const decodeEntities = function(text) {\n  let txt = text;\n\n  txt = txt.replace(/ﬂ°°/g, function() {\n    return '&#';\n  });\n  txt = txt.replace(/ﬂ°/g, function() {\n    return '&';\n  });\n  txt = txt.replace(/¶ß/g, function() {\n    return ';';\n  });\n\n  return txt;\n};\n/**\n * Function that renders an svg with a graph from a chart definition. Usage example below.\n *\n * ```js\n * mermaidAPI.initialize({\n *      startOnLoad:true\n *  });\n *  $(function(){\n *      const graphDefinition = 'graph TB\\na-->b';\n *      const cb = function(svgGraph){\n *          console.log(svgGraph);\n *      };\n *      mermaidAPI.render('id1',graphDefinition,cb);\n *  });\n *```\n * @param id the id of the element to be rendered\n * @param txt the graph definition\n * @param cb callback which is called after rendering is finished with the svg code as inparam.\n * @param container selector to element in which a div with the graph temporarily will be inserted. In one is\n * provided a hidden div will be inserted in the body of the page instead. The element will be removed when rendering is\n * completed.\n */\nconst render = function(id, txt, cb, container) {\n  if (typeof container !== 'undefined') {\n    container.innerHTML = '';\n\n    d3.select(container)\n      .append('div')\n      .attr('id', 'd' + id)\n      .attr('style', 'font-family: ' + config.fontFamily)\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .append('g');\n  } else {\n    const existingSvg = document.getElementById(id);\n    if (existingSvg) {\n      existingSvg.remove();\n    }\n    const element = document.querySelector('#' + 'd' + id);\n    if (element) {\n      element.innerHTML = '';\n    }\n\n    d3.select('body')\n      .append('div')\n      .attr('id', 'd' + id)\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .append('g');\n  }\n\n  window.txt = txt;\n  txt = encodeEntities(txt);\n\n  const element = d3.select('#d' + id).node();\n  const graphType = utils.detectType(txt);\n\n  // insert inline style into svg\n  const svg = element.firstChild;\n  const firstChild = svg.firstChild;\n\n  // pre-defined theme\n  let style = themes[config.theme];\n  if (style === undefined) {\n    style = '';\n  }\n\n  // user provided theme CSS\n  if (config.themeCSS !== undefined) {\n    style += `\\n${config.themeCSS}`;\n  }\n  // user provided theme CSS\n  if (config.fontFamily !== undefined) {\n    style += `\\n:root { --mermaid-font-family: ${config.fontFamily}}`;\n  }\n  // user provided theme CSS\n  if (config.altFontFamily !== undefined) {\n    style += `\\n:root { --mermaid-alt-font-family: ${config.altFontFamily}}`;\n  }\n\n  // classDef\n  if (graphType === 'flowchart') {\n    const classes = flowRenderer.getClasses(txt);\n    for (const className in classes) {\n      style += `\\n.${className} > * { ${classes[className].styles.join(\n        ' !important; '\n      )} !important; }`;\n    }\n  }\n\n  const style1 = document.createElement('style');\n  style1.innerHTML = scope(style, `#${id}`);\n  svg.insertBefore(style1, firstChild);\n\n  const style2 = document.createElement('style');\n  const cs = window.getComputedStyle(svg);\n  style2.innerHTML = `#${id} {\n    color: ${cs.color};\n    font: ${cs.font};\n  }`;\n  svg.insertBefore(style2, firstChild);\n\n  switch (graphType) {\n    case 'git':\n      config.flowchart.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      gitGraphRenderer.setConf(config.git);\n      gitGraphRenderer.draw(txt, id, false);\n      break;\n    case 'flowchart':\n      config.flowchart.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      flowRenderer.setConf(config.flowchart);\n      flowRenderer.draw(txt, id, false);\n      break;\n    case 'sequence':\n      config.sequence.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      if (config.sequenceDiagram) {\n        // backwards compatibility\n        sequenceRenderer.setConf(Object.assign(config.sequence, config.sequenceDiagram));\n        console.error(\n          '`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.'\n        );\n      } else {\n        sequenceRenderer.setConf(config.sequence);\n      }\n      sequenceRenderer.draw(txt, id);\n      break;\n    case 'gantt':\n      config.gantt.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      ganttRenderer.setConf(config.gantt);\n      ganttRenderer.draw(txt, id);\n      break;\n    case 'class':\n      config.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      classRenderer.setConf(config.class);\n      classRenderer.draw(txt, id);\n      break;\n    case 'state':\n      // config.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      stateRenderer.setConf(config.state);\n      stateRenderer.draw(txt, id);\n      break;\n    case 'info':\n      config.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      infoRenderer.setConf(config.class);\n      infoRenderer.draw(txt, id, pkg.version);\n      break;\n    case 'pie':\n      config.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n      pieRenderer.setConf(config.class);\n      pieRenderer.draw(txt, id, pkg.version);\n      break;\n  }\n\n  d3.select(`[id=\"${id}\"]`)\n    .selectAll('foreignobject > *')\n    .attr('xmlns', 'http://www.w3.org/1999/xhtml');\n\n  // if (config.arrowMarkerAbsolute) {\n  //   url =\n  //     window.location.protocol +\n  //     '//' +\n  //     window.location.host +\n  //     window.location.pathname +\n  //     window.location.search;\n  //   url = url.replace(/\\(/g, '\\\\(');\n  //   url = url.replace(/\\)/g, '\\\\)');\n  // }\n\n  // Fix for when the base tag is used\n  let svgCode = d3.select('#d' + id).node().innerHTML;\n\n  if (!config.arrowMarkerAbsolute || config.arrowMarkerAbsolute === 'false') {\n    svgCode = svgCode.replace(/marker-end=\"url\\(.*?#/g, 'marker-end=\"url(#', 'g');\n  }\n\n  svgCode = decodeEntities(svgCode);\n\n  if (typeof cb !== 'undefined') {\n    switch (graphType) {\n      case 'flowchart':\n        cb(svgCode, flowDb.bindFunctions);\n        break;\n      case 'gantt':\n        cb(svgCode, ganttDb.bindFunctions);\n        break;\n      case 'class':\n        cb(svgCode, classDb.bindFunctions);\n        break;\n      default:\n        cb(svgCode);\n    }\n  } else {\n    logger.debug('CB = undefined!');\n  }\n\n  const node = d3.select('#d' + id).node();\n  if (node !== null && typeof node.remove === 'function') {\n    d3.select('#d' + id)\n      .node()\n      .remove();\n  }\n\n  return svgCode;\n};\n\nconst setConf = function(cnf) {\n  // Top level initially mermaid, gflow, sequenceDiagram and gantt\n  const lvl1Keys = Object.keys(cnf);\n  for (let i = 0; i < lvl1Keys.length; i++) {\n    if (typeof cnf[lvl1Keys[i]] === 'object' && cnf[lvl1Keys[i]] != null) {\n      const lvl2Keys = Object.keys(cnf[lvl1Keys[i]]);\n\n      for (let j = 0; j < lvl2Keys.length; j++) {\n        logger.debug('Setting conf ', lvl1Keys[i], '-', lvl2Keys[j]);\n        if (typeof config[lvl1Keys[i]] === 'undefined') {\n          config[lvl1Keys[i]] = {};\n        }\n        logger.debug(\n          'Setting config: ' +\n            lvl1Keys[i] +\n            ' ' +\n            lvl2Keys[j] +\n            ' to ' +\n            cnf[lvl1Keys[i]][lvl2Keys[j]]\n        );\n        config[lvl1Keys[i]][lvl2Keys[j]] = cnf[lvl1Keys[i]][lvl2Keys[j]];\n      }\n    } else {\n      config[lvl1Keys[i]] = cnf[lvl1Keys[i]];\n    }\n  }\n};\n\nfunction initialize(options) {\n  logger.debug('Initializing mermaidAPI ', pkg.version);\n\n  // Update default config with options supplied at initialization\n  if (typeof options === 'object') {\n    setConf(options);\n  }\n  setConfig(config);\n  setLogLevel(config.logLevel);\n}\n\n// function getConfig () {\n//   console.warn('get config')\n//   return config\n// }\n\nconst mermaidAPI = {\n  render,\n  parse,\n  initialize,\n  getConfig\n};\n\nexport default mermaidAPI;\n/**\n * ## mermaidAPI configuration defaults\n * <pre>\n *\n * &lt;script>\n *   var config = {\n *     theme:'default',\n *     logLevel:'fatal',\n *     securityLevel:'strict',\n *     startOnLoad:true,\n *     arrowMarkerAbsolute:false,\n *\n *     flowchart:{\n *       htmlLabels:true,\n *       curve:'linear',\n *     },\n *     sequence:{\n *       diagramMarginX:50,\n *       diagramMarginY:10,\n *       actorMargin:50,\n *       width:150,\n *       height:65,\n *       boxMargin:10,\n *       boxTextMargin:5,\n *       noteMargin:10,\n *       messageMargin:35,\n *       mirrorActors:true,\n *       bottomMarginAdj:1,\n *       useMaxWidth:true,\n *       rightAngles:false,\n *       showSequenceNumbers:false,\n *     },\n *     gantt:{\n *       titleTopMargin:25,\n *       barHeight:20,\n *       barGap:4,\n *       topPadding:50,\n *       leftPadding:75,\n *       gridLineStartPadding:35,\n *       fontSize:11,\n *       fontFamily:'\"Open-Sans\", \"sans-serif\"',\n *       numberSectionStyles:4,\n *       axisFormat:'%Y-%m-%d',\n *     }\n *   };\n *   mermaid.initialize(config);\n * &lt;/script>\n *</pre>\n */\n","var map = {\n\t\"./dark/index.scss\": \"./src/themes/dark/index.scss\",\n\t\"./default/index.scss\": \"./src/themes/default/index.scss\",\n\t\"./forest/index.scss\": \"./src/themes/forest/index.scss\",\n\t\"./neutral/index.scss\": \"./src/themes/neutral/index.scss\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/themes sync recursive ^\\\\.\\\\/.*\\\\/index\\\\.scss$\";","// css-to-string-loader: transforms styles from css-loader to a string output\n\n// Get the styles\nvar styles = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif (typeof styles === 'string') {\n  // Return an existing string\n  module.exports = styles;\n} else {\n  // Call the custom toString method from css-loader module\n  module.exports = styles.toString();\n}","// css-to-string-loader: transforms styles from css-loader to a string output\n\n// Get the styles\nvar styles = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif (typeof styles === 'string') {\n  // Return an existing string\n  module.exports = styles;\n} else {\n  // Call the custom toString method from css-loader module\n  module.exports = styles.toString();\n}","// css-to-string-loader: transforms styles from css-loader to a string output\n\n// Get the styles\nvar styles = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif (typeof styles === 'string') {\n  // Return an existing string\n  module.exports = styles;\n} else {\n  // Call the custom toString method from css-loader module\n  module.exports = styles.toString();\n}","// css-to-string-loader: transforms styles from css-loader to a string output\n\n// Get the styles\nvar styles = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif (typeof styles === 'string') {\n  // Return an existing string\n  module.exports = styles;\n} else {\n  // Call the custom toString method from css-loader module\n  module.exports = styles.toString();\n}","import * as d3 from 'd3';\nimport { logger } from './logger';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * @function detectType\n * Detects the type of the graph text.\n * ```mermaid\n * graph LR\n *  a-->b\n *  b-->c\n *  c-->d\n *  d-->e\n *  e-->f\n *  f-->g\n *  g-->h\n * ```\n *\n * @param {string} text The text defining the graph\n * @returns {string} A graph definition key\n */\nexport const detectType = function(text) {\n  text = text.replace(/^\\s*%%.*\\n/g, '\\n');\n  logger.debug('Detecting diagram type based on the text ' + text);\n  if (text.match(/^\\s*sequenceDiagram/)) {\n    return 'sequence';\n  }\n\n  if (text.match(/^\\s*gantt/)) {\n    return 'gantt';\n  }\n\n  if (text.match(/^\\s*classDiagram/)) {\n    return 'class';\n  }\n\n  if (text.match(/^\\s*stateDiagram/)) {\n    return 'state';\n  }\n\n  if (text.match(/^\\s*gitGraph/)) {\n    return 'git';\n  }\n\n  if (text.match(/^\\s*info/)) {\n    return 'info';\n  }\n  if (text.match(/^\\s*pie/)) {\n    return 'pie';\n  }\n\n  return 'flowchart';\n};\n\n/**\n * @function isSubstringInArray\n * Detects whether a substring in present in a given array\n * @param {string} str The substring to detect\n * @param {array} arr The array to search\n * @returns {number} the array index containing the substring or -1 if not present\n **/\nexport const isSubstringInArray = function(str, arr) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i].match(str)) return i;\n  }\n  return -1;\n};\n\nexport const interpolateToCurve = (interpolate, defaultCurve) => {\n  if (!interpolate) {\n    return defaultCurve;\n  }\n  const curveName = `curve${interpolate.charAt(0).toUpperCase() + interpolate.slice(1)}`;\n  return d3[curveName] || defaultCurve;\n};\n\nexport const sanitize = (text, config) => {\n  let txt = text;\n  let htmlLabels = true;\n  if (\n    config.flowchart &&\n    (config.flowchart.htmlLabels === false || config.flowchart.htmlLabels === 'false')\n  )\n    htmlLabels = false;\n\n  if (config.securityLevel !== 'loose' && htmlLabels) { // eslint-disable-line\n    txt = txt.replace(/<br>/g, '#br#');\n    txt = txt.replace(/<br\\S*?\\/>/g, '#br#');\n    txt = txt.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    txt = txt.replace(/=/g, '&equals;');\n    txt = txt.replace(/#br#/g, '<br/>');\n  }\n\n  return txt;\n};\n\nexport const formatUrl = (linkStr, config) => {\n  let url = linkStr.trim();\n\n  if (url) {\n    if (config.securityLevel !== 'loose') {\n      return sanitizeUrl(url);\n    } else {\n      if (!/^(https?:)?\\/\\//i.test(url)) {\n        url = 'http://' + url;\n      }\n    }\n\n    return url;\n  }\n};\n\nconst distance = (p1, p2) =>\n  p1 && p2 ? Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)) : 0;\n\nconst traverseEdge = points => {\n  let prevPoint;\n  let totalDistance = 0;\n\n  points.forEach(point => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse half of total distance along points\n  const distanceToLabel = totalDistance / 2;\n\n  let remainingDistance = distanceToLabel;\n  let center;\n  prevPoint = undefined;\n  points.forEach(point => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  return center;\n};\n\nconst calcLabelPosition = points => {\n  const p = traverseEdge(points);\n  return p;\n};\n\nconst calcCardinalityPosition = (isRelationTypePresent, points, initialPosition) => {\n  let prevPoint;\n  let totalDistance = 0; // eslint-disable-line\n  if (points[0] !== initialPosition) {\n    points = points.reverse();\n  }\n  points.forEach(point => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse only 25 total distance along points to find cardinality point\n  const distanceToCardinalityPoint = 25;\n\n  let remainingDistance = distanceToCardinalityPoint;\n  let center;\n  prevPoint = undefined;\n  points.forEach(point => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  // if relation is present (Arrows will be added), change cardinality point off-set distance (d)\n  let d = isRelationTypePresent ? 10 : 5;\n  //Calculate Angle for x and y axis\n  let angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  let cardinalityPosition = { x: 0, y: 0 };\n  //Calculation cardinality position using angle, center point on the line/curve but pendicular and with offset-distance\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  return cardinalityPosition;\n};\n\nexport default {\n  detectType,\n  isSubstringInArray,\n  interpolateToCurve,\n  calcLabelPosition,\n  calcCardinalityPosition,\n  sanitize,\n  formatUrl\n};\n","module.exports = require(\"@braintree/sanitize-url\");","module.exports = require(\"crypto-random-string\");","module.exports = require(\"d3\");","module.exports = require(\"dagre\");","module.exports = require(\"dagre-d3\");","module.exports = require(\"dagre-d3/lib/label/add-html-label.js\");","module.exports = require(\"graphlib\");","module.exports = require(\"lodash\");","module.exports = require(\"moment-mini\");","module.exports = require(\"scope-css\");"],"sourceRoot":""}